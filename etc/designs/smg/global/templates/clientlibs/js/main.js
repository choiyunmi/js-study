/*!
 * src : common/js/src/vendor/jquery/jquery-1.11.3.min.smg.js
 */

/**
 * samsung.com jQuery v1.11.3 - $.noConflict();
 */
//if (window.$ && 'function' === typeof window.$ && window.$().jquery !== '1.11.3') {
//	window._isExist = true;
//}


/**
* jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license
*/
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){
return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});

/**
 * samsung.com jQuery v1.11.3 - $.noConflict();
 */
//if (window._isExist) {
//	jQuery.noConflict();
//	window._isExist = null;
//}
window.Granite = window.Granite || {};

(function(Granite, $) {
    Granite.Util = (function() {

        var self = {
            patchText: function(text, snippets) {
                if (snippets) {
                    if (!$.isArray(snippets)) {
                        text = text.replace("{0}", snippets);
                    } else {
                        for (var i = 0; i < snippets.length; i++) {
                            text = text.replace(("{" + i + "}"), snippets[i]);
                        }
                    }
                }
                return text;
            }

        };

        return self;

    }());

}(Granite, jQuery));


(function (Granite, util, $) {
    Granite.HTTP = (function() {
        var contextPath = null,
            SCRIPT_URL_REGEXP = /^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/,
            ENCODE_PATH_REGEXP = /[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,
            loginRedirected = false,
            self = {};
        self.getSchemeAndAuthority = function (url) {
            var end;

            try {
                if (url.indexOf("://") == -1) return ""; // e.g. url was /en.html
                end = url.indexOf("/", url.indexOf("://") + 3);

                return (end == -1) ?
                    url :   // e.g. url was http://www.day.com
                    url.substring(0, end);  // e.g. url was http://www.day.com/en.html
            }
            catch (e) {
                return "";
            }
        };
        self.getContextPath = function () {
            return contextPath;
        };
        self.detectContextPath = function () {
            try {
                if (window.CQURLInfo) {
                    contextPath = CQURLInfo.contextPath || "";
                } else {
                    var scripts = document.getElementsByTagName("script");
                    for (var i = 0; i < scripts.length; i++) {
                        // in IE the first script is not the expected widgets js: loop
                        // until it is found
                        var result = SCRIPT_URL_REGEXP.exec(scripts[i].src);
                        if (result) {
                            contextPath = result[1];
                            return;
                        }
                    }
                    contextPath = "";
                }
            } catch (e) {
            }
        };
        self.externalize = function (url) {
            try {
                if (url.indexOf("/") == 0 && contextPath &&
                    url.indexOf(contextPath + "/") != 0) {
                    url = contextPath + url;
                }
            }
            catch (e) {
            }
            return url;
        };
        self.internalize = function (url, doc) {
            if (url.charAt(0) == '/') {
                if (contextPath === url) {
                    return '';
                }
                else if (contextPath && url.indexOf(contextPath + "/") == 0) {
                    return url.substring(contextPath.length);
                } else {
                    return url;
                }
            }

            if (!doc) doc = document;
            var docHost = self.getSchemeAndAuthority(doc.location.href);
            var urlHost = self.getSchemeAndAuthority(url);
            if (docHost == urlHost) {
                return url.substring(urlHost.length + (contextPath ? contextPath.length : 0));
            }
            else {
                return url;
            }
        };
        self.getPath = function (url) {

            if (!url) {
                if (window.CQURLInfo && CQURLInfo.requestPath) {
                    return CQURLInfo.requestPath;
                } else {
                    url = window.location.pathname;
                }
            } else {
                url = self.removeParameters(url);
                url = self.removeAnchor(url);
            }

            url = self.internalize(url);
            var i = url.indexOf(".", url.lastIndexOf("/"));
            if (i != -1) {
                url = url.substring(0, i);
            }
            return url;
        };
        self.removeAnchor = function (url) {
            if (url.indexOf("#") != -1) {
                return url.substring(0, url.indexOf("#"));
            }
            return url;
        };
        self.removeParameters = function (url) {
            if (url.indexOf("?") != -1) {
                return url.substring(0, url.indexOf("?"));
            }
            return url;
        };
        self.encodePathOfURI = function (url) {
            var parts, delim;
            if (url.indexOf("?") != -1) {
                parts = url.split("?");
                delim = "?";
            }
            else if (url.indexOf("#") != -1) {
                parts = url.split("#");
                delim = "#";
            }
            else {
                parts = [url];
            }
            if (ENCODE_PATH_REGEXP.test(parts[0])) {
                parts[0] = self.encodePath(parts[0]);
            }
            return parts.join(delim);
        };
       self.encodePath = function (path) {
            path = encodeURI(path).replace(/%5B/g, '[').replace(/%5D/g, ']');
            path = path.replace(/\+/g, "%2B");
            path = path.replace(/\?/g, "%3F");
            path = path.replace(/;/g, "%3B");
            path = path.replace(/#/g, "%23");
            path = path.replace(/=/g, "%3D");
            path = path.replace(/\$/g, "%24");
            path = path.replace(/,/g, "%2C");
            path = path.replace(/'/g, "%27");
            path = path.replace(/"/g, "%22");
            return path;
       };
        self.handleLoginRedirect = function () {
            if (!loginRedirected) {
                loginRedirected = true;
                alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));
                var l = util.getTopWindow().document.location;
                l.href = self.externalize(sling.LOGIN_URL) +
                    "?resource=" + encodeURIComponent(l.pathname + l.search + l.hash);
            }
        };
        self.getXhrHook = function (url, method, params) {
            method = method || "GET";
            if (window.G_XHR_HOOK && $.isFunction(G_XHR_HOOK)) {
                var p = {
                    "url": url,
                    "method": method
                };
                if (params) {
                    p["params"] = params;
                }
                return G_XHR_HOOK(p);
            }
            return null;
        };

        self.eval = function(response) {
            if (typeof response != "object") {
                response = $.ajax({
                    url: response,
                    type: 'get',
                    async: false
                });
            }
            try {
                return eval("(" + (response.body ? response.body :
                    response.responseText) + ")");
            } catch (e) {
            }
            return null;
        };

        return self;
    }());

}(Granite, Granite.Util, jQuery));

(function(document, Granite, util, http, $) {

    Granite.I18n = (function() {

         var dicts = {},

            urlPrefix = "/libs/cq/i18n/dict.",

            urlSuffix = ".json",

            manualLocale = undefined,

            pseudoTranslations = false,

            languages = null,

            self = {},

            manualDictionary = false,

            getDictionaryUrl = function(locale) {
                if (manualDictionary) {
                    return urlPrefix + locale + urlSuffix;
                }

                var dictionarySrc = $("html").attr("data-i18n-dictionary-src");

                if (!dictionarySrc) {
                    return urlPrefix + locale + urlSuffix;
                }

                return dictionarySrc.replace("{locale}", encodeURIComponent(locale)).replace("{+locale}", locale);
            };

        self.LOCALE_DEFAULT = "en";

        self.PSEUDO_LANGUAGE = "zz";

        self.PSEUDO_PATTERN_KEY = "_pseudoPattern_";

        self.init = function(config) {
            config = config || {};

            this.setLocale(config.locale);
            this.setUrlPrefix(config.urlPrefix);
            this.setUrlSuffix(config.urlSuffix);
        };

        self.setLocale = function(locale) {
            if (!locale) return;

            manualLocale = locale;
        };

        self.getLocale = function() {
            if ($.isFunction(manualLocale)) {
                manualLocale = manualLocale();
            }

            return manualLocale || document.documentElement.lang || self.LOCALE_DEFAULT;
        };

        self.setUrlPrefix = function(prefix) {
            if (!prefix) return;

            urlPrefix = prefix;
            manualDictionary = true;
        };

        self.setUrlSuffix = function(suffix) {
            if (!suffix) return;

            urlSuffix = suffix;
            manualDictionary = true;
        };

        self.getDictionary = function(locale) {
            locale = locale || self.getLocale();

            if (!dicts[locale]) {
                pseudoTranslations = (locale.indexOf(self.PSEUDO_LANGUAGE) == 0);

                try {
                    var response = $.ajax(getDictionaryUrl(locale), {
                        async: false,
                        dataType: "json"
                    });
                    dicts[locale] = $.parseJSON(response.responseText);
                } catch (e) {}
                if (!dicts[locale]) {
                    dicts[locale] = {};
                }
            }
            return dicts[locale];
        };

        self.get = function(text, snippets, note) {
            var dict, newText, lookupText;

            dict = self.getDictionary();

            lookupText = pseudoTranslations ? self.PSEUDO_PATTERN_KEY :
                note ? text + " ((" + note + "))" :
                text;
            if (dict) {
                newText = dict[lookupText];
            }
            if (!newText) {
                newText = text;
            }
            if (pseudoTranslations) {
                newText = newText.replace("{string}", text).replace("{comment}", note ? note : "");
            }
            return util.patchText(newText, snippets);
        };

        self.getVar = function(text, note) {
            if (!text) {
                return null;
            }
            return self.get(text, null, note);
        };

        self.getLanguages = function() {
            if (!languages) {
                try {
                    var json = http.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");
                    $.each(json, function(name, lang) {
                        lang.title = self.getVar(lang.language);
                        if (lang.title && lang.country && lang.country != "*") {
                            lang.title += " (" + self.getVar(lang.country) + ")";
                        }
                    });
                    languages = json;
                } catch (e) {
                    languages = {};
                }
            }
            return languages;
        };

        self.parseLocale = function(langCode) {
            if (!langCode) {
                return null;
            }
            var pos = langCode.indexOf("_");
            if (pos < 0) {
                pos = langCode.indexOf("-");
            }

            var language, country;
            if (pos < 0) {
                language = langCode;
                country = null;
            } else {
                language = langCode.substring(0, pos);
                country = langCode.substring(pos + 1);
            }
            return {
                code: langCode,
                language: language,
                country: country
            };
        };

        return self;

    }());

}(document, Granite, Granite.Util, Granite.HTTP, jQuery));

Granite.HTTP.detectContextPath();

/*
Custom slick.smg.js
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.5.9
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

@modify
    -. role="toolbar" remove
            COMMENT : modify - role="toolbar" remove

            ORG
                .find('button').attr('role', 'button').end()
                .closest('div').attr('role', 'toolbar');

            CUSTOM
                .find('button').attr('role', 'button');

    -. draggable bug fix
            COMMENT : modify - draggable bug fix

            ORG
                if( !initial && triggerBreakpoint !== false ) {
                    _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
                }

            CUSTOM
                if( !initial && triggerBreakpoint !== false ) {
                    _.touchObject.curX = undefined;
                    _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
                }

 */
/* global window, document, define, jQuery, setInterval, clearInterval */
(function(factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports !== 'undefined') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery);
    }

}(function($) {
    'use strict';
    var Slick = window.Slick || {};
    window.smg = window.smg || {};
    window.smg.aem = window.smg.aem || {};
    Granite.I18n.setLocale($('#siteCode').val());
    window.smg.aem.globaltext = {
            _prev : Granite.I18n.get("Previous", [],$('#siteCode').val()),
            _next : Granite.I18n.get("Next", [],$('#siteCode').val())
    };
    // i18n GlobalText
    var GLOBAL_TEXT = window.smg.aem.globaltext;

    Slick = (function() {

        var instanceUid = 0;

        function Slick(element, settings) {
            
            var _ = this, dataSettings;

            _.defaults = {
                accessibility: true,
                adaptiveHeight: false,
                appendArrows: $(element),
                appendDots: $(element),
                arrows: true,
                asNavFor: null,
                prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="'+ GLOBAL_TEXT._prev +'" tabindex="0" role="button">'+ GLOBAL_TEXT._prev +'</button>',
                nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="'+ GLOBAL_TEXT._next +'" tabindex="0" role="button">'+ GLOBAL_TEXT._next +'</button>',
                autoplay: false,
                autoplaySpeed: 3000,
                centerMode: false,
                centerPadding: '50px',
                cssEase: 'ease',
                customPaging: function(slider, i) {
                    return $('<button type="button" data-role="none" role="button" tabindex="0" />').text('slide' + (i + 1));
                },
                dots: false,
                dotsClass: 'slick-dots',
                elements: 'div',
                draggable: true,
                easing: 'linear',
                edgeFriction: 0.35,
                fade: false,
                focusOnSelect: false,
                infinite: true,
                initialSlide: 0,
                lazyLoad: 'ondemand',
                mobileFirst: false,
                pauseOnHover: true,
                pauseOnFocus: true,
                pauseOnDotsHover: false,
                respondTo: 'window',
                responsive: null,
                rows: 1,
                rtl: false,
                slide: '',
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 500,
                swipe: true,
                swipeToSlide: false,
                touchMove: true,
                touchThreshold: 5,
                useCSS: true,
                useTransform: true,
                variableWidth: false,
                vertical: false,
                verticalSwiping: false,
                waitForAnimate: true,
                zIndex: 1000
            };

            _.initials = {
                animating: false,
                dragging: false,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: false,
                slideOffset: 0,
                swipeLeft: null,
                $list: null,
                touchObject: {},
                transformsEnabled: false,
                unslicked: false
            };

            $.extend(_, _.initials);

            _.activeBreakpoint = null;
            _.animType = null;
            _.animProp = null;
            _.breakpoints = [];
            _.breakpointSettings = [];
            _.cssTransitions = false;
            _.focussed = false;
            _.interrupted = false;
            _.hidden = 'hidden';
            _.paused = true;
            _.positionProp = null;
            _.respondTo = null;
            _.rowCount = 1;
            _.shouldClick = true;
            _.$slider = $(element);
            _.$slidesCache = null;
            _.transformType = null;
            _.transitionType = null;
            _.visibilityChange = 'visibilitychange';
            _.windowWidth = 0;
            _.windowTimer = null;

            dataSettings = $(element).data('slick') || {};

            _.options = $.extend({}, _.defaults, settings, dataSettings);

            _.currentSlide = _.options.initialSlide;

            _.originalSettings = _.options;

            if (typeof document.mozHidden !== 'undefined') {
                _.hidden = 'mozHidden';
                _.visibilityChange = 'mozvisibilitychange';
            } else if (typeof document.webkitHidden !== 'undefined') {
                _.hidden = 'webkitHidden';
                _.visibilityChange = 'webkitvisibilitychange';
            }

            _.autoPlay = $.proxy(_.autoPlay, _);
            _.autoPlayClear = $.proxy(_.autoPlayClear, _);
            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);
            _.changeSlide = $.proxy(_.changeSlide, _);
            _.clickHandler = $.proxy(_.clickHandler, _);
            _.selectHandler = $.proxy(_.selectHandler, _);
            _.setPosition = $.proxy(_.setPosition, _);
            _.swipeHandler = $.proxy(_.swipeHandler, _);
            _.dragHandler = $.proxy(_.dragHandler, _);
            _.keyHandler = $.proxy(_.keyHandler, _);

            _.instanceUid = instanceUid++;

            // A simple way to check for HTML strings
            // Strict HTML recognition (must start with <)
            // Extracted from jQuery v1.11 source
            _.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/;


            _.registerBreakpoints();
            _.init(true);

        }

        return Slick;

    }());

    Slick.prototype.activateADA = function() {
        var _ = this;

        _.$slideTrack.find('.slick-active').attr({
            'aria-hidden': 'false'
        }).find('a, input, button, select').attr({
            'tabindex': '0'
        });

    };

    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            addBefore = index;
            index = null;
        } else if (index < 0 || (index >= _.slideCount)) {
            return false;
        }

        _.unload();

        if (typeof(index) === 'number') {
            if (index === 0 && _.$slides.length === 0) {
                $(markup).appendTo(_.$slideTrack);
            } else if (addBefore) {
                $(markup).insertBefore(_.$slides.eq(index));
            } else {
                $(markup).insertAfter(_.$slides.eq(index));
            }
        } else {
            if (addBefore === true) {
                $(markup).prependTo(_.$slideTrack);
            } else {
                $(markup).appendTo(_.$slideTrack);
            }
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slides.each(function(index, element) {
            $(element).attr('data-slick-index', index);
        });

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.animateHeight = function() {
        var _ = this;
        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.animate({
                height: targetHeight
            }, _.options.speed);
        }
    };

    Slick.prototype.animateSlide = function(targetLeft, callback) {

        var animProps = {},
            _ = this;

        _.animateHeight();

        if (_.options.rtl === true && _.options.vertical === false) {
            targetLeft = -targetLeft;
        }
        if (_.transformsEnabled === false) {
            if (_.options.vertical === false) {
                _.$slideTrack.animate({
                    left: targetLeft
                }, _.options.speed, _.options.easing, callback);
            } else {
                _.$slideTrack.animate({
                    top: targetLeft
                }, _.options.speed, _.options.easing, callback);
            }

        } else {

            if (_.cssTransitions === false) {
                if (_.options.rtl === true) {
                    _.currentLeft = -(_.currentLeft);
                }
                $({
                    animStart: _.currentLeft
                }).animate({
                    animStart: targetLeft
                }, {
                    duration: _.options.speed,
                    easing: _.options.easing,
                    step: function(now) {
                        now = Math.ceil(now);
                        if (_.options.vertical === false) {
                            animProps[_.animType] = 'translate(' +
                                now + 'px, 0px)';
                            _.$slideTrack.css(animProps);
                        } else {
                            animProps[_.animType] = 'translate(0px,' +
                                now + 'px)';
                            _.$slideTrack.css(animProps);
                        }
                    },
                    complete: function() {
                        if (callback) {
                            callback.call();
                        }
                    }
                });

            } else {

                _.applyTransition();
                targetLeft = Math.ceil(targetLeft);

                if (_.options.vertical === false) {
                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';
                } else {
                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';
                }
                _.$slideTrack.css(animProps);

                if (callback) {
                    setTimeout(function() {

                        _.disableTransition();

                        callback.call();
                    }, _.options.speed);
                }

            }

        }

    };

    Slick.prototype.getNavTarget = function() {

        var _ = this,
            asNavFor = _.options.asNavFor;

        if ( asNavFor && asNavFor !== null ) {
            asNavFor = $(asNavFor).not(_.$slider);
        }

        return asNavFor;

    };

    Slick.prototype.asNavFor = function(index) {

        var _ = this,
            asNavFor = _.getNavTarget();

        if ( asNavFor !== null && typeof asNavFor === 'object' ) {
            asNavFor.each(function() {
                var target = $(this).slick('getSlick');
                if(!target.unslicked) {
                    target.slideHandler(index, true);
                }
            });
        }

    };

    Slick.prototype.applyTransition = function(slide) {

        var _ = this,
            transition = {};

        if (_.options.fade === false) {
            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;
        } else {
            transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;
        }

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.autoPlay = function() {

        var _ = this;

        _.autoPlayClear();

        if ( _.slideCount > _.options.slidesToShow ) {
            _.autoPlayTimer = setInterval( _.autoPlayIterator, _.options.autoplaySpeed );
        }

    };

    Slick.prototype.autoPlayClear = function() {

        var _ = this;

        if (_.autoPlayTimer) {
            clearInterval(_.autoPlayTimer);
        }

    };

    Slick.prototype.autoPlayIterator = function() {

        var _ = this,
            slideTo = _.currentSlide + _.options.slidesToScroll;

        if ( !_.paused && !_.interrupted && !_.focussed ) {

            if ( _.options.infinite === false ) {

                if ( _.direction === 1 && ( _.currentSlide + 1 ) === ( _.slideCount - 1 )) {
                    _.direction = 0;
                }

                else if ( _.direction === 0 ) {

                    slideTo = _.currentSlide - _.options.slidesToScroll;

                    if ( _.currentSlide - 1 === 0 ) {
                        _.direction = 1;
                    }

                }

            }

            _.slideHandler( slideTo );

        }

    };

    Slick.prototype.buildArrows = function() {

        var _ = this;

        if (_.options.arrows === true ) {

            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');
            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');

            if( _.slideCount > _.options.slidesToShow ) {

                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');
                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');

                if (_.htmlExpr.test(_.options.prevArrow)) {
                    _.$prevArrow.prependTo(_.options.appendArrows);
                }

                if (_.htmlExpr.test(_.options.nextArrow)) {
                    _.$nextArrow.appendTo(_.options.appendArrows);
                }

                if (_.options.infinite !== true) {
                    _.$prevArrow
                        .addClass('slick-disabled')
                        .attr('aria-disabled', 'true');
                }

            } else {

                _.$prevArrow.add( _.$nextArrow )

                    .addClass('slick-hidden')
                    .attr({
                        'aria-disabled': 'true',
                        'tabindex': '-1'
                    });

            }

        }

    };

    Slick.prototype.buildDots = function() {

        var _ = this,
            i, dot;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$slider.addClass('slick-dotted');

            dot = $('<ul />').addClass(_.options.dotsClass);

            for (i = 0; i <= _.getDotCount(); i += 1) {
                dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));
            }

            _.$dots = dot.appendTo(_.options.appendDots);

            _.$dots.find('li').first().addClass('slick-active').attr('aria-hidden', 'false');

        }

    };

    Slick.prototype.buildOut = function() {

        var _ = this;

        _.$slides = (_.options.elements === 'ul') ?
            _.$slider.find('>'+_.options.elements).children( _.options.slide + ':not(.slick-cloned)').addClass('slick-slide') :
            _.$slider.children( _.options.slide + ':not(.slick-cloned)').addClass('slick-slide');

        _.slideCount = _.$slides.length;

        _.$slides.each(function(index, element) {
            $(element)
                .attr('data-slick-index', index)
                .data('originalStyling', $(element).attr('style') || '');
        });

        _.$slider.addClass('slick-slider');

        if(_.options.elements === 'ul'){
            _.$slideTrack = _.$slider.find('>'+_.options.elements).addClass('slick-track');
        }else{
            _.$slideTrack = (_.slideCount === 0) ?
                $('<div class="slick-track"/>').appendTo(_.$slider) :
                _.$slides.wrapAll('<div class="slick-track"/>').parent();
        }

        _.$list = _.$slideTrack.wrap(
                '<div aria-live="polite" class="slick-list"/>').parent();
        
        _.$slideTrack.css('opacity', 0);

        if (_.options.centerMode === true || _.options.swipeToSlide === true) {
            _.options.slidesToScroll = 1;
        }

        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');

        _.setupInfinite();

        _.buildArrows();

        _.buildDots();

        _.updateDots();


        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        if (_.options.draggable === true) {
            _.$list.addClass('draggable');
        }

    };

    Slick.prototype.buildRows = function() {

        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;

        newSlides = document.createDocumentFragment();
        originalSlides = (_.options.elements === 'ul') ? _.$slider.find('>'+_.options.elements).children() : _.$slider.children();

        if(_.options.rows > 1) {

            slidesPerSection = _.options.slidesPerRow * _.options.rows;
            numOfSlides = Math.ceil(
                originalSlides.length / slidesPerSection
            );

            for(a = 0; a < numOfSlides; a++){
                var slide = document.createElement('div');
                for(b = 0; b < _.options.rows; b++) {
                    var row = document.createElement('div');
                    for(c = 0; c < _.options.slidesPerRow; c++) {
                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));
                        if (originalSlides.get(target)) {
                            row.appendChild(originalSlides.get(target));
                        }
                    }
                    slide.appendChild(row);
                }
                newSlides.appendChild(slide);
            }

            _.$slider.empty().append(newSlides);
            _.$slider.children().children().children()
                .css({
                    'width':(100 / _.options.slidesPerRow) + '%',
                    'display': 'inline-block'
                });

        }

    };

    Slick.prototype.checkResponsive = function(initial, forceUpdate) {

        var _ = this,
            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;
        var sliderWidth = _.$slider.width();
        var windowWidth = window.innerWidth || $(window).width();

        if (_.respondTo === 'window') {
            respondToWidth = windowWidth;
        } else if (_.respondTo === 'slider') {
            respondToWidth = sliderWidth;
        } else if (_.respondTo === 'min') {
            respondToWidth = Math.min(windowWidth, sliderWidth);
        }

        if ( _.options.responsive &&
            _.options.responsive.length &&
            _.options.responsive !== null) {

            targetBreakpoint = null;

            for (breakpoint in _.breakpoints) {
                if (_.breakpoints.hasOwnProperty(breakpoint)) {
                    if (_.originalSettings.mobileFirst === false) {
                        if (respondToWidth < _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    } else {
                        if (respondToWidth > _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    }
                }
            }

            if (targetBreakpoint !== null) {
                if (_.activeBreakpoint !== null) {
                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {
                        _.activeBreakpoint =
                            targetBreakpoint;
                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                            _.unslick(targetBreakpoint);
                        } else {
                            _.options = $.extend({}, _.originalSettings,
                                _.breakpointSettings[
                                    targetBreakpoint]);
                            if (initial === true) {
                                _.currentSlide = _.options.initialSlide;
                            }
                            _.refresh(initial);
                        }
                        triggerBreakpoint = targetBreakpoint;
                    }
                } else {
                    _.activeBreakpoint = targetBreakpoint;
                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                        _.unslick(targetBreakpoint);
                    } else {
                        _.options = $.extend({}, _.originalSettings,
                            _.breakpointSettings[
                                targetBreakpoint]);
                        if (initial === true) {
                            _.currentSlide = _.options.initialSlide;
                        }
                        _.refresh(initial);
                    }
                    triggerBreakpoint = targetBreakpoint;
                }
            } else {
                if (_.activeBreakpoint !== null) {
                    _.activeBreakpoint = null;
                    _.options = _.originalSettings;
                    if (initial === true) {
                        _.currentSlide = _.options.initialSlide;
                    }
                    _.refresh(initial);
                    triggerBreakpoint = targetBreakpoint;
                }
            }

            // only trigger breakpoints during an actual break. not on initialize.
            if( !initial && triggerBreakpoint !== false ) {
                // modify - draggable bug fix
                _.touchObject.curX = undefined;
                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
            }
        }

    };

    Slick.prototype.changeSlide = function(event, dontAnimate) {

        var _ = this,
            $target = $(event.currentTarget),
            indexOffset, slideOffset, unevenOffset;

        // If target is a link, prevent default action.
        if($target.is('a')) {
            event.preventDefault();
        }

        // If target is not the <li> element (ie: a child), find the <li>.
        if(!$target.is('li')) {
            $target = $target.closest('li');
        }

        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);
        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;

        switch (event.data.message) {

            case 'previous':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);
                }
                break;

            case 'next':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);
                }
                break;

            case 'index':
                var index = event.data.index === 0 ? 0 :
                    event.data.index || $target.index() * _.options.slidesToScroll;

                _.slideHandler(_.checkNavigable(index), false, dontAnimate);
                $target.children().trigger('focus');
                break;

            default:
                return;
        }

    };

    Slick.prototype.checkNavigable = function(index) {

        var _ = this,
            navigables, prevNavigable;

        navigables = _.getNavigableIndexes();
        prevNavigable = 0;
        if (index > navigables[navigables.length - 1]) {
            index = navigables[navigables.length - 1];
        } else {
            for (var n in navigables) {
                if (index < navigables[n]) {
                    index = prevNavigable;
                    break;
                }
                prevNavigable = navigables[n];
            }
        }

        return index;
    };

    Slick.prototype.cleanUpEvents = function() {

        var _ = this;

        if (_.options.dots && _.$dots !== null) {

            $('li', _.$dots)
                .off('click.slick', _.changeSlide)
                .off('mouseenter.slick', $.proxy(_.interrupt, _, true))
                .off('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

        _.$slider.off('focus.slick blur.slick');

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);
            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);
        }

        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);
        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);
        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);
        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);

        _.$list.off('click.slick', _.clickHandler);

        $(document).off(_.visibilityChange, _.visibility);

        _.cleanUpSlideEvents();

        if (_.options.accessibility === true) {
            _.$list.off('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().off('click.slick', _.selectHandler);
        }

        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);

        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);

        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);

        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(document).off('ready.slick.slick-' + _.instanceUid, _.setPosition);

    };

    Slick.prototype.cleanUpSlideEvents = function() {

        var _ = this;

        _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));
        _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));

    };

    Slick.prototype.cleanUpRows = function() {

        var _ = this, originalSlides;

        if(_.options.rows > 1) {
            originalSlides = _.$slides.children().children();
            originalSlides.removeAttr('style');
            _.$slider.empty().append(originalSlides);
        }

    };

    Slick.prototype.clickHandler = function(event) {

        var _ = this;

        if (_.shouldClick === false) {
            event.stopImmediatePropagation();
            event.stopPropagation();
            event.preventDefault();
        }

    };

    Slick.prototype.destroy = function(refresh) {

        var _ = this;

        _.autoPlayClear();

        _.touchObject = {};

        _.cleanUpEvents();

        $('.slick-cloned', _.$slider).detach();

        if (_.$dots) {
            _.$dots.remove();
        }


        if ( _.$prevArrow && _.$prevArrow.length ) {

            _.$prevArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css('display','');

            if ( _.htmlExpr.test( _.options.prevArrow )) {
                _.$prevArrow.remove();
            }
        }

        if ( _.$nextArrow && _.$nextArrow.length ) {

            _.$nextArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css('display','');

            if ( _.htmlExpr.test( _.options.nextArrow )) {
                _.$nextArrow.remove();
            }

        }


        if (_.$slides) {

            _.$slides
                .removeClass('slick-slide slick-active slick-center slick-visible slick-current')
                .removeAttr('aria-hidden')
                .removeAttr('data-slick-index')
                .each(function(){
                    $(this).attr('style', $(this).data('originalStyling'));
                });

            _.$slideTrack.children(this.options.slide).detach();

            _.$slideTrack.detach();

            _.$list.detach();

            _.$slider.append(_.$slides);
        }

        _.cleanUpRows();

        _.$slider.removeClass('slick-slider');
        _.$slider.removeClass('slick-initialized');
        _.$slider.removeClass('slick-dotted');

        _.unslicked = true;

        if(!refresh) {
            _.$slider.trigger('destroy', [_]);
        }

    };

    Slick.prototype.disableTransition = function(slide) {

        var _ = this,
            transition = {};

        transition[_.transitionType] = '';

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.fadeSlide = function(slideIndex, callback) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).css({
                zIndex: _.options.zIndex
            });

            _.$slides.eq(slideIndex).animate({
                opacity: 1
            }, _.options.speed, _.options.easing, callback);

        } else {

            _.applyTransition(slideIndex);

            _.$slides.eq(slideIndex).css({
                opacity: 1,
                zIndex: _.options.zIndex
            });

            if (callback) {
                setTimeout(function() {

                    _.disableTransition(slideIndex);

                    callback.call();
                }, _.options.speed);
            }

        }

    };

    Slick.prototype.fadeSlideOut = function(slideIndex) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).animate({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            }, _.options.speed, _.options.easing);

        } else {

            _.applyTransition(slideIndex);

            _.$slides.eq(slideIndex).css({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            });

        }

    };

    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {

        var _ = this;

        if (filter !== null) {

            _.$slidesCache = _.$slides;

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.focusHandler = function() {

        var _ = this;

        _.$slider
            .off('focus.slick blur.slick')
            .on('focus.slick blur.slick',
                '*:not(.slick-arrow)', function(event) {

            event.stopImmediatePropagation();
            var $sf = $(this);

            setTimeout(function() {

                if( _.options.pauseOnFocus ) {
                    _.focussed = $sf.is(':focus');
                    _.autoPlay();
                }

            }, 0);

        });
    };

    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {

        var _ = this;
        return _.currentSlide;

    };

    Slick.prototype.getDotCount = function() {

        var _ = this;

        var breakPoint = 0;
        var counter = 0;
        var pagerQty = 0;

        if (_.options.infinite === true) {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        } else if (_.options.centerMode === true) {
            pagerQty = _.slideCount;
        } else if (!_.options.asNavFor) {
            pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);
        } else {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        }

        return pagerQty - 1;

    };

    Slick.prototype.getLeft = function(slideIndex) {

        var _ = this,
            targetLeft,
            verticalHeight,
            verticalOffset = 0,
            targetSlide;

        _.slideOffset = 0;
        verticalHeight = _.$slides.first().outerHeight(true);

        if (_.options.infinite === true) {
            if (_.slideCount > _.options.slidesToShow) {
                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;
                verticalOffset = (verticalHeight * _.options.slidesToShow) * -1;
            }
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {
                    if (slideIndex > _.slideCount) {
                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;
                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;
                    } else {
                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;
                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;
                    }
                }
            }
        } else {
            if (slideIndex + _.options.slidesToShow > _.slideCount) {
                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;
                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;
            }
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.slideOffset = 0;
            verticalOffset = 0;
        }

        if (_.options.centerMode === true && _.options.infinite === true) {
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;
        } else if (_.options.centerMode === true) {
            _.slideOffset = 0;
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);
        }

        if (_.options.vertical === false) {
            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;
        } else {
            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;
        }

        if (_.options.variableWidth === true) {

            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
            } else {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);
            }

            if (_.options.rtl === true) {
                if (targetSlide[0]) {
                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                } else {
                    targetLeft =  0;
                }
            } else {
                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
            }

            if (_.options.centerMode === true) {
                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
                } else {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);
                }

                if (_.options.rtl === true) {
                    if (targetSlide[0]) {
                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                    } else {
                        targetLeft =  0;
                    }
                } else {
                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                }

                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;
            }
        }

        return targetLeft;

    };

    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {

        var _ = this;

        return _.options[option];

    };

    Slick.prototype.getNavigableIndexes = function() {

        var _ = this,
            breakPoint = 0,
            counter = 0,
            indexes = [],
            max;

        if (_.options.infinite === false) {
            max = _.slideCount;
        } else {
            breakPoint = _.options.slidesToScroll * -1;
            counter = _.options.slidesToScroll * -1;
            max = _.slideCount * 2;
        }

        while (breakPoint < max) {
            indexes.push(breakPoint);
            breakPoint = counter + _.options.slidesToScroll;
            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
        }

        return indexes;

    };

    Slick.prototype.getSlick = function() {

        return this;

    };

    Slick.prototype.getSlideCount = function() {

        var _ = this,
            slidesTraversed, swipedSlide, centerOffset;

        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;

        if (_.options.swipeToSlide === true) {
            _.$slideTrack.find('.slick-slide').each(function(index, slide) {
                if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {
                    swipedSlide = slide;
                    return false;
                }
            });

            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;

            return slidesTraversed;

        } else {
            return _.options.slidesToScroll;
        }

    };

    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'index',
                index: parseInt(slide)
            }
        }, dontAnimate);

    };

    Slick.prototype.init = function(creation) {

        var _ = this;

        if (!$(_.$slider).hasClass('slick-initialized')) {

            $(_.$slider).addClass('slick-initialized');

            _.buildRows();
            _.buildOut();
            _.setProps();
            _.startLoad();
            _.loadSlider();
            _.initializeEvents();
            _.updateArrows();
            _.updateDots();
            _.checkResponsive(true);
            _.focusHandler();

        }

        if (creation) {
            _.$slider.trigger('init', [_]);
        }

        if (_.options.accessibility === true) {
            _.initADA();
        }

        if ( _.options.autoplay ) {

            _.paused = false;
            _.autoPlay();
            // 20181005 접근성 이슈 : 스크린리더 사용자가 자동 재생되는 Slide 외에 어떤한 콘텐츠에도 접근하지 못하여 autoplay carousel인 경우 aria-live="polite" => aria-live="off"로 업데이트
            _.$slider.find('.slick-list').attr('aria-live', 'off');

        }

    };

    Slick.prototype.initADA = function() {
        var _ = this;
        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({
            'aria-hidden': 'true',
            'tabindex': '-1'
        }).find('a, input, button, select').attr({
            'tabindex': '-1'
        });

        _.$slideTrack.attr('role', 'listbox');

        _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {
            $(this).attr({
                'role': 'option',
                'aria-describedby': 'slick-slide' + _.instanceUid + i + ''
            });
        });

        if (_.$dots !== null) {
            // modify - role="toolbar" remove
            _.$dots.attr('role', 'tablist').find('li').each(function(i) {
                    $(this).attr({
                        'role': 'presentation',
                        'aria-selected': 'false',
                        'aria-controls': 'navigation' + _.instanceUid + i + '',
                        'id': 'slick-slide' + _.instanceUid + i + ''
                    });
                })
                .first().attr('aria-selected', 'true').end()
                .find('button').attr('role', 'button');

        }
        _.activateADA();

    };

    Slick.prototype.initArrowEvents = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow
               .off('click.slick')
               .on('click.slick', {
                    message: 'previous'
               }, _.changeSlide);
            _.$nextArrow
               .off('click.slick')
               .on('click.slick', {
                    message: 'next'
               }, _.changeSlide);
        }

    };

    Slick.prototype.initDotEvents = function() {

        var _ = this;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            $('li', _.$dots).on('click.slick', {
                message: 'index'
            }, _.changeSlide);
        }

        if ( _.options.dots === true && _.options.pauseOnDotsHover === true ) {

            $('li', _.$dots)
                .on('mouseenter.slick', $.proxy(_.interrupt, _, true))
                .on('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

    };

    Slick.prototype.initSlideEvents = function() {

        var _ = this;

        if ( _.options.pauseOnHover ) {

            _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));
            _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

    };

    Slick.prototype.initializeEvents = function() {

        var _ = this;

        _.initArrowEvents();

        _.initDotEvents();
        _.initSlideEvents();

        _.$list.on('touchstart.slick mousedown.slick', {
            action: 'start'
        }, _.swipeHandler);
        _.$list.on('touchmove.slick mousemove.slick', {
            action: 'move'
        }, _.swipeHandler);
        _.$list.on('touchend.slick mouseup.slick', {
            action: 'end'
        }, _.swipeHandler);
        _.$list.on('touchcancel.slick mouseleave.slick', {
            action: 'end'
        }, _.swipeHandler);

        _.$list.on('click.slick', _.clickHandler);

        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));

        if (_.options.accessibility === true) {
            _.$list.on('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));

        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));

        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);

        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(document).on('ready.slick.slick-' + _.instanceUid, _.setPosition);

    };

    Slick.prototype.initUI = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.show();
            _.$nextArrow.show();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.show();

        }

    };

    Slick.prototype.keyHandler = function(event) {

        var _ = this;
         //Dont slide if the cursor is inside the form fields and arrow keys are pressed
        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {
            if (event.keyCode === 37 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? 'next' :  'previous'
                    }
                });
            } else if (event.keyCode === 39 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? 'previous' : 'next'
                    }
                });
            }
        }

    };

    Slick.prototype.lazyLoad = function() {

        var _ = this,
            loadRange, cloneRange, rangeStart, rangeEnd;

        function loadImages(imagesScope) {

            $('img[data-lazy]', imagesScope).each(function() {

                var image = $(this),
                    imageSource = $(this).attr('data-lazy'),
                    imageToLoad = document.createElement('img');

                imageToLoad.onload = function() {

                    image
                        .animate({ opacity: 0 }, 100, function() {
                            image
                                .attr('src', imageSource)
                                .animate({ opacity: 1 }, 200, function() {
                                    image
                                        .removeAttr('data-lazy')
                                        .removeClass('slick-loading');
                                });
                            _.$slider.trigger('lazyLoaded', [_, image, imageSource]);
                        });

                };

                imageToLoad.onerror = function() {

                    image
                        .removeAttr( 'data-lazy' )
                        .removeClass( 'slick-loading' )
                        .addClass( 'slick-lazyload-error' );

                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);

                };

                imageToLoad.src = imageSource;

            });

        }

        if (_.options.centerMode === true) {
            if (_.options.infinite === true) {
                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);
                rangeEnd = rangeStart + _.options.slidesToShow + 2;
            } else {
                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));
                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;
            }
        } else {
            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;
            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);
            if (_.options.fade === true) {
                if (rangeStart > 0) rangeStart--;
                if (rangeEnd <= _.slideCount) rangeEnd++;
            }
        }

        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);
        loadImages(loadRange);

        if (_.slideCount <= _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-slide');
            loadImages(cloneRange);
        } else
        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);
            loadImages(cloneRange);
        } else if (_.currentSlide === 0) {
            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);
            loadImages(cloneRange);
        }

    };

    Slick.prototype.loadSlider = function() {

        var _ = this;

        _.setPosition();

        _.$slideTrack.css({
            opacity: 1
        });

        _.$slider.removeClass('slick-loading');

        _.initUI();

        if (_.options.lazyLoad === 'progressive') {
            _.progressiveLazyLoad();
        }

    };

    Slick.prototype.next = Slick.prototype.slickNext = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'next'
            }
        });

    };

    Slick.prototype.orientationChange = function() {

        var _ = this;

        _.checkResponsive();
        _.setPosition();

    };

    Slick.prototype.pause = Slick.prototype.slickPause = function() {

        var _ = this;

        _.autoPlayClear();
        _.paused = true;

    };

    Slick.prototype.play = Slick.prototype.slickPlay = function() {

        var _ = this;

        _.autoPlay();
        _.options.autoplay = true;
        _.paused = false;
        _.focussed = false;
        _.interrupted = false;

    };

    Slick.prototype.postSlide = function(index) {

        var _ = this;

        if( !_.unslicked ) {

            _.$slider.trigger('afterChange', [_, index]);

            _.animating = false;

            _.setPosition();

            _.swipeLeft = null;

            if ( _.options.autoplay ) {
                _.autoPlay();
            }

            if (_.options.accessibility === true) {
                _.initADA();
            }

        }

    };

    Slick.prototype.prev = Slick.prototype.slickPrev = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'previous'
            }
        });

    };

    Slick.prototype.preventDefault = function(event) {

        event.preventDefault();

    };

    Slick.prototype.progressiveLazyLoad = function( tryCount ) {

        tryCount = tryCount || 1;

        var _ = this,
            $imgsToLoad = $( 'img[data-lazy]', _.$slider ),
            image,
            imageSource,
            imageToLoad;

        if ( $imgsToLoad.length ) {

            image = $imgsToLoad.first();
            imageSource = image.attr('data-lazy');
            imageToLoad = document.createElement('img');

            imageToLoad.onload = function() {

                image
                    .attr( 'src', imageSource )
                    .removeAttr('data-lazy')
                    .removeClass('slick-loading');

                if ( _.options.adaptiveHeight === true ) {
                    _.setPosition();
                }

                _.$slider.trigger('lazyLoaded', [ _, image, imageSource ]);
                _.progressiveLazyLoad();

            };

            imageToLoad.onerror = function() {

                if ( tryCount < 3 ) {

                    /**
                     * try to load the image 3 times,
                     * leave a slight delay so we don't get
                     * servers blocking the request.
                     */
                    setTimeout( function() {
                        _.progressiveLazyLoad( tryCount + 1 );
                    }, 500 );

                } else {

                    image
                        .removeAttr( 'data-lazy' )
                        .removeClass( 'slick-loading' )
                        .addClass( 'slick-lazyload-error' );

                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);

                    _.progressiveLazyLoad();

                }

            };

            imageToLoad.src = imageSource;

        } else {

            _.$slider.trigger('allImagesLoaded', [ _ ]);

        }

    };

    Slick.checkFullScreen = function() {
        var isBlockFullScreen;
        if(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
            isBlockFullScreen = true;
        } else {
            if ("exitFullscreen" in document) {
                document.exitFullscreen();
                isBlockFullScreen = false;
            } else if ("webkitExitFullscreen" in document) {
                document.webkitExitFullscreen();
                isBlockFullScreen = false;
            } else if ("mozCancelFullScreen" in document) {
                document.mozCancelFullScreen();
                isBlockFullScreen = false;
            } else if ("msExitFullscreen" in document) {
                document.msExitFullscreen();
                isBlockFullScreen = false;
            }
        }
        return isBlockFullScreen;
    };

    Slick.prototype.refresh = function( initializing ) {
        if ($('body').hasClass('video-layer-open') && Slick.checkFullScreen()) {
            return;
        }
        // 모바일 해상도에서 Common Carousel Container의 Inner Component 비디오의 풀스크린을 하면 전체화면이 꺼지는 이슈 수정

        var _ = this, currentSlide, lastVisibleIndex;

        lastVisibleIndex = _.slideCount - _.options.slidesToShow;

        // in non-infinite sliders, we don't want to go past the
        // last visible index.
        if( !_.options.infinite && ( _.currentSlide > lastVisibleIndex )) {
            _.currentSlide = lastVisibleIndex;
        }

        // if less slides than to show, go to start.
        if ( _.slideCount <= _.options.slidesToShow ) {
            _.currentSlide = 0;

        }

        currentSlide = _.currentSlide;

        _.destroy(true);

        $.extend(_, _.initials, { currentSlide: currentSlide });

        _.init();

        if( !initializing ) {

            _.changeSlide({
                data: {
                    message: 'index',
                    index: currentSlide
                }
            }, false);

        }

    };

    Slick.prototype.registerBreakpoints = function() {

        var _ = this, breakpoint, currentBreakpoint, l,
            responsiveSettings = _.options.responsive || null;

        if ( $.type(responsiveSettings) === 'array' && responsiveSettings.length ) {

            _.respondTo = _.options.respondTo || 'window';

            for ( breakpoint in responsiveSettings ) {

                l = _.breakpoints.length-1;
                currentBreakpoint = responsiveSettings[breakpoint].breakpoint;

                if (responsiveSettings.hasOwnProperty(breakpoint)) {

                    // loop through the breakpoints and cut out any existing
                    // ones with the same breakpoint number, we don't want dupes.
                    while( l >= 0 ) {
                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {
                            _.breakpoints.splice(l,1);
                        }
                        l--;
                    }

                    _.breakpoints.push(currentBreakpoint);
                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;

                }

            }

            _.breakpoints.sort(function(a, b) {
                return ( _.options.mobileFirst ) ? a-b : b-a;
            });

        }

    };

    Slick.prototype.reinit = function() {

        var _ = this;

        _.$slides =
            _.$slideTrack
                .children(_.options.slide)
                .addClass('slick-slide');

        _.slideCount = _.$slides.length;

        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {
            _.currentSlide = _.currentSlide - _.options.slidesToScroll;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.currentSlide = 0;
        }

        _.registerBreakpoints();

        _.setProps();
        _.setupInfinite();
        _.buildArrows();
        _.updateArrows();
        _.initArrowEvents();
        _.buildDots();
        _.updateDots();
        _.initDotEvents();
        _.cleanUpSlideEvents();
        _.initSlideEvents();

        _.checkResponsive(false, true);

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        _.setPosition();
        _.focusHandler();

        _.paused = !_.options.autoplay;
        _.autoPlay();

        _.$slider.trigger('reInit', [_]);

    };

    Slick.prototype.resize = function() {

        var _ = this;

        if ($(window).width() !== _.windowWidth) {
            clearTimeout(_.windowDelay);
            _.windowDelay = window.setTimeout(function() {
                _.windowWidth = $(window).width();
                _.checkResponsive();
                if( !_.unslicked ) { _.setPosition(); }
            }, 50);
        }
    };

    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            removeBefore = index;
            index = removeBefore === true ? 0 : _.slideCount - 1;
        } else {
            index = removeBefore === true ? --index : index;
        }

        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {
            return false;
        }

        _.unload();

        if (removeAll === true) {
            _.$slideTrack.children().remove();
        } else {
            _.$slideTrack.children(this.options.slide).eq(index).remove();
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.setCSS = function(position) {

        var _ = this,
            positionProps = {},
            x, y;

        if (_.options.rtl === true) {
            position = -position;
        }
        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';
        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';

        positionProps[_.positionProp] = position;

        if (_.transformsEnabled === false) {
            _.$slideTrack.css(positionProps);
        } else {
            positionProps = {};
            if (_.cssTransitions === false) {
                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';
                _.$slideTrack.css(positionProps);
            } else {
                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';
                _.$slideTrack.css(positionProps);
            }
        }

    };

    Slick.prototype.setDimensions = function() {

        var _ = this;

        if (_.options.vertical === false) {
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: ('0px ' + _.options.centerPadding)
                });
            }
        } else {
            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: (_.options.centerPadding + ' 0px')
                });
            }
        }

        _.listWidth = _.$list.width();
        _.listHeight = _.$list.height();


        if (_.options.vertical === false && _.options.variableWidth === false) {
            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);
            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));

        } else if (_.options.variableWidth === true) {
            _.$slideTrack.width(5000 * _.slideCount);
        } else {
            _.slideWidth = Math.ceil(_.listWidth);
            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));
        }

        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();
        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);

    };

    Slick.prototype.setFade = function() {

        var _ = this,
            targetLeft;

        _.$slides.each(function(index, element) {
            targetLeft = (_.slideWidth * index) * -1;
            if (_.options.rtl === true) {
                $(element).css({
                    position: 'relative',
                    right: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            } else {
                $(element).css({
                    position: 'relative',
                    left: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            }
        });

        _.$slides.eq(_.currentSlide).css({
            zIndex: _.options.zIndex - 1,
            opacity: 1
        });

    };

    Slick.prototype.setHeight = function() {

        var _ = this;

        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.css('height', targetHeight);
        }

    };

    Slick.prototype.setOption =
    Slick.prototype.slickSetOption = function() {

        /**
         * accepts arguments in format of:
         *
         *  - for changing a single option's value:
         *     .slick("setOption", option, value, refresh )
         *
         *  - for changing a set of responsive options:
         *     .slick("setOption", 'responsive', [{}, ...], refresh )
         *
         *  - for updating multiple values at once (not responsive)
         *     .slick("setOption", { 'option': value, ... }, refresh )
         */

        var _ = this, l, item, option, value, refresh = false, type;

        if( $.type( arguments[0] ) === 'object' ) {

            option =  arguments[0];
            refresh = arguments[1];
            type = 'multiple';

        } else if ( $.type( arguments[0] ) === 'string' ) {

            option =  arguments[0];
            value = arguments[1];
            refresh = arguments[2];

            if ( arguments[0] === 'responsive' && $.type( arguments[1] ) === 'array' ) {

                type = 'responsive';

            } else if ( typeof arguments[1] !== 'undefined' ) {

                type = 'single';

            }

        }

        if ( type === 'single' ) {

            _.options[option] = value;


        } else if ( type === 'multiple' ) {

            $.each( option , function( opt, val ) {

                _.options[opt] = val;

            });


        } else if ( type === 'responsive' ) {

            for ( item in value ) {

                if( $.type( _.options.responsive ) !== 'array' ) {

                    _.options.responsive = [ value[item] ];

                } else {

                    l = _.options.responsive.length-1;

                    // loop through the responsive object and splice out duplicates.
                    while( l >= 0 ) {

                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {

                            _.options.responsive.splice(l,1);

                        }

                        l--;

                    }

                    _.options.responsive.push( value[item] );

                }

            }

        }

        if ( refresh ) {

            _.unload();
            _.reinit();

        }

    };

    Slick.prototype.setPosition = function() {

        var _ = this;

        _.setDimensions();

        _.setHeight();

        if (_.options.fade === false) {
            _.setCSS(_.getLeft(_.currentSlide));
        } else {
            _.setFade();
        }

        _.$slider.trigger('setPosition', [_]);

    };

    Slick.prototype.setProps = function() {

        var _ = this,
            bodyStyle = document.body.style;

        _.positionProp = _.options.vertical === true ? 'top' : 'left';

        if (_.positionProp === 'top') {
            _.$slider.addClass('slick-vertical');
        } else {
            _.$slider.removeClass('slick-vertical');
        }

        if (bodyStyle.WebkitTransition !== undefined ||
            bodyStyle.MozTransition !== undefined ||
            bodyStyle.msTransition !== undefined) {
            if (_.options.useCSS === true) {
                _.cssTransitions = true;
            }
        }

        if ( _.options.fade ) {
            if ( typeof _.options.zIndex === 'number' ) {
                if( _.options.zIndex < 3 ) {
                    _.options.zIndex = 3;
                }
            } else {
                _.options.zIndex = _.defaults.zIndex;
            }
        }

        if (bodyStyle.OTransform !== undefined) {
            _.animType = 'OTransform';
            _.transformType = '-o-transform';
            _.transitionType = 'OTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.MozTransform !== undefined) {
            _.animType = 'MozTransform';
            _.transformType = '-moz-transform';
            _.transitionType = 'MozTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.webkitTransform !== undefined) {
            _.animType = 'webkitTransform';
            _.transformType = '-webkit-transform';
            _.transitionType = 'webkitTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.msTransform !== undefined) {
            _.animType = 'msTransform';
            _.transformType = '-ms-transform';
            _.transitionType = 'msTransition';
            if (bodyStyle.msTransform === undefined) _.animType = false;
        }
        if (bodyStyle.transform !== undefined && _.animType !== false) {
            _.animType = 'transform';
            _.transformType = 'transform';
            _.transitionType = 'transition';
        }
        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);
    };


    Slick.prototype.setSlideClasses = function(index) {

        var _ = this,
            centerOffset, allSlides, indexOffset, remainder;

        allSlides = _.$slider
            .find('.slick-slide')
            .removeClass('slick-active slick-center slick-current')
            .attr('aria-hidden', 'true');

        _.$slides
            .eq(index)
            .addClass('slick-current');

        if (_.options.centerMode === true) {

            centerOffset = Math.floor(_.options.slidesToShow / 2);

            if (_.options.infinite === true) {

                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {

                    _.$slides
                        .slice(index - centerOffset, index + centerOffset + 1)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    indexOffset = _.options.slidesToShow + index;
                    allSlides
                        .slice(indexOffset - centerOffset + 1, indexOffset + centerOffset + 2)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

                if (index === 0) {

                    allSlides
                        .eq(allSlides.length - 1 - _.options.slidesToShow)
                        .addClass('slick-center');

                } else if (index === _.slideCount - 1) {

                    allSlides
                        .eq(_.options.slidesToShow)
                        .addClass('slick-center');

                }

            }

            _.$slides
                .eq(index)
                .addClass('slick-center');

        } else {

            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {

                _.$slides
                    .slice(index, index + _.options.slidesToShow)
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else if (allSlides.length <= _.options.slidesToShow) {

                allSlides
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else {

                remainder = _.slideCount % _.options.slidesToShow;
                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;

                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {

                    allSlides
                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    allSlides
                        .slice(indexOffset, indexOffset + _.options.slidesToShow)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

            }

        }

        if (_.options.lazyLoad === 'ondemand') {
            _.lazyLoad();
        }

    };

    Slick.prototype.setupInfinite = function() {

        var _ = this,
            i, slideIndex, infiniteCount;

        if (_.options.fade === true) {
            _.options.centerMode = false;
        }

        if (_.options.infinite === true && _.options.fade === false) {

            slideIndex = null;

            if (_.slideCount > _.options.slidesToShow) {

                if (_.options.centerMode === true) {
                    infiniteCount = _.options.slidesToShow + 1;
                } else {
                    infiniteCount = _.options.slidesToShow;
                }

                for (i = _.slideCount; i > (_.slideCount -
                        infiniteCount); i -= 1) {
                    slideIndex = i - 1;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex - _.slideCount)
                        .prependTo(_.$slideTrack).addClass('slick-cloned');
                }
                for (i = 0; i < infiniteCount; i += 1) {
                    slideIndex = i;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex + _.slideCount)
                        .appendTo(_.$slideTrack).addClass('slick-cloned');
                }
                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {
                    $(this).attr('id', '');
                });

            }

        }

    };

    Slick.prototype.interrupt = function( toggle ) {

        var _ = this;

        if( !toggle ) {
            _.autoPlay();
        }
        _.interrupted = toggle;

    };

    Slick.prototype.selectHandler = function(event) {

        var _ = this;

        var targetElement =
            $(event.target).is('.slick-slide') ?
                $(event.target) :
                $(event.target).parents('.slick-slide');

        var index = parseInt(targetElement.attr('data-slick-index'));

        if (!index) index = 0;

        if (_.slideCount <= _.options.slidesToShow) {

            _.setSlideClasses(index);
            _.asNavFor(index);
            return;

        }

        _.slideHandler(index);

    };

    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {

        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,
            _ = this, navTarget;

        sync = sync || false;

        if (_.animating === true && _.options.waitForAnimate === true) {
            return;
        }

        if (_.options.fade === true && _.currentSlide === index) {
            return;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            return;
        }

        if (sync === false) {
            _.asNavFor(index);
        }

        targetSlide = index;
        targetLeft = _.getLeft(targetSlide);
        slideLeft = _.getLeft(_.currentSlide);

        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;

        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        }

        if ( _.options.autoplay ) {
            clearInterval(_.autoPlayTimer);
        }

        if (targetSlide < 0) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);
            } else {
                animSlide = _.slideCount + targetSlide;
            }
        } else if (targetSlide >= _.slideCount) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = 0;
            } else {
                animSlide = targetSlide - _.slideCount;
            }
        } else {
            animSlide = targetSlide;
        }

        _.animating = true;

        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);

        oldSlide = _.currentSlide;
        _.currentSlide = animSlide;

        _.setSlideClasses(_.currentSlide);

        if ( _.options.asNavFor ) {

            navTarget = _.getNavTarget();
            navTarget = navTarget.slick('getSlick');

            if ( navTarget.slideCount <= navTarget.options.slidesToShow ) {
                navTarget.setSlideClasses(_.currentSlide);
            }

        }

        _.updateDots();
        _.updateArrows();

        if (_.options.fade === true) {
            if (dontAnimate !== true) {

                _.fadeSlideOut(oldSlide);

                _.fadeSlide(animSlide, function() {
                    _.postSlide(animSlide);
                });

            } else {
                _.postSlide(animSlide);
            }
            _.animateHeight();
            return;
        }

        if (dontAnimate !== true) {
            _.animateSlide(targetLeft, function() {
                _.postSlide(animSlide);
            });
        } else {
            _.postSlide(animSlide);
        }

    };

    Slick.prototype.startLoad = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.hide();
            _.$nextArrow.hide();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.hide();

        }

        _.$slider.addClass('slick-loading');

    };

    Slick.prototype.swipeDirection = function() {

        var xDist, yDist, r, swipeAngle, _ = this;

        xDist = _.touchObject.startX - _.touchObject.curX;
        yDist = _.touchObject.startY - _.touchObject.curY;
        r = Math.atan2(yDist, xDist);

        swipeAngle = Math.round(r * 180 / Math.PI);
        if (swipeAngle < 0) {
            swipeAngle = 360 - Math.abs(swipeAngle);
        }

        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {
            return (_.options.rtl === false ? 'right' : 'left');
        }
        if (_.options.verticalSwiping === true) {
            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {
                return 'down';
            } else {
                return 'up';
            }
        }

        return 'vertical';

    };

    Slick.prototype.swipeEnd = function(event) {

        var _ = this,
            slideCount,
            direction;

        _.dragging = false;
        _.interrupted = false;
        _.shouldClick = ( _.touchObject.swipeLength > 10 ) ? false : true;

        if ( _.touchObject.curX === undefined ) {
            return false;
        }

        if ( _.touchObject.edgeHit === true ) {
            _.$slider.trigger('edge', [_, _.swipeDirection() ]);
        }

        if ( _.touchObject.swipeLength >= _.touchObject.minSwipe ) {

            direction = _.swipeDirection();

            switch ( direction ) {

                case 'left':
                case 'down':

                    slideCount =
                        _.options.swipeToSlide ?
                            _.checkNavigable( _.currentSlide + _.getSlideCount() ) :
                            _.currentSlide + _.getSlideCount();

                    _.currentDirection = 0;

                    break;

                case 'right':
                case 'up':

                    slideCount =
                        _.options.swipeToSlide ?
                            _.checkNavigable( _.currentSlide - _.getSlideCount() ) :
                            _.currentSlide - _.getSlideCount();

                    _.currentDirection = 1;

                    break;

                default:


            }

            if( direction != 'vertical' ) {

                _.slideHandler( slideCount );
                _.touchObject = {};
                _.$slider.trigger('swipe', [_, direction ]);

            }

        } else {

            if ( _.touchObject.startX !== _.touchObject.curX ) {

                _.slideHandler( _.currentSlide );
                _.touchObject = {};

            }

        }

    };

    Slick.prototype.swipeHandler = function(event) {

        var _ = this;

        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {
            return;
        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {
            return;
        }

        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?
            event.originalEvent.touches.length : 1;

        _.touchObject.minSwipe = _.listWidth / _.options
            .touchThreshold;

        if (_.options.verticalSwiping === true) {
            _.touchObject.minSwipe = _.listHeight / _.options
                .touchThreshold;
        }

        switch (event.data.action) {

            case 'start':
                _.swipeStart(event);
                break;

            case 'move':
                _.swipeMove(event);
                break;

            case 'end':
                _.swipeEnd(event);
                break;

        }

    };

    Slick.prototype.swipeMove = function(event) {

        var _ = this,
            edgeWasHit = false,
            curLeft, swipeDirection, swipeLength, positionOffset, touches;

        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;

        if (!_.dragging || touches && touches.length !== 1) {
            return false;
        }

        curLeft = _.getLeft(_.currentSlide);

        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;
        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;

        _.touchObject.swipeLength = Math.round(Math.sqrt(
            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));

        if (_.options.verticalSwiping === true) {
            _.touchObject.swipeLength = Math.round(Math.sqrt(
                Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));
        }

        swipeDirection = _.swipeDirection();

        if (swipeDirection === 'vertical') {
            return;
        }

        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {
            event.preventDefault();
        }

        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);
        if (_.options.verticalSwiping === true) {
            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;
        }


        swipeLength = _.touchObject.swipeLength;

        _.touchObject.edgeHit = false;

        if (_.options.infinite === false) {
            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {
                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;
                _.touchObject.edgeHit = true;
            }
        }

        if (_.options.vertical === false) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        } else {
            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;
        }
        if (_.options.verticalSwiping === true) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        }

        if (_.options.fade === true || _.options.touchMove === false) {
            return false;
        }

        if (_.animating === true) {
            _.swipeLeft = null;
            return false;
        }

        _.setCSS(_.swipeLeft);

    };

    Slick.prototype.swipeStart = function(event) {

        var _ = this,
            touches;

        _.interrupted = true;

        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {
            _.touchObject = {};
            return false;
        }

        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {
            touches = event.originalEvent.touches[0];
        }

        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;
        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;

        _.dragging = true;

    };

    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {

        var _ = this;

        if (_.$slidesCache !== null) {

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.unload = function() {

        var _ = this;

        $('.slick-cloned', _.$slider).remove();

        if (_.$dots) {
            _.$dots.remove();
        }

        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {
            _.$prevArrow.remove();
        }

        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {
            _.$nextArrow.remove();
        }

        _.$slides
            .removeClass('slick-slide slick-active slick-visible slick-current')
            .attr('aria-hidden', 'true')
            .css('width', '');

    };

    Slick.prototype.unslick = function(fromBreakpoint) {

        var _ = this;
        _.$slider.trigger('unslick', [_, fromBreakpoint]);
        _.destroy();

    };

    Slick.prototype.updateArrows = function() {

        var _ = this,
            centerOffset;

        centerOffset = Math.floor(_.options.slidesToShow / 2);

        if ( _.options.arrows === true &&
            _.slideCount > _.options.slidesToShow &&
            !_.options.infinite ) {

            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');
            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            if (_.currentSlide === 0) {

                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            }

        }

    };

    Slick.prototype.updateDots = function() {

        var _ = this;

        if (_.$dots !== null) {

            _.$dots
                .find('li')
                .removeClass('slick-active')
                .attr('aria-hidden', 'true');

            _.$dots
                .find('li')
                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))
                .addClass('slick-active')
                .attr('aria-hidden', 'false');

        }

    };

    Slick.prototype.visibility = function() {

        var _ = this;

        if ( _.options.autoplay ) {

            if ( document[_.hidden] ) {

                _.interrupted = true;

            } else {

                _.interrupted = false;

            }

        }

    };

    $.fn.slick = function() {
        var _ = this,
            opt = arguments[0],
            args = Array.prototype.slice.call(arguments, 1),
            l = _.length,
            i,
            ret;
        for (i = 0; i < l; i++) {
            if (typeof opt == 'object' || typeof opt == 'undefined')
                _[i].slick = new Slick(_[i], opt);
            else
                ret = _[i].slick[opt].apply(_[i].slick, args);
            if (typeof ret != 'undefined') return ret;
        }
        return _;
    };

}));

/*!
jquery.animate-enhanced plugin v1.05
---
http://github.com/benbarnett/jQuery-Animate-Enhanced
http://benbarnett.net
@benpbarnett
*/
/*
jquery.animate-enhanced plugin v1.05
---
http://github.com/benbarnett/jQuery-Animate-Enhanced
http://benbarnett.net
@benpbarnett
---
Copyright (c) 2012 Ben Barnett

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
---
Extends jQuery.animate() to automatically use CSS3 transformations where applicable.
Tested with jQuery 1.3.2+

Supports -moz-transition, -webkit-transition, -o-transition, transition

Targetted properties (for now):
	- left
	- top
	- opacity
	- width
	- height

Usage (exactly the same as it would be normally):

	jQuery(element).animate({left: 200},  500, function() {
		// callback
	});

Changelog:
	1.05 (14/08/2013):
		- Merging PR #124 fix for highcharts clash. Thanks @bensonc!

	1.04 (14/08/2013):
		- Using fix from issue #69 by @rickyk586 to support percentages

	1.03 (19/7/2013):
		- Merge PR #129 (Use originalAnimateMethod if a step callback function is provided.) /thx @lehni

	1.02 (8/5/2013):
		- Fixing use3D default flags. It must explicitly be set to false to disable 3d now, the plugin by default will use it if available.

	1.01 (8/5/2013):
		- Adding appropriate display value for wider range of elements (issue #121 - thanks smacky)

	1.0 (8/5/2103):
		- Fix avoidTransforms: true behaviour for directional transitions

	0.99.1 (3/4/2013):
		- Add Set or unset the 'disabled by default' value (PR #117)

	0.99 (5/12/2012):
		- PR #109 Added support for list-item nodes. FadeIn on tags was omitting the list-style support. (thx @SeanCannon)
		
	0.98 (12/11/2012):
		- Merging pull request #106 thx @gboysko - checking for ownerDocument before using getComputedStyle

	0.97 (6/11/2012):
		- Merging pull request #104 thx @gavrochelegnou - .bind instead of .one

	0.96a (20/08/2012):
		- Checking event is from dispatch target (issue #58)

	0.96 (20/08/2012):
		- Fixes for context, all elements returned as context (issue #84)
		- Reset position with leaveTransforms !== true fixes (issue #93)
		

	0.95 (20/08/2012):
		- If target opacity == current opacity, pass back to jquery native to get callback firing (#94)

	0.94 (20/08/2012):
		- Addresses Firefox callback mechanisms (issue #94)
		- using $.one() to bind to CSS callbacks in a more generic way

	0.93 (6/8/2012):
		- Adding other Opera 'transitionend' event (re: issue #90)

	0.92 (6/8/2012):
		- Seperate unbinds into different threads (re: issue #91)

	0.91 (2/4/2012):
		- Merge Pull Request #74 - Unit Management

	0.90 (7/3/2012):
		- Adding public $.toggleDisabledByDefault() feature to disable entire plugin by default (Issue #73)

	0.89 (24/1/2012):
		- Adding 'avoidCSSTransitions' property. Set to true to disable entire plugin. (Issue #47)

	0.88 (24/1/2012):
		- Fix Issue #67 for HighchartsJS compatibility

	0.87 (24/1/2012):
		- Fix Issue #66 selfCSSData.original is undefined

	0.86 (9/1/2012):
		- Strict JS fix for undefined variable

	0.85 (20/12/2011):
		- Merge Pull request #57 from Kronuz
		- Codebase cleaned and now passes jshint.
		- Fixed a few bugs (it now saves and restores the original css transition properties).
		- fadeOut() is fixed, it wasn't restoring the opacity after hiding it.

	0.80 (13/09/2011):
		- Issue #28 - Report $(el).is(':animated') fix

	0.79 (06/09/2011):
		- Issue #42 - Right negative position animation: please see issue notes on Github.

	0.78 (02/09/2011):
		- Issue #18 - jQuery/$ reference joys

	0.77 (02/09/2011):
		- Adding feature on Github issue #44 - Use 3D Transitions by default

	0.76 (28/06/2011):
		- Fixing issue #37 - fixed stop() method (with gotoEnd == false)

	0.75 (15/06/2011):
		- Fixing issue #35 to pass actual object back as context for callback

	0.74 (28/05/2011):
		- Fixing issue #29 to play nice with 1.6+

	0.73 (05/03/2011):
		- Merged Pull Request #26: Fixed issue with fadeOut() / "hide" shortcut

	0.72 (05/03/2011):
		- Merged Pull Request #23: Added Penner equation approximations from Matthew Lein's Ceaser, and added failsafe fallbacks

	0.71 (05/03/2011):
		- Merged Pull Request #24: Changes translation object to integers instead of strings to fix relative values bug with leaveTransforms = true

	0.70 (17/03/2011):
		- Merged Pull Request from amlw-nyt to add bottom/right handling

	0.68 (15/02/2011):
		- width/height fixes & queue issues resolved.

	0.67 (15/02/2011):
		- Code cleanups & file size improvements for compression.

	0.66 (15/02/2011):
		- Zero second fadeOut(), fadeIn() fixes

	0.65 (01/02/2011):
		- Callbacks with queue() support refactored to support element arrays

	0.64 (27/01/2011):
		- BUGFIX #13: .slideUp(), .slideToggle(), .slideDown() bugfixes in Webkit

	0.63 (12/01/2011):
		- BUGFIX #11: callbacks not firing when new value == old value

	0.62 (10/01/2011):
		- BUGFIX #11: queue is not a function issue fixed

	0.61 (10/01/2011):
		- BUGFIX #10: Negative positions converting to positive

	0.60 (06/01/2011):
		- Animate function rewrite in accordance with new queue system
		- BUGFIX #8: Left/top position values always assumed relative rather than absolute
		- BUGFIX #9: animation as last item in a chain - the chain is ignored?
		- BUGFIX: width/height CSS3 transformation with left/top working

	0.55 (22/12/2010):
		- isEmptyObject function for <jQuery 1.4 (requires 1.3.2)

	0.54a (22/12/2010):
		- License changed to MIT (http://www.opensource.org/licenses/mit-license.php)

	0.54 (22/12/2010):
		- Removed silly check for 'jQuery UI' bailouts. Sorry.
		- Scoping issues fixed - Issue #4: $(this) should give you a reference to the selector being animated.. per jquery's core animation funciton.

	0.53 (17/11/2010):
		- New $.translate() method to easily calculate current transformed translation
		- Repeater callback bug fix for leaveTransforms:true (was constantly appending properties)

	0.52 (16/11/2010):
		- leaveTransforms: true bug fixes
		- 'Applying' user callback function to retain 'this' context

	0.51 (08/11/2010):
		- Bailing out with jQuery UI. This is only so the plugin plays nice with others and is TEMPORARY.

	0.50 (08/11/2010):
		- Support for $.fn.stop()
		- Fewer jQuery.fn entries to preserve namespace
		- All references $ converted to jQuery
		- jsDoc Toolkit style commenting for docs (coming soon)

	0.49 (19/10/2010):
		- Handling of 'undefined' errors for secondary CSS objects
		- Support to enhance 'width' and 'height' properties (except shortcuts involving jQuery.fx.step, e.g slideToggle)
		- Bugfix: Positioning when using avoidTransforms: true (thanks Ralf Santbergen reports)
		- Bugfix: Callbacks and Scope issues

	0.48 (13/10/2010):
		- Checks for 3d support before applying

	0.47 (12/10/2010);
		- Compatible with .fadeIn(), .fadeOut()
		- Use shortcuts, no duration for jQuery default or "fast" and "slow"
		- Clean up callback event listeners on complete (preventing multiple callbacks)

	0.46 (07/10/2010);
		- Compatible with .slideUp(), .slideDown(), .slideToggle()

	0.45 (06/10/2010):
		- 'Zero' position bug fix (was originally translating by 0 zero pixels, i.e. no movement)

	0.4 (05/10/2010):
		- Iterate over multiple elements and store transforms in jQuery.data per element
		- Include support for relative values (+= / -=)
		- Better unit sanitization
		- Performance tweaks
		- Fix for optional callback function (was required)
		- Applies data[translateX] and data[translateY] to elements for easy access
		- Added 'easeInOutQuint' easing function for CSS transitions (requires jQuery UI for JS anims)
		- Less need for leaveTransforms = true due to better position detections
*/

(function(jQuery, originalAnimateMethod, originalStopMethod) {

	// ----------
	// Plugin variables
	// ----------
	var	cssTransitionProperties = ['top', 'right', 'bottom', 'left', 'opacity', 'height', 'width'],
		directions = ['top', 'right', 'bottom', 'left'],
		cssPrefixes = ['-webkit-', '-moz-', '-o-', ''],
		pluginOptions = ['avoidTransforms', 'useTranslate3d', 'leaveTransforms'],
		rfxnum = /^([+-]=)?([\d+-.]+)(.*)$/,
		rupper = /([A-Z])/g,
		defaultEnhanceData = {
			secondary: {},
			meta: {
				top : 0,
				right : 0,
				bottom : 0,
				left : 0
			}
		},
		valUnit = 'px',

		DATA_KEY = 'jQe',
		CUBIC_BEZIER_OPEN = 'cubic-bezier(',
		CUBIC_BEZIER_CLOSE = ')',

		originalAnimatedFilter = null,
		pluginDisabledDefault = false;


	// ----------
	// Check if this browser supports CSS3 transitions
	// ----------
	var thisBody = document.body || document.documentElement,
		thisStyle = thisBody.style,
		transitionEndEvent = 'webkitTransitionEnd oTransitionEnd transitionend',
		cssTransitionsSupported = thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.OTransition !== undefined || thisStyle.transition !== undefined,
		has3D = ('WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix()),
		use3DByDefault = has3D;



	// ----------
	// Extended :animated filter
	// ----------
	if ( jQuery.expr && jQuery.expr.filters ) {
		originalAnimatedFilter = jQuery.expr.filters.animated;
		jQuery.expr.filters.animated = function(elem) {
			return jQuery(elem).data('events') && jQuery(elem).data('events')[transitionEndEvent] ? true : originalAnimatedFilter.call(this, elem);
		};
	}


	/**
		@private
		@name _getUnit
		@function
		@description Return unit value ("px", "%", "em" for re-use correct one when translating)
		@param {variant} [val] Target value
	*/
	function _getUnit(val){
		return val.match(/\D+$/);
	}


	/**
		@private
		@name _interpretValue
		@function
		@description Interpret value ("px", "+=" and "-=" sanitisation)
		@param {object} [element] The Element for current CSS analysis
		@param {variant} [val] Target value
		@param {string} [prop] The property we're looking at
		@param {boolean} [isTransform] Is this a CSS3 transform?
	*/
	function _interpretValue(e, val, prop, isTransform) {
		// this is a nasty fix, but we check for prop == 'd' to see if we're dealing with SVG, and abort
		if (prop == "d") return;
		if (!_isValidElement(e)) return;
		
		var parts = rfxnum.exec(val),
			start = e.css(prop) === 'auto' ? 0 : e.css(prop),
			cleanCSSStart = typeof start == 'string' ? _cleanValue(start) : start,
			cleanTarget = typeof val == 'string' ? _cleanValue(val) : val,
			cleanStart = isTransform === true ? 0 : cleanCSSStart,
			hidden = e.is(':hidden'),
			translation = e.translation();

		if (prop == 'left') cleanStart = parseInt(cleanCSSStart, 10) + translation.x;
		if (prop == 'right') cleanStart = parseInt(cleanCSSStart, 10) + translation.x;
		if (prop == 'top') cleanStart = parseInt(cleanCSSStart, 10) + translation.y;
		if (prop == 'bottom') cleanStart = parseInt(cleanCSSStart, 10) + translation.y;

		// deal with shortcuts
		if (!parts && val == 'show') {
			cleanStart = 1;
			if (hidden) e.css({'display': _domElementVisibleDisplayValue(e.context.tagName), 'opacity': 0});
		} else if (!parts && val == "hide") {
			cleanStart = 0;
		}

		if (parts) {
			var end = parseFloat(parts[2]);

			// If a +=/-= token was provided, we're doing a relative animation
			if (parts[1]) end = ((parts[1] === '-=' ? -1 : 1) * end) + parseInt(cleanStart, 10);

			// check for unit  as per issue #69
			if (parts[3] == '%') end = end + '%';

			return end;
		} else {
			return cleanStart;
		}
	}

	/**
		@private
		@name _getTranslation
		@function
		@description Make a translate or translate3d string
		@param {integer} [x]
		@param {integer} [y]
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _getTranslation(x, y, use3D) {
		return ((use3D === true || ((use3DByDefault === true && use3D !== false)) && has3D)) ? 'translate3d(' + x + 'px, ' + y + 'px, 0)' : 'translate(' + x + 'px,' + y + 'px)';
	}


	/**
		@private
		@name _applyCSSTransition
		@function
		@description Build up the CSS object
		@param {object} [e] Element
		@param {string} [property] Property we're dealing with
		@param {integer} [duration] Duration
		@param {string} [easing] Easing function
		@param {variant} [value] String/integer for target value
		@param {boolean} [isTransform] Is this a CSS transformation?
		@param {boolean} [isTranslatable] Is this a CSS translation?
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _applyCSSTransition(e, property, duration, easing, value, isTransform, isTranslatable, use3D) {
		var eCSSData = e.data(DATA_KEY),
			enhanceData = eCSSData && !_isEmptyObject(eCSSData) ? eCSSData : jQuery.extend(true, {}, defaultEnhanceData),
			offsetPosition = value,
			isDirection = jQuery.inArray(property, directions) > -1;


		if (isDirection) {
			var meta = enhanceData.meta,
				cleanPropertyValue = _cleanValue(e.css(property)) || 0,
				stashedProperty = property + '_o';

			offsetPosition = value - cleanPropertyValue;


			meta[property] = offsetPosition;
			meta[stashedProperty] = e.css(property) == 'auto' ? 0 + offsetPosition : cleanPropertyValue + offsetPosition || 0;
			enhanceData.meta = meta;

			// fix 0 issue (transition by 0 = nothing)
			if (isTranslatable && offsetPosition === 0) {
				offsetPosition = 0 - meta[stashedProperty];
				meta[property] = offsetPosition;
				meta[stashedProperty] = 0;
			}
		}

		// reapply data and return
		return e.data(DATA_KEY, _applyCSSWithPrefix(e, enhanceData, property, duration, easing, offsetPosition, isTransform, isTranslatable, use3D));
	}

	/**
		@private
		@name _applyCSSWithPrefix
		@function
		@description Helper function to build up CSS properties using the various prefixes
		@param {object} [cssProperties] Current CSS object to merge with
		@param {string} [property]
		@param {integer} [duration]
		@param {string} [easing]
		@param {variant} [value]
		@param {boolean} [isTransform] Is this a CSS transformation?
		@param {boolean} [isTranslatable] Is this a CSS translation?
		@param {boolean} [use3D] Use translate3d if available?
	*/
	function _applyCSSWithPrefix(e, cssProperties, property, duration, easing, value, isTransform, isTranslatable, use3D) {
		var saveOriginal = false,
			transform = isTransform === true && isTranslatable === true;


		cssProperties = cssProperties || {};
		if (!cssProperties.original) {
			cssProperties.original = {};
			saveOriginal = true;
		}
		cssProperties.properties = cssProperties.properties || {};
		cssProperties.secondary = cssProperties.secondary || {};

		var meta = cssProperties.meta,
			original = cssProperties.original,
			properties = cssProperties.properties,
			secondary = cssProperties.secondary;

		for (var i = cssPrefixes.length - 1; i >= 0; i--) {
			var tp = cssPrefixes[i] + 'transition-property',
				td = cssPrefixes[i] + 'transition-duration',
				tf = cssPrefixes[i] + 'transition-timing-function';

			property = (transform ? cssPrefixes[i] + 'transform' : property);

			if (saveOriginal) {
				original[tp] = e.css(tp) || '';
				original[td] = e.css(td) || '';
				original[tf] = e.css(tf) || '';
			}

			secondary[property] = transform ? _getTranslation(meta.left, meta.top, use3D) : value;

			properties[tp] = (properties[tp] ? properties[tp] + ',' : '') + property;
			properties[td] = (properties[td] ? properties[td] + ',' : '') + duration + 'ms';
			properties[tf] = (properties[tf] ? properties[tf] + ',' : '') + easing;
		}

		return cssProperties;
	}

	/**
		@private
		@name _isBoxShortcut
		@function
		@description Shortcut to detect if we need to step away from slideToggle, CSS accelerated transitions (to come later with fx.step support)
		@param {object} [prop]
	*/
	function _isBoxShortcut(prop) {
		for (var property in prop) {
			if ((property == 'width' || property == 'height') && (prop[property] == 'show' || prop[property] == 'hide' || prop[property] == 'toggle')) {
				return true;
			}
		}
		return false;
	}


	/**
		@private
		@name _isEmptyObject
		@function
		@description Check if object is empty (<1.4 compatibility)
		@param {object} [obj]
	*/
	function _isEmptyObject(obj) {
		for (var i in obj) {
			return false;
		}
		return true;
	}

	/**
	 * Fetch most appropriate display value for element types
	 * @see  https://github.com/benbarnett/jQuery-Animate-Enhanced/issues/121
	 * @private
	 * @param  {[type]} tagName [description]
	 * @return {[type]}         [description]
	 */
	function _domElementVisibleDisplayValue(tagName) {
		tagName = tagName.toUpperCase();
		var displayValues = {
			'LI'       : 'list-item',
			'TR'       : 'table-row',
			'TD'       : 'table-cell',
			'TH'       : 'table-cell',
			'CAPTION'  : 'table-caption',
			'COL'      : 'table-column',
			'COLGROUP' : 'table-column-group',
			'TFOOT'      : 'table-footer-group',
			'THEAD'      : 'table-header-group',
			'TBODY'      : 'table-row-group'
		};

		return typeof displayValues[tagName] == 'string' ? displayValues[tagName] : 'block';
	}


	/**
		@private
		@name _cleanValue
		@function
		@description Remove 'px' and other artifacts
		@param {variant} [val]
	*/
	function _cleanValue(val) {
		return parseFloat(val.replace(_getUnit(val), ''));
	}


	function _isValidElement(element) {
		var allValid=true;
		element.each(function(index, el) {
			allValid = allValid && el.ownerDocument;
			return allValid;
		});
		return allValid;
	}

	/**
		@private
		@name _appropriateProperty
		@function
		@description Function to check if property should be handled by plugin
		@param {string} [prop]
		@param {variant} [value]
	*/
	function _appropriateProperty(prop, value, element) {
		if (!_isValidElement(element)) {
			return false;
		}

		var is = jQuery.inArray(prop, cssTransitionProperties) > -1;
		if ((prop == 'width' || prop == 'height' || prop == 'opacity') && (parseFloat(value) === parseFloat(element.css(prop)))) is = false;
		return is;
	}


	jQuery.extend({
		/**
			@public
			@name toggle3DByDefault
			@function
			@description Toggle for plugin settings to automatically use translate3d (where available). Usage: $.toggle3DByDefault
		*/
		toggle3DByDefault: function() {
			return use3DByDefault = !use3DByDefault;
		},
		
		
		/**
			@public
			@name toggleDisabledByDefault
			@function
			@description Toggle the plugin to be disabled by default (can be overridden per animation with avoidCSSTransitions)
		*/
		toggleDisabledByDefault: function() {
			return pluginDisabledDefault = !pluginDisabledDefault;
		},


		/**
			@public
			@name setDisabledByDefault
			@function
			@description Set or unset the 'disabled by default' value
		*/
		setDisabledByDefault: function(newValue) {
			return pluginDisabledDefault = newValue;
		}
	});


	/**
		@public
		@name translation
		@function
		@description Get current X and Y translations
	*/
	jQuery.fn.translation = function() {
		if (!this[0]) {
			return null;
		}

		var	elem = this[0],
			cStyle = window.getComputedStyle(elem, null),
			translation = {
				x: 0,
				y: 0
			};

		if (cStyle) {
			for (var i = cssPrefixes.length - 1; i >= 0; i--) {
				var transform = cStyle.getPropertyValue(cssPrefixes[i] + 'transform');
				if (transform && (/matrix/i).test(transform)) {
					var explodedMatrix = transform.replace(/^matrix\(/i, '').split(/, |\)$/g);
					translation = {
						x: parseInt(explodedMatrix[4], 10),
						y: parseInt(explodedMatrix[5], 10)
					};

					break;
				}
			}
		}

		return translation;
	};



	/**
		@public
		@name jQuery.fn.animate
		@function
		@description The enhanced jQuery.animate function
		@param {string} [property]
		@param {string} [speed]
		@param {string} [easing]
		@param {function} [callback]
	*/
	jQuery.fn.animate = function(prop, speed, easing, callback) {
		prop = prop || {};
		var isTranslatable = !(typeof prop['bottom'] !== 'undefined' || typeof prop['right'] !== 'undefined'),
			optall = jQuery.speed(speed, easing, callback),
			callbackQueue = 0,
			propertyCallback = function() {
				callbackQueue--;
				if (callbackQueue === 0) {
					// we're done, trigger the user callback
					if (typeof optall.complete === 'function') {
						optall.complete.apply(this, arguments);
					}
				}
			},
			bypassPlugin = (typeof prop['avoidCSSTransitions'] !== 'undefined') ? prop['avoidCSSTransitions'] : pluginDisabledDefault;

		if (bypassPlugin === true || !cssTransitionsSupported || _isEmptyObject(prop) || _isBoxShortcut(prop) || optall.duration <= 0 || optall.step) {
			return originalAnimateMethod.apply(this, arguments);
		}

		return this[ optall.queue === true ? 'queue' : 'each' ](function() {
			var self = jQuery(this),
				opt = jQuery.extend({}, optall),
				cssCallback = function(e) {
					var selfCSSData = self.data(DATA_KEY) || { original: {} },
						restore = {};

					if (e.eventPhase != 2)  // not at dispatching target (thanks @warappa issue #58)
						return;

					// convert translations to left & top for layout
					if (prop.leaveTransforms !== true) {
						for (var i = cssPrefixes.length - 1; i >= 0; i--) {
							restore[cssPrefixes[i] + 'transform'] = '';
						}
						if (isTranslatable && typeof selfCSSData.meta !== 'undefined') {
							for (var j = 0, dir; (dir = directions[j]); ++j) {
								restore[dir] = selfCSSData.meta[dir + '_o'] + valUnit;
								jQuery(this).css(dir, restore[dir]);
							}
						}
					}

					// remove transition timing functions
					self.
						unbind(transitionEndEvent).
						css(selfCSSData.original).
						css(restore).
						data(DATA_KEY, null);

					// if we used the fadeOut shortcut make sure elements are display:none
					if (prop.opacity === 'hide') {
						self.css({'display': 'none', 'opacity': ''});
					}

					// run the main callback function
					propertyCallback.call(this);
				},
				easings = {
					bounce: CUBIC_BEZIER_OPEN + '0.0, 0.35, .5, 1.3' + CUBIC_BEZIER_CLOSE,
					linear: 'linear',
					swing: 'ease-in-out',

					// Penner equation approximations from Matthew Lein's Ceaser: http://matthewlein.com/ceaser/
					easeInQuad:     CUBIC_BEZIER_OPEN + '0.550, 0.085, 0.680, 0.530' + CUBIC_BEZIER_CLOSE,
					easeInCubic:    CUBIC_BEZIER_OPEN + '0.550, 0.055, 0.675, 0.190' + CUBIC_BEZIER_CLOSE,
					easeInQuart:    CUBIC_BEZIER_OPEN + '0.895, 0.030, 0.685, 0.220' + CUBIC_BEZIER_CLOSE,
					easeInQuint:    CUBIC_BEZIER_OPEN + '0.755, 0.050, 0.855, 0.060' + CUBIC_BEZIER_CLOSE,
					easeInSine:     CUBIC_BEZIER_OPEN + '0.470, 0.000, 0.745, 0.715' + CUBIC_BEZIER_CLOSE,
					easeInExpo:     CUBIC_BEZIER_OPEN + '0.950, 0.050, 0.795, 0.035' + CUBIC_BEZIER_CLOSE,
					easeInCirc:     CUBIC_BEZIER_OPEN + '0.600, 0.040, 0.980, 0.335' + CUBIC_BEZIER_CLOSE,
					easeInBack:     CUBIC_BEZIER_OPEN + '0.600, -0.280, 0.735, 0.045' + CUBIC_BEZIER_CLOSE,
					easeOutQuad:    CUBIC_BEZIER_OPEN + '0.250, 0.460, 0.450, 0.940' + CUBIC_BEZIER_CLOSE,
					easeOutCubic:   CUBIC_BEZIER_OPEN + '0.215, 0.610, 0.355, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutQuart:   CUBIC_BEZIER_OPEN + '0.165, 0.840, 0.440, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutQuint:   CUBIC_BEZIER_OPEN + '0.230, 1.000, 0.320, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutSine:    CUBIC_BEZIER_OPEN + '0.390, 0.575, 0.565, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutExpo:    CUBIC_BEZIER_OPEN + '0.190, 1.000, 0.220, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutCirc:    CUBIC_BEZIER_OPEN + '0.075, 0.820, 0.165, 1.000' + CUBIC_BEZIER_CLOSE,
					easeOutBack:    CUBIC_BEZIER_OPEN + '0.175, 0.885, 0.320, 1.275' + CUBIC_BEZIER_CLOSE,
					easeInOutQuad:  CUBIC_BEZIER_OPEN + '0.455, 0.030, 0.515, 0.955' + CUBIC_BEZIER_CLOSE,
					easeInOutCubic: CUBIC_BEZIER_OPEN + '0.645, 0.045, 0.355, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutQuart: CUBIC_BEZIER_OPEN + '0.770, 0.000, 0.175, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutQuint: CUBIC_BEZIER_OPEN + '0.860, 0.000, 0.070, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutSine:  CUBIC_BEZIER_OPEN + '0.445, 0.050, 0.550, 0.950' + CUBIC_BEZIER_CLOSE,
					easeInOutExpo:  CUBIC_BEZIER_OPEN + '1.000, 0.000, 0.000, 1.000' + CUBIC_BEZIER_CLOSE,
					easeInOutCirc:  CUBIC_BEZIER_OPEN + '0.785, 0.135, 0.150, 0.860' + CUBIC_BEZIER_CLOSE,
					easeInOutBack:  CUBIC_BEZIER_OPEN + '0.680, -0.550, 0.265, 1.550' + CUBIC_BEZIER_CLOSE
				},
				domProperties = {},
				cssEasing = easings[opt.easing || 'swing'] ? easings[opt.easing || 'swing'] : opt.easing || 'swing';

			// seperate out the properties for the relevant animation functions
			for (var p in prop) {
				if (jQuery.inArray(p, pluginOptions) === -1) {
					var isDirection = jQuery.inArray(p, directions) > -1,
						cleanVal = _interpretValue(self, prop[p], p, (isDirection && prop.avoidTransforms !== true));


					if (/**prop.avoidTransforms !== true && **/_appropriateProperty(p, cleanVal, self)) {
						_applyCSSTransition(
							self,
							p,
							opt.duration,
							cssEasing,
							cleanVal, //isDirection && prop.avoidTransforms === true ? cleanVal + valUnit : cleanVal,
							isDirection && prop.avoidTransforms !== true,
							isTranslatable,
							prop.useTranslate3d);

					}
					else {
						domProperties[p] = prop[p];
					}
				}
			}

			self.unbind(transitionEndEvent);

			var selfCSSData = self.data(DATA_KEY);


			if (selfCSSData && !_isEmptyObject(selfCSSData) && !_isEmptyObject(selfCSSData.secondary)) {
				callbackQueue++;

				self.css(selfCSSData.properties);

				// store in a var to avoid any timing issues, depending on animation duration
				var secondary = selfCSSData.secondary;

				// has to be done in a timeout to ensure transition properties are set
				setTimeout(function() {
					self.bind(transitionEndEvent, cssCallback).css(secondary);
				});
			}
			else {
				// it won't get fired otherwise
				opt.queue = false;
			}

			// fire up DOM based animations
			if (!_isEmptyObject(domProperties)) {
				callbackQueue++;
				originalAnimateMethod.apply(self, [domProperties, {
					duration: opt.duration,
					easing: jQuery.easing[opt.easing] ? opt.easing : (jQuery.easing.swing ? 'swing' : 'linear'),
					complete: propertyCallback,
					queue: opt.queue
				}]);
			}

			// strict JS compliance
			return true;
		});
	};

    jQuery.fn.animate.defaults = {};


	/**
		@public
		@name jQuery.fn.stop
		@function
		@description The enhanced jQuery.stop function (resets transforms to left/top)
		@param {boolean} [clearQueue]
		@param {boolean} [gotoEnd]
		@param {boolean} [leaveTransforms] Leave transforms/translations as they are? Default: false (reset translations to calculated explicit left/top props)
	*/
	jQuery.fn.stop = function(clearQueue, gotoEnd, leaveTransforms) {
		if (!cssTransitionsSupported) return originalStopMethod.apply(this, [clearQueue, gotoEnd]);

		// clear the queue?
		if (clearQueue) this.queue([]);

		// route to appropriate stop methods
		this.each(function() {
			var self = jQuery(this),
				selfCSSData = self.data(DATA_KEY);

			// is this a CSS transition?
			if (selfCSSData && !_isEmptyObject(selfCSSData)) {
				var i, restore = {};

				if (gotoEnd) {
					// grab end state properties
					restore = selfCSSData.secondary;

					if (!leaveTransforms && typeof selfCSSData.meta['left_o'] !== undefined || typeof selfCSSData.meta['top_o'] !== undefined) {
						restore['left'] = typeof selfCSSData.meta['left_o'] !== undefined ? selfCSSData.meta['left_o'] : 'auto';
						restore['top'] = typeof selfCSSData.meta['top_o'] !== undefined ? selfCSSData.meta['top_o'] : 'auto';

						// remove the transformations
						for (i = cssPrefixes.length - 1; i >= 0; i--) {
							restore[cssPrefixes[i]+'transform'] = '';
						}
					}
				} else if (!_isEmptyObject(selfCSSData.secondary)) {
					var cStyle = window.getComputedStyle(self[0], null);
					if (cStyle) {
						// grab current properties
						for (var prop in selfCSSData.secondary) {
							if(selfCSSData.secondary.hasOwnProperty(prop)) {
								prop = prop.replace(rupper, '-$1').toLowerCase();
								restore[prop] = cStyle.getPropertyValue(prop);

								// is this a matrix property? extract left and top and apply
								if (!leaveTransforms && (/matrix/i).test(restore[prop])) {
									var explodedMatrix = restore[prop].replace(/^matrix\(/i, '').split(/, |\)$/g);

									// apply the explicit left/top props
									restore['left'] = (parseFloat(explodedMatrix[4]) + parseFloat(self.css('left')) + valUnit) || 'auto';
									restore['top'] = (parseFloat(explodedMatrix[5]) + parseFloat(self.css('top')) + valUnit) || 'auto';

									// remove the transformations
									for (i = cssPrefixes.length - 1; i >= 0; i--) {
										restore[cssPrefixes[i]+'transform'] = '';
									}
								}
							}
						}
					}
				}

				// Remove transition timing functions
				// Moving to seperate thread (re: Animation reverts when finished in Android - issue #91)
				self.unbind(transitionEndEvent);
				self.
					css(selfCSSData.original).
					css(restore).
					data(DATA_KEY, null);
			}
			else {
				// dom transition
				originalStopMethod.apply(self, [clearQueue, gotoEnd]);
			}
		});

		return this;
	};
})(jQuery, jQuery.fn.animate, jQuery.fn.stop);
/*!
Waypoints - 4.0.0
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
(function() {
  'use strict'

  var keyCounter = 0
  var allWaypoints = {}

  /* http://imakewebthings.com/waypoints/api/waypoint */
  function Waypoint(options) {
    if (!options) {
      throw new Error('No options passed to Waypoint constructor')
    }
    if (!options.element) {
      throw new Error('No element option passed to Waypoint constructor')
    }
    if (!options.handler) {
      throw new Error('No handler option passed to Waypoint constructor')
    }

    this.key = 'waypoint-' + keyCounter
    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)
    this.element = this.options.element
    this.adapter = new Waypoint.Adapter(this.element)
    this.callback = options.handler
    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'
    this.enabled = this.options.enabled
    this.triggerPoint = null
    this.group = Waypoint.Group.findOrCreate({
      name: this.options.group,
      axis: this.axis
    })
    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)

    if (Waypoint.offsetAliases[this.options.offset]) {
      this.options.offset = Waypoint.offsetAliases[this.options.offset]
    }
    this.group.add(this)
    this.context.add(this)
    allWaypoints[this.key] = this
    keyCounter += 1
  }

  /* Private */
  Waypoint.prototype.queueTrigger = function(direction) {
    this.group.queueTrigger(this, direction)
  }

  /* Private */
  Waypoint.prototype.trigger = function(args) {
    if (!this.enabled) {
      return
    }
    if (this.callback) {
      this.callback.apply(this, args)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy */
  Waypoint.prototype.destroy = function() {
    this.context.remove(this)
    this.group.remove(this)
    delete allWaypoints[this.key]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable */
  Waypoint.prototype.disable = function() {
    this.enabled = false
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable */
  Waypoint.prototype.enable = function() {
    this.context.refresh()
    this.enabled = true
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/next */
  Waypoint.prototype.next = function() {
    return this.group.next(this)
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/previous */
  Waypoint.prototype.previous = function() {
    return this.group.previous(this)
  }

  /* Private */
  Waypoint.invokeAll = function(method) {
    var allWaypointsArray = []
    for (var waypointKey in allWaypoints) {
      allWaypointsArray.push(allWaypoints[waypointKey])
    }
    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {
      allWaypointsArray[i][method]()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy-all */
  Waypoint.destroyAll = function() {
    Waypoint.invokeAll('destroy')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable-all */
  Waypoint.disableAll = function() {
    Waypoint.invokeAll('disable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable-all */
  Waypoint.enableAll = function() {
    Waypoint.invokeAll('enable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/refresh-all */
  Waypoint.refreshAll = function() {
    Waypoint.Context.refreshAll()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-height */
  Waypoint.viewportHeight = function() {
    return window.innerHeight || document.documentElement.clientHeight
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-width */
  Waypoint.viewportWidth = function() {
    return document.documentElement.clientWidth
  }

  Waypoint.adapters = []

  Waypoint.defaults = {
    context: window,
    continuous: true,
    enabled: true,
    group: 'default',
    horizontal: false,
    offset: 0
  }

  Waypoint.offsetAliases = {
    'bottom-in-view': function() {
      return this.context.innerHeight() - this.adapter.outerHeight()
    },
    'right-in-view': function() {
      return this.context.innerWidth() - this.adapter.outerWidth()
    }
  }

  window.Waypoint = Waypoint
}())
;(function() {
  'use strict'

  function requestAnimationFrameShim(callback) {
    window.setTimeout(callback, 1000 / 60)
  }

  var keyCounter = 0
  var contexts = {}
  var Waypoint = window.Waypoint
  var oldWindowLoad = window.onload

  /* http://imakewebthings.com/waypoints/api/context */
  function Context(element) {
    this.element = element
    this.Adapter = Waypoint.Adapter
    this.adapter = new this.Adapter(element)
    this.key = 'waypoint-context-' + keyCounter
    this.didScroll = false
    this.didResize = false
    this.oldScroll = {
      x: this.adapter.scrollLeft(),
      y: this.adapter.scrollTop()
    }
    this.waypoints = {
      vertical: {},
      horizontal: {}
    }

    element.waypointContextKey = this.key
    contexts[element.waypointContextKey] = this
    keyCounter += 1

    this.createThrottledScrollHandler()
    this.createThrottledResizeHandler()
  }

  /* Private */
  Context.prototype.add = function(waypoint) {
    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'
    this.waypoints[axis][waypoint.key] = waypoint
    this.refresh()
  }

  /* Private */
  Context.prototype.checkEmpty = function() {
    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)
    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)
    if (horizontalEmpty && verticalEmpty) {
      this.adapter.off('.waypoints')
      delete contexts[this.key]
    }
  }

  /* Private */
  Context.prototype.createThrottledResizeHandler = function() {
    var self = this

    function resizeHandler() {
      self.handleResize()
      self.didResize = false
    }

    this.adapter.on('resize.waypoints', function() {
      if (!self.didResize) {
        self.didResize = true
        Waypoint.requestAnimationFrame(resizeHandler)
      }
    })
  }

  /* Private */
  Context.prototype.createThrottledScrollHandler = function() {
    var self = this
    function scrollHandler() {
      self.handleScroll()
      self.didScroll = false
    }

    this.adapter.on('scroll.waypoints', function() {
      if (!self.didScroll || Waypoint.isTouch) {
        self.didScroll = true
        Waypoint.requestAnimationFrame(scrollHandler)
      }
    })
  }

  /* Private */
  Context.prototype.handleResize = function() {
    Waypoint.Context.refreshAll()
  }

  /* Private */
  Context.prototype.handleScroll = function() {
    var triggeredGroups = {}
    var axes = {
      horizontal: {
        newScroll: this.adapter.scrollLeft(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left'
      },
      vertical: {
        newScroll: this.adapter.scrollTop(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      var isForward = axis.newScroll > axis.oldScroll
      var direction = isForward ? axis.forward : axis.backward

      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint
        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint
        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint
        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint
        if (crossedForward || crossedBackward) {
          waypoint.queueTrigger(direction)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    for (var groupKey in triggeredGroups) {
      triggeredGroups[groupKey].flushTriggers()
    }

    this.oldScroll = {
      x: axes.horizontal.newScroll,
      y: axes.vertical.newScroll
    }
  }

  /* Private */
  Context.prototype.innerHeight = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportHeight()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerHeight()
  }

  /* Private */
  Context.prototype.remove = function(waypoint) {
    delete this.waypoints[waypoint.axis][waypoint.key]
    this.checkEmpty()
  }

  /* Private */
  Context.prototype.innerWidth = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportWidth()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerWidth()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-destroy */
  Context.prototype.destroy = function() {
    var allWaypoints = []
    for (var axis in this.waypoints) {
      for (var waypointKey in this.waypoints[axis]) {
        allWaypoints.push(this.waypoints[axis][waypointKey])
      }
    }
    for (var i = 0, end = allWaypoints.length; i < end; i++) {
      allWaypoints[i].destroy()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-refresh */
  Context.prototype.refresh = function() {
    /*eslint-disable eqeqeq */
    var isWindow = this.element == this.element.window
    /*eslint-enable eqeqeq */
    var contextOffset = isWindow ? undefined : this.adapter.offset()
    var triggeredGroups = {}
    var axes

    this.handleScroll()
    axes = {
      horizontal: {
        contextOffset: isWindow ? 0 : contextOffset.left,
        contextScroll: isWindow ? 0 : this.oldScroll.x,
        contextDimension: this.innerWidth(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left',
        offsetProp: 'left'
      },
      vertical: {
        contextOffset: isWindow ? 0 : contextOffset.top,
        contextScroll: isWindow ? 0 : this.oldScroll.y,
        contextDimension: this.innerHeight(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up',
        offsetProp: 'top'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var adjustment = waypoint.options.offset
        var oldTriggerPoint = waypoint.triggerPoint
        var elementOffset = 0
        var freshWaypoint = oldTriggerPoint == null
        var contextModifier, wasBeforeScroll, nowAfterScroll
        var triggeredBackward, triggeredForward

        if (waypoint.element !== waypoint.element.window) {
          elementOffset = waypoint.adapter.offset()[axis.offsetProp]
        }

        if (typeof adjustment === 'function') {
          adjustment = adjustment.apply(waypoint)
        }
        else if (typeof adjustment === 'string') {
          adjustment = parseFloat(adjustment)
          if (waypoint.options.offset.indexOf('%') > - 1) {
            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)
          }
        }

        contextModifier = axis.contextScroll - axis.contextOffset
        waypoint.triggerPoint = elementOffset + contextModifier - adjustment
        wasBeforeScroll = oldTriggerPoint < axis.oldScroll
        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll
        triggeredBackward = wasBeforeScroll && nowAfterScroll
        triggeredForward = !wasBeforeScroll && !nowAfterScroll

        if (!freshWaypoint && triggeredBackward) {
          waypoint.queueTrigger(axis.backward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (!freshWaypoint && triggeredForward) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    Waypoint.requestAnimationFrame(function() {
      for (var groupKey in triggeredGroups) {
        triggeredGroups[groupKey].flushTriggers()
      }
    })

    return this
  }

  /* Private */
  Context.findOrCreateByElement = function(element) {
    return Context.findByElement(element) || new Context(element)
  }

  /* Private */
  Context.refreshAll = function() {
    for (var contextId in contexts) {
      contexts[contextId].refresh()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-find-by-element */
  Context.findByElement = function(element) {
    return contexts[element.waypointContextKey]
  }

  window.onload = function() {
    if (oldWindowLoad) {
      oldWindowLoad()
    }
    Context.refreshAll()
  }

  Waypoint.requestAnimationFrame = function(callback) {
    var requestFn = window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      requestAnimationFrameShim
    requestFn.call(window, callback)
  }
  Waypoint.Context = Context
}())
;(function() {
  'use strict'

  function byTriggerPoint(a, b) {
    return a.triggerPoint - b.triggerPoint
  }

  function byReverseTriggerPoint(a, b) {
    return b.triggerPoint - a.triggerPoint
  }

  var groups = {
    vertical: {},
    horizontal: {}
  }
  var Waypoint = window.Waypoint

  /* http://imakewebthings.com/waypoints/api/group */
  function Group(options) {
    this.name = options.name
    this.axis = options.axis
    this.id = this.name + '-' + this.axis
    this.waypoints = []
    this.clearTriggerQueues()
    groups[this.axis][this.name] = this
  }

  /* Private */
  Group.prototype.add = function(waypoint) {
    this.waypoints.push(waypoint)
  }

  /* Private */
  Group.prototype.clearTriggerQueues = function() {
    this.triggerQueues = {
      up: [],
      down: [],
      left: [],
      right: []
    }
  }

  /* Private */
  Group.prototype.flushTriggers = function() {
    for (var direction in this.triggerQueues) {
      var waypoints = this.triggerQueues[direction]
      var reverse = direction === 'up' || direction === 'left'
      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)
      for (var i = 0, end = waypoints.length; i < end; i += 1) {
        var waypoint = waypoints[i]
        if (waypoint.options.continuous || i === waypoints.length - 1) {
          waypoint.trigger([direction])
        }
      }
    }
    this.clearTriggerQueues()
  }

  /* Private */
  Group.prototype.next = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    var isLast = index === this.waypoints.length - 1
    return isLast ? null : this.waypoints[index + 1]
  }

  /* Private */
  Group.prototype.previous = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    return index ? this.waypoints[index - 1] : null
  }

  /* Private */
  Group.prototype.queueTrigger = function(waypoint, direction) {
    this.triggerQueues[direction].push(waypoint)
  }

  /* Private */
  Group.prototype.remove = function(waypoint) {
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    if (index > -1) {
      this.waypoints.splice(index, 1)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/first */
  Group.prototype.first = function() {
    return this.waypoints[0]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/last */
  Group.prototype.last = function() {
    return this.waypoints[this.waypoints.length - 1]
  }

  /* Private */
  Group.findOrCreate = function(options) {
    return groups[options.axis][options.name] || new Group(options)
  }

  Waypoint.Group = Group
}())
;(function() {
  'use strict'

  var $ = window.jQuery
  var Waypoint = window.Waypoint

  function JQueryAdapter(element) {
    this.$element = $(element)
  }

  $.each([
    'innerHeight',
    'innerWidth',
    'off',
    'offset',
    'on',
    'outerHeight',
    'outerWidth',
    'scrollLeft',
    'scrollTop'
  ], function(i, method) {
    JQueryAdapter.prototype[method] = function() {
      var args = Array.prototype.slice.call(arguments)
      return this.$element[method].apply(this.$element, args)
    }
  })

  $.each([
    'extend',
    'inArray',
    'isEmptyObject'
  ], function(i, method) {
    JQueryAdapter[method] = $[method]
  })

  Waypoint.adapters.push({
    name: 'jquery',
    Adapter: JQueryAdapter
  })
  Waypoint.Adapter = JQueryAdapter
}())
;(function() {
  'use strict'

  var Waypoint = window.Waypoint

  function createExtension(framework) {
    return function() {
      var waypoints = []
      var overrides = arguments[0]

      if (framework.isFunction(arguments[0])) {
        overrides = framework.extend({}, arguments[1])
        overrides.handler = arguments[0]
      }

      this.each(function() {
        var options = framework.extend({}, overrides, {
          element: this
        })
        if (typeof options.context === 'string') {
          options.context = framework(this).closest(options.context)[0]
        }
        waypoints.push(new Waypoint(options))
      })

      return waypoints
    }
  }

  if (window.jQuery) {
    window.jQuery.fn.waypoint = createExtension(window.jQuery)
  }
  if (window.Zepto) {
    window.Zepto.fn.waypoint = createExtension(window.Zepto)
  }
}())
;
/*!
Waypoints Inview Shortcut - 4.0.0
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(){}function e(t){this.options=i.Adapter.extend({},e.defaults,t),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}var i=window.Waypoint;e.prototype.createWaypoints=function(){for(var t={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},e=0,i=t[this.axis].length;i>e;e++){var n=t[this.axis][e];this.createWaypoint(n)}},e.prototype.createWaypoint=function(t){var e=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(t){return function(i){e.options[t[i]].call(e,i)}}(t),offset:t.offset,horizontal:this.options.horizontal}))},e.prototype.destroy=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].destroy();this.waypoints=[]},e.prototype.disable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].disable()},e.prototype.enable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].enable()},e.defaults={context:window,enabled:!0,enter:t,entered:t,exit:t,exited:t},i.Inview=e}();
/*!
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery outside events
//
// *Version: 1.1, Last updated: 3/16/2010*
//
// Project Home - http://benalman.com/projects/jquery-outside-events-plugin/
// GitHub       - http://github.com/cowboy/jquery-outside-events/
// Source       - http://github.com/cowboy/jquery-outside-events/raw/master/jquery.ba-outside-events.js
// (Minified)   - http://github.com/cowboy/jquery-outside-events/raw/master/jquery.ba-outside-events.min.js (0.9kb)
//
// About: License
//
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
//
// About: Examples
//
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
//
// clickoutside - http://benalman.com/code/projects/jquery-outside-events/examples/clickoutside/
// dblclickoutside - http://benalman.com/code/projects/jquery-outside-events/examples/dblclickoutside/
// mouseoveroutside - http://benalman.com/code/projects/jquery-outside-events/examples/mouseoveroutside/
// focusoutside - http://benalman.com/code/projects/jquery-outside-events/examples/focusoutside/
//
// About: Support and Testing
//
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
//
// jQuery Versions - 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-outside-events/unit/
//
// About: Release History
//
// 1.1 - (3/16/2010) Made "clickoutside" plugin more general, resulting in a
//       whole new plugin with more than a dozen default "outside" events and
//       a method that can be used to add new ones.
// 1.0 - (2/27/2010) Initial release
//
// Topic: Default "outside" events
//
// Note that each "outside" event is powered by an "originating" event. Only
// when the originating event is triggered on an element outside the element
// to which that outside event is bound will the bound event be triggered.
//
// Because each outside event is powered by a separate originating event,
// stopping propagation of that originating event will prevent its related
// outside event from triggering.
//
//  OUTSIDE EVENT     - ORIGINATING EVENT
//  clickoutside      - click
//  dblclickoutside   - dblclick
//  focusoutside      - focusin
//  bluroutside       - focusout
//  mousemoveoutside  - mousemove
//  mousedownoutside  - mousedown
//  mouseupoutside    - mouseup
//  mouseoveroutside  - mouseover
//  mouseoutoutside   - mouseout
//  keydownoutside    - keydown
//  keypressoutside   - keypress
//  keyupoutside      - keyup
//  changeoutside     - change
//  selectoutside     - select
//  submitoutside     - submit
//  touchstartoutside - touchstart
//  touchendoutside   - touchend

(function($,doc,outside){
  '$:nomunge'; // Used by YUI compressor.

  $.map(
    // All these events will get an "outside" event counterpart by default.
    'click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup touchstart touchend'.split(' '),
    function( event_name ) { jq_addOutsideEvent( event_name ); }
  );

  // The focus and blur events are really focusin and focusout when it comes
  // to delegation, so they are a special case.
  jq_addOutsideEvent( 'focusin',  'focus' + outside );
  jq_addOutsideEvent( 'focusout', 'blur' + outside );

  // Method: jQuery.addOutsideEvent
  //
  // Register a new "outside" event to be with this method. Adding an outside
  // event that already exists will probably blow things up, so check the
  // <Default "outside" events> list before trying to add a new one.
  //
  // Usage:
  //
  // > jQuery.addOutsideEvent( event_name [, outside_event_name ] );
  //
  // Arguments:
  //
  //  event_name - (String) The name of the originating event that the new
  //    "outside" event will be powered by. This event can be a native or
  //    custom event, as long as it bubbles up the DOM tree.
  //  outside_event_name - (String) An optional name for the new "outside"
  //    event. If omitted, the outside event will be named whatever the
  //    value of `event_name` is plus the "outside" suffix.
  //
  // Returns:
  //
  //  Nothing.

  $.addOutsideEvent = jq_addOutsideEvent;

  function jq_addOutsideEvent( event_name, outside_event_name ) {

    // The "outside" event name.
    outside_event_name = outside_event_name || event_name + outside;

    // A jQuery object containing all elements to which the "outside" event is
    // bound.
    var elems = $(),

      // The "originating" event, namespaced for easy unbinding.
      event_namespaced = event_name + '.' + outside_event_name + '-special-event';

    // Event: outside events
    //
    // An "outside" event is triggered on an element when its corresponding
    // "originating" event is triggered on an element outside the element in
    // question. See the <Default "outside" events> list for more information.
    //
    // Usage:
    //
    // > jQuery('selector').bind( 'clickoutside', function(event) {
    // >   var clicked_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'dblclickoutside', function(event) {
    // >   var double_clicked_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'mouseoveroutside', function(event) {
    // >   var moused_over_elem = $(event.target);
    // >   ...
    // > });
    //
    // > jQuery('selector').bind( 'focusoutside', function(event) {
    // >   var focused_elem = $(event.target);
    // >   ...
    // > });
    //
    // You get the idea, right?

    $.event.special[ outside_event_name ] = {

      // Called only when the first "outside" event callback is bound per
      // element.
      setup: function(){

        // Add this element to the list of elements to which this "outside"
        // event is bound.
        elems = elems.add( this );

        // If this is the first element getting the event bound, bind a handler
        // to document to catch all corresponding "originating" events.
        if ( elems.length === 1 ) {
          $(doc).bind( event_namespaced, handle_event );
        }
      },

      // Called only when the last "outside" event callback is unbound per
      // element.
      teardown: function(){

        // Remove this element from the list of elements to which this
        // "outside" event is bound.
        elems = elems.not( this );

        // If this is the last element removed, remove the "originating" event
        // handler on document that powers this "outside" event.
        if ( elems.length === 0 ) {
          $(doc).unbind( event_namespaced );
        }
      },

      // Called every time a "outside" event callback is bound to an element.
      add: function( handleObj ) {
        var old_handler = handleObj.handler;

        // This function is executed every time the event is triggered. This is
        // used to override the default event.target reference with one that is
        // more useful.
        handleObj.handler = function( event, elem ) {

          // Set the event object's .target property to the element that the
          // user interacted with, not the element that the "outside" event was
          // was triggered on.
          event.target = elem;

          // Execute the actual bound handler.
          old_handler.apply( this, arguments );
        };
      }
    };

    // When the "originating" event is triggered..
    function handle_event( event ) {

      // Iterate over all elements to which this "outside" event is bound.
      $(elems).each(function(){
        var elem = $(this);

        // If this element isn't the element on which the event was triggered,
        // and this element doesn't contain said element, then said element is
        // considered to be outside, and the "outside" event will be triggered!
        if ( this !== event.target && !elem.has(event.target).length ) {

          // Use triggerHandler instead of trigger so that the "outside" event
          // doesn't bubble. Pass in the "originating" event's .target so that
          // the "outside" event.target can be overridden with something more
          // meaningful.
          elem.triggerHandler( outside_event_name, [ event.target ] );
        }
      });
    };

  };

})(jQuery,document,"outside");

/*!
 * samsung.com - Phase2 - Javascript Namespace Defined
 * src : js/src/smg/aem/namespace.js
 *
 * @version 1.0.0
 * @since 2016.02.01
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		/**
		 * samsung.com namespace
		 * @name  window.smg
		 * @namespace
		 */
		win.smg = {};
	}

	/**
	 * Phase2 AEM Namespace
	 * @name  window.smg.aem
	 * @namespace
	 */
	win.smg.aem = win.smg.aem || {};

	/**
	 * Phase2 AEM Static Values Defined
	 */
	win.smg.aem.varStatic = win.smg.aem.varStatic || {};

	/**
	 * Phase2 AEM Custom Events Defined
	 */
	win.smg.aem.customEvent = win.smg.aem.customEvent || {};

	/**
	 * Phase2 AEM Utility Script Defined
	 */
	win.smg.aem.util = win.smg.aem.util || {};

	/**
	 * Phase2 AEM Common Script Defined
	 */
	win.smg.aem.common = win.smg.aem.common || {};

	/**
	 * Phase2 AEM Components Namespace
	 * @name  window.smg.aem.components
	 * @namespace
	 */
	win.smg.aem.components = win.smg.aem.components || {};

	/**
	 * Phase2 Home Components Namespace
	 * @name  window.smg.aem.components.home
	 * @namespace
	 */
	win.smg.aem.components.home = win.smg.aem.components.home || {};

	/**
	 * Phase2 AboutSamsung Components Namespace
	 * @name  window.smg.aem.components.aboutsamsung
	 * @namespace
	 */
	win.smg.aem.components.aboutsamsung = win.smg.aem.components.aboutsamsung || {};

	/**
	 * Phase2 AEM Templates Namespace
	 * @name  window.smg.aem.templates
	 * @namespace
	 */
	win.smg.aem.templates = win.smg.aem.templates || {};

	/**
	 * Phase2 Home Templates Namespace
	 * @name  window.smg.aem.templates.home
	 * @namespace
	 */
	win.smg.aem.templates.home = win.smg.aem.templates.home || {};
})(window);
/*!
 * samsung.com - Phase2 - Utility Script Defined
 * src : js/src/smg/aem/static/smg.aem.util.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
    'use strict';

    if('undefined' === typeof win.smg) {
        win.smg = {};
    }

    if('undefined' === typeof win.smg.aem) {
        win.smg.aem = {};
    }

    if('undefined' === typeof win.smg.aem.util) {
        win.smg.aem.util = {};
    }

    var hasOwnProperty = Object.prototype.hasOwnProperty,
        doc = win.document;

    // window safari check
    (function(){
        var anNetscape = (navigator.appName == "Netscape"),
            avMac = (navigator.appVersion.indexOf("Mac") != -1),
            uaSafari = (navigator.userAgent.indexOf("Safari") != -1),
            uaChrome = (navigator.userAgent.indexOf("Chrome") != -1);
        win.isPcSafari = ( anNetscape && !avMac && uaSafari && !uaChrome ) ? true : false;
    })();

    /**
     * @name window.smg.aem.util
     * @namespace
     * @requires jQuery
     * @requires namespace.js
     */
    win.smg.aem.util = (function() {
        return {
            isArray : function(arr) {
                return 'array' === $.type(arr);
            },
            def : function(org, src) {
                for (var prop in src) {
                    if (!hasOwnProperty.call(src, prop)) continue;
                    if ('object' === $.type(org[prop])) {
                        org[prop] = (this.isArray(org[prop]) ? src[prop].slice(0) : this.def(org[prop], src[prop]));
                    } else {
                        org[prop] = src[prop];
                    }
                }
                return org;
            },
            winSize : function() {
                var win_wh = {
                    w : (!win.isPcSafari) ? win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth : $(win).width(),
                    h : (!win.isPcSafari) ? win.innerHeight || doc.documentElement.clientHeight || doc.body.clientHeight : $(win).height()
                };
                return win_wh;
            },
            getQueryStr : function(href) {
                href = href || win.location.href;

                var vars = {};
                href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    vars[key] = value;
                });
                return vars;
            },
            winOpener : function(args) {
                var defParams =   {
                    url 		: '//www.samsung.com',
                    name 		: 'smg_opener_' + new Date().getTime(),
                    width 		: 400,
                    height 		: 400,
                    left 		: null,
                    top 		: null,
                    scrollbars	: 'no',
                    toolbar 	: 'no',
                    location 	: 'no',
                    directories : 'no',
                    status 		: 'no',
                    menubar 	: 'no',
                    resizable 	: 'no'
                }, opener, setting, options;

                options 		= win.smg.util.def(defParams, (args || {}));
                options.left 	= options.left || ( screen.width / 2 - options.width / 2 );
                options.top 	= options.top || ( screen.height / 2 - options.height / 2 );
                setting = '';

                for( var prop in options ) {
                    if( prop != 'url' && prop != 'name' ) {
                        setting += ',' + prop + '=' + options[ prop ];
                    }
                }
                setting = setting.substr( 1, setting.length );
                opener = window.open( options.url, options.name, setting );
                return opener;
            },
            imgLoader : function(img, callback) {
                img.each(function() {
                    var cb = (callback || function() {});
					/*for IE 10-*/
                    if (this.complete || $(this).height() > 0) {
                        cb.apply(img);
                    } else {
                        $(this).load(function() {
                            cb.apply(img);
                        });
                    }
                });
            },
            vwOrientationUpdate : function(css) {
                $(win).on('orientationchange', function() {
                    var vwElem = $(css || '.js-vw');
                    if (!vwElem.size()) {
                        return;
                    }
                    vwElem.css('display', 'none').height();
                    vwElem.css('display', '');
                });
            },
            iPadVWRender : function() {
                if (navigator.userAgent.match(/iPad/i)) {
                    this.vwOrientationUpdate('.js-vw');
                }
            },
            Cookie : function() {
                var defParams = {
                    expires : '', path: '/', domain : '', secure : ''
                };

                return {
                    setCookie : function(cname, cvalue, exdays) {
                        var d = new Date();
                        d.setTime(d.getTime() + ((exdays || 0) * 24 * 60 * 60 * 1000));

                        var opt = win.smg.aem.util.def(defParams, { expires : d });
                        document.cookie = [
                            cname, '=', cvalue,
                            opt.expires ? '; expires=' + opt.expires.toUTCString() : '',
                            opt.path    ? '; path=' + opt.path : '',
                            opt.domain  ? '; domain=' + opt.domain : '',
                            opt.secure  ? '; secure' : ''
                        ].join('');
                    },
                    getCookie : function(cname) {
                        var name = cname + '=',
                            ca = document.cookie.split(';'),
                            c;

                        for(var i=0, leng=ca.length; i<leng; i++) {
                            c = ca[i];
                            while (c.charAt(0)==' ') {
                                c = c.substring(1);
                            }
                            if (c.indexOf(name) != -1) {
                                return c.substring(name.length,c.length);
                            }
                        }
                        return '';
                    }
                };
            },
            loadCSS : function(urls, cb, nocache) {
                if (!urls || 'string' === $.type(urls)) urls = [urls];

                var head = $('head'), dfds = [];
                $.map(urls, function(url) {
                    var _dfd = $.Deferred();
                    dfds.push(_dfd);
                    $('<link>').attr({
                        'rel' : 'stylesheet', type : 'text/css',
                        href : url + (!!nocache ? '?_ts=' + new Date().getTime() : '')
                    }).appendTo(head).load(function() {
                        _dfd.resolve();
                    });
                });

                $.when.apply($, dfds).done(function() {
                    if ($.isFunction(cb)) cb();
                });
            },
            getServerTime : function(callBack, serverUrl) {
                serverUrl = serverUrl || window.location.href.toString();
                callBack = callBack || function() {};

                $.ajax({
                    url : serverUrl,
                    async : false,
                    cashe : false
                })
                    .done(function(res, status, xhr) {
                        callBack(new Date(xhr.getResponseHeader('Date')));
                    });
            },
            getRestrictBytes : function(str, maxBytes) {
                var strLeng = str.length,
                    rByte = 0,
                    rLen = 0,
                    strChar = '';

                maxBytes = maxBytes || 100;

                for (var i=0; i<strLeng; i++) {
                    strChar = str.charAt(i);
                    if (escape(strChar).length > 4) {
                        rByte += 2;
                    } else {
                        rByte++;
                    }

                    if(rByte <= maxBytes) {
                        rLen = i+1;
                    }
                }

                return {
                    bytes : rByte,
                    rectLeng : rLen
                }
            },
            isAemEditMode : function() {
                var flag = false;
                if (win.parent && win.frameElement && $(win.parent.document).find('.foundation-authoring-ui-mode').size()) {
                    flag = true;
                }
                return flag;
            },
            slickOptionControlFuncs : {
                changeOpt : function(targetCarousel, targetOpt, eachDataTarget) {
                    var dataSlickOpt = targetCarousel.data('slick-opt');
                    if (dataSlickOpt !== undefined) {
                        var	changeOpt = $.extend(true, {}, targetOpt),
                        autoSlide = dataSlickOpt.autoSlideOpts.autoSlide,
                        autoSlideTime = dataSlickOpt.autoSlideOpts.autoSlideTime,
                        isInfinite = dataSlickOpt.infinite;

                        changeOpt.autoplay = autoSlide;
                        changeOpt.autoplaySpeed = autoSlideTime;
                        changeOpt.infinite = isInfinite;

                        if (targetOpt.responsive) {
                            changeOpt.responsive[0].settings.infinite = isInfinite;
                        }
                        
                        targetCarousel.data('isAutoSlide', autoSlide);
                        if (eachDataTarget !== undefined) {
                            eachDataTarget.data('isAutoSlide', autoSlide);
                        }
                        return changeOpt;
                    } else {
                        return targetOpt;
                    }
                },
                setToggleButton: function(targetCarousel) {
                    var isAutoSlide = targetCarousel.data('isAutoSlide');
                    targetCarousel = (targetCarousel.hasClass('s-slick')) ? targetCarousel : targetCarousel.find('.s-slick');
                    if (isAutoSlide === undefined || isAutoSlide === false) {return;}
                    if (!targetCarousel.find('.slick-dots').length && !targetCarousel.siblings('.s-slick-dots').find('.slick-dots').length) {return;}
                    var dotsStr = '';
                    var toggleBtnWrap;
                    var dotsAppendEl;
                    var appendType;

                    if (isAutoSlide) {
                        dotsStr += '<li class="slick-dots-autoplay">';
                        dotsStr += '<button class="s-autoplay-pause">Auto Play</button>';
                        dotsStr += '</li>';
                    } else {
                        dotsStr += '<li class="slick-dots-autoplay">';
                        dotsStr += '<button class="s-autoplay-play">Auto Play</button>';
                        dotsStr += '</li>';
                    }

                    if (targetCarousel.find('.slick-dots').length) {
                        dotsAppendEl = targetCarousel.find('.slick-dots');
                        appendType = 'smg';
                    } else if (targetCarousel.siblings('.s-slick-dots').length) {
                        dotsAppendEl = targetCarousel.siblings('.s-slick-dots').find('.slick-dots');
                        appendType = 'cl';
                    }

                    if (dotsAppendEl.length) {
                        dotsAppendEl.append($(dotsStr));
                        toggleBtnWrap = dotsAppendEl.find('.slick-dots-autoplay');
                    }

                    var getToggleButtonStatus = function(toggleBtn) {
                        if (toggleBtn.hasClass('s-autoplay-pause')) {
                            targetCarousel.slick('slickPlay');
                        } else {
                            targetCarousel.slick('slickPause');
                        }
                    };

                    var autoSlideToggleHandler = function(e) {
                        var toggleBtn = $(e.currentTarget).find('> button');
                        if (toggleBtn.hasClass('s-autoplay-pause')) {
                            toggleBtn.removeClass('s-autoplay-pause');
                            toggleBtn.addClass('s-autoplay-play');
                            targetCarousel.slick('slickPause');
                        } else {
                            toggleBtn.removeClass('s-autoplay-play');
                            toggleBtn.addClass('s-autoplay-pause');
                            targetCarousel.slick('slickPlay');
                        }
                    };

                    var bindToggleClickEvent = function() {
                        toggleBtnWrap.off('click.smgaemutil').on('click.smgaemutil', autoSlideToggleHandler);
                    };
            
                    var breakpointChangeHandler = function(e) {
                        var target = targetCarousel.data('detachedButton');
                        var	appendType = targetCarousel.data('appendType');
                        
                        if (appendType === 'smg') {
                            targetCarousel.find('.slick-dots').append(target);
                        } else if (appendType === 'cl') {
                            targetCarousel.siblings('.s-slick-dots').find('.slick-dots').append(target);
                        }
                        
                        bindToggleClickEvent();
                        getToggleButtonStatus(target.find('> button'));
                    };

                    targetCarousel.data('detachedButton', toggleBtnWrap);
                    targetCarousel.data('appendType', appendType);
                    targetCarousel.off('breakpoint.smgaemutil').on('breakpoint.smgaemutil', breakpointChangeHandler);
                    bindToggleClickEvent();
                }
            }
        };
    })();

    win.smg.aem.util.cookie = new win.smg.aem.util.Cookie();

    $(function() {
        win.smg.aem.util.iPadVWRender();
    });
})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Static Values Defined
 * src : js/src/smg/aem/static/smg.aem.static.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.varStatic) {
		win.smg.aem.varStatic = {};
	}

	/**
	 * @name window.smg.aem.varStatic
	 * @namespace
	 * @requires namespace.js
	 */
	win.smg.aem.varStatic = {
		CSS : {
			VIDEO_OPEN : 'video-open',
			LAYER_OPENED : 'layer-opened-mo',

			SEARCH_POS : 'search-pos',
			NAV_OPEN : 'nav-open',
			NAV_CLOSE : 'nav-close',

			HAS_ANIMATED : 'has-animated',

			IS_SHOW : 'is-show',
			IS_HIDE : 'is-hide',
			IS_OPEN : 'is-open',
			IS_SELECT : 'is-select',

			JS_IMG_SRC : 'js-img-src',
			JS_IMG_LAZY : 'js-img-lazy',
			JS_IMG_LAZY_LOADED : 'js-img-lazy-loaded',

			LAZY_LOADED : 'lazy-loaded',

			SWITCH_MOBILE : 'switch-mobile',
			SWITCH_TABLET : 'switch-tablet'
		},
		DATA_ATTR : {
			SRC_PC : 'data-src-pc',
			SRC_MOBILE : 'data-src-mobile',
			DATA_SRC : 'data-src'
		},
		SUPPORT : {
			NO_SVG : 'no-svg',
			NO_CSS3 : 'no-css3',
			IE_LT_8 : 'lt-ie8',
			COOKIE_WARNING : 'cookie-warning',
			TOUCH_DEVICE : 'touch-device'
		},
		RESPONSIVE : {
			DESKTOP : {
				NAME : 'desktop'
			},
			TABLET : {
				NAME : 'tablet',
				WIDTH : 1280
			},
			MOBILE : {
				NAME : 'mobile',
				WIDTH : 768
			},
			MIN_MOBILE : {
				NAME : 'min_mobile',
				WIDTH : 320
			},
			GNB : {
				NAME : 'gnb_reponsive',
				WIDTH : 1024
			}
		},
		BACKTOTOP : {
			TOP_POSITION : 'top_position'
		}
	};

})(window);

/*!
 * samsung.com - Phase2 - Custom Events Defined
 * src : js/src/smg/aem/event/smg.aem.event.js
 *
 * @version 1.0.0
 * @since 2016.10.10
 */
;(function(win) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.customEvent) {
		win.smg.aem.customEvent = {};
	}

	/**
	 * @name window.smg.aem.customEvent
	 * @namespace
	 * @requires namespace.js
	 */
	win.smg.aem.customEvent = {
		CONNECT : {},
		VIDEO : {
			PLAY : 'AEM_VIDEO_PLAY',
			CLOSE : 'AEM_VIDEO_CLOSE'
		},
		RESPONSIVE : {
			GET_STATUS : 'AEM_RESPONSIVE_GET_STATUS',
			CHANGE : 'AEM_RESPONSIVE_CHANGE'
		},
		BACKTOTOP : {
			POSITION_CHANGE : 'AEM_POSITION_CHANGE'
		}
	};

})(window);

/*!
 * samsung.com - Phase2 - Common Script Defined
 * src : js/src/smg/aem/common/smg.aem.common.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.common) {
		win.smg.aem.common = {};
	}

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	/**
	 * @name window.smg.aem.common
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	win.smg.aem.common = (function() {
		return {
			init : function() {
				this.detection();

				this.responsiveName = '';
				this.responsiveNameEx = '';
				this.responsiveGNB = '';
				this.responsiveGNBEx = '';


				$('body').on(CST_EVENT.RESPONSIVE.GET_STATUS, $.proxy(this.resizeListener, this));
				$(win).on('resize', $.proxy(this.resizeListener, this));
				this.resizeListener();

				this.skipNavgation =  $(".s-skip-content").children();
				this.skipNavgation.on('click', $.proxy(this.skipNavgationFunc, this));

				return this;
			},
			detection : function() {
				// SVG Support Check
				if (!document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')) {
					$('body').addClass(V_STATIC.SUPPORT.NO_SVG);
				}

				// IE lt 8 Check
				if (document.all && !document.addEventListener) {
					$('body').addClass(V_STATIC.SUPPORT.IE_LT_8);
				}

				// CSS3 Support Check
				var thisBody = document.body || document.documentElement,
				thisStyle = thisBody.style,
				css3support = thisStyle.transition !== undefined || thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.MsTransition !== undefined || thisStyle.OTransition !== undefined;
				if (!css3support) {
					$('body').addClass(V_STATIC.SUPPORT.NO_CSS3);
				}

				// Touch Support Check
				var supportsTouch = (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));
				if (supportsTouch) {
					$('body').addClass(V_STATIC.SUPPORT.TOUCH_DEVICE);
				}
			},
			resizeListener : function(e) {
				var winWidth = UTIL.winSize().w;

				if (winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH) {
					this.responsiveName = V_STATIC.RESPONSIVE.MOBILE.NAME;
				} else if (winWidth <= V_STATIC.RESPONSIVE.TABLET.WIDTH) {
					this.responsiveName = V_STATIC.RESPONSIVE.TABLET.NAME;
				} else {
					this.responsiveName = V_STATIC.RESPONSIVE.DESKTOP.NAME;
				}

				if (winWidth <= V_STATIC.RESPONSIVE.GNB.WIDTH) {
					this.responsiveGNB = V_STATIC.RESPONSIVE.GNB.NAME;
				} else {
					this.responsiveGNB = '';
				}

				if (this.responsiveName !== this.responsiveNameEx || this.responsiveGNB !== this.responsiveGNBEx) {
					this.responsiveNameEx = this.responsiveName;
					this.responsiveGNBEx = this.responsiveGNB;
					$('body').trigger(CST_EVENT.RESPONSIVE.CHANGE, { RESPONSIVE_NAME : this.responsiveName, RESPONSIVE_GNB_NAME : this.responsiveGNB, isMobile : winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH });
				}

				if (e && e.type === CST_EVENT.RESPONSIVE.GET_STATUS) {
					$('body').trigger(CST_EVENT.RESPONSIVE.CHANGE, { RESPONSIVE_NAME : this.responsiveName, RESPONSIVE_GNB_NAME : this.responsiveGNB, isMobile : winWidth <= V_STATIC.RESPONSIVE.MOBILE.WIDTH });
				}
			},
			skipNavgationFunc : function(e) {
				e.preventDefault();
				var targetObjectSelector = $(e.currentTarget).attr("href");
				if (targetObjectSelector == '#accHelp') {
					$(targetObjectSelector).focus();
				}else{
					$(targetObjectSelector).attr('tabindex', -1).focus().removeAttr('tabindex','');
				}
			}
		};
	})();

	var common;
	$(function() {
		common = win.smg.aem.common.init();
	});

	// confrict samsung.min.js - resize
	$(win).on('resize', function(e) {
		if (!common || !common.resizeListener) return;
		common.resizeListener.call(common, e);
	});
})(window, window.jQuery);




// contents height matching
;(function (win, $) {
	'use strict';

	if( typeof $.fn.heightMatch === 'function') $.fn.heightMatch = function() {};
	
	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	win._heightMatch = function (container, options) {
		var defParams = {
			compType : 'list',
			listWrap : '',
			isListMatch : true,
			targetElements : [],
			matchAlignIgnore : '',
			matchAlign : 0,
			matchAttr : 'height',
			forceMobile: false
		};
		this.container = container;
		this.opts = UTIL.def(defParams, (options || {}));

		this.init();
	};
	win._heightMatch.prototype = {
		init : function () {
			this.setElements();
			this.bindEvents();
			this.maxHeightBuildChk();
		},
		setElements : function () {
			this.$body = $('body');
			this.IS_MOBILE_MODE = false;
			this.obj = this.getTargetElement();
			this.isColumns = this.obj.hasClass('cm-columns__item');
			this.columnLineClass = 'is-active-line';
			this.opts.matchAlign = (this.opts.matchAlign > 0) ? this.opts.matchAlign : this.obj.length;
			this.maxLine = Math.ceil(this.obj.length / this.opts.matchAlign);
			this.setTime = 500;
		},
		getTargetElement : function () {
			if(this.container.hasClass(this.opts.targetElements.substring(1))) {
				return this.container;
			} else {
				return this.container.find(this.opts.targetElements);
			}
		},
		bindEvents : function () {
			this.$body.on(CST_EVENT.RESPONSIVE.CHANGE, $.proxy(this.onResponsiveChange, this));
			this.$body.trigger(CST_EVENT.RESPONSIVE.GET_STATUS);
			$(win).on('resize orientationchange', $.proxy(this.resizeFunc, this));
		},
		resizeFunc : function () {
			this.maxHeightBuildChk();
		},
		maxHeightBuildChk : function () {
			if(this.IS_MOBILE_MODE){
				this.maxHeightBuild(false);
			}else{
				this.maxHeightBuild(true);
			}
		},
		maxHeightBuild : function (type) {
			var setTime = this.setTime;
			if(this.opts.compType == 'carousel' && !this.IS_MOBILE_MODE) {
				setTime = 800;
			}
			if(this.isColumns) {
				setTime += 1000;
			}

			if (this.opts.forceMobile) {
				type = true;
			}

			if(type){
				setTimeout($.proxy(function() {
					var heightArray = [];
					for (var i = 0; i < this.maxLine; i++) {
						heightArray[i] = [];
					}
					for (var i = 0, max = this.obj.length; i < max; i++) {
						this.obj.eq(i).outerHeight('');
						var _arrayIndex = parseInt((i / this.opts.matchAlign), 10),
						_height   = this.obj.eq(i).outerHeight();
						heightArray[_arrayIndex].push(_height);
					}
					for (var i = 0; i < this.maxLine; i++) {
						heightArray[i] = Math.max.apply(null, heightArray[i]);
					}
					for (var i = 0, max = this.obj.length; i < max; i++) {
						var _arrayIndex = parseInt((i / this.opts.matchAlign), 10);
						var current   = this.obj.eq(i);
						if(heightArray[_arrayIndex] > 0) {
							current.css(this.opts.matchAttr, heightArray[_arrayIndex]);
						}
					}
					this.obj.closest('.cm-columns--separation-line').addClass(this.columnLineClass);
					if(this.opts.compType == 'carousel') {
						if(this.container.closest('.s-slick').hasClass('slick-initialized')) this.container.closest('.s-slick').slick('setPosition');
					}
				}, this), setTime);
			} else {
				for (var i = 0, max = this.obj.length; i < max; i++) {
					this.obj.eq(i).outerHeight('');
				}
				setTimeout($.proxy(function() {
					if(this.IS_MOBILE_MODE) {
						if(this.container.closest('.s-slick').hasClass('slick-initialized')) this.container.closest('.s-slick').slick('setPosition');
					}
				}, this), setTime);
			}
		},
		onResponsiveChange : function(e, data) {
			if (data.RESPONSIVE_NAME === V_STATIC.RESPONSIVE.MOBILE.NAME) {
				this.IS_MOBILE_MODE = true;
			} else {
				this.IS_MOBILE_MODE = false;
			}
		}
	};

	$.fn.heightMatch = function (options) {

		if(!options.matchElements || !$(this).length) return;

		var cardWrap    = $(this),
			child       = cardWrap.find(options.listWrap);

		if(!options.listWrap) child = cardWrap;

		if(options.compType == 'list' && child.length <= 1) return;

		if(options.compType == 'carousel') options.isListMatch = false;

		if(options.forceMobile) {
			this.IS_MOBILE_MODE = true;
		}

		if(options.isListMatch) options.matchElements.push(options.listWrap);

		if(options.matchAlignIgnore) {
			if(cardWrap.children(options.matchAlignIgnore).length) {
				options.matchAlign = 0;
			}
		}
		for(var prop in options.matchElements) {
			options.targetElements = options.matchElements[prop];
			new win._heightMatch(child, options);
		}
	};
})(window, window.jQuery);

;(function (win, $) {
	'use strict';
	if( typeof $.fn.listSeeMore === 'function') $.fn.listSeeMore = function() {};

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	$.fn.listSeeMore = function (options) {
		var defParams = {
			useSeeMore : 's-use-seemore',
			component : '',
			listItems : '',
			moreBtn : '.s-btn-encased',
			appendType : false,
			itemVisible : '',
			itemActive : 'is-item-active',
			itemInterval : 100,
			perPageDefault : {
				pc : 9,
				mo : 6
			},
			perPageNum : {
				pc : 'data-pc-per-page',
				mo : 'data-mo-per-page'
			},
			heightMatch : {
				hasComponent : [],
				matchElements : [],
				matchAlign : 3
			},
			masonry : {
				hasComponent : [],
				itemWrap : '',
				items : ''
			},
			scrollView : true,
			scrollViewIgnore : [],
			moreIntervalView : true,
			moreIntervalViewIgnore : [],
			beforeFunc : null,
			afterFunc : null
		};
		var opts = UTIL.def(defParams, (options || {}));
		var $components = $(opts.component);
		var $body = $('body');
		var isMobile = null;

		var setBindEvents = function() {
			$body.on(CST_EVENT.RESPONSIVE.CHANGE, onResponsiveChange);
			$body.trigger(CST_EVENT.RESPONSIVE.GET_STATUS);
			$components.on('click', opts.moreBtn, onViewMore);
		}
		var setMasonry = (function() {

			var $html = $('html');

			var eventList = {

				masonry : function( el ){

					if ( $html.hasClass('rtl') ) {

						el.addClass('js-masonry-load').masonry({
							itemSelector: eventList.items,
							horizontalOrder: true,
							originLeft: false
						});

					} else {

						el.addClass('js-masonry-load').masonry({
							itemSelector: eventList.items,
							percentPosition: true,
							horizontalOrder: true
						});

					}

		
				},

				loadCheck: function( el, container, cb ){

					var loadCount = 0;
					var elLength = el.length;

					for (var i = 0; i < elLength; i++){

						var img = new Image();
						
						img.src = el.eq(i).attr('src');

						img.onload = function(){

							loadCount += 1;
							
							if ( loadCount == elLength ) cb(container);
							
						}

					};

				},

				actMasonry: function( container, $items ){

					var itemsImage = $items.find('img');

					if(!container.length) return;

					eventList.loadCheck(itemsImage, container, eventList.masonry);

				}

			};

			var init = function(mComponent, itemWrap, items){

				var $components = mComponent;
				var $componentList = $components.find(itemWrap);
				var $items = $components.find(items);

				if ( UTIL.isAemEditMode() ) return;
				if (!$components.length) return;
				if (!$items.length) return;
				if (typeof $.fn.masonry != 'function') return;
				
				eventList.items = items;
				eventList.actMasonry( $componentList, $items );

			};

			return {

				init: init
				
			}
		})();
		var onResponsiveChange = function(e, data) {
			if (data.RESPONSIVE_NAME === V_STATIC.RESPONSIVE.MOBILE.NAME) {
				isMobile = true;
			} else {
				isMobile = false;
			}
		}

		var onViewMore = function(e) {
			e.preventDefault();
			var $current = $(e.currentTarget),
				$component = $current.closest(opts.component);
			var isPromoFeed = true,
				isViewMore = true;

			if($component.length) {
				setViewMoreCTA.init({
					component : $component, 
					isViewMore : isViewMore,
					isPromoFeed : isPromoFeed
				});
			}
		}

		var setViewMoreCTA = {
			getIsInterval : function($component) {

				var isInterval = opts.moreIntervalView;
				
				if(opts.moreIntervalViewIgnore.length > 1) {
					for(var a = 0; a < opts.moreIntervalViewIgnore.length; a++) {
						if(opts.moreIntervalViewIgnore[a]) {
							if($component.hasClass(opts.moreIntervalViewIgnore[a])) {
								isInterval = false;
							}
						}
					}
				} else {
					if(opts.moreIntervalViewIgnore[0]) {
						if($component.hasClass(opts.moreIntervalViewIgnore[0])) {
							isInterval = false;
						}
					}
				}
				return isInterval;
			},
			getViewCnt : function($component) {
				var viewCnt = 0;
				if(isMobile) {
					viewCnt = ($component.attr(opts.perPageNum.mo)) ? parseInt($component.attr(opts.perPageNum.mo)) : opts.perPageDefault.mo;
				} else {
					viewCnt = ($component.attr(opts.perPageNum.pc)) ? parseInt($component.attr(opts.perPageNum.pc)) : opts.perPageDefault.pc;
				}
				return viewCnt;
			},
			setItemActive : function($component, cnt) {
				$component.find(opts.listItems + ':lt(' + (cnt) + ')').addClass(opts.itemActive);
			},
			hideMoreCTA : function($component, $cta) {
				if(opts.appendType) {

				} else {
					if(!$component.find(opts.listItems + ':not(:visible)').length && $cta.length && $cta.is(':visible')) {
						$cta.css('display', 'none');
					}
				}
			},
			getIsMathchHeight : function($component) {
				var hComponent = '';
				if(opts.heightMatch.hasComponent && opts.heightMatch.matchElements) {
					for(var i = 0; i < opts.heightMatch.hasComponent.length; i++) {
						if(opts.heightMatch.hasComponent[i]) {
							if($component.hasClass(opts.heightMatch.hasComponent[i])) {
								hComponent = true;
							}
						}
					}
				}
				return hComponent;
			},
			getIsMasonry : function($component) {
				var mComponent = '';
				if(opts.masonry.hasComponent && opts.masonry.itemWrap && opts.masonry.items) {
					for(var a = 0; a < opts.masonry.hasComponent.length; a++) {
						if(opts.masonry.hasComponent[a]) {
							if($component.hasClass(opts.masonry.hasComponent[a])) {
								mComponent = true;
							}
						}
					}
				}
				return mComponent;
			},
			init : function(info) {
				var $cta = info.component.find(opts.moreBtn),
					$items = info.component.find(opts.listItems),
					$viewList;
				var viewCnt = this.getViewCnt(info.component),
					isInterval = this.getIsInterval(info.component),
					mComponent = this.getIsMasonry(info.component),
					hComponent = this.getIsMathchHeight(info.component);



				if(!UTIL.isAemEditMode()) {
					if(info.component.hasClass(opts.useSeeMore)) {
						var cnt = viewCnt,
							visibleLength = info.component.find(opts.listItems + ':visible').length;

						if(info.isViewMore) {
							cnt = visibleLength + viewCnt;
						} else {
							if(!$cta.length) {
								cnt = $items.length;
								viewCnt = $items.length;
							}
						}

						if(opts.beforeFunc != null) opts.beforeFunc(info.component, isMobile);

						this.setItemActive(info.component, cnt);
						this.hideMoreCTA(info.component, $cta);

						if(isInterval) {

							setTimeout(function() {

								if(hComponent) columnMatch(info, (cnt - viewCnt - 1));

								setTimeout(function() {
									var k = visibleLength;
									var interval = setInterval(function() {
										if(k == cnt) {
											clearInterval(interval);
											if(mComponent) {
												setTimeout(function() {
													if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
													setMasonry.init(info.component, opts.masonry.itemWrap, opts.masonry.items);
												}, 100);
											} else {
												if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
											}
										} else {
											$items.eq(k).addClass(opts.itemVisible);
											k++;
										}
									}, opts.itemInterval);
								}, 400);

							}, 100);

						} else {
							
							if(mComponent || hComponent) {
								for(var k = visibleLength; k <= cnt; k++) {
									if(k == cnt) {
										setTimeout(function() {
											if(mComponent) {
												setMasonry.init(info.component, opts.masonry.itemWrap, opts.masonry.items);
											}
											if(hComponent) {
												columnMatch(info, (cnt - viewCnt - 1));
											}
											if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
										}, 100);
									} else {
										$items.eq(k).addClass(opts.itemVisible);
									}
								}
							} else {
								$items.addClass(opts.itemVisible);
								if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
							}
						}
					} else {
						var cnt = $items.length,
							viewCnt = $items.length;
						if(mComponent) {
							setMasonry.init(info.component, opts.masonry.itemWrap, opts.masonry.items);
						}
						if(hComponent) {
							columnMatch(info, (cnt - viewCnt - 1));
						}
						info.isViewMore = false;
						if(opts.afterFunc != null) opts.afterFunc(info.component, isMobile);
					}
				}
			}
		}

		var columnMatch = function(info, cnt){
			var cnt = parseInt(cnt) || 0;
			var listWrap = opts.listItems;


			if(info.component.hasClass('cm-columns--separation-line')) {
				if(info.component.hasClass('cm-columns--2columns')) {
					opts.heightMatch.matchAlign = 2;
				} else if(info.component.hasClass('cm-columns--3columns')) {
					opts.heightMatch.matchAlign = 3;
				} else if(info.component.hasClass('cm-columns--4columns')) {
					opts.heightMatch.matchAlign = 4;
				} else if(info.component.hasClass('cm-columns--5columns')) {
					opts.heightMatch.matchAlign = 5;
				}
			}

			if(info.isViewMore) {
				listWrap = opts.listItems + ':gt(' + cnt + ')';
			}

			info.component.heightMatch({
				listWrap      : listWrap,
				matchAlignIgnore  : '.slick-initialized',
				matchElements     : opts.heightMatch.matchElements,
				matchAlign : opts.heightMatch.matchAlign
			});
		}

		var initDA = function($component, isScroll) {
			if(isScroll && (typeof $.fn.feature == 'function') && $component.hasClass(opts.useSeeMore)) {
				$component.feature({
					onVisible : function($target) {
						if(!$target.hasClass('js-feature-loaded')) {
							var isPromoFeed = true;
							var isViewMore = false;
							$target.addClass('js-feature-loaded');
							setViewMoreCTA.init({
								component : $target, 
								isViewMore : isViewMore,
								isPromoFeed : isPromoFeed
							});
						}
					}
				});
			} else {
				if(!$component.hasClass('js-feature-loaded')) {
					var isPromoFeed = true;
					var isViewMore = false;
					$component.addClass('js-feature-loaded');
					setViewMoreCTA.init({
						component : $component, 
						isViewMore : isViewMore,
						isPromoFeed : isPromoFeed
					});
				}
			}
		}

		var getIsScroll = function($component) {

			var isScroll = opts.scrollView;
			
			if(opts.scrollViewIgnore.length > 1) {
				for(var a = 0; a < opts.scrollViewIgnore.length; a++) {
					if(opts.scrollViewIgnore[a]) {
						if($component.hasClass(opts.scrollViewIgnore[a])) {
							isScroll = false;
						}
					}
				}
			} else {
				if(opts.scrollViewIgnore[0]) {
					if($component.hasClass(opts.scrollViewIgnore[0])) {
						isScroll = false;
					}
				}
			}
			return isScroll;
		}


		var init = function() {

			var $component;
			var isScroll = opts.scrollView;

			setBindEvents();
			if(opts.scrollView) {
				for(var i = 0; i < $components.length; i++) {
					$component = $components.eq(i);
					isScroll = getIsScroll($component);
					initDA($component, isScroll);
				}
			} else {
				for(var i = 0; i < $components.length; i++) {
					$component = $components.eq(i);
					initDA($component, false);
				}
			}
		}
		init();
	}

	if( typeof $.getI18nDiction === 'function') $.getI18nDiction = function() {};
	$.getI18nDiction = function (key, text) {

		if ('undefined' === typeof Granite) {
			return text;
		}
		if ('undefined' === typeof Granite.I18n) {
			return text;
		}

		Granite.I18n.setLocale($('#siteCode').val());
		return Granite.I18n.get(key, [], $('#siteCode').val()) || text;

	}
})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Accessibility Checkbox Script
 * src : js/src/smg/aem/accessibility/placehoder/smg.aem.acc.checkbox.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.accessibility) {
		win.smg.aem.accessibility = {};
	}

	// Utility Script
	var UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.accessibility;

	/**
	 * @name window.smg.aem.accessibility.checkbox
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	namespace.checkbox = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			targets : '[data-accessibility=\'checkbox\']',
			targetsValue : 'data-acc-checkbox-value',
			holder : 'data-acc-checkbox',
			holderTarget : 'data-acc-checkbox-target',
			onClass : 'data-acc-onclass'
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setBindEvents();
			},
			setElements : function() {
				this.targets = this.container.find(this.opts.targets);
				this.holders = $('[' + this.opts.holder + ']');

				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).attr(this.opts.targetsValue, $(elm).attr('checked'));
				}, this));
			},
			setBindEvents : function() {
				this.holders.on('click', $.proxy(this.onHolderClick, this));
				this.targets.on('change', $.proxy(this.onTargetChange, this));
			},
			unElements : function() {
				var target,
				targetInfo;
				$.each(this.targets, $.proxy(function(idx, elm) {
					target = $(elm);
					targetInfo = this.getTargetInfo(target);

					target.removeAttr('checked', 'checked');
					target.prop('checked', false);
					if (targetInfo.onClass) {
						targetInfo.holder.removeClass(targetInfo.onClass);
					}
				}, this));
				this.targets = [];
				this.holders = [];
			},
			unBindEvents : function() {
				this.holders.off('click', $.proxy(this.onHolderClick, this));
				this.targets.off('change', $.proxy(this.onTargetChange, this));
			},
			onHolderClick : function(e) {
				var target = $(e.currentTarget);
				target = $('[' + this.opts.holderTarget + '=\'' + target.attr(this.opts.holder) + '\']');

				if (target.size()) {
					target.trigger('click').focus();
				}
			},
			onTargetChange : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass,
				isChecked = target.attr('checked');

				if (!isChecked) {
					target.attr('checked', 'checked');
					target.prop('checked', true);
					if (onClass) {
						holder.addClass(onClass);
					}
				} else {
					target.removeAttr('checked', 'checked');
					target.prop('checked', false);
					if (onClass) {
						holder.removeClass(onClass);
					}
				}
			},
			getTargetInfo : function(target) {
				target = $('[' + this.opts.holder + '=\'' + target.attr(this.opts.holderTarget) + '\']');

				if (target.size()) {
					return { holder : target, onClass : target.attr(this.opts.onClass) };
				}
				return { holder : '', onClass : '' };
			},
			destroy: function() {
				this.unBindEvents();
				this.unElements();
			},
			refresh : function(container, args) {
				container = container || this.container;

				this.destroy();
				this.init(container, args);
			}
		};
	})();

	$(function() {
		namespace.checkbox.init($('body'));
	});

})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Accessibility Placeholder Script
 * src : js/src/smg/aem/accessibility/placehoder/smg.aem.acc.placeholder.js
 *
 * @version 1.0.0
 * @since 2016.02.04
 */
;(function(win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.accessibility) {
		win.smg.aem.accessibility = {};
	}

	// Utility Script
	var UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.accessibility;

	/**
	 * @name window.smg.aem.accessibility.placeholder
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.aem.static.js
	 * @requires window.smg.aem.util.js
	 * @requires window.smg.aem.event.js
	 */
	namespace.placeholder = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			targets : '[data-accessibility=\'placeholder\']',
			targetsValue : 'data-acc-placeholder-value',
			holder : 'data-acc-placeholder',
			holderTarget : 'data-acc-placeholder-target',
			onClass : 'data-acc-onclass'
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));

				this.setElements();
				this.setBindEvents();
			},
			setElements : function() {
				this.targets = this.container.find(this.opts.targets);

				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).attr(this.opts.targetsValue, $(elm).val());
				}, this));
			},
			setBindEvents : function() {
				this.targets.on('focus', $.proxy(this.onTargetsFocus, this))
							.on('blur', $.proxy(this.onTargetsBlur, this))
							.on('keydown keyup', $.proxy(this.onTargetsChange, this));
			},
			unElements : function() {
				$.each(this.targets, $.proxy(function(idx, elm) {
					$(elm).val($(elm).attr(this.opts.targetsValue));
				}, this));

				var target,
				targetInfo;
				$.each($('[' + this.opts.holder + ']'), $.proxy(function(idx, elm) {
					target = $(elm);
					targetInfo = this.getTargetInfo(target);

					if (targetInfo.onClass) {
						target.removeClass(targetInfo.onClass);
					} else {
						target.show();
					}
				}, this));

				this.targets = [];
			},
			unBindEvents : function() {
				this.targets.off('focus', $.proxy(this.onTargetsFocus, this))
							.off('blur', $.proxy(this.onTargetsBlur, this));
			},
			onTargetsFocus : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (target.val()) {
					if (onClass) {
						holder.addClass(onClass);
					} else {
						holder.css({ 'visibility' : 'hidden' });
					}
				}
			},
			onTargetsBlur : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (!target.val()) {
					if (onClass) {
						holder.removeClass(onClass);
					} else {
						holder.css({ 'visibility' : 'visible' });
					}
				}
			},
			onTargetsChange : function(e) {
				var target = $(e.currentTarget),
				targetInfo = this.getTargetInfo(target),
				holder = targetInfo.holder,
				onClass = targetInfo.onClass;

				if (!holder) {
					return;
				}

				if (target.val()) {
					if (onClass) {
						holder.addClass(onClass);
					} else {
						holder.css({ 'visibility' : 'hidden' });
					}
				} else {
					if (onClass) {
						holder.removeClass(onClass);
					} else {
						holder.css({ 'visibility' : 'visible' });
					}
				}
			},
			getTargetInfo : function(target) {
				target = $('[' + this.opts.holder + '=\'' + target.attr(this.opts.holderTarget) + '\']');

				if (target.size()) {
					return { holder : target, onClass : target.attr(this.opts.onClass) };
				}
				return { holder : '', onClass : '' };
			},
			destroy: function() {
				this.unBindEvents();
				this.unElements();
			},
			refresh : function(container, args) {
				container = container || this.container;

				this.destroy();
				this.init(container, args);
			}
		};
	})();

	$(function() {
		namespace.placeholder.init($('body'));
	});

})(window, window.jQuery);
/*!
 * samsung.com - Phase2 - Product Templates
 * src : js/src/smg/aem/templates/product/product-backtotop.js
 *
 * @version 1.0.0
 * @since 2016.10.10
 */
;(function (win, $) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.templates) {
		win.smg.aem.templates = {};
	}

	if('undefined' === typeof win.smg.aem.templates.product) {
		win.smg.aem.templates.product = {};
	}

	// V_STATIC Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util,
	// Custom Events
	CST_EVENT = win.smg.aem.customEvent;

	var namespace = win.smg.aem.templates.product;

	/**
	 * @name window.smg.aem.templates.product.details
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 */
	namespace.backtotop = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			topBtn : {
				wrap : '.s-gotop-wrap',
				btn : '.s-btn-gotop',
				onClass : 's-show',
				speed : 1000
			},
			footer : {
				target : '#footer'
			}
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				this.opts = UTIL.def(defParams, (args || {}));
				this.setElements();
				this.onBindEvent();
				this.defSetup();
			},
			setElements : function() {
				this.htmlBody = $('html, body');
				this.footer = $(this.opts.footer.target);
				this.topBtnWrap = this.container.find(this.opts.topBtn.wrap);
				this.topBtn = this.topBtnWrap.find(this.opts.topBtn.btn);
			},
			onBindEvent : function() {
				this.topBtn.on('click', $.proxy(this.onTopBtnClick, this));

				$(win).on('scroll touchmove', $.proxy(this.onScrollListener, this));
				this.onScrollListener();

				$(CST_EVENT.CONNECT).on(CST_EVENT.BACKTOTOP.POSITION_CHANGE, $.proxy(this.setPosition, this));
			},
			defSetup : function() {
				$(win).on('load', function(e) {
					$(win).trigger('scroll');
				});
			},
			onTopBtnClick : function() {
				this.htmlBody.animate({scrollTop : 0}, this.opts.topBtn.speed);
			},
			setPosition : function(e, data) {
				if(this.topPosition === data.TOP_POSITION) return;
				this.topPosition = data.TOP_POSITION;
			},
			onScrollListener : function() {
				var winTop = $(win).scrollTop(),
				winHeight = UTIL.winSize().h,
				footerTop = (this.footer.size()) ? this.footer.offset().top : 0;

				if(typeof this.topPosition === 'undefined') this.topPosition = winTop;

				if (winTop > this.topPosition && (winTop + winHeight) < footerTop) {
					if(!this.topBtnWrap.hasClass(this.opts.topBtn.onClass)) this.topBtnWrap.addClass(this.opts.topBtn.onClass);
				} else {
					if(this.topBtnWrap.hasClass(this.opts.topBtn.onClass)) this.topBtnWrap.removeClass(this.opts.topBtn.onClass);
				}
			}
		};
	})();

	$(function() {
		namespace.backtotop.init($('body'));
	});
})(window, window.jQuery);


/*!
 * samsung.com - Phase2 - Video Components
 * src : js/src/smg/aem/components/video/smg.aem.components.video.js
 *
 * @version 1.0.0
 * @since 2016.03.18
 */
;(function (win, $, jQuery) {
	'use strict';

	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.components) {
		win.smg.aem.components = {};
	}

	if('undefined' === typeof win.smg.aem.components.video) {
		win.smg.aem.components.video = {};
	}

	if ($().jquery !== jQuery().jquery) {
		if (jQuery.fn.bcChromePlayer) {
			$ = jQuery;
		}
	}

	// Static Values
	var V_STATIC = win.smg.aem.varStatic,
	// Utility Script
	UTIL = win.smg.aem.util;

	var namespace = win.smg.aem.components;

	/**
	 * @name window.smg.aem.components.video
	 * @namespace
	 * @requires jQuery
	 * @requires namespace.js
	 * @requires window.smg.static.js
	 * @requires window.smg.util.js
	 */
	namespace.video = (function() {
		/**
		 * @description Default Options
		 * @private
		 * @type {Object}
		 */
		var defParams = {
			videos : '.js-video',
			ctaPlayVideo: '.js-pop-btn, button.js-video',
			youtube : {
				iframe : '<iframe src=\'about:blank\' frameborder=\'0\' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',
				embedSrc : 'https://www.youtube.com/embed/{{VIDEO_ID}}?wmode=opaque&rel=0&enablejsapi=1&version=3',
				autoPlay : 'false'
			},
			brightcove : {
				playerType : '',
				countryCode : '',
				divID : '',
				videoTagID : '',
				videoID : '',
				videoWidth : '100%',
				videoHeight : '100%',
				autoPlay : 'false',
				captionURL : ''
			},
			mp4: {
				//videoElement: '<video src="" playsinline title="" class="s-video"></video>',
				videoElement: '<video playsinline class="s-video" controlsList="nodownload"><source src="" type="video/mp4"></video>',
				title: '',
				videoURL: '',
				imgURL : '',
				autoplay: 'false',
				mute: 'false',
				controls: 'false',
				playBtn: '.s-mp4-video-play, .js-pop-btn'
			},
			aparat : {
				iframe : '<iframe src=\'about:blank\' frameborder=\'0\' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',
				embedSrc : 'https://www.aparat.com/video/video/embed/vt/frame/pid/0/showadstart/no/showvideo/yes/videohash/{{VIDEO_ID}}',
				autoPlay : 'false'
			},
		};
		return {
			init : function(container, args) {
				if (!(this.container = container).size()) return;

				defParams.brightcove.templateReadyHandler = $.proxy(this.onBrightCoveTemplateReadyHandler, this);

				this.opts = UTIL.def(defParams, (args || {}));

				this.youtubeOpt = this.opts.youtube;
				this.brightcoveOpt = this.opts.brightcove;
				this.mp4Opt = this.opts.mp4;
				this.aparatOpt = this.opts.aparat;
				this._brightcoveOpt = null;
				this.youtubeIframe = null;
				this.aparatIframe = null;
				this.mp4VideoElement = null;

				this.setElements();
				this.bindEventHandlers();
				this.setCreateEmbedVideo();
				this.ie8HidePlayButton();
			},
			setElements : function() {
				this.videosEmbed = this.container.find(this.opts.videos).filter(function(){
					return $(this).attr('data-vid-view') === 'embed';
				});
				this.videosLayer = this.container.find(this.opts.videos).filter(function(){
					return $(this).attr('data-vid-view') === 'layer';
				});
			},
			bindEventHandlers : function(){
				if (document.documentMode <= 10) {
					$(this.opts.ctaPlayVideo).on('click.checkOldBrowserLayerVideo', $.proxy(this.checkOldBrowserLayerVideo, this));
				}
				$(document).on('click', this.opts.videos, $.proxy(this.setCreateLayerVideo, this));
			},
			ie8HidePlayButton : function() {
				if (document.documentMode === 8) {
					$(this.opts.mp4.playBtn).filter('[data-vid-type="mp4"]').css('display', 'none');
					$(this.opts.videos).filter('[data-vid-type="mp4"]').find(this.opts.mp4.playBtn).css('display', 'none');
				}				
			},
			setCreateEmbedVideo : function() {
				// embed
				var _this = this;
				for(var i=0,max=this.videosEmbed.length; i<max; i++){
					(function(index){
						var _target = _this.videosEmbed.eq(index),
						videoView = _target.data('vid-view'),
						videoType = _target.data('vid-type'),
						videoData = _target.data('vid-data');
						switch(videoType) {
							case 'youtube':
								_this.setYoutube(videoData);
								break;
							case 'brightcove':
								_this.setBrightCove(videoData);
								break;
							case 'mp4':
								_this.setMp4Player(videoData, videoView, _target, i);
								break;
							case 'aparat':
								_this.setAparat(videoData);
								break;
						}
					})(i);
				};
			},
			setCreateLayerVideo : function(e) {
				e.stopPropagation();
				// layer
				var _target = $(e.currentTarget),
				videoView = _target.data('vid-view'),
				videoType = _target.data('vid-type'),
				videoData = _target.data('vid-data'),
				homeComponent = _target.closest('.js-home-components');
				if(videoView === 'embed') return;
				_target.attr('data-vid-btn-idx', this.videosLayer.index(_target));
				$('#' + videoData.divID).attr('data-vid-btn-idx', _target.attr('data-vid-btn-idx'));
				switch(videoType) {
					case 'youtube':
						this.setYoutube(videoData);
						break;
					case 'brightcove':
						this.setBrightCove(videoData);
						break;
					case 'mp4':
						this.setMp4Player(videoData, videoView, _target, _target.attr('data-vid-btn-idx'));
						break;
					case 'aparat':
						this.setAparat(videoData);
						break;
				}
				if (homeComponent.size()) {
					homeComponent.addClass('s-video-open');
				}

				if(videoView === 'layer') {
					this.container.addClass('video-layer-open');
				}

				$('#' + videoData.divID).closest('.video-area_5').off('aem_hide', $.proxy(this.onAemHide, this));
				$('#' + videoData.divID).closest('.video-area_5').on('aem_hide', $.proxy(this.onAemHide, this));
			},
			checkOldBrowserLayerVideo : function(e) {
				var _target = $(e.currentTarget),
				videoType = _target.data('vid-type');

				switch(videoType) {
					case 'youtube':
						if (this.alertOldIeBrowser(10, 'Youtube')) {
							e.stopImmediatePropagation();
							return;
						}
						break;
					case 'brightcove':
						if (this.alertOldIeBrowser(8, 'Brightcove')) {
							e.stopImmediatePropagation();
							return;
						}
						break;
					case 'mp4':
						if (this.alertOldIeBrowser(8, 'Mp4')) {
							e.stopImmediatePropagation();
							return;
						}
						break;
					case 'aparat':
						if (this.alertOldIeBrowser(8, 'Aparat')) {
							e.stopImmediatePropagation();
							return;
						}
						break;
				}
			},
			alertOldIeBrowser : function(ver, vType) {
				if (document.documentMode && document.documentMode <= ver) {
					var altFunc = window['a' + 'lert'];
					altFunc('Internet Explorer ' + document.documentMode + ' doesn\'t support ' + vType + ' video.');
					return true;
				}
			},
			setYoutube : function(videoData, jsVideoBtn) {
				this.youtubeIframe = $(this.youtubeOpt.iframe);
				this.youtubeIframe.attr({
					'id' : 'youtubePlayer_' + videoData.videoID.split('-').join('_'),
					'src' : this.youtubeOpt.embedSrc.replace('{{VIDEO_ID}}', videoData.videoID)
							+ '&autoplay=' + ((!!videoData.autoPlay && videoData.autoPlay.toLowerCase() === 'true') ? '1' : '0')
				});
				$('#' + videoData.divID).prepend(this.youtubeIframe)
					.closest('.video-area_5').show()
					.closest('.js-video-area').show();
				// $('#' + videoData.divID).closest('.video-area_5').find('.js-pop-close').on('focus click', $.proxy(this.onCloseBtnClick, this));
				$('#' + videoData.divID).closest('.video-area_5').on('click', '.js-pop-close', $.proxy(this.onCloseBtnClick, this));
				this.container.addClass('video-open');
				
				var videoTitle = $('#' + videoData.divID).data('video-title');
				$('#' + videoData.divID).find('iframe').attr('title', videoTitle);

				var divEl = $('#' + videoData.divID).closest('.video-area_5'),
					youtubeTimeoutObj= {};

				if (divEl.length) {
					divEl.addClass('s-video-youtube');
					youtubeTimeoutObj = setTimeout(function() {
						divEl.addClass('s-youtube-ready');
					}, 4500);
					divEl.data('timer', youtubeTimeoutObj);
				}
			},
			setAparat : function(videoData, jsVideoBtn) {
				this.aparatIframe = $(this.aparatOpt.iframe);
				this.aparatIframe.attr({
					'id' : 'aparatPlayer_' + videoData.videoID.split('-').join('_'),
					'src' : this.aparatOpt.embedSrc.replace('{{VIDEO_ID}}', videoData.videoID)
						+ ((!!videoData.autoPlay && videoData.autoPlay.toLowerCase() === 'true') ? '?data[as]=1' : '')
				});
				$('#' + videoData.divID).closest('.video-area_5').addClass('s-aparat-area');
				$('#' + videoData.divID).prepend(this.aparatIframe)
					.closest('.video-area_5').show()
					.closest('.js-video-area').show();
				// $('#' + videoData.divID).closest('.video-area_5').find('.js-pop-close').on('focus click', $.proxy(this.onCloseBtnClick, this));
				$('#' + videoData.divID).closest('.video-area_5').on('click', '.js-pop-close', $.proxy(this.onCloseBtnClick, this));
				this.container.addClass('video-open');

				var videoTitle = $('#' + videoData.divID).data('video-title');
				$('#' + videoData.divID).find('iframe').attr('title', videoTitle);
			},
			onCloseBtnClick : function(e, focusBoolean) {
				var target = $(e.currentTarget),
				area = target.closest('.video-area_5'),
				brightCoveArea = area.find('.brightCoveArea'),
				btnIdx = $('#' + target.data('div-id')).attr('data-vid-btn-idx'),
				playBtn = $('[data-vid-view="layer"][data-vid-btn-idx="' +  btnIdx + '"]'),
				homeComponent = playBtn.closest('.js-home-components'),
				focusBoo = focusBoolean;
				
				if (playBtn.size()) {
				  if(playBtn.length > 1) {
					var lastIdx = playBtn.length - 1,
					slickSlide = $(playBtn[lastIdx]).closest('.slick-slide');
					if(typeof slickSlide !== 'undefined') {
					  playBtn.each(function(idx, elmt) {
						if(lastIdx === idx) {
						  if(!$(slickSlide).hasClass('slick-cloned')) if (!focusBoo) {$(elmt).focus();}
						} else {
							if (!focusBoo) {$(elmt).focus();}
						}
					  });
					} else {
					 if (!focusBoo) {playBtn.focus();}
					}
				  } else {
					if (!focusBoo) {playBtn.focus();}
				  }
				}

				if (homeComponent.size()) {
					homeComponent.removeClass('s-video-open');
				}

				this.container.removeClass('video-layer-open');

				area.css('display','none');

				if (area.hasClass('s-aparat-area')) {
					area.find('iframe').attr('src', 'about:blank');
				}
				
				brightCoveArea.html('');
				
				target.off('click', $.proxy(this.onCloseBtnClick, this));
				// target.off('focus click', $.proxy(this.onCloseBtnClick, this));
				
				clearTimeout(area.data('timer'));
				area.removeClass('s-video-youtube').removeClass('s-youtube-ready');
			},
			onAemHide : function(e) {
				var target = $(e.currentTarget).find('.brightcove-bcc-btn-close, .brightcove-bc5-btn-close'),
				btnIdx = $('#' + target.data('div-id')).attr('data-vid-btn-idx'),
				playBtn = $('[data-vid-view="layer"][data-vid-btn-idx="' +  btnIdx + '"]'),
				homeComponent = playBtn.closest('.js-home-components');

				if (playBtn.size() && !$(e.target).hasClass('vjs-big-play-button')) {
				  if(playBtn.length > 1) {
					var lastIdx = playBtn.length - 1,
					slickSlide = $(playBtn[lastIdx]).closest('.slick-slide');
					if(typeof slickSlide !== 'undefined') {
					  playBtn.each(function(idx, elmt) {
						if(lastIdx === idx) {
						  if(!$(slickSlide).hasClass('slick-cloned')) $(elmt).focus();
						} else {
						  $(elmt).focus();
						}
					  });
					} else {
					  playBtn.focus();
					}
				  } else {
					playBtn.focus();
				  }
				}

				if (!target.closest('.s-video-area').is(':visible')) {
					homeComponent.removeClass('s-video-open');
				}
			},
			setBrightCove : function(videoData) {
				this._brightcoveOpt = $.extend({}, this.brightcoveOpt, videoData);

				switch(this._brightcoveOpt.playerType) {
					case 'brightcoveBc5PlayerLayer':
						win.brightcoveBc5PlayerLayer(
							this._brightcoveOpt.countryCode,
							this._brightcoveOpt.divID,
							this._brightcoveOpt.videoTagID,
							this._brightcoveOpt.videoID,
							this._brightcoveOpt.videoWidth,
							this._brightcoveOpt.videoHeight,
							this._brightcoveOpt.autoPlay,
							this._brightcoveOpt.captionURL
						);
						break;
					case 'bcHtml5Player':
						$('#' + this._brightcoveOpt.divID).bcHtml5Player(
							this._brightcoveOpt.countryCode,
							this._brightcoveOpt.videoTagID,
							this._brightcoveOpt.videoID,
							this._brightcoveOpt.videoWidth,
							this._brightcoveOpt.videoHeight,
							this._brightcoveOpt.autoPlay,
							this._brightcoveOpt.captionURL
						);
						break;
					case 'brightcoveBccPlayerLayer':
						win.brightcoveBccPlayerLayer(
							this._brightcoveOpt.divID,
							this._brightcoveOpt.countryCode,
							this._brightcoveOpt.videoID,
							this._brightcoveOpt.videoWidth,
							this._brightcoveOpt.videoHeight,
							this._brightcoveOpt.autoPlay
						);
						break;
					case 'bcChromePlayer':
						$('#' + this._brightcoveOpt.divID).bcChromePlayer(
							this._brightcoveOpt.countryCode,
							this._brightcoveOpt.videoID,
							this._brightcoveOpt.videoWidth,
							this._brightcoveOpt.videoHeight,
							this._brightcoveOpt.autoPlay
						);
						break;
				}
			},
			setMp4Player : function(videoData, videoView, divTarget, idx) {
				var _this = this,
					$divTarget = divTarget,
					$mp4PlayBtn = null;

				this.mp4VideoElement = $(this.mp4Opt.videoElement);
				this.mp4VideoElement.attr({
					//'id' : 'mp4Player_' + videoData.videoURL.split('/').pop().split('.').shift().split('-').join('_'),
					//'title' : videoData.title,
					'width' : videoData.videoWidth,
					'height' : videoData.videoHeight
				});

				this.mp4VideoElement.find('source').attr('src', this.getScene7Path(videoData.videoURL, $(divTarget)));
				$mp4PlayBtn = $divTarget.find(this.mp4Opt.playBtn);

				if (document.documentMode !== 8) {
					
					$mp4PlayBtn.off('click.mp4Play').on('click.mp4Play', function (e){
						var $btn = $(e.currentTarget);
						var $videoTagWrap = $('#' + $btn.closest('.js-video').find('.s-video-player, .s-show-video').attr('id'));
	
						e.preventDefault();
						e.stopPropagation();
	
						$videoTagWrap.find('video')[0].play();
						$videoTagWrap.find('video').prop('controls', true);
						$btn.css('display', 'none');
					});
				}

				if (videoData.mute === 'true') {this.mp4VideoElement.prop('muted', true)};
				if (videoData.autoPlay === 'true') {this.mp4VideoElement.prop('autoplay', true)};
				if (videoView === 'layer') {
					if (videoData.controls === 'false') {
				  		this.mp4VideoElement.prop('controls', false);
				 	} else {
				  		this.mp4VideoElement.prop('controls', true);
				 	}
				}
				if (videoView === 'embed' && videoData.scrollPlay === 'true') {
					$mp4PlayBtn.css('display', 'none');	
				}
				if (videoView === 'embed' && videoData.autoPlay === 'true') {
					this.mp4VideoElement.prop('controls', true);
				}
				if (videoData.controls === 'true') {
					this.mp4VideoElement.prop('controls', true);
				}
				
				if (videoData.loop === 'true') {this.mp4VideoElement.prop('loop', true)};
				$('#' + videoData.divID).prepend(this.mp4VideoElement)
					.closest('.video-area_5').show()
					.closest('.js-video-area').show();
				$('#' + videoData.divID).closest('.video-area_5').on('click', '.js-pop-close', $.proxy(this.onCloseBtnClick, this));
				this.container.addClass('video-open');

				// if (document.documentMode === 8) {
				// 	var $mp4AltImage = null;
				// 	if ($divTarget.parent().find('.js-img-src').length) {
				// 		$mp4AltImage = $divTarget.parent().find('.js-img-src');
				// 	} else if ($divTarget.closest('figure').find('.s-img-mo').length) {
				// 		$mp4AltImage = $divTarget.closest('figure').find('.s-img-mo');
				// 	}
					
				// 	if ($mp4AltImage.length) {
				// 		if ($mp4AltImage.eq(0).hasClass('s-img-mo')) {
				// 			$mp4AltImage.eq(0).removeClass('s-img-mo');
				// 		}
				// 	}
				// }
				
				//if (videoView === 'layer') {
					var videoTitle = $('#' + videoData.divID).data('video-title');
					if ($('#' + videoData.divID).closest('.js-video').find('.s-mp4-video-play').length) {
						$('#' + videoData.divID).closest('.js-video').find('.s-mp4-video-play').attr('title', videoTitle);
					}
				//}

				divTarget.trigger('bgMp4Ready', idx);
			},
			getScene7Path: function(pDamPath, element) {
				var $gnbRunmodeInfo = $('#gnbRunmodeInfo'),
					scene7Path = $('#scene7domain').val(),
					damPath = pDamPath || '',
					substitutionPath = '';

				if ($gnbRunmodeInfo.length) {
					if ($gnbRunmodeInfo.val() === 'qa' || $gnbRunmodeInfo.val() === 'live') {
						substitutionPath = damPath.replace('/content/dam/samsung/', scene7Path + 'p5/');
						substitutionPath = substitutionPath.replace('/is/image/', '/is/content/');

						var toChangeDataStr = element.attr('data-vid-data').toString();
						toChangeDataStr = toChangeDataStr.replace(damPath, substitutionPath);
						element.attr('data-vid-data', toChangeDataStr);
					} else {
						substitutionPath = damPath;
					}
				} else {
					substitutionPath = damPath;
				}

				return substitutionPath;
			}
		};
	})();


	$(function() {
		$.each(['show', 'hide'], function (i, ev) {
			var el = $.fn[ev];
			$.fn[ev] = function () {
				this.trigger('aem_' + ev);
				return el.apply(this, arguments);
			};
		});

		namespace.video.init($('body'));
	});
})(window, window.$, window.jQuery);




/*!
 * samsung.com - Phase2 - Video Mp4 Autoplay
 * src : js/src/smg/aem/components/video/smg.aem.components.video.js
 *
 * @version 2.0.0
 * @since 2017.01.02
 */
;
(function(win, $) {
	'use strict';

	if ('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if ('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if ('undefined' === typeof win.smg.aem.components) {
		win.smg.aem.components = {};
	}

	if ('undefined' === typeof win.smg.aem.components.video) {
		win.smg.aem.components.video = {};
	}

	var namespace = win.smg.aem.components.video;

	namespace.mp4AutoPlay = (function() {

		var custom = {
				body: 'body',
				evt: {
					connect: {},
					responsiveMgr: {
						responsiveChange: 'responsiveChange'
					}
				}
			} //custom object

		var responsiveManager = {
			getObjectInfo: function() {
				return {
					responsiveName: this.responsiveName,
					device: this.device
				}
			},
			init: function() {
				this.constants();
				this.bindEvts();
				this.defSetup();
			},
			constants: function() {
				this.device = {
					mobile: { support: true, name: 'mobile', width: 768 },
					tablet: { support: false, name: 'tablet', width: 1280 },
					desktop: { support: true, name: 'desktop' }
				}
				this.evt = custom.evt.responsiveMgr;
			},
			bindEvts: function() {
				this.resizeListener();
			},
			defSetup: function() {
				this.responsiveChange();
			},
			resizeListener: function() {
				$(win).on('resize', $.proxy(this.responsiveChange, this));
			},
			responsiveChange: function() {
				var doc = win.document,
					w = win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;

				var responsiveName;
				if (this.device.mobile.support && w <= this.device.mobile.width) {
					responsiveName = this.device.mobile.name;
				} else if (this.device.tablet.support && w <= this.device.tablet.width) {
					responsiveName = this.device.tablet.name;
				} else if (this.device.desktop.support) {
					responsiveName = this.device.desktop.name;
				} else return;

				var resObj = { responsiveName: '' };
				if (!this.responsiveName) {
					this.responsiveName = responsiveName;
					//trigger, event custom
					resObj.responsiveName = this.responsiveName;
					$(custom.evt.connect).trigger(this.evt.responsiveChange, resObj);
				} else {
					if (this.responsiveName !== responsiveName) {
						this.responsiveName = responsiveName;
						//trigger, event custom
						resObj.responsiveName = this.responsiveName;
						$(custom.evt.connect).trigger(this.evt.responsiveChange, resObj);
					}
				}
			}
		}

		var orientationchangeManager = {
			init: function() {
				this.orientationchangeListener();
			},
			orientationchangeListener: function() {
				$(win).on('orientationchange', function(e) {
					$(win).trigger('resize.mp4AutoPlay');
				});
			}
		}

		var videoManager = {
			init: function() {
				this.setElmts();
				if (!this.videos) {
					return;
				}
				orientationchangeManager.init();
				responsiveManager.init();
				this.defSetup();
				this.bindEvts();
			},
			setElmts: function() {
				var _this = this;
				this.videos = null;
				$('.mp4-video').each(function(i) {
					var el = $(this);
					var data = el.data('vid-data');
					if (data.scrollPlay === 'true') {
						if (!_this.videos) {
							//_this.videos = el.find('video');
							_this.videos = $('#' + data.divID).find('video');
						} else {
							//_this.videos = _this.videos.add(el.find('video'));
							_this.videos = _this.videos.add($('#' + data.divID).find('video'));
						}

						if (data.playOnce === 'true') {
							_this.videos.eq(i).data('play-once', true);
						}
					}
				});
				this.playStatus = [];
			},
			bindEvts: function() {
				this.responsiveListener();
				// if(document.documentMode === 8) {
				//   this.stateChangeListener();
				// }
				this.videos.each(function(i) {
					var el = $(this);
					el.on('loadedmetadata', function() {
						el.attr('data-loaded-metadata', true);
						videoManager.matching();
					});
				});
			},
			defSetup: function() {
				this.responsiveSupport();
			},
			responsiveListener: function() {
				$(custom.evt.connect).on(custom.evt.responsiveMgr.responsiveChange, $.proxy(this.responsiveSupport, this));
			},
			triggerResponse: function() {
				$(custom.evt.connect).trigger(custom.evt.responsiveMgr.responsiveChange);
			},
			support: {
				mobile: false,
				desktop: true
			},
			responsiveSupport: function() {
				var _ = this,
					resInfo = responsiveManager.getObjectInfo(),
					supportEventHandler = function(supportBoolean) {
						if (supportBoolean) {
							_.bindResizeListener();
							_.bindScrollListener();
						} else {
							_.unbindResizeListener();
							_.unbindScrollListener();
						}
					}

				switch (resInfo.responsiveName) {
					case resInfo.device.mobile.name:
						supportEventHandler(this.support.mobile);
						break;
					case resInfo.device.desktop.name:
						supportEventHandler(this.support.desktop);
						break;
				}
			},
			bindScrollListener: function() {
				$(win).off('scroll.mp4AutoPlay').on('scroll.mp4AutoPlay', $.proxy(this.matching, this));
			},
			bindResizeListener: function() {
				$(win).off('scroll.mp4AutoPlay').on('resize.mp4AutoPlay', $.proxy(this.matching, this));
			},
			unbindScrollListener: function() {
				$(win).off('scroll.mp4AutoPlay', $.proxy(this.matching, this));
			},
			unbindResizeListener: function() {
				$(win).off('resize.mp4AutoPlay', $.proxy(this.matching, this));
			},
			matching: function() {
				var windowTopPosition = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop,
					windowBottomPosition = (window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight) + windowTopPosition,
					_this = this;

				if (document.documentMode === 8) {
					this.videos.each(function(k) {
						//var wrap = $(this).closest('.ma-g-c-halftext__video');
						//if(wrap.size() === 0) return;

						var elmt = $(this),
							elmtHeight = elmt.outerHeight(),
							elmtTopPosition = elmt.offset().top,
							elmtBottomPosition = (elmtTopPosition + elmtHeight);

						if (windowTopPosition <= elmtBottomPosition && windowBottomPosition >= elmtTopPosition) {
							if (!_this.playStatus[k]) {
								if (win.videojs) {
									//videojs(elmt.attr('id')).currentTime(0);
									//videojs(elmt.attr('id')).play();
									_this.playStatus[k] = true;
								}
							}
						} else {
							if (_this.playStatus[k]) {
								if (win.videojs) {
									//videojs(elmt.attr('id')).pause();
									_this.playStatus[k] = false;
								}
							}
						}
					});
				} else {
					this.videos.each(function(j) {
						var elmt = $(this),
							elmtHeight = elmt.outerHeight(),
							elmtTopPosition = elmt.offset().top,
							elmtBottomPosition = (elmtTopPosition + elmtHeight);

						if (elmt.data('play-once') && _this.playStatus[j]) {
							return;
						}

						if (windowTopPosition <= elmtBottomPosition && windowBottomPosition >= elmtTopPosition) {
							if (!_this.playStatus[j]) {
								if (elmt.data('loaded-metadata')) {
									elmt[0].currentTime = 0;
									elmt[0].play();
									_this.playStatus[j] = true;
								}
								
							}
						} else {
							if (_this.playStatus[j]) {
								if (elmt.data('loaded-metadata')) {
									elmt[0].pause();
									_this.playStatus[j] = false;
								}
							}
						}
					});
				}
			},
			stateChangeListener: function() {
				var _ = this;
				$('.ma-g-c-halftext .ma-g-c-halftext__video .s-video').each(function(idx, elmt) {
					elmt.attachEvent('playStateChange', function() {
						if (elmt.PlayState === 2) {
							var duration = Math.floor(elmt.Duration) * 1000;
							setTimeout(function() {
								elmt.pause();
							}, duration);
						}
					});
				})
			}
		}

		var init = function(container) {
			if (!(this.container = container).size()) return;

			videoManager.init();
		}

		return {
			init: init,
			videoManager: videoManager
		}
	})();

	$(function() {
		if ($('body').hasClass('touch-device')) return;
		namespace.mp4AutoPlay.init($('body'));
	});

})(window, window.jQuery);

/*
Brightcove Chromeless Player Module
@version : 1.1
@author : W-MARC
@Date : 2016-08-02

2016-05-31	크롬리스 리사이징 이슈 수정
			web(flash only api) vs mobile(smart api) 접속환경에 따라 API 분기처리
			옴니추어 (s_code_next.js) 모듈과 API 충돌 발생
2016-06-15	프로토콜 구분하여 JS API 로딩- BrightcoveExperiences JS 동적 로딩
2016-06-22	AEM 팀 요청사항
			웹표준 문법 수정
			Chromeless Layer 타입 Close시 일괄 닫힘 문제 (function bccLayerClose) 수정
2016-06-29  키보드 패널 : 오토플레이 접근성 수정
            키보드 패널 : 재생/정지 접근성 수정
			키보드 패널 : Closed Caption Controll 접근성 수정
2016-07-06  크롬리스 플레이어 CSS 수정 : 불필요 영역 삭제 및 display:inline(width,height)변경
2016-07-19  크롬리스 플레이어 100% 입력시 브라우저 크기에 맞춰 16:9 비율이 유지되도록 기능 추가
            - 모바일 환경에서 회전시 비율 유지 기능
2016-08-02 HTML5플레이어 autoplay function 수정
           - brightcove api loadedmetadata event 오류
		   크롬리스 플레이어 & HTML5 플레이어 비디오 정보 hashmap put
		   - 한 페이지내에서 두개 이상의 플레이어 생성 가능
		   HTML5플레이어 CSS 추가: <!--bom-studio css add-->
2016-12-01 1. omniture 관련 function onPaly, onStop, onProgress 삭제
		   2. click 이벤트 on(click)로 변경
		    - bcjQuery(".brightcove-bc5-btn-close").click => bcjQuery(document).on('click', '.brightcove-bc5-btn-close', function(){
		    - bcjQuery(".brightcove-bcc-btn-close").click => bcjQuery(document).on('click', '.brightcove-bcc-btn-close', function(){

2017-04-24 신규국가용 ver.5.20.1 국가코드 추가
	var bc5playerData = {
		...
		AL : {'accountId' : '5395474900001', 'playerId' : 'S1WPmS4Rg'},
		LB : {'accountId' : '5359769185001', 'playerId' : 'By5uztNAe'},
		MM : {'accountId' : '5395474902001', 'playerId' : 'BJWPXt4Al'}
	};

2017-12-06 GMC 국가코드 추가 ver.5.28.1 (5.X대 생성가능한 최소버전이 5.28.1)
	var bc5playerData = {
		...
		GCS : {'accountId' : '1852113008001', 'playerId' : 'B1HX3oXbG'},
		SC : {'accountId' : '1275380501001', 'playerId' : 'rJUZMbBZG'},
		LED : {'accountId' : '2172563229001', 'playerId' : 'SJEqMbSWM'}
	};

2017-12-13 브라이트코브 Support GRO 국가코드 추가 ver.5.28.1 (5.X대 생성가능한 최소버전이 5.28.1)
	var bc5playerData = {
		...
		UK_CS : {'accountId' : '5675787969001', 'playerId' : 'Hkmjd40bM'},
		DE_CS : {'accountId' : '5675787970001', 'playerId' : 'ByxCBuECZG'},
		BE_CS : {'accountId' : '5675787971001', 'playerId' : 'r1SZIVRWf'},
		BE_FR_CS : {'accountId' : '5675787972001', 'playerId' : 'r16xOECbz'},
		NL_CS : {'accountId' : '5675788007001', 'playerId' : 'HymXOVAWf'}
	};

2018-01-22 CS 신규 국가코드 추가 

	US_CS : {'accountId' : '5709700875001', 'playerId' : 'SJC96gsNf'},
	CA_FR_CS : {'accountId' : '5709700876001', 'playerId' : 'rye60eiNG'},
	CA_CS : {'accountId' : '5709700877001', 'playerId' : 'BJJnCxi4z'},
	MX_CS : {'accountId' : '5709700878001', 'playerId' : 'SyFThbi4G'},
	BR_CS : {'accountId' : '5709700879001', 'playerId' : 'rypXhbjEf'},
	LATIN_CS : {'accountId' : '5709700880001', 'playerId' : 'rJ3qnZoVz'},
	LATIN_EN_CS : {'accountId' : '5709700881001', 'playerId' : 'rJSnnZjNz'},
	VE_CS : {'accountId' : '5709700882001', 'playerId' : 'HyyTnWo4M'},
	CO_CS : {'accountId' : '5709700883001', 'playerId' : 'B1sd6ejEf'},
	AR_CS : {'accountId' : '5709700884001', 'playerId' : 'ByGBCloVz'},
	CL_CS : {'accountId' : '5709700885001', 'playerId' : 'HyjTClsVf'},
	PE_CS : {'accountId' : '5709700887001', 'playerId' : 'H1qXpZs4z'},
	SG_CS : {'accountId' : '5709700888001', 'playerId' : 'BywY6goNz'},
	AU_CS : {'accountId' : '5709700889001', 'playerId' : 'rkZZPClsEf'},
	NZ_CS : {'accountId' : '5709700890001', 'playerId' : 'H1jD0xsVf'},
	ID_CS : {'accountId' : '5709700891001', 'playerId' : 'rJnOhZi4f'},
	TH_CS : {'accountId' : '5711373553001', 'playerId' : 'SkiJkGsNG'},
	VN_CS : {'accountId' : '5711373555001', 'playerId' : 'rJmcTxiEz'},
	MY_CS : {'accountId' : '5711373556001', 'playerId' : 'SJxYtAZiVG'},
	PH_CS : {'accountId' : '5711373557001', 'playerId' : 'BJ8M6Wj4M'},
	TW_CS : {'accountId' : '5711373558001', 'playerId' : 'rJxptpbo4f'},
	JP_CS : {'accountId' : '5711373559001', 'playerId' : 'Bk4j0ljVG'},
	IN_CS : {'accountId' : '5711373560001', 'playerId' : 'Sk7CdCZjNG'},
	CN_CS : {'accountId' : '5711373561001', 'playerId' : 'S1xr6gsNz'},
	HK_CS : {'accountId' : '5711373562001', 'playerId' : 'HJsUhboVf'},
	HK_EN_CS : {'accountId' : '5711373563001', 'playerId' : 'H1vvhboNf'},
	IE_CS : {'accountId' : '5711373564001', 'playerId' : 'HJgpICZjVM'},
	IT_CS : {'accountId' : '5711373565001', 'playerId' : 'H1Md2boEf'},
	ES_CS : {'accountId' : '5711373566001', 'playerId' : 'By1FaWoNG'},
	HU_CS : {'accountId' : '5711373567001', 'playerId' : 'Bye0rnZoVG'},
	SE_CS : {'accountId' : '5711373568001', 'playerId' : 'Skhl6biEf'},
	DK_CS : {'accountId' : '5711373569001', 'playerId' : 'HkxTRhWjVG'},
	FI_CS : {'accountId' : '5711373571001', 'playerId' : 'Bydk6ZiNM'},
	NO_CS : {'accountId' : '5711373572001', 'playerId' : 'rkMeTWjEz'},
	FR_CS : {'accountId' : '5711373573001', 'playerId' : 'S1ONnWs4G'},
	PT_CS : {'accountId' : '5711373574001', 'playerId' : 'rkZwWaWiVz'},
	PL_CS : {'accountId' : '5711373575001', 'playerId' : 'HyxXTWiVG'},
	GR_CS : {'accountId' : '5711373576001', 'playerId' : 'Hkx7S3WsNM'},
	CZ_CS : {'accountId' : '5711373577001', 'playerId' : 'SJOfnWjEf'},
	SK_CS : {'accountId' : '5711373578001', 'playerId' : 'rkm7hZoNG'},
	RO_CS : {'accountId' : '5711373579001', 'playerId' : 'Sk2D6ZoEG'},
	BG_CS : {'accountId' : '5711373580001', 'playerId' : 'BkzvaZjVG'},
	AT_CS : {'accountId' : '5711373581001', 'playerId' : 'SkaMRgjEz'},
	CH_CS : {'accountId' : '5711373582001', 'playerId' : 'SJumAxjEG'},
	CH_FR_CS : {'accountId' : '5711373583001', 'playerId' : 'BylOVAxoVM'},
	LV_CS : {'accountId' : '5711373584001', 'playerId' : 'B1CFCloEG'},
	LT_CS : {'accountId' : '5711373585001', 'playerId' : 'rytcRljEz'},
	EE_CS : {'accountId' : '5711373586001', 'playerId' : 'ryfYAljEG'},
	RS_CS : {'accountId' : '5711373587001', 'playerId' : 'Skmu3agsEf'},
	HR_CS : {'accountId' : '5711373588001', 'playerId' : 'Bkcials4G'},
	RU_CS : {'accountId' : '5711373589001', 'playerId' : 'BJxrLabiNz'},
	UA_CS : {'accountId' : '5711373590001', 'playerId' : 'SylNBRZiVG'},
	UA_RU_CS : {'accountId' : '5711373592001', 'playerId' : 'rygURWsNM'},
	KZ_RU_CS : {'accountId' : '5711373593001', 'playerId' : 'BJq31zoVG'},
	AE_CS : {'accountId' : '5711373594001', 'playerId' : 'HJgEORWiNz'},
	AE_ARABIC_CS : {'accountId' : '5711373595001', 'playerId' : 'H1ecP0biEG'},
	IL_CS : {'accountId' : '5711373596001', 'playerId' : 'SyyCCZs4G'},
	SA_CS : {'accountId' : '5711373597001', 'playerId' : 'Skd0AboVz'},
	SA_EN_CS : {'accountId' : '5711373598001', 'playerId' : 'BJfkyGoEM'},
	TR_CS : {'accountId' : '5711373599001', 'playerId' : 'Hku9aWi4M'},
	IRAN_CS : {'accountId' : '5711373600001', 'playerId' : 'HkVTCWjVz'},
	LEVANT_CS : {'accountId' : '5711373601001', 'playerId' : 'HkHwplo4M'},
	PK_CS : {'accountId' : '5711373602001', 'playerId' : 'S12rTgoEG'},
	EG_CS : {'accountId' : '5711373603001', 'playerId' : 'SkoQTljVG'},
	N_AFRICA_CS : {'accountId' : '5711373604001', 'playerId' : 'SyeMCnZjNG'},
	AFRICA_EN_CS : {'accountId' : '5711373605001', 'playerId' : 'By1sAbiVM'},
	AFRICA_FR_CS : {'accountId' : '5711373606001', 'playerId' : 'S1MhiRbjEf'},
	AFRICA_PT_CS : {'accountId' : '5711373607001', 'playerId' : 'SyZtnCbs4M'},
	ZA_CS : {'accountId' : '5711373608001', 'playerId' : 'SJNq0Wi4G'},
	SI_CS : {'accountId' : '5711373609001', 'playerId' : 'rJzfRxsVf'},
	PY_CS : {'accountId' : '5711373610001', 'playerId' : 'SkTHCgo4f'},
	UR_CS : {'accountId' : '5711373612001', 'playerId' : 'ByII0eiNf'},
	LB_CS : {'accountId' : '5711373613001', 'playerId' : 'HJK8TlsVz'},
	AL_CS : {'accountId' : '5711373614001', 'playerId' : 'HJjongoEf'},
	MM_CS : {'accountId' : '5711373615001', 'playerId' : 'rkyO6xiNM'}


2018-01-30 업데이트는 기존 1.11.x버전대에서 5.25.x 버전으로 업그레이를 위한 수정
2018-01-30 레이어 다을 때 videojs().dispose() 실행 
 - 이 명령어를 쓰지 않으면 HLS포맷의 영상 재생 중 html 엘리먼트를 지웠을 때 오류메세지가 출력되기 때문에 추가해줌.

	if (window.videojs) {
		var disposeTargetId = target.find('.video-js').attr('id');
		if (disposeTargetId) {
			videojs(document.getElementById(disposeTargetId)).dispose();
		}
	}

2018-01-30 brightcoveBc5PlayerLayer 호출시 ie8, ie9, ie10, ie11, etc 브라우저별 분기처리 
 - 브라우저 버전별로 로드방식을 다르게 적용해주어야 v5.25.5 플레이어가 제대로 실행된다.

	if (getIeVersion() === -1) { // ie11, etc
		s.onload = function() {
			setTimeout(function() {
				myPlayer.callback(vodId);
			}, 500);
		}

		document.body.appendChild(s);
	} else { // ie10, ie9, ie8
		if (getIeVersion() === 8) {
			s.onreadystatechange = function () {
				if(s.readyState == "loaded" || s.readyState == "complete") {
					setTimeout(function() {
						myPlayer.callback(vodId);
					}, 500)
				}
			}
			document.body.appendChild(s);
		} else if (getIeVersion() === 9) {
			s.onload = function() {
				setTimeout(function() {
					myPlayer.callback(vodId);
				}, 500);
			};

			bcjQuery(bc5Info.targetId).append(s);
		} else if (getIeVersion() === 10) {
			s.onload = function() {
				setTimeout(function() {
					myPlayer.callback(vodId);
				}, 500);
			}

			document.body.appendChild(s);
		}
	}

2018-01-30 brightcoveBc5PlayerLayer 호출의 callback함수 변경

	videojs(bc5Info.id).ready(function(){
		...

		if (isAutoPlay) {
			bcjQuery("#"+bc5Info.id).find(".vjs-big-play-button").trigger('click');
		}
		// bc5MyPlayer.on('play') 이벤트가 ie9, ie10에서 동작하지 않아서 trigger('click') 으로 수정함.

		if (getIeVersion() === 9 || getIeVersion() === 10) { // v5.24 luna-skin caption hover
			bcjQuery("#"+bc5Info.id).find('.vjs-captions-button').on('mouseenter', function(e) {
				e.stopPropagation();
				bcjQuery(e.currentTarget).find('.vjs-menu-content').css('background-color', 'rgba(43, 51, 63, 0.7)');
			});
		}
		// v5.24.5. 의 luna스킨은의 캡션 엘리먼트 .vjs-captions-button > .vjs-menu-content (ul)은 
		   css background-color: transparent 속성을 가지고 있는데,
		   ie9, ie10에서는 위 속성이 적용되지 않아서 cc버튼에서 자막선택 메뉴로 움직일 때 hover가 풀리는 오류가 있어서 수정함.


		if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) { // firefox X button outline
     		var ffCloseBtn = vjsWrap.closest('.video-area_5').find('.brightcove-bcc-btn-close, .brightcove-bc5-btn-close');
     		if (ffCloseBtn.length) {
     			//ffCloseBtn.css('border', 'outline: 1px solid #4d90fe');
     			ffCloseBtn.off('ffoutline').on('focusin.ffoutline', function(e) {
     				ffCloseBtn.css('outline', '1px solid #4d90fe');
     			});
     			ffCloseBtn.off('ffoutline').on('focusout.ffoutline', function(e) {
     				ffCloseBtn.css('outline', 'unset');
     			});
     		}
		}
		// WAQA 접근성 검수에서 레이어형태의 X닫기버턴의 outline이 잘 보이지 않아 FF일때만 outline을 잘 보이도록 focus 이벤트로 변경해줌.

	}

2018-01-30 fnTabIndexSort() 실행함수 제거
	if(!mobile){
		//fnTabIndexSort(vodId);
	}

	caption메뉴를 열어주는 [cc]버튼과 재생이벤트가 충돌나서 주석처리 
	(cc버튼을 keydown으로 누르면 layer타입에서 플레이어가 중복으로 실행되서 주석처리함);


2018-01-30 firefox X버튼 포커스 아웃라인
	if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) { // firefox X button outline
			var ffCloseBtn = vjsWrap.closest('.video-area_5').find('.brightcove-bcc-btn-close, .brightcove-bc5-btn-close');
			if (ffCloseBtn.length) {
				//ffCloseBtn.css('border', 'outline: 1px solid #4d90fe');
				ffCloseBtn.off('ffoutline').on('focusin.ffoutline', function(e) {
					ffCloseBtn.css('outline', '1px solid #4d90fe');
				});
				ffCloseBtn.off('ffoutline').on('focusout.ffoutline', function(e) {
					ffCloseBtn.css('outline', 'unset');
				});
			}
	}

2018-01-30 다국어 적용시 플레이어 UI 폰트 적용
	if (vjsWrap.hasClass('vjs-v5')) {
	 	var uiFontRest = '',
	 		blankSheet = '', 
	 		createdStyleTag = '',
	 		docHead = null;

	 	uiFontRest = '.vjs-control-bar button { font-family: VideoJS !important; }';

		docHead = document.getElementsByTagName("head")[0];

		if (document.createStyleSheet) {
			blankSheet = document.createStyleSheet();
			blankSheet.cssText = uiFontRest;
		} else {
			createdStyleTag = document.createElement("style");
			createdStyleTag.type = "text/css";

			if (createdStyleTag.styleSheet) {
				createdStyleTag.styleSheet.cssText = uiFontRest;
			} else {
				createdStyleTag.appendChild(document.createTextNode(uiFontRest));
			}
			docHead.appendChild(createdStyleTag);
		}
	}

2018-01-30 자막 유무에 따라 자막 영역의 tabindex="0" 설정
	var isTabIndexAble = false;

	if (vjsTextTrack.length) {
		vjsTextTrack.off('DOMSubtreeModified.indexable propertychange.indexable')
		.on('DOMSubtreeModified.indexable propertychange.indexable', function(e) {
			e.stopPropagation();

			if (vjsTextTrack.find('div').length > 2) {
				if (!isTabIndexAble) {
					vjsTextTrack.attr('tabindex', 0);
					isTabIndexAble = true;
				}
			} else {
				if (isTabIndexAble) {
					isTabIndexAble = false;
					vjsTextTrack.removeAttr('tabindex');
				}
			}
		});

		vjsTextTrack.trigger('DOMSubtreeModified.indexable propertychange.indexable');
	}
*/

var bcc_idx = 0;
var areaLiveTimer;
var bcjQuery = window.$;
var bccMsg =  new Array();
var bcBrowser=null;//true : pc , false: mobile
if(!navigator.userAgent.match(/Android|Mobile|iP(hone|od|ad)|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/)){
	bcBrowser = true;
}else{
	bcBrowser = false;
}
var bcProtocol=null;//true : http . false : https
if(location.protocol == "http:"){
	bcProtocol=true;
}else{
	bcProtocol=false;
}

BcHashMap = function(){
	this.map = new Array();
}
BcHashMap.prototype = {
	put : function(key,value){
		this.map[key] = value;
	},
	get : function(key){
		return this.map[key];
	}
}
if(window.SITE_CD && window.SITE_CD == "sec"){
	bccMsg["text_01"] = "재생";
	bccMsg["text_02"] = "일시정지";
	bccMsg["text_03"] = "정지";
	bccMsg["text_04"] = "되감기";
	bccMsg["text_05"] = "앞으로";
	bccMsg["text_06"] = "음소거";
	bccMsg["text_07"] = "음량 증가";
	bccMsg["text_08"] = "음량 감소";
	bccMsg["text_09"] = "더 이상 비디오 목록 없습니다";
	bccMsg["text_10"] = "브라이트 플레이어 종료";
	bccMsg["text_12"] = "플레이어 준비";
	bccMsg["text_13"] = "이전";
	bccMsg["text_14"] = "다음";
	bccMsg["text_20"] = "자막열기";
	bccMsg["text_21"] = "자막닫기";
	bccMsg["text_22"] = "자막없음";
	bccMsg["text_23"] = "자막";
	bccMsg["text_24"] = "전체화면";
	bccMsg["text_25"] = "전체화면 종료";
}else{
	bccMsg["text_01"] = "Play";
	bccMsg["text_02"] = "Pause";
	bccMsg["text_03"] = "Stop";
	bccMsg["text_04"] = "Rewind";
	bccMsg["text_05"] = "Forward";
	bccMsg["text_06"] = "Mute";
	bccMsg["text_07"] = "Volume up";
	bccMsg["text_08"] = "Volume down";
	bccMsg["text_09"] = "No more video list";
	bccMsg["text_10"] = "End of brightcove player";
	bccMsg["text_12"] = "Player content ready";
	bccMsg["text_13"] = "Previous";
	bccMsg["text_14"] = "Next";
	bccMsg["text_20"] = "Closed caption on";
	bccMsg["text_21"] = "Closed caption off";
	bccMsg["text_22"] = "No Closed caption";
	bccMsg["text_23"] = "Caption";
	bccMsg["text_24"] = "fullscreen";
	bccMsg["text_25"] = "Non-Fullscreen";
}

var bccStatusCcFlag = new Array();

var bcChromePlayerData = {
	DEV		 : {'playerId' : '2487224303001', 'playerKey' : 'AQ~~,AAAA0gEd3vk~,UZmnOpR2YpEfDjzgdcc7b8EnQirJFTfn'},
	LIVE     : {'playerId' : '2474494486001', 'playerKey' : 'AQ~~,AAAA0gHQkRE~,ddRZn78L8shi6Jrn-WVLALuE0paPt520'},
	GLOBAL   : {'playerId' : '2937405510001', 'playerKey' : 'AQ~~,AAACqvvPXZk~,73mGUHxCIIQhsQ1kvmok_IBzGMhHprit'},
	EG       : {'playerId' : '926210542001', 'playerKey' : 'AQ~~,AAAA1vDImsE~,cmf9fQlzDEX60Ap9x_kSo3zfwvzYk9fg'},
	CN       : {'playerId' : '926210307001', 'playerKey' : 'AQ~~,AAAA1vc34eE~,kItzOdTai_fzjaKuIxIg8DV223Iq6cvi'},
	PK       : {'playerId' : '926251521001', 'playerKey' : 'AQ~~,AAAA1vSqgEE~,wOnUwNgORxX5Lx7vj1pm6XhYLoDcEM4_'},
	LEVANT   : {'playerId' : '926251519001', 'playerKey' : 'AQ~~,AAAA1vSqfFk~,wpJou2CBGiTHSgG-P42Xe63FMRD6TyXo'},
	CO       : {'playerId' : '926210505001', 'playerKey' : 'AQ~~,AAAA1vDIWFk~,-osp2UwmJkSayIBzpe-fiWWjFetpHFs9'},
	SG       : {'playerId' : '926210509001', 'playerKey' : 'AQ~~,AAAA1vDIYCk~,zKw77YEpCQO0r9qz-sEytHx3lFErk4ss'},
	VN       : {'playerId' : '926196171001', 'playerKey' : 'AQ~~,AAAA1u88Qek~,6VFss6TVSqtCkDpG6h2Uh4I4PD0GLZLq'},
	US       : {'playerId' : '924336519001', 'playerKey' : 'AQ~~,AAAA1vSqNgk~,TETY7sgK5kwNobvkqdSXY02JjkGuDmIc'},
	HR       : {'playerId' : '926210332001', 'playerKey' : 'AQ~~,AAAA1vc4CPE~,snrDcnWtt4VES1PU9mYW_mbeNmOz1bG8'},
	RS       : {'playerId' : '926210534001', 'playerKey' : 'AQ~~,AAAA1vDIiyE~,1l625wgL4J5inOw1R1uIHQ2AI0mBhVFr'},
	SI       : {'playerId' : '3855497514001', 'playerKey' : 'AQ~~,AAADga3gQqE~,ighS4vLAqw7aEJSfMheNEQNl3lgkikCf'},
	AT       : {'playerId' : '924336545001', 'playerKey' : 'AQ~~,AAAA1vSqZOk~,hp4Wt3zVjWc2whDUvqDH9CGlKil8OyNx'},
	CH_FR    : {'playerId' : '926251507001', 'playerKey' : 'AQ~~,AAAA1vSqaNE~,EQ78wh6EYWdP_mwBFB3IbXxs7JLIAwqv'},
	CH       : {'playerId' : '926210526001', 'playerKey' : 'AQ~~,AAAA1vDIf2k~,iVoVKzdFbeHQvN-Pf_SvWToP7TwoRgPA'},
	AR       : {'playerId' : '926210303001', 'playerKey' : 'AQ~~,AAAA1vc32hE~,GuUbplf11bKwpRy4EAYNGiU2J4b_cVdU'},
	PY       : {'playerId' : '4456565107001', 'playerKey' : 'AQ~~,AAAEDVSMUYE~,3yoQrflDnSf82zbeen7sVq1mwoAwGDlQ'},
	UR       : {'playerId' : '4456565111001', 'playerKey' : 'AQ~~,AAAEDVSMWVE~,nHKELpWrD9QyFGjGFsIleAdaHKQNcHX7'},
	AU       : {'playerId' : '926210511001', 'playerKey' : 'AQ~~,AAAA1vDIZBE~,8Qxfn_gGqXQWmvXHrUz4r05jOuPCLzUa'},
	NZ       : {'playerId' : '926196169001', 'playerKey' : 'AQ~~,AAAA1u88PgE~,GmWzarV2MErCAUzi5b8t5EKcBnk6E8yV'},
	EE       : {'playerId' : '926251513001', 'playerKey' : 'AQ~~,AAAA1vSqcKE~,pLfhI1aol64198gOZquO36bmCItlna-V'},
	LV       : {'playerId' : '926210326001', 'playerKey' : 'AQ~~,AAAA1vc4ASE~,axBlmjdcgk_FU76yezkFgm_XktjFJsfJ'},
	LT       : {'playerId' : '926251515001', 'playerKey' : 'AQ~~,AAAA1vSqdIk~,FfPsfAjtZCPUWwnff6eUCf5dSEQmz-kJ'},
	BE       : {'playerId' : '926196191001', 'playerKey' : 'AQ~~,AAAA1u88bOE~,jLxL4xeWUGVW0JUPGna3w8uSmCNmlptZ'},
	BE_FR    : {'playerId' : '926210528001', 'playerKey' : 'AQ~~,AAAA1vDIg1E~,MkoiW9FH-nnG4ZUl3DOpygEFQNnhP-uI'},
	NL       : {'playerId' : '926196193001', 'playerKey' : 'AQ~~,AAAA1u88cMk~,aJXrrmXqcmSiDmFHqX1rl8jwuB1XCwGA'},
	JP       : {'playerId' : '926210515001', 'playerKey' : 'AQ~~,AAAA1vDIa-E~,E6N35iQp8jDwx86w-tUgYVHCLPSCiARX'},
	sec      : {'playerId' : '926196177001', 'playerKey' : 'AQ~~,AAAA1u88TaE~,H1f81zC57BUdqLYj69bNcK1mnWR6NNTp'},
	CA       : {'playerId' : '924384217001', 'playerKey' : 'AQ~~,AAAA1vc30kE~,cbXkIMRl2tur-XePkk1yLTgjdi2k0-MS'},
	CA_FR    : {'playerId' : '924336521001', 'playerKey' : 'AQ~~,AAAA1vSqOfE~,sZkSFUdTS6eUK64OErxusx96DKJNIbJi'},
	CL       : {'playerId' : '924336527001', 'playerKey' : 'AQ~~,AAAA1vSqRak~,EnrWLy5bVf2utzcUFuidrHPW6lZMMy2X'},
	CZ       : {'playerId' : '926210321001', 'playerKey' : 'AQ~~,AAAA1vc3-VE~,q0UeQmlKWUjB8EFbz1b9FLjEfqJ84u3l'},
	SK       : {'playerId' : '924336543001', 'playerKey' : 'AQ~~,AAAA1vSqYQE~,ri_moVr2zWAxhVn98njnuti412uSoK-x'},
	BR       : {'playerId' : '926210501001', 'playerKey' : 'AQ~~,AAAA1vDIUIk~,LHrzhhIkh5_rkM4qIaeYSJ61GOZoclmv'},
	FR       : {'playerId' : '924336541001', 'playerKey' : 'AQ~~,AAAA1vSqXRk~,4Gh2JxitIlZ5MuGnkuyrS7FZ60fKqZ6m'},
	GR       : {'playerId' : '926196187001', 'playerKey' : 'AQ~~,AAAA1u88YSk~,vxFU_YgYcCL89X9Qwe1s7rnR0bJNIE-M'},
	DE       : {'playerId' : '924336537001', 'playerKey' : 'AQ~~,AAAA1vSqVUk~,Ij_lFfu7jRUnSOIVjtgLuFNXLbFsKk9w'},
	HU       : {'playerId' : '926210309001', 'playerKey' : 'AQ~~,AAAA1vc35ck~,MU-_2j7kl_JrhjFN8O5yPCelm0A90oNf'},
	HK       : {'playerId' : '924336535001', 'playerKey' : 'AQ~~,AAAA1vSqUWE~,2V3Gfvyx2SIdZnODa2GsXGASlNJYJB_E'},
	HK_EN    : {'playerId' : '926196179001', 'playerKey' : 'AQ~~,AAAA1u88UYk~,XDIlg6GcmdvGAbMXEj4cy62aA8fWZ7Rg'},
	IT       : {'playerId' : '926196185001', 'playerKey' : 'AQ~~,AAAA1u88XUE~,fft8jN67dHT3bQ4T-YR299dVUUW2Wq13'},
	ID       : {'playerId' : '926210513001', 'playerKey' : 'AQ~~,AAAA1vDIZ_k~,nr0_v_QukmUrfpAfwd6syDNAutP_lYjB'},
	KZ_UR    : {'playerId' : '926210334001', 'playerKey' : 'AQ~~,AAAA1vc4DNk~,qbZrUsiJtsTqPJmQELpgpisg96XC54ai'},
	LATIN    : {'playerId' : '926196165001', 'playerKey' : 'AQ~~,AAAA1u88Ohk~,v-_KXguDfE5YT_ue64VtxZK0J-pcj-0C'},
	LATIN_EN : {'playerId' : '924336525001', 'playerKey' : 'AQ~~,AAAA1vSqQcE~,BgcEcsklFLovEoVnOt9RPKJB5s7msCEw'},
	VE       : {'playerId' : '926210503001', 'playerKey' : 'AQ~~,AAAA1vDIVHE~,OedBXOLjIJrH7dJYXr4eGBbyQ_PYA65j'},
	MX       : {'playerId' : '924336523001', 'playerKey' : 'AQ~~,AAAA1vSqPdk~,0hHIlIMEKBPQrwDwbHYwzm2SiuZ5pER1'},
	N_AFRICA : {'playerId' : '926251523001', 'playerKey' : 'AQ~~,AAAA1vSqhCk~,tjW3A2k5zkQthYBV9Dwp5Qie2wZvGoF-'},
	DK       : {'playerId' : '926210311001', 'playerKey' : 'AQ~~,AAAA1vc36bE~,FiLtJnouWb44elliFsUPMk5UTMEBLc10'},
	FI       : {'playerId' : '926210524001', 'playerKey' : 'AQ~~,AAAA1vDIe4E~,lKlcTymj-FAv5_CC2dxasn2HZF-vT7a1'},
	NO       : {'playerId' : '924336539001', 'playerKey' : 'AQ~~,AAAA1vSqWTE~,NIYuVb4Yj1W-Vy50_tEzbsb7GSNBGjUu'},
	SE       : {'playerId' : '926210522001', 'playerKey' : 'AQ~~,AAAA1vDId5k~,wl2s5WAZVZQm20Pfrgap3hb8Pb_GhmS2'},
	PT       : {'playerId' : '926210317001', 'playerKey' : 'AQ~~,AAAA1vc38YE~,E3RfSFCBgebLJXrs8gqIapjCZAgtmC6W'},
	PH       : {'playerId' : '926196175001', 'playerKey' : 'AQ~~,AAAA1u88Sbk~,WIP_y9MCYC_2l3T_Wm3nrg1cmQbpBrij'},
	PL       : {'playerId' : '926210319001', 'playerKey' : 'AQ~~,AAAA1vc39Wk~,VQ1_fYOWigV90NMn7kDlwSpB5fr6HAHC'},
	PE       : {'playerId' : '926210507001', 'playerKey' : 'AQ~~,AAAA1vDIXEE~,y0ET89E0lhD6DaPPu4E_3SyvFnevN5ut'},
	RU       : {'playerId' : '926196195001', 'playerKey' : 'AQ~~,AAAA1u88dLE~,N1tbZZomcgAsb_PfXERrXa4VDTt73bow'},
	BG       : {'playerId' : '926210323001', 'playerKey' : 'AQ~~,AAAA1vc3_Tk~,mISXqRtx5TCJSuRDXFAyj0wgMMFj3s4q'},
	RO       : {'playerId' : '926196189001', 'playerKey' : 'AQ~~,AAAA1u88aPk~,81hqJ9oLX0Eod2XeyfzxgoAGCbN2YRcH'},
	ES       : {'playerId' : '926210519001', 'playerKey' : 'AQ~~,AAAA1vDIc7E~,HUeD8rCqt9P3_ICbpxGIpFVTu2PVdhqe'},
	TW       : {'playerId' : '926210305001', 'playerKey' : 'AQ~~,AAAA1vc33fk~,LaoPq8X-3PefH08VUXN2EctTZqxgCTWv'},
	TR       : {'playerId' : '926196201001', 'playerKey' : 'AQ~~,AAAA1u88gGk~,tmBYuNAdVdgtccZMqQiemGQppaBGQ4_z'},
	UA       : {'playerId' : '926210538001', 'playerKey' : 'AQ~~,AAAA1vDIkvE~,i2xeGsQLR673hBz63dg10Ip937VIAfWE'},
	UA_RU    : {'playerId' : '926210536001', 'playerKey' : 'AQ~~,AAAA1vDIjwk~,A2lOutVBN3UbEUcePOvvpHzT5fzY9DPx'},
	IE       : {'playerId' : '926196183001', 'playerKey' : 'AQ~~,AAAA1u88WVk~,uCEaQuZ8nzgtayb6cqEcyT1RHclkJG_9'},
	UK       : {'playerId' : '926196181001', 'playerKey' : 'AQ~~,AAAA1u88VXE~,x0_28B_6Zvk93nAEavFzIk_lfMgOCrDt'},
	AE       : {'playerId' : '926251517001', 'playerKey' : 'AQ~~,AAAA1vSqeHE~,sL-qYGp5vDs9lvQC58LpmsrAdgrnDt-w'},
	AE_ARABIC: {'playerId' : '926196197001', 'playerKey' : 'AQ~~,AAAA1u88eJk~,S0yiLpxyHQcCakj-7HKFJS5XjwgkAXtx'},
	IN       : {'playerId' : '926210517001', 'playerKey' : 'AQ~~,AAAA1vDIb8k~,lUaeNA43HwiHGbg_2NeUs3hiAJaenQDK'},
	MY       : {'playerId' : '926196173001', 'playerKey' : 'AQ~~,AAAA1u88RdE~,kPQQqwrYdp4bxmwR-nZmYOOY7ci7Pwgy'},
	ZA       : {'playerId' : '2573241961001', 'playerKey' : 'AQ~~,AAACVrpFDvk~,goA5RG4suySVUwJKOuX3yfgABbX2fkrD'},
	AFRICA_EN: {'playerId' : '926210336001', 'playerKey' : 'AQ~~,AAAA1vc4EME~,Mr9Hje7LqNftSlNIaKpcSkhnqcpbbP89'},
	AFRICA_FR: {'playerId' : '926251525001', 'playerKey' : 'AQ~~,AAAA1vSqiBE~,Qp5WvJFrHi_K02EFeBsQgtJ5MwsmpUMX'},
	AFRICA_PT: {'playerId' : '926196207001', 'playerKey' : 'AQ~~,AAAA1u88iDk~,ccsEg19-CbJkk_zJ9c6aFicBsNvJsIn8'},
	IRAN     : {'playerId' : '926210340001', 'playerKey' : 'AQ~~,AAAA1vc4GJE~,YM3AHViBVn9RFzwbP1jQ_aE5oeVo1AqU'},
	IL       : {'playerId' : '926210540001', 'playerKey' : 'AQ~~,AAAA1vDIltk~,IPAPGgmj_6fc11IflU32LkXpdx93feNU'},
	SA       : {'playerId' : '926196199001', 'playerKey' : 'AQ~~,AAAA1u88fIE~,O2m1MLoG_muG7KThKuLs8ABApukPd0cJ'},
	SA_EN    : {'playerId' : '2573241962001', 'playerKey' : 'AQ~~,AAACVrpFEuE~,IGsISVlCgs-KnLEUg3gHYj5oez9ODaU5'},
	TH       : {'playerId' : '924336529001', 'playerKey' : 'AQ~~,AAAA1vSqSZE~,QkYUAXu3lHXJWLnyQOCo2M0yp2LeVm6X'}
};

var bccPlayer, bccModVP, bccModExp, bccModCc, bccDiv;
var bcChromePlayer = new function(){
	var bccPlayerMap = new BcHashMap();
	var target = this;
	this.myBccplayerData;
	this.bccPlayerData;

	this.onChangeCC = new Object();

	(function( $ ){
		$.fn.bcChromePlayer = function( alais ){

			var bcExperiencesAPI;
			if(bcProtocol){
				bcExperiencesAPI = "//admin.brightcove.com/js/BrightcoveExperiences.js";
			}else{
				bcExperiencesAPI = "//sadmin.brightcove.com/js/BrightcoveExperiences.js";
			}

			var bcc = bcChromePlayer;
			var arr = Array.prototype.slice.call( arguments, 1);

			if(bcc.checkNull(arr[1]))arr[1]="100%";
			if(bcc.checkNull(arr[2]))arr[2]="100%";
			if(bcc.checkNull(arr[3]))arr[3]="false";
			alais = alais.toUpperCase();
			var bccType = (alais=="LIVE")?"videoList":"videoPlayer";

			myBccplayerData = eval("bcChromePlayerData."+alais);
			if(typeof myBccplayerData == "undefined"){
				alert( 'Alais ' +  alais + ' does not exist on jQuery.bcChromePlayer' );
				return;
			}

			bccPlayerData = {
				'alais' : alais,
				'playerId' : myBccplayerData.playerId,
				'playerKey' : myBccplayerData.playerKey,
				'videoId' : arr[0],
				'width' : arr[1],
				'height' : arr[2],
				'autoplay' : arr[3],
				'type' : bccType
			};
			bcCLog(bccPlayerData);
			//hashmap put
			bccPlayerMap.put(bccPlayerData.videoId,bccPlayerData);

			bccDiv = "#myExperience"+bccPlayerData.videoId;

			arr = [ $( this ) ].concat( arr );

			var s = document.createElement('script');
			s.type = 'text/javascript';
			s.src = bcExperiencesAPI;
			if(s.readyState) {
				document.getElementsByTagName('head')[0].appendChild(s);

				s.onreadystatechange= function () {
					if(getIeVersion() == "8.0"){
						if(s.readyState == "loaded" || s.readyState == "complete") {
							s.onreadystatechange = null;
							return bcc["run"].apply( bcc, arr );
						}
					}else{
						if(s.readyState == "loaded" || s.readyState == "complete") {
							return bcc["run"].apply( bcc, arr );
						}
					}
				}
			}else{
				document.body.appendChild(s);
				s.onload = function () {
					return bcc["run"].apply( bcc, arr );
				}
			}
		}
	})( bcjQuery );

	this.run = function( div, vodId){
		//bccDiv = div.selector;

		var bccInfo = bccPlayerMap.get(vodId);
		div.html( this.markup(vodId) ).show();
		div.attr('style',"position:absolute;width:" + bccInfo.width + ";height:" + bccInfo.height + ";top:0px;bottom:0px;right:0px;left:0px;");

		brightcove.createExperiences();
		if(bcBrowser){
			div.find("object").bccPlayerControls(bccInfo.videoId, bccInfo.width, bccInfo.height);
		}else{

			var a ='.bc-cplayer-area{display: block; position: relative; padding-top: 56.25%;}';
			var b,c,d;
			d = document.getElementsByTagName("head")[0];
			if (document.createStyleSheet) {
				b = document.createStyleSheet();
				b.cssText = a;
			} else {
				c = document.createElement("style");
				c.type = "text/css";
				if (c.styleSheet) {
					c.styleSheet.cssText = a
				} else {
					c.appendChild(document.createTextNode(a))
				}
				d.appendChild(c);
			}

		}
		if(getIeVersion() != -1){
			div.children('span').css('display','');
		}
		return div;
	};

	this.markup = function(vodId){
		var bccInfo = bccPlayerMap.get(vodId);
		var markup = '';
		markup += '<object id="myExperience' + bccInfo.videoId + '" class="BrightcoveExperience">';
		markup += '<param name="bgcolor" value="#FFFFFF" />';
		markup += '<param name="width" value="' + bccInfo.width + '" />';
		markup += '<param name="height" value="' + bccInfo.height + '" />';
		markup += '<param name="playerID" value="' + bccInfo.playerId + '" />';
		markup += '<param name="playerKey" value="' + bccInfo.playerKey + '" />';
		markup += '<param name="wmode" value="transparent">';
		markup += '<param name="isVid" value="true" />';
		markup += '<param name="isUI" value="true" />';
		markup += '<param name="autoStart" value="'+bccInfo.autoplay+'" />';
		markup += '<param name="includeAPI" value="true" />';
		markup += '<param name="templateLoadHandler" value="myTemplateLoaded" />';
		markup += '<param name="dynamicStreaming" value="true" />';
		markup += '<param name="@' + bccInfo.type + '" value="' + bccInfo.videoId + '" />';
		if(!bcProtocol){
			markup += '<param name="secureConnections" value="true" />';
			markup += '<param name="secureHTMLConnections" value="true" /> ';
		}

		markup += '</object>';

		return markup;
	};

	this.getValue = function ( att ){
		var ret = [];
		if ( ret == null ){
			return null;
		}else{
			return ( typeof( att ) == 'string' ) ? ret[att] : ret;
		}
	};
	this.setValue = function ( name, value ){
		var ret = [];
		for ( var i in value ){
			 ret[i] = value[i];
		}
	};
	this.checkNull = function ( val ){
		return ( val == null || val == '' );
	};
};
//size resize
bcjQuery(window).resize(function(){
	if(bccModExp != undefined){
		onBcVideoSize();
	}
});
function onBcVideoSize(){

	var width = $(bccDiv).parent().width();
	var height = $(bccDiv).parent().height();
	bcCLog("onBcVideoSize width:"+width +" / height:"+height);
	if (bccModExp && bccModExp.experience.type === "html") {
        bccModExp.setSize(width, height);
    }
}
function bccTemplateLoaded( experienceID ){
	bcCLog("]]bccTemplateLoaded");
	if(bcBrowser){
		bccModVP = brightcove.getExperience( experienceID).getModule( APIModules.VIDEO_PLAYER );
		bccModExp = brightcove.getExperience(experienceID).getModule( APIModules.EXPERIENCE );
	}else{
		bccModVP = brightcove.api.getExperience( experienceID).getModule( brightcove.api.modules.APIModules.VIDEO_PLAYER );
		bccModExp = brightcove.api.getExperience(experienceID).getModule( brightcove.api.modules.APIModules.EXPERIENCE );
	}
	bccModVP.addEventListener( BCMediaEvent.CHANGE, onBccVideoLoad );
	bccModVP.addEventListener( BCMediaEvent.BEGIN, onBccVideoReady );
	bccModVP.addEventListener( BCMediaEvent.PLAY, onBccVideoPlay );
	bccModVP.addEventListener( BCMediaEvent.STOP, onBccVideoStop );
}

function onDFXPStyle(e){
	bcCLog("]]onDFXPStyle");
	//bcCLog(bccModCc.getCaptionsEnabled());
}
function onBccVideoLoad( e ){
	bcCLog("]]onBccVideoLoad");
	bccStatusCcFlag[e.media.id] = false;
	if(e.media.captions != null){
		bccStatusCcFlag[e.media.id] = true;
	}
}

function onBccVideoReady( e ){
	bcCLog("]]onBccVideoReady");
	if(e.media.lineupId == 0){
		if(bcjQuery("#myExperience" + e.media.id).length){
			bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").attr("nowVideo",e.media.id);
			if(e.media.captions != null){
				bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").attr("tabindex","0");
			}
			if(bccStatusCcFlag[e.media.id]){
				bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("over").addClass("on");
			}else{
				bcjQuery("#myExperience" + e.media.id).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("on").removeClass("over");
			}
		}
	}else{
		var vp = brightcove.getExperience( "myExperience" + e.media.lineupId ).getModule( APIModules.VIDEO_PLAYER );
		if(e.media.captions != null){
			bccStatusCcFlag[e.media.id] = true;
		}
		if(bcjQuery("#myExperience" + e.media.lineupId).length){
			bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").attr("nowVideo",e.media.id);
			if(e.media.captions != null){
				bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").attr("tabindex","0");
			}
			if(bccStatusCcFlag[e.media.lineupId]){
				bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("on").addClass("over");
			}else{
				bcjQuery("#myExperience" + e.media.lineupId).parents(".bc-cplayer-control-area").find(".bc-cc").removeClass("over").addClass("on");
			}
		}
	}

}


function onBccVideoPlay(e){
	bcCLog("]] onBccVideoPlay " +e.media.id);
	var configId = bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").attr('id').split('bc-cplayer-control-area_');
	bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".play").removeClass('play').addClass('pause').attr({'title':bccMsg["text_02"], 'id':'pause-'+configId[1]}).text(bccMsg["text_02"]);
}
function onBccVideoStop(e){
	bcCLog("]] onBccVideoStop "+e.media.id);
	var configId = bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").attr('id').split('bc-cplayer-control-area_');
	bcjQuery("#myExperience"+e.media.id).parents(".bc-cplayer-control-area").find(".pause").removeClass('pause').addClass('play').attr({'title':bccMsg["text_01"], 'id':'play-'+configId[1]}).text(bccMsg["text_01"]);
}

(function($){
	$.fn.bccPlayerControls = function(videoID, vWidth, vHeight){

		var a ='.bc-cplayer-area{display: block; position: relative; max-width: 100%;padding-top: 56.25%;}.bc-cplayer-control-area{overflow:hidden}.bc-cplayer-control{position:relative;opacity:0.01;z-index:0;background-image:url(/common/brightcove/img/bg_panel.gif);width:100%;height:40px;overflow:hidden}.bc-cplayer-control.show {opacity:1 !important;z-index:4000 !important;}.bc-cplayer-control .leftPanel {float:left}.bc-cplayer-control .rightPanel {float:right}.bc-cplayer-container .video{position:relative;	top:-40px;z-index:3000;width:100%;height:100%}.bc-cplayer-control button {float:left;width:50px;height:40px;overflow:hidden;padding-top:40px;font-family: Arial, verdana, sans-serif;color: #000;font-size: 1.1em;background-repeat: no-repeat; border:none;}.bc-cplayer-control button:focus{border:white solid 1px}.bc-cplayer-control .rewind {background-image: url(/common/brightcove/img/btn_rewind.gif); }    .bc-cplayer-control .play {background-image: url(/common/brightcove/img/btn_play.gif);}    .bc-cplayer-control .pause {background-image: url(/common/brightcove/img/btn_pause.gif); }    .bc-cplayer-control .forward {background-image: url(/common/brightcove/img/btn_forward.gif); }.bc-cplayer-control .mute {background-image: url(/common/brightcove/img/btn_volon.gif); }.bc-cplayer-control .volume-down {background-image: url(/common/brightcove/img/btn_voldown.gif); }.bc-cplayer-control .volume-up {background-image: url(/common/brightcove/img/btn_volup.gif); }.bc-cplayer-control .muted{background-image: url(/common/brightcove/img/btn_volmute.gif);}.bc-cplayer-control .rightPanel a {overflow:hidden;display:inline-block;float:left;height:40px;}.bc-cplayer-control .rightPanel button.bc-cc {width:34px;background-image:url(/common/brightcove/img/btn_bc_cc.png);}.bc-cplayer-control .rightPanel button.bc-cc.over {background-image:url(/common/brightcove/img/btn_bc_cc_over.png) !important;}.bc-cplayer-control .rightPanel button.bc-cc.on {background-image:url(/common/brightcove/img/btn_bc_cc_on.png) !important;}.end-of-bc{overflow:hidden;width:0px;height:0px;position:absolute}';
		//dev
		//var a ='.bc-cplayer-area{display: block; position: relative; padding-top: 56.25%;}.bc-cplayer-control-area{overflow:hidden;height:100%}.bc-cplayer-control{position:relative;opacity:0.01;z-index:0;background-image:url(/brightcove/test/module/img/bg_panel.gif);width:100%;height:40px;overflow:hidden}.bc-cplayer-control.show {opacity:1 !important;z-index:4000 !important;}.bc-cplayer-control .leftPanel {float:left}.bc-cplayer-control .rightPanel {float:right}.bc-cplayer-container .video{position:relative;	top:-40px;z-index:3000;width:100%;height:100%}.bc-cplayer-control button {float:left;width:50px;height:40px;overflow:hidden;padding-top:40px;font-family: Arial, verdana, sans-serif;color: #000;font-size: 1.1em;background-repeat: no-repeat; border:none;}.bc-cplayer-control button:focus{border:white solid 1px}.bc-cplayer-control .rewind {background-image: url(/brightcove/test/module/img/btn_rewind.gif); }    .bc-cplayer-control .play {background-image: url(/brightcove/test/module/img/btn_play.gif);}    .bc-cplayer-control .pause {background-image: url(/brightcove/test/module/img/btn_pause.gif); }    .bc-cplayer-control .forward {background-image: url(/brightcove/test/module/img/btn_forward.gif); }.bc-cplayer-control .mute {background-image: url(/brightcove/test/module/img/btn_volon.gif); }.bc-cplayer-control .volume-down {background-image: url(/brightcove/test/module/img/btn_voldown.gif); }.bc-cplayer-control .volume-up {background-image: url(/brightcove/test/module/img/btn_volup.gif); }.bc-cplayer-control .muted{background-image: url(/brightcove/test/module/img/btn_volmute.gif);}.bc-cplayer-control .rightPanel a {overflow:hidden;display:inline-block;float:left;height:40px;}.bc-cplayer-control .rightPanel button.bc-cc {width:34px;background-image:url(/brightcove/test/module/img/btn_bc_cc.png);}.bc-cplayer-control .rightPanel button.bc-cc.over {background-image:url(/brightcove/test/module/img/btn_bc_cc_over.png) !important;}.bc-cplayer-control .rightPanel button.bc-cc.on {background-image:url(/brightcove/test/module/img/btn_bc_cc_on.png) !important;}.bc-cplayer-control .rightPanel button.bc-fs.on {background-image:url(/brightcove/test/module/img/btn_fs_on.gif) !important;}.bc-cplayer-control .rightPanel button.bc-fs.off {background-image:url(/brightcove/test/module/img/btn_fs_off.gif) !important;}.end-of-bc{overflow:hidden;width:0px;height:0px;position:absolute}';
		var b,c,d;
		d = document.getElementsByTagName("head")[0];
		if (document.createStyleSheet) {
			b = document.createStyleSheet();
			b.cssText = a;
		} else {
			c = document.createElement("style");
			c.type = "text/css";
			if (c.styleSheet) {
				c.styleSheet.cssText = a
			} else {
				c.appendChild(document.createTextNode(a))
			}
			d.appendChild(c);
		}
		var config = {
			id: 'bc'+bcc_idx
		};
		var vp = null;
		var vpMenu = null;
		var vpCaption = null;
		var vpExp = null;
		var vpListFlag = false;
		var vpList = null;
		var nowVolume = 0;
		var gapVolume = 1/10;
		var nowPlayCnt = 0;
		var controlOut = false;

		var obj = $(this);
		var areaW = obj.attr("width");
		var areaH = obj.attr("height");

		var startDiv = $("<div />",{"id":"bc-cplayer-control-area_"+bcc_idx}).addClass("bc-cplayer-control-area");
		if (typeof(areaW) != "undefined"){
			startDiv.width(areaW).height(areaH);
		}
		var containerDiv	 = $('<div class="bc-cplayer-container" style="width:'+vWidth+';height:'+vHeight+'"/>');
		var videoDiv	 = $('<div class="video" />');

		var panelDiv = $("<div />").addClass("bc-cplayer-control");
		var leftPanelDiv = $("<div />").addClass("leftPanel");
		var rightPanelDiv = $("<div />").addClass("rightPanel");

		var endDiv = $("<div />",{"class":"end-of-bc"}).html("<a href='#' onclick='return false;'>"+bccMsg["text_10"] +"</a>");

		obj.after(startDiv);
		startDiv.append(containerDiv);

		panelDiv.append(leftPanelDiv);
		panelDiv.append(rightPanelDiv);

		containerDiv.append(panelDiv);
		containerDiv.append(videoDiv);
		obj.appendTo(videoDiv);

		startDiv.after(endDiv);

		if(startDiv.parent("div").length && areaH == "100%"){
			startDiv.parent("div").height("100%");
		}

		var getPlayer = function(){
			if(vp){
				return vp;
			}else{
				vp = brightcove.getExperience( "myExperience" + videoID ).getModule( APIModules.VIDEO_PLAYER );
				vpMenu = brightcove.getExperience( "myExperience" + videoID ).getModule( APIModules.MENU )
				vpCaption = brightcove.getExperience( "myExperience" + videoID ).getModule( APIModules.CAPTIONS );
				vpExp = brightcove.getExperience( "myExperience" + videoID ).getModule( APIModules.EXPERIENCE );
				_chromelessPlayer = vpExp.getElementByID("videoPlayer");
				_chromelessControls = _chromelessPlayer.getControls();

				return vp;
			}
		};

		var createButton = function(action, name) {
			var label = 0;
			var btnId = [action, config.id].join('-');
			var btnArea = $('<button />').append(name).addClass(action).attr({'title':name, 'id':btnId});
			return btnArea;
		};
		var play = function(){
			var player = getPlayer();
			vpMenu.closeMenuPage();
			player.play();
			return false;
		};
		var pause = function(){
			var player = getPlayer();
			if(player.isPlaying()){
				player.pause();
			}else{
				vpMenu.closeMenuPage();
			}
			return false;
		};
		var mute = function(){
			var player = getPlayer();
			var volume = player.getVolume();
			if(volume){
				nowVolume = volume;
				muteBtn.addClass('muted');
				player.setVolume(0);
				player.mute();
			}else{
				if(muteBtn.hasClass('muted')){
					muteBtn.removeClass('muted');
				}
				if(nowVolume){
					player.setVolume(nowVolume);
				}else{
					player.setVolume(gapVolume);
				}
			}
			return false;
		};
		var volup = function(){
			var player = getPlayer();
			var volume = player.getVolume();
			if((volume*10)+(gapVolume*10) > 10){
				nowVolume = 1;
				player.setVolume(nowVolume);
			}else{
				nowVolume = (volume*10)+(gapVolume*10);
				player.setVolume(Math.round(nowVolume)/10);
			}
			if(muteBtn.hasClass('muted')){
				muteBtn.removeClass('muted');
			}
			return false;
		};
		var voldwn = function(){
			var player = getPlayer();
			var volume = player.getVolume();
			if((volume*10)-(gapVolume*10) <= 0){
				nowVolume = 0;
				muteBtn.addClass('muted');
				player.setVolume(nowVolume);
				player.mute();
			}else{
				nowVolume = (volume*10)-(gapVolume*10);
				player.setVolume(Math.round(nowVolume)/10);
			}
			return false;
		};

		var playBtn =createButton("play", bccMsg["text_01"]).attr({'aria-live':'assertive'}).bind({
			"click.fe_brightcove" : function(){
				if($(this).hasClass('play')){
					$(this).removeClass('play').addClass('pause').attr({'title':bccMsg["text_02"], 'id':'pause-'+config.id}).text(bccMsg["text_02"]);
					play();
				}else{
					$(this).removeClass('pause').addClass('play').attr({'title':bccMsg["text_01"], 'id':'play-'+config.id}).text(bccMsg["text_01"]);
					pause();
				}
			},
			"focusin.fe_brightcove" : function(){
				panelDiv.addClass("show");
			},
			"keydown.fe_brightcove" : function(e){
				if ( e.keyCode === 9 && e.shiftKey ) {
					panelDiv.removeClass("show");
				}
			}
		});
		playBtn.appendTo(leftPanelDiv);
		var muteBtn = createButton('mute', bccMsg["text_06"]).bind("click.fe_brightcove",function(){mute();});
		var dwnBtn = createButton("volume-down", bccMsg["text_08"]).bind("click.fe_brightcove",function(){voldwn();});
		var upBtn = createButton("volume-up",bccMsg["text_07"]).bind({
			"click.fe_brightcove" : function(){volup();},
			"focusin.fe_brightcove" : function(){
				panelDiv.addClass("show");
			},
			"keydown.fe_brightcove" : function(e){
				if ( e.keyCode === 9 && !e.shiftKey ) {
					panelDiv.removeClass("show");
					controlOut = true;
					endDiv.find("a").trigger("focus");
				}
			}
		});
		var btnCC = $("<button />",{"class":"bc-cc","tabindex":"-1"});
		btnCC.text(bccMsg["text_22"]);
		btnCC.appendTo(rightPanelDiv);
		var flagCC = false;
		var ccStatus = true;
		btnCC.unbind("click.fe_brightcove").bind("click.fe_brightcove",function(){
			var currentVideo = $(".bc-cplayer-control-area").attr("nowvideo");
			var player = getPlayer();
			if(bccStatusCcFlag[currentVideo]){
				if(btnCC.hasClass("over")){
					flagCC = false;
					btnCC.removeClass("over").addClass("on").attr({'title':bccMsg["text_21"]}).text(bccMsg["text_21"]);
				}else{
					flagCC = true;
					btnCC.removeClass("on").addClass("over").attr({'title':bccMsg["text_20"]}).text(bccMsg["text_20"]);
				}
				vpCaption.setCaptionsEnabled(flagCC);
				_chromelessControls.setVisible(flagCC==true?false:true);
			}else{
				btnCC.attr({'title':bccMsg["text_22"]}).text(bccMsg["text_22"]);
			}
			return false;
		});

		muteBtn.appendTo(rightPanelDiv);
		dwnBtn.appendTo(rightPanelDiv);
		upBtn.appendTo(rightPanelDiv);

		var agent = navigator.userAgent.toLowerCase();
		var ieUse = false;
		if ( (navigator.appName == 'Netscape' && navigator.userAgent.search('Trident') != -1) || (agent.indexOf("msie") != -1) ) {
			ieUse = true;
		}else{
			ieUse = false;
		}
		endDiv.find("a").bind(ieUse==true?"onfocusin.fe_brightcove":"focusin.fe_brightcove",function(){
			if(controlOut){
				controlOut = false;
			}else{
				upBtn.trigger("focus");
				controlOut = false;
				return false;
			}
		});

		endDiv.find("a").bind("keydown.fe_brightcove",function(e){
			if ( e.keyCode === 9 && e.shiftKey ) {
				upBtn.trigger("focus");
				return false;
			}
		});
		bcc_idx++;
		return false;
	};
})(bcjQuery);

bcjQuery(document).ready(function(){
	if(typeof(APIModules) == "undefined"){
		if(bcProtocol){
			$("body").append('<script type="text/javascript" src="//admin.brightcove.com/js/APIModules_all.js"></script>');
		}else{
			$("body").append('<script type="text/javascript" src="//sadmin.brightcove.com/js/APIModules_all.js"></script>');
		}
	}
	bcjQuery('.brightcove-bcc-btn-close, .brightcove-bc5-btn-close').on('click', function(){
		bccLayerClose(this);
	});
});
function brightcoveBccPlayerLayer(divId, aliasId, videoId, width, height, autoplay){

	bcjQuery('#'+divId).bcChromePlayer(aliasId,videoId,width,height, autoplay);
	bcjQuery('#'+divId).attr('style',"width:" + width + "; height:" + height + ";position:absolute;top:0px;bottom:0px;right:0px;left: 0px;");

	area = bcjQuery("#"+divId).parents('.video-area_5').wrapAll("<div/>").parent();
	area.find(".video-area_5").show();
	area.find(".brightCoveArea").show();
	bcjQuery('body').addClass('video-open');

	_video_wrap_5 = area.find(".video-wrap_5");

	var top =  Math.max(0, ((bcjQuery(window).height() - _video_wrap_5.outerHeight()) / 2) + bcjQuery(window).scrollTop());
	var left =  Math.max(0, ((bcjQuery(window).width() - _video_wrap_5.outerWidth()) / 2) + bcjQuery(window).scrollLeft());
	_video_wrap_5.css({"left":left+"px", "top":top+"px"}).show().focus();

}

function bccLayerClose(my){
	var target = bcjQuery("#" + ( bcjQuery(my).data("div-id") === undefined ? bcjQuery(my).data("video-id") : bcjQuery(my).data("div-id"))),
	area = target.closest('.video-area_5'),
	wrap = target.closest('.video-wrap'),
	isVidOpen = false;

	if (window.videojs) {
		var disposeTargetId = target.find('.video-js').attr('id');
		if (disposeTargetId) {
			videojs(document.getElementById(disposeTargetId)).dispose();
		}
	}

	area.hide(0);
	target.html('');

	$.each(bcjQuery('.video-area_5'), function() {
		if ($(this).is(':visible')) {
			isVidOpen = true;
			return false;
		}
	});

	area.find(".video-wrap .vjs-big-play-button").focus();
	//bcjQuery(".video-wrap .vjs-big-play-button").focus();

	if (!isVidOpen || bcjQuery('body').hasClass('video-layer-open')) {
		bcjQuery('body').removeClass('video-open');
		bcjQuery('body').removeClass('video-layer-open');
	}
}

var bc5playerData = {
	DEV : {'accountId' : '901961867001', 'playerId' : 'Skefq0fEUZ'},//v5.24.5
	DEV2 : {'accountId' : '901961867001', 'playerId' : 'Vylv7fdWKl'},//v5.11.4
	LIVE : {'accountId' : '901973578001', 'playerId' : 'rkHiJmE8b'},
	GLOBAL : {'accountId' : '2933392367001', 'playerId' : 'HyinAQ4IW'},
	EG : {'accountId' : '923162680001', 'playerId' : 'r1Wa9zBQ8Z'},
	CN : {'accountId' : '923270636001', 'playerId' : 'SylXp4rXLb'},
	PK : {'accountId' : '923227816001', 'playerId' : 'rkx4vzBm8b'},
	LEVANT : {'accountId' : '923227815001', 'playerId' : 'BkuGfH7IZ'},
	CO : {'accountId' : '923162663001', 'playerId' : 'H1R4Pm7UW'},
	SG : {'accountId' : '923162665001', 'playerId' : 'Syz3FXQLW'},
	VN  : {'accountId' : '923136705001', 'playerId' : 'ryMuHjmm8W'},
	US : {'accountId' : '923227797001', 'playerId' : 'B1lhu4BX8Z'},
	HR : {'accountId' : '923270646001', 'playerId' : 'rJ0SpNX8W'},
	RS : {'accountId' : '923162676001', 'playerId' : 'Skf0W64mUW'},
	SI : {'accountId' : '3855502820001', 'playerId' : 'ryKYpN7Lb'},
	AT : {'accountId' : '923227809001', 'playerId' : 'SJqA5VQUb'},
	CH_FR : {'accountId' : '923227810001', 'playerId' : 'SJH8oEQIW'},
	CH : {'accountId' : '923162673001', 'playerId' : 'SyIfiVmUZ'},
	AR : {'accountId' : '923270634001', 'playerId' : 'SkoYw7mLZ'},
	PY : {'accountId' : '4455299568001', 'playerId' : 'SyZFOmXIZ'},
	UR : {'accountId' : '4455299570001', 'playerId' : 'ryezNOmXUZ'},
	AU : {'accountId' : '923162666001', 'playerId' : 'H12xqm7Ub'},
	NZ : {'accountId' : '923136704001', 'playerId' : 'BJ7brcXm8W'},
	EE : {'accountId' : '923227812001', 'playerId' : 'rytC3E7LW'},
	LV : {'accountId' : '923270644001', 'playerId' : 'rylCU2NmLW'},
	LT : {'accountId' : '923227813001', 'playerId' : 'BkR5nNXUW'},
	BE : {'accountId' : '923136716001', 'playerId' : 'H1gxqi4Q8b'},
	BE_FR : {'accountId' : '923162674001', 'playerId' : 'rkERsVX8Z'},
	NL : {'accountId' : '923136717001', 'playerId' : 'SklAMhEQ8Z'},
	JP : {'accountId' : '923162668001', 'playerId' : 'H1elEC7Q8W'},
	SEC : {'accountId' : '923136708001', 'playerId' : 'BJmCHrmIb'},
	CA : {'accountId' : '923270632001', 'playerId' : 'BJ04MQXLb'},
	CA_FR : {'accountId' : '923227798001', 'playerId' : 'rkjclX78W'},
	CL : {'accountId' : '923227801001', 'playerId' : 'Sy8mK7Q8Z'},
	CZ : {'accountId' : '923270642001', 'playerId' : 'rJ1TKEXLW'},
	SK : {'accountId' : '923227808001', 'playerId' : 'rylQe94mIb'},
	BR : {'accountId' : '923162661001', 'playerId' : 'rkrg7XmUW'},
	FR : {'accountId' : '923227807001', 'playerId' : 'SkXZOV7Ub'},
	GR : {'accountId' : '923136713001', 'playerId' : 'HJZ0dEmUZ'},
	DE : {'accountId' : '923227805001', 'playerId' : 'HylzJLVQLW'},
	HU : {'accountId' : '923270637001', 'playerId' : 'H14LrEQLb'},
	HK : {'accountId' : '923227804001', 'playerId' : 'S1e6xSr7Ib'},
	HK_EN : {'accountId' : '923136709001', 'playerId' : 'BJnNrrmLZ'},
	IT : {'accountId' : '923136712001', 'playerId' : 'rkgapeE78W'},
	ID : {'accountId' : '923162667001', 'playerId' : 'ryx3c97XUZ'},
	KZ_UR : {'accountId' : '923270647001', 'playerId' : 'HJZfeBQLZ'},
	LATIN : {'accountId' : '923136703001', 'playerId' : 'BJxSu7XQUb'},
	LATIN_EN : {'accountId' : '923227800001', 'playerId' : 'r1WoKH7QIW'},
	VE : {'accountId' : '923162662001', 'playerId' : 'rJhxEsPMz'},//v5.28.1
	MX : {'accountId' : '923227799001', 'playerId' : 'SJX05MXQUb'},
	N_AFRICA : {'accountId' : '923227817001', 'playerId' : 'ByImXr78W'},
	DK : {'accountId' : '923270638001', 'playerId' : 'Hyb1DEQ8W'},
	FI : {'accountId' : '923162672001', 'playerId' : 'HkUXD4XUZ'},
	NO : {'accountId' : '923227806001', 'playerId' : 'B1I2PVmLb'},
	SE : {'accountId' : '923162671001', 'playerId' : 'B1jKIVQ8b'},
	PT : {'accountId' : '923270640001', 'playerId' : 'SJburdEmUZ'},
	PH : {'accountId' : '923136707001', 'playerId' : 'r1Mnk67XUZ'},
	PL : {'accountId' : '923270641001', 'playerId' : 'BkjYdNQUZ'},
	PE : {'accountId' : '923162664001', 'playerId' : 'rkXuK77UZ'},
	RU : {'accountId' : '923136718001', 'playerId' : 'BkZBHJrXUW'},
	BG : {'accountId' : '923270643001', 'playerId' : 'r1cK5EmIW'},
	RO : {'accountId' : '923136715001', 'playerId' : 'r1gR45NXIZ'},
	ES : {'accountId' : '923162670001', 'playerId' : 'H1xJrNQUW'},
	TW : {'accountId' : '923270635001', 'playerId' : 'BywFHHmUZ'},
	TR : {'accountId' : '923136721001', 'playerId' : 'r175Zrm8Z'},
	UA : {'accountId' : '923162678001', 'playerId' : 'S1SKkrQIb'},
	UA_RU : {'accountId' : '923162677001', 'playerId' : 'B1Ba1rX8Z'},
	IE : {'accountId' : '923136711001', 'playerId' : 'B1DVe4m8Z'},
	UK : {'accountId' : '923136710001', 'playerId' : 'SycJx4QLW'},
	AE : {'accountId' : '923227814001', 'playerId' : 'BygNUlrX8b'},
	AE_ARABIC : {'accountId' : '923136719001', 'playerId' : 'BJjKlS7UZ'},
	IN : {'accountId' : '923162669001', 'playerId' : 'S1KRCQX8W'},
	MY : {'accountId' : '923136706001', 'playerId' : 'B1EqjmQIW'},
	ZA : {'accountId' : '2571515531001', 'playerId' : 'S1fb7VSQUb'},
	AFRICA_EN : {'accountId' : '923270648001', 'playerId' : 'HJKv7H7UZ'},
	AFRICA_FR : {'accountId' : '923227818001', 'playerId' : 'SkmimH7LZ'},
	AFRICA_PT : {'accountId' : '923136723001', 'playerId' : 'S1b8yEBXLb'},
	IRAN : {'accountId' : '923270650001', 'playerId' : 'r1YRZSmIZ'},
	IL : {'accountId' : '923162679001', 'playerId' : 'ryloagBXLb'},
	SA : {'accountId' : '923136720001', 'playerId' : 'HyItbbS7Ub'},
	SA_EN : {'accountId' : '2571515532001', 'playerId' : 'SJpHbr7Ub'},
	TH : {'accountId' : '923227802001', 'playerId' : 'ryoyiQXIZ'},
	AL : {'accountId' : '5395474900001', 'playerId' : 'S1WPmS4Rg'},
	LB : {'accountId' : '5359769185001', 'playerId' : 'By5uztNAe'},
	MM : {'accountId' : '5395474902001', 'playerId' : 'BJWPXt4Al'},
	GCS : {'accountId' : '1852113008001', 'playerId' : 'B1HX3oXbG'},
	SC : {'accountId' : '1275380501001', 'playerId' : 'rJUZMbBZG'},
	LED : {'accountId' : '2172563229001', 'playerId' : 'SJEqMbSWM'},
	UK_CS : {'accountId' : '5675787969001', 'playerId' : 'Hkmjd40bM'},
	DE_CS : {'accountId' : '5675787970001', 'playerId' : 'ByxCBuECZG'},
	BE_CS : {'accountId' : '5675787971001', 'playerId' : 'r1SZIVRWf'},
	BE_FR_CS : {'accountId' : '5675787972001', 'playerId' : 'r16xOECbz'},
	NL_CS : {'accountId' : '5675788007001', 'playerId' : 'HymXOVAWf'},
	ACE : {'accountId' : '5685289444001', 'playerId' : 'Byn7wEUzz'},

	US_CS : {'accountId' : '5709700875001', 'playerId' : 'SJC96gsNf'},
	CA_FR_CS : {'accountId' : '5709700876001', 'playerId' : 'rye60eiNG'},
	CA_CS : {'accountId' : '5709700877001', 'playerId' : 'BJJnCxi4z'},
	MX_CS : {'accountId' : '5709700878001', 'playerId' : 'SyFThbi4G'},
	BR_CS : {'accountId' : '5709700879001', 'playerId' : 'rypXhbjEf'},
	LATIN_CS : {'accountId' : '5709700880001', 'playerId' : 'rJ3qnZoVz'},
	LATIN_EN_CS : {'accountId' : '5709700881001', 'playerId' : 'rJSnnZjNz'},
	VE_CS : {'accountId' : '5709700882001', 'playerId' : 'HyyTnWo4M'},
	CO_CS : {'accountId' : '5709700883001', 'playerId' : 'B1sd6ejEf'},
	AR_CS : {'accountId' : '5709700884001', 'playerId' : 'ByGBCloVz'},
	CL_CS : {'accountId' : '5709700885001', 'playerId' : 'HyjTClsVf'},
	PE_CS : {'accountId' : '5709700887001', 'playerId' : 'H1qXpZs4z'},
	SG_CS : {'accountId' : '5709700888001', 'playerId' : 'BywY6goNz'},
	AU_CS : {'accountId' : '5709700889001', 'playerId' : 'rkZZPClsEf'},
	NZ_CS : {'accountId' : '5709700890001', 'playerId' : 'H1jD0xsVf'},
	ID_CS : {'accountId' : '5709700891001', 'playerId' : 'rJnOhZi4f'},
	TH_CS : {'accountId' : '5711373553001', 'playerId' : 'SkiJkGsNG'},
	VN_CS : {'accountId' : '5711373555001', 'playerId' : 'rJmcTxiEz'},
	MY_CS : {'accountId' : '5711373556001', 'playerId' : 'SJxYtAZiVG'},
	PH_CS : {'accountId' : '5711373557001', 'playerId' : 'BJ8M6Wj4M'},
	TW_CS : {'accountId' : '5711373558001', 'playerId' : 'rJxptpbo4f'},
	JP_CS : {'accountId' : '5711373559001', 'playerId' : 'Bk4j0ljVG'},
	IN_CS : {'accountId' : '5711373560001', 'playerId' : 'Sk7CdCZjNG'},
	CN_CS : {'accountId' : '5711373561001', 'playerId' : 'S1xr6gsNz'},
	HK_CS : {'accountId' : '5711373562001', 'playerId' : 'HJsUhboVf'},
	HK_EN_CS : {'accountId' : '5711373563001', 'playerId' : 'H1vvhboNf'},
	IE_CS : {'accountId' : '5711373564001', 'playerId' : 'HJgpICZjVM'},
	IT_CS : {'accountId' : '5711373565001', 'playerId' : 'H1Md2boEf'},
	ES_CS : {'accountId' : '5711373566001', 'playerId' : 'By1FaWoNG'},
	HU_CS : {'accountId' : '5711373567001', 'playerId' : 'Bye0rnZoVG'},
	SE_CS : {'accountId' : '5711373568001', 'playerId' : 'Skhl6biEf'},
	DK_CS : {'accountId' : '5711373569001', 'playerId' : 'HkxTRhWjVG'},
	FI_CS : {'accountId' : '5711373571001', 'playerId' : 'Bydk6ZiNM'},
	NO_CS : {'accountId' : '5711373572001', 'playerId' : 'rkMeTWjEz'},
	FR_CS : {'accountId' : '5711373573001', 'playerId' : 'S1ONnWs4G'},
	PT_CS : {'accountId' : '5711373574001', 'playerId' : 'rkZwWaWiVz'},
	PL_CS : {'accountId' : '5711373575001', 'playerId' : 'HyxXTWiVG'},
	GR_CS : {'accountId' : '5711373576001', 'playerId' : 'Hkx7S3WsNM'},
	CZ_CS : {'accountId' : '5711373577001', 'playerId' : 'SJOfnWjEf'},
	SK_CS : {'accountId' : '5711373578001', 'playerId' : 'rkm7hZoNG'},
	RO_CS : {'accountId' : '5711373579001', 'playerId' : 'Sk2D6ZoEG'},
	BG_CS : {'accountId' : '5711373580001', 'playerId' : 'BkzvaZjVG'},
	AT_CS : {'accountId' : '5711373581001', 'playerId' : 'SkaMRgjEz'},
	CH_CS : {'accountId' : '5711373582001', 'playerId' : 'SJumAxjEG'},
	CH_FR_CS : {'accountId' : '5711373583001', 'playerId' : 'BylOVAxoVM'},
	LV_CS : {'accountId' : '5711373584001', 'playerId' : 'B1CFCloEG'},
	LT_CS : {'accountId' : '5711373585001', 'playerId' : 'rytcRljEz'},
	EE_CS : {'accountId' : '5711373586001', 'playerId' : 'ryfYAljEG'},
	RS_CS : {'accountId' : '5711373587001', 'playerId' : 'Skmu3agsEf'},
	HR_CS : {'accountId' : '5711373588001', 'playerId' : 'Bkcials4G'},
	RU_CS : {'accountId' : '5711373589001', 'playerId' : 'BJxrLabiNz'},
	UA_CS : {'accountId' : '5711373590001', 'playerId' : 'SylNBRZiVG'},
	UA_RU_CS : {'accountId' : '5711373592001', 'playerId' : 'rygURWsNM'},
	KZ_RU_CS : {'accountId' : '5711373593001', 'playerId' : 'BJq31zoVG'},
	AE_CS : {'accountId' : '5711373594001', 'playerId' : 'HJgEORWiNz'},
	AE_ARABIC_CS : {'accountId' : '5711373595001', 'playerId' : 'H1ecP0biEG'},
	IL_CS : {'accountId' : '5711373596001', 'playerId' : 'SyyCCZs4G'},
	SA_CS : {'accountId' : '5711373597001', 'playerId' : 'Skd0AboVz'},
	SA_EN_CS : {'accountId' : '5711373598001', 'playerId' : 'BJfkyGoEM'},
	TR_CS : {'accountId' : '5711373599001', 'playerId' : 'Hku9aWi4M'},
	IRAN_CS : {'accountId' : '5711373600001', 'playerId' : 'HkVTCWjVz'},
	LEVANT_CS : {'accountId' : '5711373601001', 'playerId' : 'HkHwplo4M'},
	PK_CS : {'accountId' : '5711373602001', 'playerId' : 'S12rTgoEG'},
	EG_CS : {'accountId' : '5711373603001', 'playerId' : 'SkoQTljVG'},
	N_AFRICA_CS : {'accountId' : '5711373604001', 'playerId' : 'SyeMCnZjNG'},
	AFRICA_EN_CS : {'accountId' : '5711373605001', 'playerId' : 'By1sAbiVM'},
	AFRICA_FR_CS : {'accountId' : '5711373606001', 'playerId' : 'S1MhiRbjEf'},
	AFRICA_PT_CS : {'accountId' : '5711373607001', 'playerId' : 'SyZtnCbs4M'},
	ZA_CS : {'accountId' : '5711373608001', 'playerId' : 'SJNq0Wi4G'},
	SI_CS : {'accountId' : '5711373609001', 'playerId' : 'rJzfRxsVf'},
	PY_CS : {'accountId' : '5711373610001', 'playerId' : 'SkTHCgo4f'},
	UR_CS : {'accountId' : '5711373612001', 'playerId' : 'ByII0eiNf'},
	LB_CS : {'accountId' : '5711373613001', 'playerId' : 'HJK8TlsVz'},
	AL_CS : {'accountId' : '5711373614001', 'playerId' : 'HJjongoEf'},
	MM_CS : {'accountId' : '5711373615001', 'playerId' : 'rkyO6xiNM'}
};

var bcHtml5Player = new function(){
	var bc5PlayerMap = new BcHashMap();
	this.myBc5playerData;
	this.html5playerData;
	this.bc5MyPlayer;
	(function( $ ){
		$.fn.bcHtml5Player = function( alais ){

			var bc5 = bcHtml5Player;
			var arr = Array.prototype.slice.call( arguments, 1);

			if(bc5.checkNull(arr[0]))arr[0]="";//id
			if(bc5.checkNull(arr[1]))arr[1]="";//videoId
			if(bc5.checkNull(arr[2]))arr[2]="100%";//width
			if(bc5.checkNull(arr[3]))arr[3]="100%";//height
			if(bc5.checkNull(arr[4]))arr[4]="false";//autoplay
			if(bc5.checkNull(arr[5]))arr[5]="false";//ccUrl

			myBc5playerData = eval("bc5playerData."+alais.toUpperCase());
			if(typeof myBc5playerData == "undefined"){
				alert( 'Alais ' +  alais + ' does not exist on jQuery.bc5playerData' );
				return;
			}
			html5playerData = {
				'targetId' : this.selector,
				'alais' : alais,
				'id' : arr[0] + '_videoTagID',
				'videoId' : arr[1],
				'width' : arr[2],
				'height' : arr[3],
				'autoplay' : arr[4],
				'ccUrl' : arr[5],
				'accountId' : myBc5playerData.accountId,
				'playerId' : myBc5playerData.playerId,
			};
			bc5PlayerMap.put(html5playerData.videoId,html5playerData);//비디오 정보 put
			arr = [ bcjQuery( this ) ].concat( arr );
			return bc5["run"].apply( bc5, arr );
		}
	})( bcjQuery );

	this.run = function(div, vodTagId, vodId){
		bcCLog("html5 Run!! "+vodId);
		var bc5Info = bc5PlayerMap.get(vodId);//비디오 정보 get
		bcCLog(bc5Info);
		bcCLog("html5 Run End!! ");
		var a ='.vjs-menu li:focus{border:white dashed 1px}.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control-bar,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-progress-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-time-divider {transition-delay: 0s!important;-webkit-transition-delay: 0s!important;-moz-transition-delay: 0s!important;-ms-transition-delay: 0s!important;-o-transition-delay: 0s!important;}.vjs-big-play-button {top:0px!important; left:0px!important; right:0px!important; bottom:0px!important; margin:auto!important;}.vjs-big-play-button:focus { border:white dashed 1px }.vjs-play-control:focus{ border:white dashed 1px }.vjs-progress-holder:focus { border:white dashed 1px }.vjs-volume-menu-button:focus { border:white dashed 1px }.vjs-captions-button:focus { border:white dashed 1px }.vjs-fullscreen-control:focus { border:white dashed 1px }.vjs-volume-bar:focus{ border:white dashed 1px }.vjs-control-bar.ie8 {display:none !important;}.vjs-fade-out {display: block;visibility: hidden;opacity: 0;-webkit-transition: visibility 1.5s, opacity 1.5s;-moz-transition: visibility 1.5s, opacity 1.5s;-ms-transition: visibility 1.5s, opacity 1.5s;-o-transition: visibility 1.5s, opacity 1.5s;transition: visibility 1.5s, opacity 1.5s;-webkit-transition-delay: 2s;-moz-transition-delay: 2s;-ms-transition-delay: 2s;-o-transition-delay: 2s;transition-delay: 2s;}';
		/*bom-studio css add*/
		a += "/* for IE */ #brightCoveArea2 span {display:inline !important}/* fix bc html5 player */#brightCoveArea2 .vjs-control-text{display:none !important;}.single-area.video-KV.on {max-height: 810px; overflow: hidden;}.vjs-big-play-button{left:0 !important; right:0 !important; top:0 !important; bottom:0 !important; margin: auto;}.vjs-playing .vjs-big-play-button{display:none !important;}.rtl .vjs-control-bar, .rtl .vjs-control-bar *{direction:ltr !important;}";

		var b,c,d;
		d = document.getElementsByTagName("head")[0];
		if (document.createStyleSheet) {
			b = document.createStyleSheet();
			b.cssText = a;
		} else {
			c = document.createElement("style");
			c.type = "text/css";
			if (c.styleSheet) {
				c.styleSheet.cssText = a
			} else {
				c.appendChild(document.createTextNode(a))
			}
			d.appendChild(c);
		}

		if(getIeVersion() == "8.0"){
			document.createElement('video');
			document.createElement('track');
		}
		var myPlayer = this;
		bcjQuery(div).append(this.markup(vodId));

		var s = document.createElement('script');
		s.type = 'text/javascript';
		s.src = "//players.brightcove.net/" + bc5Info.accountId + "/" + bc5Info.playerId + "_default/index.min.js";

		if (getIeVersion() === -1) { // ie11, etc
			s.onload = function() {
				setTimeout(function() {
					myPlayer.callback(vodId);
				}, 500);
			}

			document.body.appendChild(s);
		} else { // ie10, ie9, ie8
			if (getIeVersion() === 8) {
				s.onreadystatechange = function () {
					if(s.readyState == "loaded" || s.readyState == "complete") {
						setTimeout(function() {
							myPlayer.callback(vodId);
						}, 500)
					}
				}
				document.body.appendChild(s);
			} else if (getIeVersion() === 9) {
				s.onload = function() {
					setTimeout(function() {
						myPlayer.callback(vodId);
					}, 500);
				};

				bcjQuery(bc5Info.targetId).append(s);
			} else if (getIeVersion() === 10) {
				s.onload = function() {
					setTimeout(function() {
						myPlayer.callback(vodId);
					}, 500);
				}

				document.body.appendChild(s);
			}
		}
	};
	this.markup = function(vodId){
		bcCLog("html5 markup !!!!!!!");
		var bc5Info = bc5PlayerMap.get(vodId);//비디오 정보 get
		bcCLog(bc5Info);
		bcCLog("html5 markup End !!!!!!!");
		var tag = "";
		tag += '<div style="display:block;position:relative;max-width:100%;width:'+bc5Info.width+';height:'+bc5Info.height+';">';
		tag += '<div style="padding-top: 56.25%;">';
		tag += '<video id="'+bc5Info.id+'"';
		tag += ' data-video-id="'+ bc5Info.videoId +'"';
		tag += ' data-account="'+bc5Info.accountId+'"';
		tag += ' data-player="'+bc5Info.playerId+'"';
		tag += ' data-embed="default"';
		tag += ' class="video-js"';
		tag += ' style="width: '+bc5Info.width+'; height: '+bc5Info.height+';  position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"';
		tag += ' controls>'
		if(bc5Info.ccUrl != "false"){
			tag += ' <track kind="captions" src="'+bc5Info.ccUrl+'" srclang="en" label="English" default>';
		}
		tag += ' </video>';
		tag += ' </div></div>';
		return tag;

	};
	this.callback = function(vodId){
		bcCLog("html5 callback !!!!!!!"+vodId);
		var bc5Info = bc5PlayerMap.get(vodId);//비디오 정보 get
		bcCLog(bc5Info.id);
		bcCLog("html5 callback End !!!!!!!");

		videojs(bc5Info.id).ready(function(){
			bc5MyPlayer = this;
			var isAutoPlay = (bc5Info.autoplay === 'true');
			
			bcCLog(bc5MyPlayer);
			bcCLog("html5 callback bc5MyPlayer !!!!!!!");

			// accessibility 5.24.5
			var vjsWrap = bcjQuery("#"+bc5Info.id),
				vjsDockText       = vjsWrap.find('.vjs-dock-text'),
				vjsDockTitle      = vjsWrap.find('.vjs-dock-title'),
				vjsControlText    = vjsWrap.find('.vjs-control-text'),
				vjsControlBar     = vjsWrap.find('.vjs-control-bar'),
				vjsBigPlayButton  = vjsWrap.find('.vjs-big-play-button'),
				vjsProgressHolder = vjsWrap.find('.vjs-progress-holder'),
				vjsProgressBar    = vjsWrap.find('.vjs-tooltip-progress-bar'),
				vjsMenuButton     = vjsWrap.find('.vjs-menu-button'),
				vjsTextTrack      = vjsWrap.find('.vjs-text-track-display');

			vjsProgressHolder.attr({'aria-valuenow': '0'});
			vjsProgressBar.attr({
				'role': 'slider',
				'aria-valuemin': '0',
				'aria-valuemax': '100',
				'aria-valuenow': '0'
			});
			vjsMenuButton.attr('role', 'menu');
			vjsTextTrack.attr('tabIndex', 0);

			if (vjsWrap.closest('.s-video-player, .s-video-container').length) {
				vjsBigPlayButton.attr('title', vjsWrap.closest('.s-video-player, .s-video-container').data('video-title'));
			}

			if (getIeVersion() === 9 || getIeVersion() === 10) { // v5.24 luna-skin caption hover
				vjsWrap.find('.vjs-captions-button').on('mouseenter', function(e) {
					e.stopPropagation();
					bcjQuery(e.currentTarget).find('.vjs-menu-content').css('background-color', 'rgba(43, 51, 63, 0.7)');
				});
			}

			if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) { // firefox X button outline
     			var ffCloseBtn = vjsWrap.closest('.video-area_5').find('.brightcove-bcc-btn-close, .brightcove-bc5-btn-close');
     			if (ffCloseBtn.length) {
     				//ffCloseBtn.css('border', 'outline: 1px solid #4d90fe');
     				ffCloseBtn.off('ffoutline').on('focusin.ffoutline', function(e) {
     					ffCloseBtn.css('outline', '1px solid #4d90fe');
     				});
     				ffCloseBtn.off('ffoutline').on('focusout.ffoutline', function(e) {
     					ffCloseBtn.css('outline', 'unset');
     				});
     			}
			}

			if (vjsWrap.hasClass('vjs-v5')) {
			 	var uiFontRest = '',
			 		blankSheet = '', 
			 		createdStyleTag = '',
			 		docHead = null;

			 	uiFontRest = '.vjs-control-bar button { font-family: VideoJS !important; } .vjs-big-play-button { font-family: VideoJS !important; }';

				docHead = document.getElementsByTagName("head")[0];

				if (document.createStyleSheet) {
					blankSheet = document.createStyleSheet();
					blankSheet.cssText = uiFontRest;
				} else {
					createdStyleTag = document.createElement("style");
					createdStyleTag.type = "text/css";

					if (createdStyleTag.styleSheet) {
						createdStyleTag.styleSheet.cssText = uiFontRest;
					} else {
						createdStyleTag.appendChild(document.createTextNode(uiFontRest));
					}
					docHead.appendChild(createdStyleTag);
				}
			}

			var isTabIndexAble = false;

			if (vjsTextTrack.length) {
				vjsTextTrack.off('DOMSubtreeModified.indexable propertychange.indexable')
				.on('DOMSubtreeModified.indexable propertychange.indexable', function(e) {
					e.stopPropagation();

					if (vjsTextTrack.find('div').length > 2) {
						if (!isTabIndexAble) {
							vjsTextTrack.attr('tabindex', 0);
							isTabIndexAble = true;
						}
					} else {
						if (isTabIndexAble) {
							isTabIndexAble = false;
							vjsTextTrack.removeAttr('tabindex');
						}
					}
				});

				vjsTextTrack.trigger('DOMSubtreeModified.indexable propertychange.indexable');
			}
			// ---- accessibility

			// autoplay option
			if (isAutoPlay) {
				vjsBigPlayButton.trigger('click');
			}

			bcjQuery(bc5Info.targetId+" .vjs-volume-menu-button").keydown(function(e) {
				if (e.keyCode == 32) {
					var isVolumeMuted = bc5MyPlayer.muted();
					bc5MyPlayer.muted(isVolumeMuted==true ? false:true);
				}
			});
			bcjQuery(".video-area").find(".vjs-big-play-button").on("keydown", function(e){
				if ( e.which == 9 && e.shiftKey) {
					return false;
				}
			});

			var mobile = (/iphone|ipad|ipod|android/i.test(navigator.userAgent.toLowerCase()));
			if(!mobile){
				//fnTabIndexSort(vodId);
			}
		});
	};
	this.checkNull = function ( val ){
		return ( val == null || val == '' );
	};

	function ie9CallBack(vodId){
		bcCLog("html5 ie9 callback !!!!!!!"+vodId);
		var bc5Info = bc5PlayerMap.get(vodId);//비디오 정보 get
		bcCLog(bc5Info);
		bcCLog("html5 ie9 callback End !!!!!!!"+bc5Info.id);

		videojs(bc5Info.id).ready(function(){
			bc5MyPlayer = this;
			bc5MyPlayer.autoplay(eval(bc5Info.autoplay));
			bc5MyPlayer.on("play",function() {
				bcjQuery("#"+bc5Info.id).find(".vjs-big-play-button").hide();
			});
			bcjQuery(bc5Info.targetId+" .vjs-volume-menu-button").keydown(function(e) {
				if (e.keyCode == 32) {
					var isVolumeMuted = bc5MyPlayer.muted();
					bc5MyPlayer.muted(isVolumeMuted==true ? false:true);
				}
			});
			bcjQuery(".video-area").find(".vjs-big-play-button").on("keydown", function(e){
				if ( e.which == 9 && e.shiftKey) {
					return false;
				}
			});
			//fnTabIndexSort(vodId);
		});
	}

	function fnTabIndexSort(vodId){
		bcCLog("html5 fnTabIndexSort !!!!!!!"+vodId);
		var bc5Info = bc5PlayerMap.get(vodId);//비디오 정보 get
		bcCLog(bc5Info);
		bcCLog("html5 fnTabIndexSort End !!!!!!!");

		var agent = navigator.userAgent.toLowerCase();
		if ( (navigator.appName == 'Netscape' && navigator.userAgent.search('Trident') != -1) || (agent.indexOf("msie") != -1) ) {//IE

		}else{

			bcjQuery(bc5Info.targetId+" .vjs-captions-button").keydown(function(e) {
				if (e.keyCode == 13) {
					bcjQuery(bc5Info.targetId+" .vjs-modal-overlay").hide();
				}
			});
			bcjQuery(bc5Info.targetId+" .vjs-texttrack-settings").keydown(function() {
				bcjQuery(bc5Info.targetId+" .vjs-modal-overlay").css("style","");
			});
		}
	}
	bcjQuery('.brightcove-bcc-btn-close, .brightcove-bc5-btn-close').on('click', function(){
		bc5LayerClose(this);
	});
};

function brightcoveBc5PlayerLayer(countryCd, targetId, id, videoId, width, height, autoplay, ccUrl){
	if (bcjQuery('body').hasClass('video-layer-open') && $('#' + targetId).is(':visible')) {
		return;
	}

	bcjQuery('#'+targetId).bcHtml5Player(countryCd,id,videoId, width, height, autoplay, ccUrl);

	area = bcjQuery("#"+targetId).parents('.video-area_5').wrapAll("<div/>").parent();
	area.find(".video-area_5").show();
	area.find(".brightCoveArea").show();
	bcjQuery('body').addClass('video-open');

	_video_wrap_5 = area.find(".video-wrap_5");

	var top =  Math.max(0, ((bcjQuery(window).height() - _video_wrap_5.outerHeight()) / 2) + bcjQuery(window).scrollTop());
	var left =  Math.max(0, ((bcjQuery(window).width() - _video_wrap_5.outerWidth()) / 2) + bcjQuery(window).scrollLeft());
	_video_wrap_5.css({"left":left+"px", "top":top+"px"}).show().focus();

}

function bc5LayerClose(my){
	var target = bcjQuery("#" + ( bcjQuery(my).data("div-id") === undefined ? bcjQuery(my).data("video-id") : bcjQuery(my).data("div-id"))),
	area = target.closest('.video-area_5'),
	wrap = target.closest('.video-wrap'),
	isVidOpen = false;

	if (window.videojs) {
		var disposeTargetId = target.find('.video-js').attr('id');
		if (disposeTargetId) {
			videojs(document.getElementById(disposeTargetId)).dispose();
		}
	}

	area.hide(0);
	target.html('');

	$.each(bcjQuery('.video-area_5'), function() {
		if ($(this).is(':visible')) {
			isVidOpen = true;
			return false;
		}
	});

	area.find(".video-wrap .vjs-big-play-button").focus();
	//bcjQuery(".video-wrap .vjs-big-play-button").focus();

	if (!isVidOpen|| bcjQuery('body').hasClass('video-layer-open')) {
		bcjQuery('body').removeClass('video-open');
		bcjQuery('body').removeClass('video-layer-open');
	}
}
function getIeVersion(){
	var ver = -1;
	if (navigator.appName == 'Microsoft Internet Explorer') {
		var ua = navigator.userAgent;
		var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
		if (re.exec(ua) != null)
			ver = parseFloat(RegExp.$1);
	}
	return ver;
}


function bcCLog(arg){
	// if(console){
		//console.log(arg);
	// }
}


(function (win, $, doc) {
    'use strict';
    win.smg = win.smg || {};
    win.smg.newShop = win.smg.newShop || {};
    win.smg.newShop.common = win.smg.newShop.common || {};
    win.smg.newShop.devjs = win.smg.newShop.devjs || {};

    var COOKIE = win.smg.aem.util.Cookie(),
        UTIL = win.smg.newShop.common.util;

    win.smg.newShop.devjs['layout'] = (function () {
        return {
            init : function () {
                this.setElements();
                this.initStyle();
                this.initLayout();
                this.bindEvents();
            },
            setElements : function () {
                this.head = $('head');
                this.body = $('body');
            },
            initStyle : function () {
                var cssDevLayouts = [];
                cssDevLayouts.push('<style>');
                cssDevLayouts.push('#devLayout{position:fixed;left:10px;top:0;bottom:0;z-index:9999;width:0;height:100%;padding:100px 0;font-size:12px;box-sizing:border-box}');
                cssDevLayouts.push('#devLayout button, #devLayout a{font-size:12px}');
                cssDevLayouts.push('#devLayout:before{display:inline-block;width:1px;height:100%;margin-right:-1px;vertical-align:middle;content:""}');
                cssDevLayouts.push('#devLayout .inner-html{display:inline-block;overflow:hidden;position:relative;left:-100px;width:100px;height:100%;margin-right:-110px;padding-right:10px;background:rgba(255,255,255,0);vertical-align:top;-webkit-transition:0.3s left;transition:0.3s left;-webkit-overflow-scrolling: touch}');
                cssDevLayouts.push('#devLayout.is-active .inner-html{overflow:auto;left:0}');
                cssDevLayouts.push('#devLayout .dev-title{margin-top:20px}');
                cssDevLayouts.push('#devLayout .dev-title:first-child{margin-top:0}');
                cssDevLayouts.push('#devLayout .dev-list button{display:block;width:100%;margin-top:2px;padding:5px;border:1px solid #000;background:#fff;box-sizing:border-box}');
                cssDevLayouts.push('#devLayout .dev-list button:first-child{margin-top:0}');
                cssDevLayouts.push('#devLayout .dev-list button.is-active{background:#000;color:#fff}');
                cssDevLayouts.push('</style>');
                this.head.append(cssDevLayouts.join(''));
            },
            initLayout : function () {
                var htmlDevLayouts = [];
                htmlDevLayouts.push('<div id="devLayout"><div class="inner-html"></div></div>');
                this.body.append(htmlDevLayouts.join(''));
                this.devLayout = $('#devLayout');
                this.devLayoutHtml = this.devLayout.find('.inner-html');
            },
            bindEvents : function () {
                this.devLayoutHtml.on('touchend mouseenter', $.proxy(this.htmlMouseEventsFunc, this));
                this.devLayoutHtml.on('closeCallback', $.proxy(this.closeCallback, this));
            },
            htmlMouseEventsFunc : function (e) {
                if (!this.devLayout.hasClass('is-active')) {
                    this.devLayout.addClass('is-active');
                    this.devLayoutHtml.off('mousedownoutside touchendoutside');
                    this.devLayoutHtml.on('mousedownoutside touchendoutside', $.proxy(function () {
                        this.devLayoutHtml.off('mousedownoutside touchendoutside');
                        win.clearTimeout(this.closeCallBackTime);
                        this.devLayout.removeClass('is-active');
                    }, this));
                    this.closeCallback();
                }
            },
            closeCallback : function () {
                win.clearTimeout(this.closeCallBackTime);
                this.closeCallBackTime = win.setTimeout($.proxy(function () {
                    this.devLayoutHtml.off('mousedownoutside touchendoutside');
                    this.devLayout.removeClass('is-active');
                }, this), 5000);
            }
        }
    })();

    win.smg.newShop.devjs['layout-header'] = (function () {
        return {
            init : function () {
                this.setElements();
                this.initLayout();
            },
            setElements : function () {
                this.head = $('head');
                this.wrapper = $('#wrap');
                this.header = this.wrapper.find('#header');
            },
            initStyle : function () {
                var cssStyles = [];
                cssStyles.push('<style>');
                cssStyles.push('#header{min-height:130px;border-bottom:1px solid #dadada;text-align:center}');
                cssStyles.push('</style>');
                this.head.append(cssStyles.join(''));
            },
            initLayout : function () {
                if (this.header.length) return;
                this.initStyle();
                var devLayouts = [];
                devLayouts.push('<header id="header">Header</header>');
                this.wrapper.prepend(devLayouts.join(''));
            }
        }
    })();

    win.smg.newShop.devjs['layout-footer'] = (function () {
        return {
            init : function () {
                this.setElements();
                this.initStyle();
                this.initLayout();
            },
            setElements : function () {
                this.head = $('head');
                this.wrapper = $('#wrap');
                this.footer = this.wrapper.find('#footer');
            },
            initStyle : function () {
                var cssStyles = [];
                cssStyles.push('<style>');
                cssStyles.push('#footer{min-height:500px;border-top:1px solid #d0d0d0;background:#f7f7f7;text-align:center}');
                cssStyles.push('</style>');
                this.head.append(cssStyles.join(''));
            },
            initLayout : function () {
                if (this.footer.length) return;
                var devLayouts = [];
                devLayouts.push('<footer id="footer">Footer</footer>');
                this.wrapper.append(devLayouts.join(''));
            }
        }
    })();

    win.smg.newShop.devjs['common-input'] = (function () {
        var defParams = {
            radioIgnore : '.fc-content__type-products-item, .shop-care-layer__option-inner, .cm-shop-card__option-color-item, .cm-shop-card__option-memory-item'
        };
        return {
            init : function () {
                this.setElements();
                this.initLayout();
            },
            setElements : function () {
                this.inpJsRadioWrap = $('.js-radio-wrap').filter(function () {
                    var _target = $(this),
                        _useType = true,
                        _targetParent = _target.closest(defParams.radioIgnore);
                    if (_targetParent.length) {
                        _useType = false;
                    }
                    return _useType;
                });
                this.ignoreRadioWrap = $(defParams.radioIgnore);
                this.inpRadioWrap = this.inpJsRadioWrap.add(this.ignoreRadioWrap);
                this.inpChkboxWrap = $('.js-chkbox-wrap');
                this.inpTxtWrap = $('.js-inptext-wrap');
            },
            initLayout : function () {
                var _this = this;
                for (var i = 0, max = this.inpRadioWrap.length; i < max; i++) {
                    (function (index) {
                        var _target = _this.inpRadioWrap.eq(i),
                            _targetInp = _target.find('.shop-radio__input'),
                            _targetLabel = _target.find('.shop-radio__label'),
                            _targetLabel = (_targetLabel.length) ? _targetLabel : _target.next('.shop-radio__label'),
                            _targetMatch = 'inpRadio' + i;
                        _targetInp.attr('id', _targetMatch);
                        _targetLabel.attr('for', _targetMatch);
                    })(i);
                }
                for (var i = 0, max = this.inpChkboxWrap.length; i < max; i++) {
                    (function (index) {
                        var _target = _this.inpChkboxWrap.eq(i),
                            _targetInp = _target.find('.shop-checkbox__input'),
                            _targetLabel = _target.find('.shop-checkbox__label'),
                            _targetMatch = 'inpChkbox' + i,
                            _targetMatchName = 'inpChkboxName' + i;
                        _targetInp.attr('id', _targetMatch);
                        _targetInp.attr('name', _targetMatchName);
                        _targetLabel.attr('for', _targetMatch);
                    })(i);
                }
                for (var i = 0, max = this.inpTxtWrap.length; i < max; i++) {
                    (function (index) {
                        var _target = _this.inpTxtWrap.eq(i),
                            _targetInp = _target.find('.shop-input__input, .shop-input__textarea'),
                            _targetLabel = _target.find('.shop-input__label'),
                            _targetMatch = 'inpTxt' + i;
                        _targetInp.attr('id', _targetMatch);
                        _targetLabel.attr('for', _targetMatch);
                    })(i);
                }

                var radioNames = [];
                for (var i = 0, max = this.inpRadioWrap.length; i < max; i++) {
                    (function (index) {
                        var _target = _this.inpRadioWrap.eq(i),
                            _targetParent = _target.parent();
                        if (!radioNames.length) {
                            radioNames.push(_targetParent[0]);
                        } else {
                            if ($.inArray(_targetParent[0], radioNames) < 0) {
                                radioNames.push(_targetParent[0]);
                            }
                        }
                    })(i);
                }
                for (var i = 0, max = radioNames.length; i < max; i++) {
                    (function (index) {
                        var _target = $(radioNames[i]),
                            _targetInp = _target.find('.shop-radio__input'),
                            _targetMatch = 'inpRadioName' + i;
                        _targetInp.attr('name', _targetMatch);
                    })(i);
                }
            }
        }
    })();

    win.smg.newShop.devjs['common-edit-mode'] = (function () {
        return {
            init : function () {
                this.setElements();
                this.initLayout();
                this.bindEvents();
            },
            setElements : function () {
                this.html = $('html');
                this.body = $('body');
                this.devLayoutHtml = $('#devLayout .inner-html');
            },
            initLayout : function () {
                var devLayouts = [];
                devLayouts.push('<div class="dev-title"><strong>common dev</strong></div>');
                devLayouts.push('<div class="dev-list" id="devCommonList">');
                devLayouts.push('<button type="button" class="aem-edit-mode">aem Editor Mode</button>');
                devLayouts.push('<button type="button" class="contentable-mode">contentable Mode</button>');
                devLayouts.push('</div>');
                this.devLayoutHtml.append(devLayouts.join(''));
                this.devList = this.devLayoutHtml.find('#devCommonList');
                this.btnAemEditMode = this.devList.find('.aem-edit-mode');
                this.btnContentableMode = this.devList.find('.contentable-mode');

                var contenteditableCookie = COOKIE.getCookie('contenteditable');
                if (contenteditableCookie == 'true') {
                    this.btnContentableMode.addClass('is-active');
                    this.contentableModeFunc();
                }
            },
            bindEvents : function () {
                this.btnAemEditMode.on('click', $.proxy(this.aemEditModeFunc, this));
                this.btnContentableMode.on('click', $.proxy(this.contentableControlFunc, this));
            },
            aemEditModeFunc : function (e) {
                e.preventDefault();
                this.btnAemEditMode.toggleClass('is-active');
                this.html.toggleClass('aem-AuthorLayer-Edit', this.btnAemEditMode.hasClass('is-active'));
                this.devLayoutHtml.trigger('closeCallback');
            },
            contentableControlFunc : function (e) {
                e.preventDefault();
                this.btnContentableMode.toggleClass('is-active');
                this.devLayoutHtml.trigger('closeCallback');
                this.contentableModeFunc();
            },
            contentableModeFunc : function () {
                if (this.btnContentableMode.hasClass('is-active')) {
                    this.body.attr('contenteditable', 'true');
                    COOKIE.setCookie('contenteditable', 'true', 1);
                } else {
                    this.body.attr('contenteditable', 'false');
                    COOKIE.setCookie('contenteditable', 'false', 1);
                }
            }
        }
    })();

    win.smg.newShop.devjs['fp-insta-item-dev'] = (function () {
        return {
            init : function () {
                if (!(this.obj = $('.ma-gallery-wall-container')).length) return;
                this.setElements();
                this.bindEvents();
            },
            setElements : function () {
                this.devLayoutHtml = $('#devLayout .inner-html');
                this.devList = this.devLayoutHtml.find('#devCommonList');
                this.btnAemEditMode = this.devList.find('.aem-edit-mode');
            },
            bindEvents : function () {
                this.btnAemEditMode.on('click', $.proxy(this.aemEditModeFunc, this));
            },
            aemEditModeFunc : function () {
                var _this = $(this),
                    _checked = this.btnAemEditMode.hasClass('is-active');
                if (_checked) {
                    this.obj.trigger('destroy');
                } else {
                    this.obj.trigger('rerun')
                }
            }
        }
    })();

    $(function () {
        win.smg.newShop.devjs['layout'].init();
        win.smg.newShop.devjs['layout-header'].init();
        win.smg.newShop.devjs['layout-footer'].init();
        win.smg.newShop.devjs['common-input'].init();
        win.smg.newShop.devjs['common-edit-mode'].init();
        win.smg.newShop.devjs['fp-insta-item-dev'].init();
    });
})(window, window.jQuery, window.document);

(function (win, $, doc) {
    'use strict';
    win.smg = win.smg || {};
    win.smg.configuratorPD = win.smg.configuratorPD || {};
    var PAGE = win.smg.configuratorPD.page;
    win.translateCssDiff = {
        'ko' : 'sec',
        'sl' : 'si',
        'sv' : 'se',
        'sr' : 'rs',
        'el' : 'gr',
        'vi' : 'vn',
        'my' : 'mm',
        'et' : 'ee',
        'da' : 'dk',
        'uk' : 'ua',
        'cs' : 'cz',
        'ar' : 'ae_ar',
        'zh-CN' : 'cn',
        'fa' : 'iran',
        'zh-TW' : 'tw',
        'iw' : 'il'
    };
    win.ie8Translate = {
        '그리스어' : 'el',
        '네덜란드어' : 'nl',
        '노르웨이어' : 'no',
        '덴마크어' : 'da',
        '독일어' : 'de',
        '라트비아어' : 'lv',
        '러시아어' : 'ru',
        '루마니아어' : 'ro',
        '미얀마어 (버마어)' : 'my',
        '베트남어' : 'vi',
        '불가리아어' : 'bg',
        '세르비아어' : 'sr',
        '스웨덴어' : 'sv',
        '스페인어' : 'es',
        '슬로바키아어' : 'sk',
        '아랍어' : 'ar',
        '에스토니아어' : 'et',
        '우크라이나어' : 'uk',
        '이탈리아어' : 'it',
        '중국어(간체)' : 'zh-CN',
        '중국어(번체)' : 'zh-TW',
        '체코어' : 'cs',
        '크로아티아어' : 'hr',
        '태국어' : 'th',
        '터키어' : 'tr',
        '페르시아어' : 'fa',
        '포르투갈어' : 'pt',
        '폴란드어' : 'pl',
        '프랑스어' : 'fr',
        '핀란드어' : 'fi',
        '헝가리어' : 'hu',
        '한국어' : 'ko',
        '히브리어' : 'iw'
    };
    win.ignoreURL = ['clientlibs-p5legacy/css/main.css'];
    win.translateObj = {
        init : function () {
            this.setElements();
            this.initLayout();
            this.setLayout();
            this.initCallBack();
            $(win).on('load', $.proxy(function () {
                this.bindEvents();
            }, this));
        },
        setElements : function () {
            this.HTML = $('html');
            this.HEAD = this.HTML.find('head');
            this.LINK = this.HEAD.find('link').filter(function () {
                var _this = $(this),
                    _href = _this.attr('href');
                for (var i = 0, max = win.ignoreURL.length; i < max; i++) {
                    var url = win.ignoreURL[i];
                    if (_href.match(new RegExp(url))) {
                        return false;
                    }
                }
                return true;
            });
            this.BODY = this.HTML.find('body');
        },
        initLayout : function () {
            var CSSS = [];
            CSSS.push('<style>');
            CSSS.push('font{vertical-align: baseline !important}');
            CSSS.push('</style>');
            this.HEAD.append(CSSS.join(''));
            this.BODY.prepend('<div id="google_translate_element" />');
            this.BODY.append('<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" />');
            this.bodyTransalte = $('#google_translate_element');
            this.bodyTransalte.css({
                'position' : 'fixed',
                'left' : 0,
                'bottom' : '40px',
                'z-index' : 1000000
            });
            this.IE8MODE = doc.documentMode && doc.documentMode == 8;
            if (this.IE8MODE) {
                var ie8HTML = [];
                ie8HTML.push('<ul style="position:fixed;top:50px;left:0;z-index:1000000;padding:5px;background:blue">');
                ie8HTML.push('<li><button type="button" class="ie8_btn" style="color:#fff;font-weight:bold">번역 갱신</button></li>');
                ie8HTML.push('</ul>');
                this.BODY.append(ie8HTML.join(''));
            }
        },
        setLayout : function () {
            // if (!$('#configuratorPD_local_css').length) {
            //     this.HEAD.append('<link id="configuratorPD_local_css" rel="stylesheet" type="text/css" />');
            //     this.configuratorPDLocalCss = $('#configuratorPD_local_css');
            // }
            // if (!$('#configuratorPD_dev_css').length) {
            //     this.HEAD.append('<link id="configuratorPD_dev_css" rel="stylesheet" type="text/css" />');
            //     this.configuratorPDDevCss = $('#configuratorPD_dev_css');
            // }
            if (!$('#local_css').length) {
                this.HEAD.append('<link id="local_css" rel="stylesheet" type="text/css" />');
                this.LocalCss = $('#local_css');
            }
        },
        initCallBack : function () {
            win.googleTranslateElementInit = $.proxy(this.googleTranslateElementInit, this);
        },
        googleTranslateElementInit : function () {
            this.translator = new google.translate.TranslateElement({
                pageLanguage : 'en',
                includedLanguages : 'ko,fr,es,th,vi,zh-CN,zh-TW,it,hu,de,sv,da,fi,no,pt,pl,el,cs,sk,ro,bg,nl,lv,et,sr,hr,ru,uk,ar,tr,fa,my,iw',
                // includedLanguages : 'ko,fr,es,th,vi,zh-CN,zh-TW,it,hu,de,sv,da,fi,no,pt,pl,el,cs,sk,ro,bg,nl,lv,et,sr,hr,ru,uk,tr,my',
                layout : google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        },
        bindEvents : function () {
            this.bodyTransalte.on('DOMNodeInserted', $.proxy(this.nodeInserted, this));
            this.BODY.on('click', '.ie8_btn', $.proxy(this.nodeInsertedIE8, this));
        },
        nodeInserted : function (e) {
            if (this.translator) {
                this.setLayout();
                win.clearTimeout(this.setEndTime);
                this.setEndTime = win.setTimeout($.proxy(function () {
                    var country = this.translator.c;
                    this.translateSetLANG(country);
                    this.translateSetLINK(country);
                    this.translateSetCSS(country);
                }, this), 350);
                win.clearTimeout(this.resetEndTime);
                this.resetEndTime = win.setTimeout($.proxy(function () {
                    var condition = $('.skiptranslate').eq(0).is(':visible');
                    if (!condition) {
                        this.translateReset();
                    }
                    this.BODY.css({
                        'position' : '',
                        'min-height' : '',
                        'top' : ''
                    });
                    $('.skiptranslate').eq(0).find('.goog-te-banner-frame').css({
                        'top' : 'auto',
                        'bottom' : 0,
                        'width' : '50%'
                    });
                }, this), 350);
                win.clearTimeout(this.pageEndTime);
                this.pageEndTime = win.setTimeout($.proxy(function () {
                    $(win).trigger('resize');
                    // PAGE.pageReposition();
                }, this), 400);
            }
        },
        nodeInsertedIE8 : function (e) {
            e.preventDefault();
            this.setLayout();
            win.clearTimeout(this.setEndTime);
            this.setEndTime = win.setTimeout($.proxy(function () {
                var target = this.bodyTransalte.find('.goog-te-menu-value span:eq(0)'),
                    country = win.ie8Translate[$.trim(target.text())];
                this.translateSetLANG(country);
                this.translateSetLINK(country);
                this.translateSetCSS(country);
            }, this), 350);
            win.clearTimeout(this.resetEndTime);
            this.resetEndTime = win.setTimeout($.proxy(function () {
                var condition = $('.skiptranslate').eq(0).is(':visible');
                if (!condition) {
                    this.translateReset();
                }
                this.BODY.css({
                    'position' : '',
                    'min-height' : '',
                    'top' : ''
                });
                $('.skiptranslate').eq(0).find('.goog-te-banner-frame').css({
                    'top' : 'auto',
                    'bottom' : 0,
                    'width' : '50%'
                });
            }, this), 350);
            win.clearTimeout(this.pageEndTime);
            this.pageEndTime = win.setTimeout($.proxy(function () {
                $(win).trigger('resize');
                // PAGE.pageReposition();
            }, this), 400);
        },
        translateSetLANG : function (country) {
            this.HTML.attr('lang', country);
            (this.translateSetRtl()) ? this.HTML.addClass('rtl') : this.HTML.removeClass('rtl');
        },
        translateSetRtl : function (country) {
            return ($('html').hasClass('translated-rtl')) ? true : false;
        },
        translateSetLINK : function (country) {
            var _link = this.LINK,
                prevURL = '',
                currentURL = '';
            if (this.translateSetRtl()) {
                prevURL = 'clientlibs/';
                currentURL = 'clientlibs-rtl/';
            } else {
                prevURL = 'clientlibs-rtl/';
                currentURL = 'clientlibs/';
            }
            for (var i = 0, max = _link.length; i < max; i++) {
                (function (index) {
                    var _target = _link.eq(index),
                        _targetHref = _target.attr('href'),
                        _changeURL = _targetHref.replace(prevURL, currentURL);
                    if (!_targetHref.match(new RegExp(currentURL))) {
                        _target.attr('href', _changeURL);
                    }
                })(i);
            }
        },
        translateSetCSS : function (country) {
            var country = this.changeCountry(country),
                // configuratorPDLocalCssURL = '//cdn.samsung.com/etc/designs/smg/' + country + '/configuratorPD/css/' + country + '.css',
                localCssURL = '//cdn.samsung.com/etc/designs/smg/' + country + '/css/' + country + '.css';
            // this.configuratorPDLocalCss.removeAttr('href');
            // this.configuratorPDLocalCss.attr('href', configuratorPDLocalCssURL);
            // if (country === 'sec') {
            //     this.configuratorPDDevCss.attr('href', '/apps/samsungp5/components/global/page/page-configuratorPD/clientlibs/css/local/sec.css');
            // } else {
            //     this.configuratorPDDevCss.removeAttr('href');
            // }
            this.LocalCss.removeAttr('href');
            this.LocalCss.attr('href', localCssURL);
            
        },
        changeCountry : function (country) {
            return (win.translateCssDiff.hasOwnProperty(country)) ? win.translateCssDiff[country] : country;
        },
        translateReset : function () {
            this.HTML.removeAttr('lang');
            // this.configuratorPDLocalCss.removeAttr('href');
            // this.configuratorPDDevCss.removeAttr('href');
            this.LocalCss.removeAttr('href');
            // this.configuratorPDLocalCss.remove();
            // this.configuratorPDDevCss.remove();
            this.LocalCss.remove();
        }
    };
    $(function () {
        win.translateObj.init();
    });
})(window, window.jQuery, window.document);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4xLmxpYjEudmVuZG9yLnNtZy5qcXVlcnktMS4xMS4zLm1pbi5qcyIsIm1haW4xLmxpYjIudmVuZG9yLmFlbS5ncmFuaXRlLnV0aWxzLnN0YW5kYWxvbmUuanMiLCJtYWluMS5saWIzLnZlbmRvci5zbWcuc2xpY2suanMiLCJtYWluMS5saWI0LnZlbmRvci5qcXVlcnkuYW5pbWF0ZS1lbmhhbmNlZC4xLjA1LmpzIiwibWFpbjEubGliNS52ZW5kb3IuanF1ZXJ5LndheXBvaW50cy5qcyIsIm1haW4xLmxpYjYudmVuZG9yLmludmlldy5taW4uanMiLCJtYWluMS5saWI3LnZlbmRvci5qcXVlcnkuYmEtb3V0c2lkZS1ldmVudHMuanMiLCJtYWluMi5nbG9iYWwxLnNtZy5uYW1lc3BhY2UuanMiLCJtYWluMi5nbG9iYWwyLnNtZy5hZW0udXRpbC5qcyIsIm1haW4yLmdsb2JhbDMuc21nLmFlbS5zdGF0aWMuanMiLCJtYWluMi5nbG9iYWw0LnNtZy5hZW0uZXZlbnQuanMiLCJtYWluMi5nbG9iYWw1LnNtZy5hZW0uY29tbW9uLmpzIiwibWFpbjIuZ2xvYmFsNi5zbWcuYWVtLmFjYy5jaGVja2JveC5qcyIsIm1haW4yLmdsb2JhbDcuc21nLmFlbS5hY2MucGxhY2Vob2xkZXIuanMiLCJtYWluMi5nb2xhYmw4LnNtZy5hZW0ucHJvZHVjdC1iYWNrdG90b3AuanMiLCJtYWluMi5nb2xhYmw5LnNtZy5hZW0uaGVhdG1hcC5qcyIsIm1haW4zLnZpZGVvMS5zbWcuYWVtLmNvbXBvbmVudHMudmlkZW8uanMiLCJtYWluMy52aWRlbzIudmVuZG9yLmJyaWdodGNvdmUucGxheWVyLm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeG9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN09BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3p1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pIQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNXpCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuICogc3JjIDogY29tbW9uL2pzL3NyYy92ZW5kb3IvanF1ZXJ5L2pxdWVyeS0xLjExLjMubWluLnNtZy5qc1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBzYW1zdW5nLmNvbSBqUXVlcnkgdjEuMTEuMyAtICQubm9Db25mbGljdCgpO1xyXG4gKi9cclxuLy9pZiAod2luZG93LiQgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHdpbmRvdy4kICYmIHdpbmRvdy4kKCkuanF1ZXJ5ICE9PSAnMS4xMS4zJykge1xyXG4vL1x0d2luZG93Ll9pc0V4aXN0ID0gdHJ1ZTtcclxuLy99XHJcblxyXG5cclxuLyoqXHJcbiogalF1ZXJ5IHYxLjExLjMgfCAoYykgMjAwNSwgMjAxNSBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZVxyXG4qL1xyXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcihcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIik7cmV0dXJuIGIoYSl9OmIoYSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWMuc2xpY2UsZT1jLmNvbmNhdCxmPWMucHVzaCxnPWMuaW5kZXhPZixoPXt9LGk9aC50b1N0cmluZyxqPWguaGFzT3duUHJvcGVydHksaz17fSxsPVwiMS4xMS4zXCIsbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbS5mbi5pbml0KGEsYil9LG49L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLG89L14tbXMtLyxwPS8tKFtcXGRhLXpdKS9naSxxPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX07bS5mbj1tLnByb3RvdHlwZT17anF1ZXJ5OmwsY29uc3RydWN0b3I6bSxzZWxlY3RvcjpcIlwiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1tLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbS5leHRlbmQ9bS5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLFwib2JqZWN0XCI9PXR5cGVvZiBnfHxtLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2hdKSlmb3IoZCBpbiBlKWE9Z1tkXSxjPWVbZF0sZyE9PWMmJihqJiZjJiYobS5pc1BsYWluT2JqZWN0KGMpfHwoYj1tLmlzQXJyYXkoYykpKT8oYj8oYj0hMSxmPWEmJm0uaXNBcnJheShhKT9hOltdKTpmPWEmJm0uaXNQbGFpbk9iamVjdChhKT9hOnt9LGdbZF09bS5leHRlbmQoaixmLGMpKTp2b2lkIDAhPT1jJiYoZ1tkXT1jKSk7cmV0dXJuIGd9LG0uZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKGwrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09bS50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVyblwiYXJyYXlcIj09PW0udHlwZShhKX0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW0uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8XCJvYmplY3RcIiE9PW0udHlwZShhKXx8YS5ub2RlVHlwZXx8bS5pc1dpbmRvdyhhKSlyZXR1cm4hMTt0cnl7aWYoYS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLFwiY29uc3RydWN0b3JcIikmJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKGsub3duTGFzdClmb3IoYiBpbiBhKXJldHVybiBqLmNhbGwoYSxiKTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ai5jYWxsKGEsYil9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZtLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UobyxcIm1zLVwiKS5yZXBsYWNlKHAscSl9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT0wLGY9YS5sZW5ndGgsZz1yKGEpO2lmKGMpe2lmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGlmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShuLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHIoT2JqZWN0KGEpKT9tLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihiKXtpZihnKXJldHVybiBnLmNhbGwoYixhLGMpO2ZvcihkPWIubGVuZ3RoLGM9Yz8wPmM/TWF0aC5tYXgoMCxkK2MpOmM6MDtkPmM7YysrKWlmKGMgaW4gYiYmYltjXT09PWEpcmV0dXJuIGN9cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO3doaWxlKGM+ZClhW2UrK109YltkKytdO2lmKGMhPT1jKXdoaWxlKHZvaWQgMCE9PWJbZF0pYVtlKytdPWJbZCsrXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1yKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9ZiksbS5pc0Z1bmN0aW9uKGEpPyhjPWQuY2FsbChhcmd1bWVudHMsMiksZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZS5ndWlkPWEuZ3VpZD1hLmd1aWR8fG0uZ3VpZCsrLGUpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omt9KSxtLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aFtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcihhKXt2YXIgYj1cImxlbmd0aFwiaW4gYSYmYS5sZW5ndGgsYz1tLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09Y3x8bS5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDpcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHM9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1oYSgpLHo9aGEoKSxBPWhhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLEw9XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLE09XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixOPU0ucmVwbGFjZShcIndcIixcIncjXCIpLE89XCJcXFxcW1wiK0wrXCIqKFwiK00rXCIpKD86XCIrTCtcIiooWypeJHwhfl0/PSlcIitMK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrTitcIikpfClcIitMK1wiKlxcXFxdXCIsUD1cIjooXCIrTStcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrTytcIikqKXwuKilcXFxcKXwpXCIsUT1uZXcgUmVnRXhwKEwrXCIrXCIsXCJnXCIpLFI9bmV3IFJlZ0V4cChcIl5cIitMK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitMK1wiKyRcIixcImdcIiksUz1uZXcgUmVnRXhwKFwiXlwiK0wrXCIqLFwiK0wrXCIqXCIpLFQ9bmV3IFJlZ0V4cChcIl5cIitMK1wiKihbPit+XXxcIitMK1wiKVwiK0wrXCIqXCIpLFU9bmV3IFJlZ0V4cChcIj1cIitMK1wiKihbXlxcXFxdJ1xcXCJdKj8pXCIrTCtcIipcXFxcXVwiLFwiZ1wiKSxWPW5ldyBSZWdFeHAoUCksVz1uZXcgUmVnRXhwKFwiXlwiK04rXCIkXCIpLFg9e0lEOm5ldyBSZWdFeHAoXCJeIyhcIitNK1wiKVwiKSxDTEFTUzpuZXcgUmVnRXhwKFwiXlxcXFwuKFwiK00rXCIpXCIpLFRBRzpuZXcgUmVnRXhwKFwiXihcIitNLnJlcGxhY2UoXCJ3XCIsXCJ3KlwiKStcIilcIiksQVRUUjpuZXcgUmVnRXhwKFwiXlwiK08pLFBTRVVETzpuZXcgUmVnRXhwKFwiXlwiK1ApLENISUxEOm5ldyBSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK0wrXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitMK1wiKig/OihbKy1dfClcIitMK1wiKihcXFxcZCspfCkpXCIrTCtcIipcXFxcKXwpXCIsXCJpXCIpLGJvb2w6bmV3IFJlZ0V4cChcIl4oPzpcIitLK1wiKSRcIixcImlcIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoXCJeXCIrTCtcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrTCtcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrTCtcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFo9L15oXFxkJC9pLCQ9L15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxfPS9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLGFhPS9bK35dLyxiYT0vJ3xcXFxcL2csY2E9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK0wrXCI/fChcIitMK1wiKXwuKVwiLFwiaWdcIiksZGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZWE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGZhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBnYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLGs9Yi5ub2RlVHlwZSxcInN0cmluZ1wiIT10eXBlb2YgYXx8IWF8fDEhPT1rJiY5IT09ayYmMTEhPT1rKXJldHVybiBkO2lmKCFlJiZwKXtpZigxMSE9PWsmJihmPV8uZXhlYyhhKSkpaWYoaj1mWzFdKXtpZig5PT09ayl7aWYoaD1iLmdldEVsZW1lbnRCeUlkKGopLCFofHwhaC5wYXJlbnROb2RlKXJldHVybiBkO2lmKGguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNlIGlmKGIub3duZXJEb2N1bWVudCYmKGg9Yi5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGopKSYmdChiLGgpJiZoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZXtpZihmWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoaj1mWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGopKSxkfWlmKGMucXNhJiYoIXF8fCFxLnRlc3QoYSkpKXtpZihzPXI9dSx3PWIseD0xIT09ayYmYSwxPT09ayYmXCJvYmplY3RcIiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bz1nKGEpLChyPWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpP3M9ci5yZXBsYWNlKGJhLFwiXFxcXCQmXCIpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixzKSxzPVwiW2lkPSdcIitzK1wiJ10gXCIsbD1vLmxlbmd0aDt3aGlsZShsLS0pb1tsXT1zK3JhKG9bbF0pO3c9YWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8Yix4PW8uam9pbihcIixcIil9aWYoeCl0cnl7cmV0dXJuIEguYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwoeCkpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7cnx8Yi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19fXJldHVybiBpKGEucmVwbGFjZShSLFwiJDFcIiksYixkLGUpfWZ1bmN0aW9uIGhhKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYytcIiBcIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrXCIgXCJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KFwifFwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBsYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihcImlucHV0XCI9PT1jfHxcImJ1dHRvblwiPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG9hKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHBhKGEpe3JldHVybiBhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmYX1jPWdhLnN1cHBvcnQ9e30sZj1nYS5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/XCJIVE1MXCIhPT1iLm5vZGVOYW1lOiExfSxtPWdhLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGUsZz1hP2Eub3duZXJEb2N1bWVudHx8YTp2O3JldHVybiBnIT09biYmOT09PWcubm9kZVR5cGUmJmcuZG9jdW1lbnRFbGVtZW50PyhuPWcsbz1nLmRvY3VtZW50RWxlbWVudCxlPWcuZGVmYXVsdFZpZXcsZSYmZSE9PWUudG9wJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGVhLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixlYSkpLHA9IWYoZyksYy5hdHRyaWJ1dGVzPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT1cImlcIiwhYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGcuY3JlYXRlQ29tbWVudChcIlwiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT0kLnRlc3QoZy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxjLmdldEJ5SWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoYSkuaWQ9dSwhZy5nZXRFbGVtZW50c0J5TmFtZXx8IWcuZ2V0RWxlbWVudHNCeU5hbWUodSkubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTpjLnFzYT9iLnF1ZXJ5U2VsZWN0b3JBbGwoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuIHA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT0kLnRlc3QoZy5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD1cIjxhIGlkPSdcIit1K1wiJz48L2E+PHNlbGVjdCBpZD0nXCIrdStcIi1cXGZdJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGEucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCYmcS5wdXNoKFwiWypeJF09XCIrTCtcIiooPzonJ3xcXFwiXFxcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fHEucHVzaChcIlxcXFxbXCIrTCtcIiooPzp2YWx1ZXxcIitLK1wiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWR+PVwiK3UrXCItXVwiKS5sZW5ndGh8fHEucHVzaChcIn49XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmNoZWNrZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiYSNcIit1K1wiKypcIikubGVuZ3RofHxxLnB1c2goXCIuIy4rWyt+XVwiKX0pLGphKGZ1bmN0aW9uKGEpe3ZhciBiPWcuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Iuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiaGlkZGVuXCIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiRFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGgmJnEucHVzaChcIm5hbWVcIitMK1wiKlsqXiR8IX5dPz1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RofHxxLnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIikscS5wdXNoKFwiLC4qOlwiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9JC50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZqYShmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLFwiZGl2XCIpLHMuY2FsbChhLFwiW3MhPScnXTp4XCIpLHIucHVzaChcIiE9XCIsUCl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbihcInxcIikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKFwifFwiKSksYj0kLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHwkLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1nfHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PWd8fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxoPVthXSxpPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1nPy0xOmI9PT1nPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGxhKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaS51bnNoaWZ0KGMpO3doaWxlKGhbZF09PT1pW2RdKWQrKztyZXR1cm4gZD9sYShoW2RdLGlbZF0pOmhbZF09PT12Py0xOmlbZF09PT12PzE6MH0sZyk6bn0sZ2EubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBnYShhLG51bGwsbnVsbCxiKX0sZ2EubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFUsXCI9JyQxJ11cIiksISghYy5tYXRjaGVzU2VsZWN0b3J8fCFwfHxyJiZyLnRlc3QoYil8fHEmJnEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGdhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGdhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZ2EuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGdhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2EpfSxnYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9Z2EuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPVwiXCIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1nYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzppYSxtYXRjaDpYLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKGNhLGRhKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHxcIlwiKS5yZXBsYWNlKGNhLGRhKSxcIn49XCI9PT1hWzJdJiYoYVszXT1cIiBcIithWzNdK1wiIFwiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSxcIm50aFwiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKihcImV2ZW5cIj09PWFbM118fFwib2RkXCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8XCJvZGRcIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gWC5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHxcIlwiOmMmJlYudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrTCtcIilcIithK1wiKFwiK0wrXCJ8JClcIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1nYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjpiPyhlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZS5yZXBsYWNlKFEsXCIgXCIpK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPVwib25seVwiPT09YSYmIW8mJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7az1xW3VdfHwocVt1XT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLG09alswXT09PXcmJmpbMl0sbD1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoMT09PWwubm9kZVR5cGUmJisrbSYmbD09PWIpe2tbYV09W3csbixtXTticmVha319ZWxzZSBpZihzJiYoaj0oYlt1XXx8KGJbdV09e30pKVthXSkmJmpbMF09PT13KW09alsxXTtlbHNlIHdoaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKChoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpJiYrK20mJihzJiYoKGxbdV18fChsW3VdPXt9KSlbYV09W3csbV0pLGw9PT1iKSlicmVhaztyZXR1cm4gbS09ZSxtPT09ZHx8bSVkPT09MCYmbS9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLFwiXCIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aWEoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUooYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aWEoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFIsXCIkMVwiKSk7cmV0dXJuIGRbdV0/aWEoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksYlswXT1udWxsLCFjLnBvcCgpfX0pLGhhczppYShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGdhKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKGNhLGRhKSxmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzppYShmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGF8fFwiXCIpfHxnYS5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2EpLGE9YS5yZXBsYWNlKGNhLGRhKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhK1wiLVwiKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJiEhYS5jaGVja2VkfHxcIm9wdGlvblwiPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiZcImJ1dHRvblwiPT09YS50eXBlfHxcImJ1dHRvblwiPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm5cImlucHV0XCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpvYShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6b2EoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm9hKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46b2EoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6b2EoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om9hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1tYShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1uYShiKTtmdW5jdGlvbiBxYSgpe31xYS5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHFhLGc9Z2EudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYStcIiBcIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVMuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1ULmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFIsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9nYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHJhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiBzYShhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiZcInBhcmVudE5vZGVcIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGo9W3csZl07aWYoZyl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZSkmJmEoYixjLGcpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXtpZihpPWJbdV18fChiW3VdPXt9KSwoaD1pW2RdKSYmaFswXT09PXcmJmhbMV09PT1mKXJldHVybiBqWzJdPWhbMl07aWYoaVtkXT1qLGpbMl09YShiLGMsZykpcmV0dXJuITB9fX1mdW5jdGlvbiB0YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB1YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB2YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtpPmg7aCsrKShmPWFbaF0pJiYoIWN8fGMoZixkLGUpKSYmKGcucHVzaChmKSxqJiZiLnB1c2goaCkpO3JldHVybiBnfWZ1bmN0aW9uIHdhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXdhKGQpKSxlJiYhZVt1XSYmKGU9d2EoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dWEoYnx8XCIqXCIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp2YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dmEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXZhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB4YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlW1wiIFwiXSxpPWc/MTowLGs9c2EoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBKKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXt2YXIgZT0hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKTtyZXR1cm4gYj1udWxsLGV9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3NhKHRhKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB3YShpPjEmJnRhKG0pLGk+MSYmcmEoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTpcIiBcIj09PWFbaS0yXS50eXBlP1wiKlwiOlwiXCJ9KSkucmVwbGFjZShSLFwiJDFcIiksYyxlPmkmJnhhKGEuc2xpY2UoaSxlKSksZj5lJiZ4YShhPWEuc2xpY2UoZSkpLGY+ZSYmcmEoYSkpfW0ucHVzaChjKX1yZXR1cm4gdGEobSl9ZnVuY3Rpb24geWEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbSxvLHA9MCxxPVwiMFwiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKFwiKlwiLGspLHY9dys9bnVsbD09dD8xOk1hdGgucmFuZG9tKCl8fC4xLHg9dS5sZW5ndGg7Zm9yKGsmJihqPWchPT1uJiZnKTtxIT09eCYmbnVsbCE9KGw9dVtxXSk7cSsrKXtpZihlJiZsKXttPTA7d2hpbGUobz1hW20rK10paWYobyhsLGcsaCkpe2kucHVzaChsKTticmVha31rJiYodz12KX1jJiYoKGw9IW8mJmwpJiZwLS0sZiYmci5wdXNoKGwpKX1pZihwKz1xLGMmJnEhPT1wKXttPTA7d2hpbGUobz1iW20rK10pbyhyLHMsZyxoKTtpZihmKXtpZihwPjApd2hpbGUocS0tKXJbcV18fHNbcV18fChzW3FdPUYuY2FsbChpKSk7cz12YShzKX1ILmFwcGx5KGkscyksayYmIWYmJnMubGVuZ3RoPjAmJnArYi5sZW5ndGg+MSYmZ2EudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9dixqPXQpLHJ9O3JldHVybiBjP2lhKGYpOmZ9cmV0dXJuIGg9Z2EuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYStcIiBcIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eGEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHlhKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGksaixrLGwsbSxuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiZcIklEXCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVgubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNhLGRhKSxhYS50ZXN0KGpbMF0udHlwZSkmJnBhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZyYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSxhYS50ZXN0KGEpJiZwYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdChcIlwiKS5zb3J0KEIpLmpvaW4oXCJcIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWphKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKX0pLGphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGthKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYixcInR5cGVcIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8a2EoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8XCJpbnB1dFwiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGphKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGthKEssZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTttLmZpbmQ9cyxtLmV4cHI9cy5zZWxlY3RvcnMsbS5leHByW1wiOlwiXT1tLmV4cHIucHNldWRvcyxtLnVuaXF1ZT1zLnVuaXF1ZVNvcnQsbS50ZXh0PXMuZ2V0VGV4dCxtLmlzWE1MRG9jPXMuaXNYTUwsbS5jb250YWlucz1zLmNvbnRhaW5zO3ZhciB0PW0uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdT0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sdj0vXi5bXjojXFxbXFwuLF0qJC87ZnVuY3Rpb24gdyhhLGIsYyl7aWYobS5pc0Z1bmN0aW9uKGIpKXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2lmKHYudGVzdChiKSlyZXR1cm4gbS5maWx0ZXIoYixhLGMpO2I9bS5maWx0ZXIoYixhKX1yZXR1cm4gbS5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIG0uaW5BcnJheShhLGIpPj0wIT09Y30pfW0uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT1cIjpub3QoXCIrYStcIilcIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9tLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm0uZmluZC5tYXRjaGVzKGEsbS5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxtLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhtKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZT5iO2IrKylpZihtLmNvbnRhaW5zKGRbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtlPmI7YisrKW0uZmluZChhLGRbYl0sYyk7cmV0dXJuIGM9dGhpcy5wdXNoU3RhY2soZT4xP20udW5pcXVlKGMpOmMpLGMuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yK1wiIFwiK2E6YSxjfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHcodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXcodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmdC50ZXN0KGEpP20oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgeCx5PWEuZG9jdW1lbnQsej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW0uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hLmNoYXJBdCgwKSYmXCI+XCI9PT1hLmNoYXJBdChhLmxlbmd0aC0xKSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTp6LmV4ZWMoYSksIWN8fCFjWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8eCkuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoY1sxXSl7aWYoYj1iIGluc3RhbmNlb2YgbT9iWzBdOmIsbS5tZXJnZSh0aGlzLG0ucGFyc2VIVE1MKGNbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6eSwhMCkpLHUudGVzdChjWzFdKSYmbS5pc1BsYWluT2JqZWN0KGIpKWZvcihjIGluIGIpbS5pc0Z1bmN0aW9uKHRoaXNbY10pP3RoaXNbY10oYltjXSk6dGhpcy5hdHRyKGMsYltjXSk7cmV0dXJuIHRoaXN9aWYoZD15LmdldEVsZW1lbnRCeUlkKGNbMl0pLGQmJmQucGFyZW50Tm9kZSl7aWYoZC5pZCE9PWNbMl0pcmV0dXJuIHguZmluZChhKTt0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZH1yZXR1cm4gdGhpcy5jb250ZXh0PXksdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTptLmlzRnVuY3Rpb24oYSk/XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHgucmVhZHk/eC5yZWFkeShhKTphKG0pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG0ubWFrZUFycmF5KGEsdGhpcykpfTtBLnByb3RvdHlwZT1tLmZuLHg9bSh5KTt2YXIgQj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxDPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O20uZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YVtiXTt3aGlsZShlJiY5IT09ZS5ub2RlVHlwZSYmKHZvaWQgMD09PWN8fDEhPT1lLm5vZGVUeXBlfHwhbShlKS5pcyhjKSkpMT09PWUubm9kZVR5cGUmJmQucHVzaChlKSxlPWVbYl07cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbS5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW0oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihtLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dC50ZXN0KGEpfHxcInN0cmluZ1wiIT10eXBlb2YgYT9tKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZtLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bS51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP20uaW5BcnJheSh0aGlzWzBdLG0oYSkpOm0uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS51bmlxdWUobS5tZXJnZSh0aGlzLmdldCgpLG0oYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gRChhLGIpe2RvIGE9YVtiXTt3aGlsZShhJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9bS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBtLmRpcihhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5kaXIoYSxcInBhcmVudE5vZGVcIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbS5kaXIoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBtLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLmRpcihhLFwibmV4dFNpYmxpbmdcIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbS5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbS5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBtLm5vZGVOYW1lKGEsXCJpZnJhbWVcIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDptLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe20uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1tLm1hcCh0aGlzLGIsYyk7cmV0dXJuXCJVbnRpbFwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJlwic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1tLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8KGU9bS51bmlxdWUoZSkpLEIudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBtLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1tLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bS5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihjPWEubWVtb3J5JiZsLGQ9ITAsZj1nfHwwLGc9MCxlPWgubGVuZ3RoLGI9ITA7aCYmZT5mO2YrKylpZihoW2ZdLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yz0hMTticmVha31iPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yz9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGQ9aC5sZW5ndGg7IWZ1bmN0aW9uIGYoYil7bS5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1tLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmYoYyl9KX0oYXJndW1lbnRzKSxiP2U9aC5sZW5ndGg6YyYmKGc9ZCxqKGMpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm0uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxjKXt2YXIgZDt3aGlsZSgoZD1tLmluQXJyYXkoYyxoLGQpKT4tMSloLnNwbGljZShkLDEpLGImJihlPj1kJiZlLS0sZj49ZCYmZi0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9tLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGU9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1jPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGN8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGMpe3JldHVybiFofHxkJiYhaXx8KGM9Y3x8W10sYz1bYSxjLnNsaWNlP2Muc2xpY2UoKTpjXSxiP2kucHVzaChjKTpqKGMpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFkfX07cmV0dXJuIGt9LG0uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG0uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixtLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG0uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG0uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bS5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1tLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm0uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9tLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG0uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbS5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTptLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm0uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDttLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBtLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG0uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP20ucmVhZHlXYWl0Kys6bS5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpe2lmKGE9PT0hMD8hLS1tLnJlYWR5V2FpdDohbS5pc1JlYWR5KXtpZigheS5ib2R5KXJldHVybiBzZXRUaW1lb3V0KG0ucmVhZHkpO20uaXNSZWFkeT0hMCxhIT09ITAmJi0tbS5yZWFkeVdhaXQ+MHx8KEgucmVzb2x2ZVdpdGgoeSxbbV0pLG0uZm4udHJpZ2dlckhhbmRsZXImJihtKHkpLnRyaWdnZXJIYW5kbGVyKFwicmVhZHlcIiksbSh5KS5vZmYoXCJyZWFkeVwiKSkpfX19KTtmdW5jdGlvbiBJKCl7eS5hZGRFdmVudExpc3RlbmVyPyh5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSiwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEosITEpKTooeS5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEopLGEuZGV0YWNoRXZlbnQoXCJvbmxvYWRcIixKKSl9ZnVuY3Rpb24gSigpeyh5LmFkZEV2ZW50TGlzdGVuZXJ8fFwibG9hZFwiPT09ZXZlbnQudHlwZXx8XCJjb21wbGV0ZVwiPT09eS5yZWFkeVN0YXRlKSYmKEkoKSxtLnJlYWR5KCkpfW0ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtpZighSClpZihIPW0uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT15LnJlYWR5U3RhdGUpc2V0VGltZW91dChtLnJlYWR5KTtlbHNlIGlmKHkuYWRkRXZlbnRMaXN0ZW5lcil5LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSiwhMSksYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLEosITEpO2Vsc2V7eS5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEopLGEuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIixKKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmeS5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZCl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBlKCl7aWYoIW0uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGEpe3JldHVybiBzZXRUaW1lb3V0KGUsNTApfUkoKSxtLnJlYWR5KCl9fSgpfXJldHVybiBILnByb21pc2UoYil9O3ZhciBLPVwidW5kZWZpbmVkXCIsTDtmb3IoTCBpbiBtKGspKWJyZWFrO2sub3duTGFzdD1cIjBcIiE9PUwsay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PSExLG0oZnVuY3Rpb24oKXt2YXIgYSxiLGMsZDtjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLGMmJmMuc3R5bGUmJihiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksdHlwZW9mIGIuc3R5bGUuem9vbSE9PUsmJihiLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmlubGluZTttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxXCIsay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChkKSl9KSxmdW5jdGlvbigpe3ZhciBhPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihudWxsPT1rLmRlbGV0ZUV4cGFuZG8pe2suZGVsZXRlRXhwYW5kbz0hMDt0cnl7ZGVsZXRlIGEudGVzdH1jYXRjaChiKXtrLmRlbGV0ZUV4cGFuZG89ITF9fWE9bnVsbH0oKSxtLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7dmFyIGI9bS5ub0RhdGFbKGEubm9kZU5hbWUrXCIgXCIpLnRvTG93ZXJDYXNlKCldLGM9K2Eubm9kZVR5cGV8fDE7cmV0dXJuIDEhPT1jJiY5IT09Yz8hMTohYnx8YiE9PSEwJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzaWRcIik9PT1ifTt2YXIgTT0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sTj0vKFtBLVpdKS9nO2Z1bmN0aW9uIE8oYSxiLGMpe2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKXt2YXIgZD1cImRhdGEtXCIrYi5yZXBsYWNlKE4sXCItJDFcIikudG9Mb3dlckNhc2UoKTtpZihjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpNLnRlc3QoYyk/bS5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bS5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwfXJldHVybiBjfWZ1bmN0aW9uIFAoYSl7dmFyIGI7Zm9yKGIgaW4gYSlpZigoXCJkYXRhXCIhPT1ifHwhbS5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmXCJ0b0pTT05cIiE9PWIpcmV0dXJuITE7XHJcbnJldHVybiEwfWZ1bmN0aW9uIFEoYSxiLGQsZSl7aWYobS5hY2NlcHREYXRhKGEpKXt2YXIgZixnLGg9bS5leHBhbmRvLGk9YS5ub2RlVHlwZSxqPWk/bS5jYWNoZTphLGs9aT9hW2hdOmFbaF0mJmg7aWYoayYmaltrXSYmKGV8fGpba10uZGF0YSl8fHZvaWQgMCE9PWR8fFwic3RyaW5nXCIhPXR5cGVvZiBiKXJldHVybiBrfHwoaz1pP2FbaF09Yy5wb3AoKXx8bS5ndWlkKys6aCksaltrXXx8KGpba109aT97fTp7dG9KU09OOm0ubm9vcH0pLChcIm9iamVjdFwiPT10eXBlb2YgYnx8XCJmdW5jdGlvblwiPT10eXBlb2YgYikmJihlP2pba109bS5leHRlbmQoaltrXSxiKTpqW2tdLmRhdGE9bS5leHRlbmQoaltrXS5kYXRhLGIpKSxnPWpba10sZXx8KGcuZGF0YXx8KGcuZGF0YT17fSksZz1nLmRhdGEpLHZvaWQgMCE9PWQmJihnW20uY2FtZWxDYXNlKGIpXT1kKSxcInN0cmluZ1wiPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbS5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFIoYSxiLGMpe2lmKG0uYWNjZXB0RGF0YShhKSl7dmFyIGQsZSxmPWEubm9kZVR5cGUsZz1mP20uY2FjaGU6YSxoPWY/YVttLmV4cGFuZG9dOm0uZXhwYW5kbztpZihnW2hdKXtpZihiJiYoZD1jP2dbaF06Z1toXS5kYXRhKSl7bS5pc0FycmF5KGIpP2I9Yi5jb25jYXQobS5tYXAoYixtLmNhbWVsQ2FzZSkpOmIgaW4gZD9iPVtiXTooYj1tLmNhbWVsQ2FzZShiKSxiPWIgaW4gZD9bYl06Yi5zcGxpdChcIiBcIikpLGU9Yi5sZW5ndGg7d2hpbGUoZS0tKWRlbGV0ZSBkW2JbZV1dO2lmKGM/IVAoZCk6IW0uaXNFbXB0eU9iamVjdChkKSlyZXR1cm59KGN8fChkZWxldGUgZ1toXS5kYXRhLFAoZ1toXSkpKSYmKGY/bS5jbGVhbkRhdGEoW2FdLCEwKTprLmRlbGV0ZUV4cGFuZG98fGchPWcud2luZG93P2RlbGV0ZSBnW2hdOmdbaF09bnVsbCl9fX1tLmV4dGVuZCh7Y2FjaGU6e30sbm9EYXRhOntcImFwcGxldCBcIjohMCxcImVtYmVkIFwiOiEwLFwib2JqZWN0IFwiOlwiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwXCJ9LGhhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5ub2RlVHlwZT9tLmNhY2hlW2FbbS5leHBhbmRvXV06YVttLmV4cGFuZG9dLCEhYSYmIVAoYSl9LGRhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBRKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe3JldHVybiBSKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gUShhLGIsYywhMCl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFIoYSxiLCEwKX19KSxtLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPW0uZGF0YShmKSwxPT09Zi5ub2RlVHlwZSYmIW0uX2RhdGEoZixcInBhcnNlZEF0dHJzXCIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoXCJkYXRhLVwiKSYmKGQ9bS5jYW1lbENhc2UoZC5zbGljZSg1KSksTyhmLGQsZVtkXSkpKTttLl9kYXRhKGYsXCJwYXJzZWRBdHRyc1wiLCEwKX1yZXR1cm4gZX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXttLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXttLmRhdGEodGhpcyxhLGIpfSk6Zj9PKGYsYSxtLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXttLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG0uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9bS5fZGF0YShhLGIpLGMmJighZHx8bS5pc0FycmF5KGMpP2Q9bS5fZGF0YShhLGIsbS5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPW0ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bS5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXttLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBtLl9kYXRhKGEsYyl8fG0uX2RhdGEoYSxjLHtlbXB0eTptLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe20uX3JlbW92ZURhdGEoYSxiK1wicXVldWVcIiksbS5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxtLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP20ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bS5xdWV1ZSh0aGlzLGEsYik7bS5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmbS5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bS5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9bS5fZGF0YShmW2ddLGErXCJxdWV1ZUhvb2tzXCIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBTPS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSxUPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxVPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PW0uY3NzKGEsXCJkaXNwbGF5XCIpfHwhbS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFY9bS5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bS50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbS5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbS5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG0oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn0sVz0vXig/OmNoZWNrYm94fHJhZGlvKSQvaTshZnVuY3Rpb24oKXt2YXIgYT15LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxjPXkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKGIuaW5uZXJIVE1MPVwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCIsay5sZWFkaW5nV2hpdGVzcGFjZT0zPT09Yi5maXJzdENoaWxkLm5vZGVUeXBlLGsudGJvZHk9IWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKS5sZW5ndGgsay5odG1sU2VyaWFsaXplPSEhYi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIikubGVuZ3RoLGsuaHRtbDVDbG9uZT1cIjw6bmF2PjwvOm5hdj5cIiE9PXkuY3JlYXRlRWxlbWVudChcIm5hdlwiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxhLnR5cGU9XCJjaGVja2JveFwiLGEuY2hlY2tlZD0hMCxjLmFwcGVuZENoaWxkKGEpLGsuYXBwZW5kQ2hlY2tlZD1hLmNoZWNrZWQsYi5pbm5lckhUTUw9XCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlLGMuYXBwZW5kQ2hpbGQoYiksYi5pbm5lckhUTUw9XCI8aW5wdXQgdHlwZT0ncmFkaW8nIGNoZWNrZWQ9J2NoZWNrZWQnIG5hbWU9J3QnLz5cIixrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsay5ub0Nsb25lRXZlbnQ9ITAsYi5hdHRhY2hFdmVudCYmKGIuYXR0YWNoRXZlbnQoXCJvbmNsaWNrXCIsZnVuY3Rpb24oKXtrLm5vQ2xvbmVFdmVudD0hMX0pLGIuY2xvbmVOb2RlKCEwKS5jbGljaygpKSxudWxsPT1rLmRlbGV0ZUV4cGFuZG8pe2suZGVsZXRlRXhwYW5kbz0hMDt0cnl7ZGVsZXRlIGIudGVzdH1jYXRjaChkKXtrLmRlbGV0ZUV4cGFuZG89ITF9fX0oKSxmdW5jdGlvbigpe3ZhciBiLGMsZD15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPVwib25cIitiLChrW2IrXCJCdWJibGVzXCJdPWMgaW4gYSl8fChkLnNldEF0dHJpYnV0ZShjLFwidFwiKSxrW2IrXCJCdWJibGVzXCJdPWQuYXR0cmlidXRlc1tjXS5leHBhbmRvPT09ITEpO2Q9bnVsbH0oKTt2YXIgWD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksWT0vXmtleS8sWj0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLywkPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxfPS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIGFhKCl7cmV0dXJuITB9ZnVuY3Rpb24gYmEoKXtyZXR1cm4hMX1mdW5jdGlvbiBjYSgpe3RyeXtyZXR1cm4geS5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319bS5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG4sbyxwLHEscj1tLl9kYXRhKGEpO2lmKHIpe2MuaGFuZGxlciYmKGk9YyxjPWkuaGFuZGxlcixlPWkuc2VsZWN0b3IpLGMuZ3VpZHx8KGMuZ3VpZD1tLmd1aWQrKyksKGc9ci5ldmVudHMpfHwoZz1yLmV2ZW50cz17fSksKGs9ci5oYW5kbGUpfHwoaz1yLmhhbmRsZT1mdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIG09PT1LfHxhJiZtLmV2ZW50LnRyaWdnZXJlZD09PWEudHlwZT92b2lkIDA6bS5ldmVudC5kaXNwYXRjaC5hcHBseShrLmVsZW0sYXJndW1lbnRzKX0say5lbGVtPWEpLGI9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1fLmV4ZWMoYltoXSl8fFtdLG89cT1mWzFdLHA9KGZbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyYmKGo9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW0uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm0uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKFwiLlwiKX0saSksKG49Z1tvXSl8fChuPWdbb109W10sbi5kZWxlZ2F0ZUNvdW50PTAsai5zZXR1cCYmai5zZXR1cC5jYWxsKGEsZCxwLGspIT09ITF8fChhLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKG8saywhMSk6YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudChcIm9uXCIrbyxrKSkpLGouYWRkJiYoai5hZGQuY2FsbChhLGwpLGwuaGFuZGxlci5ndWlkfHwobC5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9uLnNwbGljZShuLmRlbGVnYXRlQ291bnQrKywwLGwpOm4ucHVzaChsKSxtLmV2ZW50Lmdsb2JhbFtvXT0hMCk7YT1udWxsfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbixvLHAscSxyPW0uaGFzRGF0YShhKSYmbS5fZGF0YShhKTtpZihyJiYoaz1yLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1fLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyl7bD1tLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbj1rW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitwLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxpPWY9bi5sZW5ndGg7d2hpbGUoZi0tKWc9bltmXSwhZSYmcSE9PWcub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWcuZ3VpZHx8aCYmIWgudGVzdChnLm5hbWVzcGFjZSl8fGQmJmQhPT1nLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWcuc2VsZWN0b3IpfHwobi5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZuLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbi5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxtLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayltLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO20uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxtLl9yZW1vdmVEYXRhKGEsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLGwsbixvPVtkfHx5XSxwPWouY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixxPWouY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihoPWw9ZD1kfHx5LDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmISQudGVzdChwK20uZXZlbnQudHJpZ2dlcmVkKSYmKHAuaW5kZXhPZihcIi5cIik+PTAmJihxPXAuc3BsaXQoXCIuXCIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxnPXAuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3AsYj1iW20uZXhwYW5kb10/YjpuZXcgbS5FdmVudChwLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oXCIuXCIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitxLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWQpLGM9bnVsbD09Yz9bYl06bS5tYWtlQXJyYXkoYyxbYl0pLGs9bS5ldmVudC5zcGVjaWFsW3BdfHx7fSxlfHwhay50cmlnZ2VyfHxrLnRyaWdnZXIuYXBwbHkoZCxjKSE9PSExKSl7aWYoIWUmJiFrLm5vQnViYmxlJiYhbS5pc1dpbmRvdyhkKSl7Zm9yKGk9ay5kZWxlZ2F0ZVR5cGV8fHAsJC50ZXN0KGkrcCl8fChoPWgucGFyZW50Tm9kZSk7aDtoPWgucGFyZW50Tm9kZSlvLnB1c2goaCksbD1oO2w9PT0oZC5vd25lckRvY3VtZW50fHx5KSYmby5wdXNoKGwuZGVmYXVsdFZpZXd8fGwucGFyZW50V2luZG93fHxhKX1uPTA7d2hpbGUoKGg9b1tuKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9bj4xP2k6ay5iaW5kVHlwZXx8cCxmPShtLl9kYXRhKGgsXCJldmVudHNcIil8fHt9KVtiLnR5cGVdJiZtLl9kYXRhKGgsXCJoYW5kbGVcIiksZiYmZi5hcHBseShoLGMpLGY9ZyYmaFtnXSxmJiZmLmFwcGx5JiZtLmFjY2VwdERhdGEoaCkmJihiLnJlc3VsdD1mLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtpZihiLnR5cGU9cCwhZSYmIWIuaXNEZWZhdWx0UHJldmVudGVkKCkmJighay5fZGVmYXVsdHx8ay5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpPT09ITEpJiZtLmFjY2VwdERhdGEoZCkmJmcmJmRbcF0mJiFtLmlzV2luZG93KGQpKXtsPWRbZ10sbCYmKGRbZ109bnVsbCksbS5ldmVudC50cmlnZ2VyZWQ9cDt0cnl7ZFtwXSgpfWNhdGNoKHIpe31tLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbCYmKGRbZ109bCl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1tLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShtLl9kYXRhKHRoaXMsXCJldmVudHNcIil8fHt9KVthLnR5cGVdfHxbXSxrPW0uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW0uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sZz0wO3doaWxlKChlPWYuaGFuZGxlcnNbZysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChlLm5hbWVzcGFjZSkpJiYoYS5oYW5kbGVPYmo9ZSxhLmRhdGE9ZS5kYXRhLGM9KChtLmV2ZW50LnNwZWNpYWxbZS5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGUuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWMmJihhLnJlc3VsdD1jKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJighYS5idXR0b258fFwiY2xpY2tcIiE9PWEudHlwZSkpZm9yKDtpIT10aGlzO2k9aS5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1pLm5vZGVUeXBlJiYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpKXtmb3IoZT1bXSxmPTA7aD5mO2YrKylkPWJbZl0sYz1kLnNlbGVjdG9yK1wiIFwiLHZvaWQgMD09PWVbY10mJihlW2NdPWQubmVlZHNDb250ZXh0P20oYyx0aGlzKS5pbmRleChpKT49MDptLmZpbmQoYyx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGVbY10mJmUucHVzaChkKTtlLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZX0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbS5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGQsZT1hLnR5cGUsZj1hLGc9dGhpcy5maXhIb29rc1tlXTtnfHwodGhpcy5maXhIb29rc1tlXT1nPVoudGVzdChlKT90aGlzLm1vdXNlSG9va3M6WS50ZXN0KGUpP3RoaXMua2V5SG9va3M6e30pLGQ9Zy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChnLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG0uRXZlbnQoZiksYj1kLmxlbmd0aDt3aGlsZShiLS0pYz1kW2JdLGFbY109ZltjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1mLnNyY0VsZW1lbnR8fHkpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxnLmZpbHRlcj9nLmZpbHRlcihhLGYpOmF9LHByb3BzOlwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczpcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWEud2hpY2gmJihhLndoaWNoPW51bGwhPWIuY2hhckNvZGU/Yi5jaGFyQ29kZTpiLmtleUNvZGUpLGF9fSxtb3VzZUhvb2tzOntwcm9wczpcImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1iLmJ1dHRvbixnPWIuZnJvbUVsZW1lbnQ7cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGQ9YS50YXJnZXQub3duZXJEb2N1bWVudHx8eSxlPWQuZG9jdW1lbnRFbGVtZW50LGM9ZC5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhlJiZlLnNjcm9sbExlZnR8fGMmJmMuc2Nyb2xsTGVmdHx8MCktKGUmJmUuY2xpZW50TGVmdHx8YyYmYy5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZSYmZS5zY3JvbGxUb3B8fGMmJmMuc2Nyb2xsVG9wfHwwKS0oZSYmZS5jbGllbnRUb3B8fGMmJmMuY2xpZW50VG9wfHwwKSksIWEucmVsYXRlZFRhcmdldCYmZyYmKGEucmVsYXRlZFRhcmdldD1nPT09YS50YXJnZXQ/Yi50b0VsZW1lbnQ6ZyksYS53aGljaHx8dm9pZCAwPT09Znx8KGEud2hpY2g9MSZmPzE6MiZmPzM6NCZmPzI6MCksYX19LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1jYSgpJiZ0aGlzLmZvY3VzKXRyeXtyZXR1cm4gdGhpcy5mb2N1cygpLCExfWNhdGNoKGEpe319LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09Y2EoKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKSYmXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG0ubm9kZU5hbWUoYS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bS5leHRlbmQobmV3IG0uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtkP20uZXZlbnQudHJpZ2dlcihlLG51bGwsYik6bS5ldmVudC5kaXNwYXRjaC5jYWxsKGIsZSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbS5yZW1vdmVFdmVudD15LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIm9uXCIrYjthLmRldGFjaEV2ZW50JiYodHlwZW9mIGFbZF09PT1LJiYoYVtkXT1udWxsKSxhLmRldGFjaEV2ZW50KGQsYykpfSxtLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBtLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9hYTpiYSk6dGhpcy50eXBlPWEsYiYmbS5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bS5ub3coKSx2b2lkKHRoaXNbbS5leHBhbmRvXT0hMCkpOm5ldyBtLkV2ZW50KGEsYil9LG0uRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6YmEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6YmEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6YmEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YWEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1hYSxhJiYoYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCksYS5jYW5jZWxCdWJibGU9ITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1hYSxhJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sbS5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIscG9pbnRlcmVudGVyOlwicG9pbnRlcm92ZXJcIixwb2ludGVybGVhdmU6XCJwb2ludGVyb3V0XCJ9LGZ1bmN0aW9uKGEsYil7bS5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4oIWV8fGUhPT1kJiYhbS5jb250YWlucyhkLGUpKSYmKGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksay5zdWJtaXRCdWJibGVzfHwobS5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbS5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKT8hMTp2b2lkIG0uZXZlbnQuYWRkKHRoaXMsXCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXRcIixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxjPW0ubm9kZU5hbWUoYixcImlucHV0XCIpfHxtLm5vZGVOYW1lKGIsXCJidXR0b25cIik/Yi5mb3JtOnZvaWQgMDtjJiYhbS5fZGF0YShjLFwic3VibWl0QnViYmxlc1wiKSYmKG0uZXZlbnQuYWRkKGMsXCJzdWJtaXQuX3N1Ym1pdFwiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdF9idWJibGU9ITB9KSxtLl9kYXRhKGMsXCJzdWJtaXRCdWJibGVzXCIsITApKX0pfSxwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YS5fc3VibWl0X2J1YmJsZSYmKGRlbGV0ZSBhLl9zdWJtaXRfYnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZtLmV2ZW50LnNpbXVsYXRlKFwic3VibWl0XCIsdGhpcy5wYXJlbnROb2RlLGEsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gbS5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKT8hMTp2b2lkIG0uZXZlbnQucmVtb3ZlKHRoaXMsXCIuX3N1Ym1pdFwiKX19KSxrLmNoYW5nZUJ1YmJsZXN8fChtLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBYLnRlc3QodGhpcy5ub2RlTmFtZSk/KChcImNoZWNrYm94XCI9PT10aGlzLnR5cGV8fFwicmFkaW9cIj09PXRoaXMudHlwZSkmJihtLmV2ZW50LmFkZCh0aGlzLFwicHJvcGVydHljaGFuZ2UuX2NoYW5nZVwiLGZ1bmN0aW9uKGEpe1wiY2hlY2tlZFwiPT09YS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZSYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMCl9KSxtLmV2ZW50LmFkZCh0aGlzLFwiY2xpY2suX2NoYW5nZVwiLGZ1bmN0aW9uKGEpe3RoaXMuX2p1c3RfY2hhbmdlZCYmIWEuaXNUcmlnZ2VyJiYodGhpcy5fanVzdF9jaGFuZ2VkPSExKSxtLmV2ZW50LnNpbXVsYXRlKFwiY2hhbmdlXCIsdGhpcyxhLCEwKX0pKSwhMSk6dm9pZCBtLmV2ZW50LmFkZCh0aGlzLFwiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O1gudGVzdChiLm5vZGVOYW1lKSYmIW0uX2RhdGEoYixcImNoYW5nZUJ1YmJsZXNcIikmJihtLmV2ZW50LmFkZChiLFwiY2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihhKXshdGhpcy5wYXJlbnROb2RlfHxhLmlzU2ltdWxhdGVkfHxhLmlzVHJpZ2dlcnx8bS5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMucGFyZW50Tm9kZSxhLCEwKX0pLG0uX2RhdGEoYixcImNoYW5nZUJ1YmJsZXNcIiwhMCkpfSl9LGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDtyZXR1cm4gdGhpcyE9PWJ8fGEuaXNTaW11bGF0ZWR8fGEuaXNUcmlnZ2VyfHxcInJhZGlvXCIhPT1iLnR5cGUmJlwiY2hlY2tib3hcIiE9PWIudHlwZT9hLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG0uZXZlbnQucmVtb3ZlKHRoaXMsXCIuX2NoYW5nZVwiKSwhWC50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGsuZm9jdXNpbkJ1YmJsZXN8fG0uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bS5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG0uZXZlbnQuZml4KGEpLCEwKX07bS5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW0uX2RhdGEoZCxiKTtlfHxkLmFkZEV2ZW50TGlzdGVuZXIoYSxjLCEwKSxtLl9kYXRhKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9bS5fZGF0YShkLGIpLTE7ZT9tLl9kYXRhKGQsYixlKTooZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYywhMCksbS5fcmVtb3ZlRGF0YShkLGIpKX19fSksbS5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihmIGluIGEpdGhpcy5vbihmLGIsYyxhW2ZdLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoXCJzdHJpbmdcIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD1iYTtlbHNlIGlmKCFkKXJldHVybiB0aGlzO3JldHVybiAxPT09ZSYmKGc9ZCxkPWZ1bmN0aW9uKGEpe3JldHVybiBtKCkub2ZmKGEpLGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkLmd1aWQ9Zy5ndWlkfHwoZy5ndWlkPW0uZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5ldmVudC5hZGQodGhpcyxhLGQsYyxiKX0pfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLG0oYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrXCIuXCIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuKGI9PT0hMXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYikmJihjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9YmEpLHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bS5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7ZnVuY3Rpb24gZGEoYSl7dmFyIGI9ZWEuc3BsaXQoXCJ8XCIpLGM9YS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoYy5jcmVhdGVFbGVtZW50KXdoaWxlKGIubGVuZ3RoKWMuY3JlYXRlRWxlbWVudChiLnBvcCgpKTtyZXR1cm4gY312YXIgZWE9XCJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvXCIsZmE9LyBqUXVlcnlcXGQrPVwiKD86bnVsbHxcXGQrKVwiL2csZ2E9bmV3IFJlZ0V4cChcIjwoPzpcIitlYStcIilbXFxcXHMvPl1cIixcImlcIiksaGE9L15cXHMrLyxpYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksamE9LzwoW1xcdzpdKykvLGthPS88dGJvZHkvaSxsYT0vPHwmIz9cXHcrOy8sbWE9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxuYT0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLG9hPS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kscGE9L150cnVlXFwvKC4qKS8scWE9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLHJhPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sbGVnZW5kOlsxLFwiPGZpZWxkc2V0PlwiLFwiPC9maWVsZHNldD5cIl0sYXJlYTpbMSxcIjxtYXA+XCIsXCI8L21hcD5cIl0scGFyYW06WzEsXCI8b2JqZWN0PlwiLFwiPC9vYmplY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OmsuaHRtbFNlcmlhbGl6ZT9bMCxcIlwiLFwiXCJdOlsxLFwiWDxkaXY+XCIsXCI8L2Rpdj5cIl19LHNhPWRhKHkpLHRhPXNhLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7cmEub3B0Z3JvdXA9cmEub3B0aW9uLHJhLnRib2R5PXJhLnRmb290PXJhLmNvbGdyb3VwPXJhLmNhcHRpb249cmEudGhlYWQscmEudGg9cmEudGQ7ZnVuY3Rpb24gdWEoYSxiKXt2YXIgYyxkLGU9MCxmPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09Sz9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTp0eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsIT09Sz9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG0ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bS5tZXJnZShmLHVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZtLm5vZGVOYW1lKGEsYik/bS5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiB2YShhKXtXLnRlc3QoYS50eXBlKSYmKGEuZGVmYXVsdENoZWNrZWQ9YS5jaGVja2VkKX1mdW5jdGlvbiB3YShhLGIpe3JldHVybiBtLm5vZGVOYW1lKGEsXCJ0YWJsZVwiKSYmbS5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsXCJ0clwiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSk6YX1mdW5jdGlvbiB4YShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bS5maW5kLmF0dHIoYSxcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIHlhKGEpe3ZhciBiPXBhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiB6YShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW0uX2RhdGEoYyxcImdsb2JhbEV2YWxcIiwhYnx8bS5fZGF0YShiW2RdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gQWEoYSxiKXtpZigxPT09Yi5ub2RlVHlwZSYmbS5oYXNEYXRhKGEpKXt2YXIgYyxkLGUsZj1tLl9kYXRhKGEpLGc9bS5fZGF0YShiLGYpLGg9Zi5ldmVudHM7aWYoaCl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihjIGluIGgpZm9yKGQ9MCxlPWhbY10ubGVuZ3RoO2U+ZDtkKyspbS5ldmVudC5hZGQoYixjLGhbY11bZF0pfWcuZGF0YSYmKGcuZGF0YT1tLmV4dGVuZCh7fSxnLmRhdGEpKX19ZnVuY3Rpb24gQmEoYSxiKXt2YXIgYyxkLGU7aWYoMT09PWIubm9kZVR5cGUpe2lmKGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCFrLm5vQ2xvbmVFdmVudCYmYlttLmV4cGFuZG9dKXtlPW0uX2RhdGEoYik7Zm9yKGQgaW4gZS5ldmVudHMpbS5yZW1vdmVFdmVudChiLGQsZS5oYW5kbGUpO2IucmVtb3ZlQXR0cmlidXRlKG0uZXhwYW5kbyl9XCJzY3JpcHRcIj09PWMmJmIudGV4dCE9PWEudGV4dD8oeGEoYikudGV4dD1hLnRleHQseWEoYikpOlwib2JqZWN0XCI9PT1jPyhiLnBhcmVudE5vZGUmJihiLm91dGVySFRNTD1hLm91dGVySFRNTCksay5odG1sNUNsb25lJiZhLmlubmVySFRNTCYmIW0udHJpbShiLmlubmVySFRNTCkmJihiLmlubmVySFRNTD1hLmlubmVySFRNTCkpOlwiaW5wdXRcIj09PWMmJlcudGVzdChhLnR5cGUpPyhiLmRlZmF1bHRDaGVja2VkPWIuY2hlY2tlZD1hLmNoZWNrZWQsYi52YWx1ZSE9PWEudmFsdWUmJihiLnZhbHVlPWEudmFsdWUpKTpcIm9wdGlvblwiPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOihcImlucHV0XCI9PT1jfHxcInRleHRhcmVhXCI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19bS5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGk9bS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoay5odG1sNUNsb25lfHxtLmlzWE1MRG9jKGEpfHwhZ2EudGVzdChcIjxcIithLm5vZGVOYW1lK1wiPlwiKT9mPWEuY2xvbmVOb2RlKCEwKToodGEuaW5uZXJIVE1MPWEub3V0ZXJIVE1MLHRhLnJlbW92ZUNoaWxkKGY9dGEuZmlyc3RDaGlsZCkpLCEoay5ub0Nsb25lRXZlbnQmJmsubm9DbG9uZUNoZWNrZWR8fDEhPT1hLm5vZGVUeXBlJiYxMSE9PWEubm9kZVR5cGV8fG0uaXNYTUxEb2MoYSkpKWZvcihkPXVhKGYpLGg9dWEoYSksZz0wO251bGwhPShlPWhbZ10pOysrZylkW2ddJiZCYShlLGRbZ10pO2lmKGIpaWYoYylmb3IoaD1ofHx1YShhKSxkPWR8fHVhKGYpLGc9MDtudWxsIT0oZT1oW2ddKTtnKyspQWEoZSxkW2ddKTtlbHNlIEFhKGEsZik7cmV0dXJuIGQ9dWEoZixcInNjcmlwdFwiKSxkLmxlbmd0aD4wJiZ6YShkLCFpJiZ1YShhLFwic2NyaXB0XCIpKSxkPWg9ZT1udWxsLGZ9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixsLG49YS5sZW5ndGgsbz1kYShiKSxwPVtdLHE9MDtuPnE7cSsrKWlmKGY9YVtxXSxmfHwwPT09ZilpZihcIm9iamVjdFwiPT09bS50eXBlKGYpKW0ubWVyZ2UocCxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKGxhLnRlc3QoZikpe2g9aHx8by5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGk9KGphLmV4ZWMoZil8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGw9cmFbaV18fHJhLl9kZWZhdWx0LGguaW5uZXJIVE1MPWxbMV0rZi5yZXBsYWNlKGlhLFwiPCQxPjwvJDI+XCIpK2xbMl0sZT1sWzBdO3doaWxlKGUtLSloPWgubGFzdENoaWxkO2lmKCFrLmxlYWRpbmdXaGl0ZXNwYWNlJiZoYS50ZXN0KGYpJiZwLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShoYS5leGVjKGYpWzBdKSksIWsudGJvZHkpe2Y9XCJ0YWJsZVwiIT09aXx8a2EudGVzdChmKT9cIjx0YWJsZT5cIiE9PWxbMV18fGthLnRlc3QoZik/MDpoOmguZmlyc3RDaGlsZCxlPWYmJmYuY2hpbGROb2Rlcy5sZW5ndGg7d2hpbGUoZS0tKW0ubm9kZU5hbWUoaj1mLmNoaWxkTm9kZXNbZV0sXCJ0Ym9keVwiKSYmIWouY2hpbGROb2Rlcy5sZW5ndGgmJmYucmVtb3ZlQ2hpbGQoail9bS5tZXJnZShwLGguY2hpbGROb2RlcyksaC50ZXh0Q29udGVudD1cIlwiO3doaWxlKGguZmlyc3RDaGlsZCloLnJlbW92ZUNoaWxkKGguZmlyc3RDaGlsZCk7aD1vLmxhc3RDaGlsZH1lbHNlIHAucHVzaChiLmNyZWF0ZVRleHROb2RlKGYpKTtoJiZvLnJlbW92ZUNoaWxkKGgpLGsuYXBwZW5kQ2hlY2tlZHx8bS5ncmVwKHVhKHAsXCJpbnB1dFwiKSx2YSkscT0wO3doaWxlKGY9cFtxKytdKWlmKCghZHx8LTE9PT1tLmluQXJyYXkoZixkKSkmJihnPW0uY29udGFpbnMoZi5vd25lckRvY3VtZW50LGYpLGg9dWEoby5hcHBlbmRDaGlsZChmKSxcInNjcmlwdFwiKSxnJiZ6YShoKSxjKSl7ZT0wO3doaWxlKGY9aFtlKytdKW9hLnRlc3QoZi50eXBlfHxcIlwiKSYmYy5wdXNoKGYpfXJldHVybiBoPW51bGwsb30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkLGUsZixnLGg9MCxpPW0uZXhwYW5kbyxqPW0uY2FjaGUsbD1rLmRlbGV0ZUV4cGFuZG8sbj1tLmV2ZW50LnNwZWNpYWw7bnVsbCE9KGQ9YVtoXSk7aCsrKWlmKChifHxtLmFjY2VwdERhdGEoZCkpJiYoZj1kW2ldLGc9ZiYmaltmXSkpe2lmKGcuZXZlbnRzKWZvcihlIGluIGcuZXZlbnRzKW5bZV0/bS5ldmVudC5yZW1vdmUoZCxlKTptLnJlbW92ZUV2ZW50KGQsZSxnLmhhbmRsZSk7altmXSYmKGRlbGV0ZSBqW2ZdLGw/ZGVsZXRlIGRbaV06dHlwZW9mIGQucmVtb3ZlQXR0cmlidXRlIT09Sz9kLnJlbW92ZUF0dHJpYnV0ZShpKTpkW2ldPW51bGwsYy5wdXNoKGYpKX19fSksbS5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9tLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHx5KS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj13YSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPXdhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9tLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bS5jbGVhbkRhdGEodWEoYykpLGMucGFyZW50Tm9kZSYmKGImJm0uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZ6YSh1YShjLFwic2NyaXB0XCIpKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKXsxPT09YS5ub2RlVHlwZSYmbS5jbGVhbkRhdGEodWEoYSwhMSkpO3doaWxlKGEuZmlyc3RDaGlsZClhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5vcHRpb25zJiZtLm5vZGVOYW1lKGEsXCJzZWxlY3RcIikmJihhLm9wdGlvbnMubGVuZ3RoPTApfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG0uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hKXJldHVybiAxPT09Yi5ub2RlVHlwZT9iLmlubmVySFRNTC5yZXBsYWNlKGZhLFwiXCIpOnZvaWQgMDtpZighKFwic3RyaW5nXCIhPXR5cGVvZiBhfHxtYS50ZXN0KGEpfHwhay5odG1sU2VyaWFsaXplJiZnYS50ZXN0KGEpfHwhay5sZWFkaW5nV2hpdGVzcGFjZSYmaGEudGVzdChhKXx8cmFbKGphLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpe2E9YS5yZXBsYWNlKGlhLFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO2Q+YztjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKG0uY2xlYW5EYXRhKHVhKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthPXRoaXMucGFyZW50Tm9kZSxtLmNsZWFuRGF0YSh1YSh0aGlzKSksYSYmYS5yZXBsYWNlQ2hpbGQoYix0aGlzKX0pLGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlKGEsITApfSxkb21NYW5pcDpmdW5jdGlvbihhLGIpe2E9ZS5hcHBseShbXSxhKTt2YXIgYyxkLGYsZyxoLGksaj0wLGw9dGhpcy5sZW5ndGgsbj10aGlzLG89bC0xLHA9YVswXSxxPW0uaXNGdW5jdGlvbihwKTtpZihxfHxsPjEmJlwic3RyaW5nXCI9PXR5cGVvZiBwJiYhay5jaGVja0Nsb25lJiZuYS50ZXN0KHApKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9bi5lcShjKTtxJiYoYVswXT1wLmNhbGwodGhpcyxjLGQuaHRtbCgpKSksZC5kb21NYW5pcChhLGIpfSk7aWYobCYmKGk9bS5idWlsZEZyYWdtZW50KGEsdGhpc1swXS5vd25lckRvY3VtZW50LCExLHRoaXMpLGM9aS5maXJzdENoaWxkLDE9PT1pLmNoaWxkTm9kZXMubGVuZ3RoJiYoaT1jKSxjKSl7Zm9yKGc9bS5tYXAodWEoaSxcInNjcmlwdFwiKSx4YSksZj1nLmxlbmd0aDtsPmo7aisrKWQ9aSxqIT09byYmKGQ9bS5jbG9uZShkLCEwLCEwKSxmJiZtLm1lcmdlKGcsdWEoZCxcInNjcmlwdFwiKSkpLGIuY2FsbCh0aGlzW2pdLGQsaik7aWYoZilmb3IoaD1nW2cubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsbS5tYXAoZyx5YSksaj0wO2Y+ajtqKyspZD1nW2pdLG9hLnRlc3QoZC50eXBlfHxcIlwiKSYmIW0uX2RhdGEoZCxcImdsb2JhbEV2YWxcIikmJm0uY29udGFpbnMoaCxkKSYmKGQuc3JjP20uX2V2YWxVcmwmJm0uX2V2YWxVcmwoZC5zcmMpOm0uZ2xvYmFsRXZhbCgoZC50ZXh0fHxkLnRleHRDb250ZW50fHxkLmlubmVySFRNTHx8XCJcIikucmVwbGFjZShxYSxcIlwiKSkpO2k9Yz1udWxsfXJldHVybiB0aGlzfX0pLG0uZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihhLGIpe20uZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9MCxlPVtdLGc9bShhKSxoPWcubGVuZ3RoLTE7aD49ZDtkKyspYz1kPT09aD90aGlzOnRoaXMuY2xvbmUoITApLG0oZ1tkXSlbYl0oYyksZi5hcHBseShlLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgQ2EsRGE9e307ZnVuY3Rpb24gRWEoYixjKXt2YXIgZCxlPW0oYy5jcmVhdGVFbGVtZW50KGIpKS5hcHBlbmRUbyhjLmJvZHkpLGY9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSYmKGQ9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShlWzBdKSk/ZC5kaXNwbGF5Om0uY3NzKGVbMF0sXCJkaXNwbGF5XCIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gRmEoYSl7dmFyIGI9eSxjPURhW2FdO3JldHVybiBjfHwoYz1FYShhLGIpLFwibm9uZVwiIT09YyYmY3x8KENhPShDYXx8bShcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShDYVswXS5jb250ZW50V2luZG93fHxDYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1FYShhLGIpLENhLmRldGFjaCgpKSxEYVthXT1jKSxjfSFmdW5jdGlvbigpe3ZhciBhO2suc2hyaW5rV3JhcEJsb2Nrcz1mdW5jdGlvbigpe2lmKG51bGwhPWEpcmV0dXJuIGE7YT0hMTt2YXIgYixjLGQ7cmV0dXJuIGM9eS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0sYyYmYy5zdHlsZT8oYj15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZD15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZC5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHhcIixjLmFwcGVuZENoaWxkKGQpLmFwcGVuZENoaWxkKGIpLHR5cGVvZiBiLnN0eWxlLnpvb20hPT1LJiYoYi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MVwiLGIuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5zdHlsZS53aWR0aD1cIjVweFwiLGE9MyE9PWIub2Zmc2V0V2lkdGgpLGMucmVtb3ZlQ2hpbGQoZCksYSk6dm9pZCAwfX0oKTt2YXIgR2E9L15tYXJnaW4vLEhhPW5ldyBSZWdFeHAoXCJeKFwiK1MrXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksSWEsSmEsS2E9L14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvO2EuZ2V0Q29tcHV0ZWRTdHlsZT8oSWE9ZnVuY3Rpb24oYil7cmV0dXJuIGIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXI/Yi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYixudWxsKTphLmdldENvbXB1dGVkU3R5bGUoYixudWxsKX0sSmE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxJYShhKSxnPWM/Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdOnZvaWQgMCxjJiYoXCJcIiE9PWd8fG0uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1tLnN0eWxlKGEsYikpLEhhLnRlc3QoZykmJkdhLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMD09PWc/ZzpnK1wiXCJ9KTp5LmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihJYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LEphPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8SWEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLEhhLnRlc3QoZykmJiFLYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD1cImZvbnRTaXplXCI9PT1iP1wiMWVtXCI6ZyxnPWgucGl4ZWxMZWZ0K1wicHhcIixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZytcIlwifHxcImF1dG9cIn0pO2Z1bmN0aW9uIExhKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3ZhciBjPWEoKTtpZihudWxsIT1jKXJldHVybiBjP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0hZnVuY3Rpb24oKXt2YXIgYixjLGQsZSxmLGcsaDtpZihiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxiLmlubmVySFRNTD1cIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPlwiLGQ9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIilbMF0sYz1kJiZkLnN0eWxlKXtjLmNzc1RleHQ9XCJmbG9hdDpsZWZ0O29wYWNpdHk6LjVcIixrLm9wYWNpdHk9XCIwLjVcIj09PWMub3BhY2l0eSxrLmNzc0Zsb2F0PSEhYy5jc3NGbG9hdCxiLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiY29udGVudC1ib3hcIixiLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJcIixrLmNsZWFyQ2xvbmVTdHlsZT1cImNvbnRlbnQtYm94XCI9PT1iLnN0eWxlLmJhY2tncm91bmRDbGlwLGsuYm94U2l6aW5nPVwiXCI9PT1jLmJveFNpemluZ3x8XCJcIj09PWMuTW96Qm94U2l6aW5nfHxcIlwiPT09Yy5XZWJraXRCb3hTaXppbmcsbS5leHRlbmQoayx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWcmJmkoKSxnfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1mJiZpKCksZn0scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1lJiZpKCksZX0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1oJiZpKCksaH19KTtmdW5jdGlvbiBpKCl7dmFyIGIsYyxkLGk7Yz15LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxjJiZjLnN0eWxlJiYoYj15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZD15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZC5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHhcIixjLmFwcGVuZENoaWxkKGQpLmFwcGVuZENoaWxkKGIpLGIuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZT1mPSExLGg9ITAsYS5nZXRDb21wdXRlZFN0eWxlJiYoZT1cIjElXCIhPT0oYS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt9KS50b3AsZj1cIjRweFwiPT09KGEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfHx7d2lkdGg6XCI0cHhcIn0pLndpZHRoLGk9Yi5hcHBlbmRDaGlsZCh5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGkuc3R5bGUuY3NzVGV4dD1iLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIixpLnN0eWxlLm1hcmdpblJpZ2h0PWkuc3R5bGUud2lkdGg9XCIwXCIsYi5zdHlsZS53aWR0aD1cIjFweFwiLGg9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkubWFyZ2luUmlnaHQpLGIucmVtb3ZlQ2hpbGQoaSkpLGIuaW5uZXJIVE1MPVwiPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPlwiLGk9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpLGlbMF0uc3R5bGUuY3NzVGV4dD1cIm1hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MDtkaXNwbGF5Om5vbmVcIixnPTA9PT1pWzBdLm9mZnNldEhlaWdodCxnJiYoaVswXS5zdHlsZS5kaXNwbGF5PVwiXCIsaVsxXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGc9MD09PWlbMF0ub2Zmc2V0SGVpZ2h0KSxjLnJlbW92ZUNoaWxkKGQpKX19fSgpLG0uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIE1hPS9hbHBoYVxcKFteKV0qXFwpL2ksTmE9L29wYWNpdHlcXHMqPVxccyooW14pXSopLyxPYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sUGE9bmV3IFJlZ0V4cChcIl4oXCIrUytcIikoLiopJFwiLFwiaVwiKSxRYT1uZXcgUmVnRXhwKFwiXihbKy1dKT0oXCIrUytcIilcIixcImlcIiksUmE9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LFNhPXtsZXR0ZXJTcGFjaW5nOlwiMFwiLGZvbnRXZWlnaHQ6XCI0MDBcIn0sVGE9W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdO2Z1bmN0aW9uIFVhKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1UYS5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9VGFbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gVmEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bS5fZGF0YShkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmVShkKSYmKGZbZ109bS5fZGF0YShkLFwib2xkZGlzcGxheVwiLEZhKGQubm9kZU5hbWUpKSkpOihlPVUoZCksKGMmJlwibm9uZVwiIT09Y3x8IWUpJiZtLl9kYXRhKGQsXCJvbGRkaXNwbGF5XCIsZT9jOm0uY3NzKGQsXCJkaXNwbGF5XCIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJlwibm9uZVwiIT09ZC5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBhfWZ1bmN0aW9uIFdhKGEsYixjKXt2YXIgZD1QYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gWGEoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bS5jc3MoYSxjK1RbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW0uY3NzKGEsXCJwYWRkaW5nXCIrVFtmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1tLmNzcyhhLFwiYm9yZGVyXCIrVFtmXStcIldpZHRoXCIsITAsZSkpKTooZys9bS5jc3MoYSxcInBhZGRpbmdcIitUW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW0uY3NzKGEsXCJib3JkZXJcIitUW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIFlhKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPUlhKGEpLGc9ay5ib3hTaXppbmcmJlwiYm9yZGVyLWJveFwiPT09bS5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9SmEoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSxIYS50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGsuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStYYShhLGIsY3x8KGc/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksZCxmKStcInB4XCJ9bS5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1KYShhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6ay5jc3NGbG9hdD9cImNzc0Zsb2F0XCI6XCJzdHlsZUZsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bS5jYW1lbENhc2UoYiksaT1hLnN0eWxlO2lmKGI9bS5jc3NQcm9wc1toXXx8KG0uY3NzUHJvcHNbaF09VWEoaSxoKSksZz1tLmNzc0hvb2tzW2JdfHxtLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl07aWYoZj10eXBlb2YgYyxcInN0cmluZ1wiPT09ZiYmKGU9UWEuZXhlYyhjKSkmJihjPShlWzFdKzEpKmVbMl0rcGFyc2VGbG9hdChtLmNzcyhhLGIpKSxmPVwibnVtYmVyXCIpLG51bGwhPWMmJmM9PT1jJiYoXCJudW1iZXJcIiE9PWZ8fG0uY3NzTnVtYmVyW2hdfHwoYys9XCJweFwiKSxrLmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PWN8fDAhPT1iLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwoaVtiXT1cImluaGVyaXRcIiksIShnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKSkpKXRyeXtpW2JdPWN9Y2F0Y2goail7fX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1tLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1tLmNzc1Byb3BzW2hdfHwobS5jc3NQcm9wc1toXT1VYShhLnN0eWxlLGgpKSxnPW0uY3NzSG9va3NbYl18fG0uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihmPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWYmJihmPUphKGEsYixkKSksXCJub3JtYWxcIj09PWYmJmIgaW4gU2EmJihmPVNhW2JdKSxcIlwiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8bS5pc051bWVyaWMoZSk/ZXx8MDpmKTpmfX0pLG0uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz9PYS50ZXN0KG0uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bS5zd2FwKGEsUmEsZnVuY3Rpb24oKXtyZXR1cm4gWWEoYSxiLGQpfSk6WWEoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZJYShhKTtyZXR1cm4gV2EoYSxjLGQ/WGEoYSxiLGQsay5ib3hTaXppbmcmJlwiYm9yZGVyLWJveFwiPT09bS5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxrLm9wYWNpdHl8fChtLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiBOYS50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHxcIlwiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpK1wiXCI6Yj9cIjFcIjpcIlwifSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnN0eWxlLGQ9YS5jdXJyZW50U3R5bGUsZT1tLmlzTnVtZXJpYyhiKT9cImFscGhhKG9wYWNpdHk9XCIrMTAwKmIrXCIpXCI6XCJcIixmPWQmJmQuZmlsdGVyfHxjLmZpbHRlcnx8XCJcIjtjLnpvb209MSwoYj49MXx8XCJcIj09PWIpJiZcIlwiPT09bS50cmltKGYucmVwbGFjZShNYSxcIlwiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoXCJmaWx0ZXJcIiksXCJcIj09PWJ8fGQmJiFkLmZpbHRlcil8fChjLmZpbHRlcj1NYS50ZXN0KGYpP2YucmVwbGFjZShNYSxlKTpmK1wiIFwiK2UpfX0pLG0uY3NzSG9va3MubWFyZ2luUmlnaHQ9TGEoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bS5zd2FwKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0sSmEsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbS5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXttLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1RbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sR2EudGVzdChhKXx8KG0uY3NzSG9va3NbYStiXS5zZXQ9V2EpfSksbS5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBWKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobS5pc0FycmF5KGIpKXtmb3IoZD1JYShhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1tLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bS5zdHlsZShhLGIsYyk6bS5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gVmEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gVmEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtVKHRoaXMpP20odGhpcykuc2hvdygpOm0odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gWmEoYSxiLGMsZCxlKXtcclxucmV0dXJuIG5ldyBaYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW0uVHdlZW49WmEsWmEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpaYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChtLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPVphLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpaYS5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1aYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bS5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOlphLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LFphLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1aYS5wcm90b3R5cGUsWmEucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1tLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bS5meC5zdGVwW2EucHJvcF0/bS5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW20uY3NzUHJvcHNbYS5wcm9wXV18fG0uY3NzSG9va3NbYS5wcm9wXSk/bS5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sWmEucHJvcEhvb2tzLnNjcm9sbFRvcD1aYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxtLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxtLmZ4PVphLnByb3RvdHlwZS5pbml0LG0uZnguc3RlcD17fTt2YXIgJGEsX2EsYWI9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGJiPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1MrXCIpKFthLXolXSopJFwiLFwiaVwiKSxjYj0vcXVldWVIb29rcyQvLGRiPVtpYl0sZWI9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1iYi5leGVjKGIpLGY9ZSYmZVszXXx8KG0uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShtLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZiYi5leGVjKG0uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxtLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBmYigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGE9dm9pZCAwfSksJGE9bS5ub3coKX1mdW5jdGlvbiBnYihhLGIpe3ZhciBjLGQ9e2hlaWdodDphfSxlPTA7Zm9yKGI9Yj8xOjA7ND5lO2UrPTItYiljPVRbZV0sZFtcIm1hcmdpblwiK2NdPWRbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGQub3BhY2l0eT1kLndpZHRoPWEpLGR9ZnVuY3Rpb24gaGIoYSxiLGMpe2Zvcih2YXIgZCxlPShlYltiXXx8W10pLmNvbmNhdChlYltcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIGliKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixsLG49dGhpcyxvPXt9LHA9YS5zdHlsZSxxPWEubm9kZVR5cGUmJlUoYSkscj1tLl9kYXRhKGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9bS5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbi5hbHdheXMoZnVuY3Rpb24oKXtuLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxtLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSxqPW0uY3NzKGEsXCJkaXNwbGF5XCIpLGw9XCJub25lXCI9PT1qP20uX2RhdGEoYSxcIm9sZGRpc3BsYXlcIil8fEZhKGEubm9kZU5hbWUpOmosXCJpbmxpbmVcIj09PWwmJlwibm9uZVwiPT09bS5jc3MoYSxcImZsb2F0XCIpJiYoay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiZcImlubGluZVwiIT09RmEoYS5ub2RlTmFtZSk/cC56b29tPTE6cC5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz1cImhpZGRlblwiLGsuc2hyaW5rV3JhcEJsb2NrcygpfHxuLmFsd2F5cyhmdW5jdGlvbigpe3Aub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxwLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLHAub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sYWIuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHE/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFyfHx2b2lkIDA9PT1yW2RdKWNvbnRpbnVlO3E9ITB9b1tkXT1yJiZyW2RdfHxtLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihtLmlzRW1wdHlPYmplY3QobykpXCJpbmxpbmVcIj09PShcIm5vbmVcIj09PWo/RmEoYS5ub2RlTmFtZSk6aikmJihwLmRpc3BsYXk9aik7ZWxzZXtyP1wiaGlkZGVuXCJpbiByJiYocT1yLmhpZGRlbik6cj1tLl9kYXRhKGEsXCJmeHNob3dcIix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP20oYSkuc2hvdygpOm4uZG9uZShmdW5jdGlvbigpe20oYSkuaGlkZSgpfSksbi5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bS5fcmVtb3ZlRGF0YShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG8pbS5zdHlsZShhLGIsb1tiXSl9KTtmb3IoZCBpbiBvKWc9aGIocT9yW2RdOjAsZCxuKSxkIGluIHJ8fChyW2RdPWcuc3RhcnQscSYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gamIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1tLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG0uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bS5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIGtiKGEsYixjKXt2YXIgZCxlLGY9MCxnPWRiLmxlbmd0aCxoPW0uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPSRhfHxmYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczptLmV4dGVuZCh7fSxiKSxvcHRzOm0uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6JGF8fGZiKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1tLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihqYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9ZGJbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBtLm1hcChrLGhiLGopLG0uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG0uZngudGltZXIobS5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bS5BbmltYXRpb249bS5leHRlbmQoa2Ise3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXttLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLGViW2NdPWViW2NdfHxbXSxlYltjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP2RiLnVuc2hpZnQoYSk6ZGIucHVzaChhKX19KSxtLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9tLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG0uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbS5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1tLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBtLmZ4LnNwZWVkcz9tLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTptLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXttLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm0uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxtLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihVKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW0uaXNFbXB0eU9iamVjdChhKSxmPW0uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1rYih0aGlzLG0uZXh0ZW5kKHt9LGEpLGYpOyhlfHxtLl9kYXRhKHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1tLnRpbWVycyxnPW0uX2RhdGEodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmY2IudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZtLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPW0uX2RhdGEodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1tLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbS5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxtLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bS5mbltiXTttLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShnYihiLCEwKSxhLGQsZSl9fSksbS5lYWNoKHtzbGlkZURvd246Z2IoXCJzaG93XCIpLHNsaWRlVXA6Z2IoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOmdiKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXttLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG0udGltZXJzPVtdLG0uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9bS50aW1lcnMsYz0wO2ZvcigkYT1tLm5vdygpO2M8Yi5sZW5ndGg7YysrKWE9YltjXSxhKCl8fGJbY10hPT1hfHxiLnNwbGljZShjLS0sMSk7Yi5sZW5ndGh8fG0uZnguc3RvcCgpLCRhPXZvaWQgMH0sbS5meC50aW1lcj1mdW5jdGlvbihhKXttLnRpbWVycy5wdXNoKGEpLGEoKT9tLmZ4LnN0YXJ0KCk6bS50aW1lcnMucG9wKCl9LG0uZnguaW50ZXJ2YWw9MTMsbS5meC5zdGFydD1mdW5jdGlvbigpe19hfHwoX2E9c2V0SW50ZXJ2YWwobS5meC50aWNrLG0uZnguaW50ZXJ2YWwpKX0sbS5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChfYSksX2E9bnVsbH0sbS5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbS5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW0uZng/bS5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU7Yj15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYi5zZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIixcInRcIiksYi5pbm5lckhUTUw9XCIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz5cIixkPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWzBdLGM9eS5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGU9Yy5hcHBlbmRDaGlsZCh5LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLGE9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdLGQuc3R5bGUuY3NzVGV4dD1cInRvcDoxcHhcIixrLmdldFNldEF0dHJpYnV0ZT1cInRcIiE9PWIuY2xhc3NOYW1lLGsuc3R5bGU9L3RvcC8udGVzdChkLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKSxrLmhyZWZOb3JtYWxpemVkPVwiL2FcIj09PWQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSxrLmNoZWNrT249ISFhLnZhbHVlLGsub3B0U2VsZWN0ZWQ9ZS5zZWxlY3RlZCxrLmVuY3R5cGU9ISF5LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLmVuY3R5cGUsYy5kaXNhYmxlZD0hMCxrLm9wdERpc2FibGVkPSFlLmRpc2FibGVkLGE9eS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLGsuaW5wdXQ9XCJcIj09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksYS52YWx1ZT1cInRcIixhLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGsucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIGxiPS9cXHIvZzttLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bS5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG0odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGU/ZSs9XCJcIjptLmlzQXJyYXkoZSkmJihlPW0ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1tLnZhbEhvb2tzW3RoaXMudHlwZV18fG0udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bS52YWxIb29rc1tlLnR5cGVdfHxtLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShsYixcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLG0uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bS5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6bS50cmltKG0udGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZtLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1tKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bS5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG0uaW5BcnJheShtLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+PTApdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxtLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bS52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uaXNBcnJheShiKT9hLmNoZWNrZWQ9bS5pbkFycmF5KG0oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobS52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KTt2YXIgbWIsbmIsb2I9bS5leHByLmF0dHJIYW5kbGUscGI9L14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSxxYj1rLmdldFNldEF0dHJpYnV0ZSxyYj1rLmlucHV0O20uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFYodGhpcyxtLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbS5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKGEmJjMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIHR5cGVvZiBhLmdldEF0dHJpYnV0ZT09PUs/bS5wcm9wKGEsYixjKTooMT09PWYmJm0uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxkPW0uYXR0ckhvb2tzW2JdfHwobS5leHByLm1hdGNoLmJvb2wudGVzdChiKT9uYjptYikpLHZvaWQgMD09PWM/ZCYmXCJnZXRcImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW0uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmXCJzZXRcImluIGQmJnZvaWQgMCE9PShlPWQuc2V0KGEsYyxiKSk/ZTooYS5zZXRBdHRyaWJ1dGUoYixjK1wiXCIpLGMpOnZvaWQgbS5yZW1vdmVBdHRyKGEsYikpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bS5wcm9wRml4W2NdfHxjLG0uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/cmImJnFifHwhcGIudGVzdChjKT9hW2RdPSExOmFbbS5jYW1lbENhc2UoXCJkZWZhdWx0LVwiK2MpXT1hW2RdPSExOm0uYXR0cihhLGMsXCJcIiksYS5yZW1vdmVBdHRyaWJ1dGUocWI/YzpkKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT1iJiZtLm5vZGVOYW1lKGEsXCJpbnB1dFwiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxuYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP20ucmVtb3ZlQXR0cihhLGMpOnJiJiZxYnx8IXBiLnRlc3QoYyk/YS5zZXRBdHRyaWJ1dGUoIXFiJiZtLnByb3BGaXhbY118fGMsYyk6YVttLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrYyldPWFbY109ITAsY319LG0uZWFjaChtLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz1vYltiXXx8bS5maW5kLmF0dHI7b2JbYl09cmImJnFifHwhcGIudGVzdChiKT9mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9b2JbYl0sb2JbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLG9iW2JdPWYpLGV9OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YVttLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHJiJiZxYnx8KG0uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLm5vZGVOYW1lKGEsXCJpbnB1dFwiKT92b2lkKGEuZGVmYXVsdFZhbHVlPWIpOm1iJiZtYi5zZXQoYSxiLGMpfX0pLHFifHwobWI9e3NldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGMpO3JldHVybiBkfHxhLnNldEF0dHJpYnV0ZU5vZGUoZD1hLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKGMpKSxkLnZhbHVlPWIrPVwiXCIsXCJ2YWx1ZVwiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sb2IuaWQ9b2IubmFtZT1vYi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZcIlwiIT09ZC52YWx1ZT9kLnZhbHVlOm51bGx9LG0udmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZU5vZGUoYik7cmV0dXJuIGMmJmMuc3BlY2lmaWVkP2MudmFsdWU6dm9pZCAwfSxzZXQ6bWIuc2V0fSxtLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e3NldDpmdW5jdGlvbihhLGIsYyl7bWIuc2V0KGEsXCJcIj09PWI/ITE6YixjKX19LG0uZWFjaChbXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGEsYil7bS5hdHRySG9va3NbYl09e3NldDpmdW5jdGlvbihhLGMpe3JldHVyblwiXCI9PT1jPyhhLnNldEF0dHJpYnV0ZShiLFwiYXV0b1wiKSxjKTp2b2lkIDB9fX0pKSxrLnN0eWxlfHwobS5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YitcIlwifX0pO3ZhciBzYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSx0Yj0vXig/OmF8YXJlYSkkL2k7bS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gYT1tLnByb3BGaXhbYV18fGEsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3RoaXNbYV09dm9pZCAwLGRlbGV0ZSB0aGlzW2FdfWNhdGNoKGIpe319KX19KSxtLmV4dGVuZCh7cHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbS5pc1hNTERvYyhhKSxmJiYoYj1tLnByb3BGaXhbYl18fGIsZT1tLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW0uZmluZC5hdHRyKGEsXCJ0YWJpbmRleFwiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTpzYi50ZXN0KGEubm9kZU5hbWUpfHx0Yi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fX0pLGsuaHJlZk5vcm1hbGl6ZWR8fG0uZWFjaChbXCJocmVmXCIsXCJzcmNcIl0sZnVuY3Rpb24oYSxiKXttLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxrLm9wdFNlbGVjdGVkfHwobS5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSxtLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7bS5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGsuZW5jdHlwZXx8KG0ucHJvcEZpeC5lbmN0eXBlPVwiZW5jb2RpbmdcIik7dmFyIHViPS9bXFx0XFxyXFxuXFxmXS9nO20uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9dGhpcy5sZW5ndGgsaj1cInN0cmluZ1wiPT10eXBlb2YgYSYmYTtpZihtLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXttKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGopZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtpPmg7aCsrKWlmKGM9dGhpc1toXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKHViLFwiIFwiKTpcIiBcIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoXCIgXCIrZStcIiBcIik8MCYmKGQrPWUrXCIgXCIpO2c9bS50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9dGhpcy5sZW5ndGgsaj0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGEmJmE7aWYobS5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bSh0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihqKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aT5oO2grKylpZihjPXRoaXNbaF0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZSh1YixcIiBcIik6XCJcIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoXCIgXCIrZStcIiBcIik+PTApZD1kLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIik7Zz1hP20udHJpbShkKTpcIlwiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXttKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09PWMpe3ZhciBiLGQ9MCxlPW0odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1LfHxcImJvb2xlYW5cIj09PWMpJiYodGhpcy5jbGFzc05hbWUmJm0uX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT9cIlwiOm0uX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZSh1YixcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KSxtLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bS5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbS5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSk7dmFyIHZiPW0ubm93KCksd2I9L1xcPy8seGI9LygsKXwoXFxbfHspfCh9fF0pfFwiKD86W15cIlxcXFxcXHJcXG5dfFxcXFxbXCJcXFxcXFwvYmZucnRdfFxcXFx1W1xcZGEtZkEtRl17NH0pKlwiXFxzKjo/fHRydWV8ZmFsc2V8bnVsbHwtPyg/ITBcXGQpXFxkKyg/OlxcLlxcZCt8KSg/OltlRV1bKy1dP1xcZCt8KS9nO20ucGFyc2VKU09OPWZ1bmN0aW9uKGIpe2lmKGEuSlNPTiYmYS5KU09OLnBhcnNlKXJldHVybiBhLkpTT04ucGFyc2UoYitcIlwiKTt2YXIgYyxkPW51bGwsZT1tLnRyaW0oYitcIlwiKTtyZXR1cm4gZSYmIW0udHJpbShlLnJlcGxhY2UoeGIsZnVuY3Rpb24oYSxiLGUsZil7cmV0dXJuIGMmJmImJihkPTApLDA9PT1kP2E6KGM9ZXx8YixkKz0hZi0hZSxcIlwiKX0pKT9GdW5jdGlvbihcInJldHVybiBcIitlKSgpOm0uZXJyb3IoXCJJbnZhbGlkIEpTT046IFwiK2IpfSxtLnBhcnNlWE1MPWZ1bmN0aW9uKGIpe3ZhciBjLGQ7aWYoIWJ8fFwic3RyaW5nXCIhPXR5cGVvZiBiKXJldHVybiBudWxsO3RyeXthLkRPTVBhcnNlcj8oZD1uZXcgRE9NUGFyc2VyLGM9ZC5wYXJzZUZyb21TdHJpbmcoYixcInRleHQveG1sXCIpKTooYz1uZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIiksYy5hc3luYz1cImZhbHNlXCIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxtLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2IpLGN9O3ZhciB5Yix6YixBYj0vIy4qJC8sQmI9LyhbPyZdKV89W14mXSovLENiPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKVxccj8kL2dtLERiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEViPS9eKD86R0VUfEhFQUQpJC8sRmI9L15cXC9cXC8vLEdiPS9eKFtcXHcuKy1dKzopKD86XFwvXFwvKD86W15cXC8/I10qQHwpKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLEhiPXt9LEliPXt9LEpiPVwiKi9cIi5jb25jYXQoXCIqXCIpO3RyeXt6Yj1sb2NhdGlvbi5ocmVmfWNhdGNoKEtiKXt6Yj15LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHpiLmhyZWY9XCJcIix6Yj16Yi5ocmVmfXliPUdiLmV4ZWMoemIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIExiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobS5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8XCIqXCIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiBNYihhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1JYjtmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLG0uZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBqfHxmfHxlW2pdP2Y/IShpPWopOnZvaWQgMDooYi5kYXRhVHlwZXMudW5zaGlmdChqKSxnKGopLCExKX0pLGl9cmV0dXJuIGcoYi5kYXRhVHlwZXNbMF0pfHwhZVtcIipcIl0mJmcoXCIqXCIpfWZ1bmN0aW9uIE5iKGEsYil7dmFyIGMsZCxlPW0uYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoZCBpbiBiKXZvaWQgMCE9PWJbZF0mJigoZVtkXT9hOmN8fChjPXt9KSlbZF09YltkXSk7cmV0dXJuIGMmJm0uZXh0ZW5kKCEwLGEsYyksYX1mdW5jdGlvbiBPYihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT1pWzBdKWkuc2hpZnQoKSx2b2lkIDA9PT1lJiYoZT1hLm1pbWVUeXBlfHxiLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnK1wiIFwiK2lbMF1dKXtmPWc7YnJlYWt9ZHx8KGQ9Zyl9Zj1mfHxkfXJldHVybiBmPyhmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl0pOnZvaWQgMH1mdW5jdGlvbiBQYihhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKFwiKlwiPT09ZilmPWk7ZWxzZSBpZihcIipcIiE9PWkmJmkhPT1mKXtpZihnPWpbaStcIiBcIitmXXx8altcIiogXCIrZl0sIWcpZm9yKGUgaW4gailpZihoPWUuc3BsaXQoXCIgXCIpLGhbMV09PT1mJiYoZz1qW2krXCIgXCIraFswXV18fGpbXCIqIFwiK2hbMF1dKSl7Zz09PSEwP2c9altlXTpqW2VdIT09ITAmJihmPWhbMF0say51bnNoaWZ0KGhbMV0pKTticmVha31pZihnIT09ITApaWYoZyYmYVtcInRocm93c1wiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6Zz9sOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK2krXCIgdG8gXCIrZn19fXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOmJ9fW0uZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDp6Yix0eXBlOlwiR0VUXCIsaXNMb2NhbDpEYi50ZXN0KHliWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjpKYix0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCIsanNvbjpcInJlc3BvbnNlSlNPTlwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6bS5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOm0ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP05iKE5iKGEsbS5hamF4U2V0dGluZ3MpLGIpOk5iKG0uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOkxiKEhiKSxhamF4VHJhbnNwb3J0OkxiKEliKSxhamF4OmZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGI9Ynx8e307dmFyIGMsZCxlLGYsZyxoLGksaixrPW0uYWpheFNldHVwKHt9LGIpLGw9ay5jb250ZXh0fHxrLG49ay5jb250ZXh0JiYobC5ub2RlVHlwZXx8bC5qcXVlcnkpP20obCk6bS5ldmVudCxvPW0uRGVmZXJyZWQoKSxwPW0uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikscT1rLnN0YXR1c0NvZGV8fHt9LHI9e30scz17fSx0PTAsdT1cImNhbmNlbGVkXCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighail7aj17fTt3aGlsZShiPUNiLmV4ZWMoZikpaltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1qW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZjpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gaSYmaS5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fHpiKStcIlwiKS5yZXBsYWNlKEFiLFwiXCIpLnJlcGxhY2UoRmIseWJbMV0rXCIvL1wiKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1tLnRyaW0oay5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtcIlwiXSxudWxsPT1rLmNyb3NzRG9tYWluJiYoYz1HYi5leGVjKGsudXJsLnRvTG93ZXJDYXNlKCkpLGsuY3Jvc3NEb21haW49ISghY3x8Y1sxXT09PXliWzFdJiZjWzJdPT09eWJbMl0mJihjWzNdfHwoXCJodHRwOlwiPT09Y1sxXT9cIjgwXCI6XCI0NDNcIikpPT09KHliWzNdfHwoXCJodHRwOlwiPT09eWJbMV0/XCI4MFwiOlwiNDQzXCIpKSkpLGsuZGF0YSYmay5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1tLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSksTWIoSGIsayxiLHYpLDI9PT10KXJldHVybiB2O2g9bS5ldmVudCYmay5nbG9iYWwsaCYmMD09PW0uYWN0aXZlKysmJm0uZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxrLnR5cGU9ay50eXBlLnRvVXBwZXJDYXNlKCksay5oYXNDb250ZW50PSFFYi50ZXN0KGsudHlwZSksZT1rLnVybCxrLmhhc0NvbnRlbnR8fChrLmRhdGEmJihlPWsudXJsKz0od2IudGVzdChlKT9cIiZcIjpcIj9cIikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPUJiLnRlc3QoZSk/ZS5yZXBsYWNlKEJiLFwiJDFfPVwiK3ZiKyspOmUrKHdiLnRlc3QoZSk/XCImXCI6XCI/XCIpK1wiXz1cIit2YisrKSksay5pZk1vZGlmaWVkJiYobS5sYXN0TW9kaWZpZWRbZV0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsbS5sYXN0TW9kaWZpZWRbZV0pLG0uZXRhZ1tlXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLG0uZXRhZ1tlXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsay5jb250ZW50VHlwZSksdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsay5kYXRhVHlwZXNbMF0mJmsuYWNjZXB0c1trLmRhdGFUeXBlc1swXV0/ay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1rLmRhdGFUeXBlc1swXT9cIiwgXCIrSmIrXCI7IHE9MC4wMVwiOlwiXCIpOmsuYWNjZXB0c1tcIipcIl0pO2ZvcihkIGluIGsuaGVhZGVycyl2LnNldFJlcXVlc3RIZWFkZXIoZCxrLmhlYWRlcnNbZF0pO2lmKGsuYmVmb3JlU2VuZCYmKGsuYmVmb3JlU2VuZC5jYWxsKGwsdixrKT09PSExfHwyPT09dCkpcmV0dXJuIHYuYWJvcnQoKTt1PVwiYWJvcnRcIjtmb3IoZCBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl2W2RdKGtbZF0pO2lmKGk9TWIoSWIsayxiLHYpKXt2LnJlYWR5U3RhdGU9MSxoJiZuLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoXCJ0aW1lb3V0XCIpfSxrLnRpbWVvdXQpKTt0cnl7dD0xLGkuc2VuZChyLHgpfWNhdGNoKHcpe2lmKCEoMj50KSl0aHJvdyB3O3goLTEsdyl9fWVsc2UgeCgtMSxcIk5vIFRyYW5zcG9ydFwiKTtmdW5jdGlvbiB4KGEsYixjLGQpe3ZhciBqLHIscyx1LHcseD1iOzIhPT10JiYodD0yLGcmJmNsZWFyVGltZW91dChnKSxpPXZvaWQgMCxmPWR8fFwiXCIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGMmJih1PU9iKGssdixjKSksdT1QYihrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLHcmJihtLmxhc3RNb2RpZmllZFtlXT13KSx3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLHcmJihtLmV0YWdbZV09dykpLDIwND09PWF8fFwiSEVBRFwiPT09ay50eXBlP3g9XCJub2NvbnRlbnRcIjozMDQ9PT1hP3g9XCJub3Rtb2RpZmllZFwiOih4PXUuc3RhdGUscj11LmRhdGEscz11LmVycm9yLGo9IXMpKToocz14LChhfHwheCkmJih4PVwiZXJyb3JcIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpK1wiXCIsaj9vLnJlc29sdmVXaXRoKGwsW3IseCx2XSk6by5yZWplY3RXaXRoKGwsW3YseCxzXSksdi5zdGF0dXNDb2RlKHEpLHE9dm9pZCAwLGgmJm4udHJpZ2dlcihqP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGgmJihuLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbdixrXSksLS1tLmFjdGl2ZXx8bS5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4gdn0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0uZ2V0KGEsYixjLFwianNvblwiKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZ2V0KGEsdm9pZCAwLGIsXCJzY3JpcHRcIil9fSksbS5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihhLGIpe21bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG0uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG0uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG0uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uYWpheCh7dXJsOmEsdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwic2NyaXB0XCIsYXN5bmM6ITEsZ2xvYmFsOiExLFwidGhyb3dzXCI6ITB9KX0sbS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7aWYobS5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bSh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPW0oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0Q2hpbGQmJjE9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUpYT1hLmZpcnN0Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXttKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bSh0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1tLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXttKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bS5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8bSh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbS5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MHx8IWsucmVsaWFibGVIaWRkZW5PZmZzZXRzKCkmJlwibm9uZVwiPT09KGEuc3R5bGUmJmEuc3R5bGUuZGlzcGxheXx8bS5jc3MoYSxcImRpc3BsYXlcIikpfSxtLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFtLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciBRYj0vJTIwL2csUmI9L1xcW1xcXSQvLFNiPS9cXHI/XFxuL2csVGI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLFViPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBWYihhLGIsYyxkKXt2YXIgZTtpZihtLmlzQXJyYXkoYikpbS5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxSYi50ZXN0KGEpP2QoYSxlKTpWYihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW0udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKVZiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bS5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bS5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1tLmFqYXhTZXR0aW5ncyYmbS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG0uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFtLmlzUGxhaW5PYmplY3QoYSkpbS5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlWYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKFFiLFwiK1wiKX0sbS5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBtLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bS5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9tLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFtKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZVYi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhVGIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVcudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1tKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bS5pc0FycmF5KGMpP20ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShTYixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKFNiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG0uYWpheFNldHRpbmdzLnhocj12b2lkIDAhPT1hLkFjdGl2ZVhPYmplY3Q/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiYvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kudGVzdCh0aGlzLnR5cGUpJiZaYigpfHwkYigpfTpaYjt2YXIgV2I9MCxYYj17fSxZYj1tLmFqYXhTZXR0aW5ncy54aHIoKTthLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBYYilYYlthXSh2b2lkIDAsITApfSksay5jb3JzPSEhWWImJlwid2l0aENyZWRlbnRpYWxzXCJpbiBZYixZYj1rLmFqYXg9ISFZYixZYiYmbS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe2lmKCFhLmNyb3NzRG9tYWlufHxrLmNvcnMpe3ZhciBiO3JldHVybntzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytXYjtpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoY1tcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTtmb3IoZSBpbiBjKXZvaWQgMCE9PWNbZV0mJmYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0rXCJcIik7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKSxiPWZ1bmN0aW9uKGMsZSl7dmFyIGgsaSxqO2lmKGImJihlfHw0PT09Zi5yZWFkeVN0YXRlKSlpZihkZWxldGUgWGJbZ10sYj12b2lkIDAsZi5vbnJlYWR5c3RhdGVjaGFuZ2U9bS5ub29wLGUpNCE9PWYucmVhZHlTdGF0ZSYmZi5hYm9ydCgpO2Vsc2V7aj17fSxoPWYuc3RhdHVzLFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dCYmKGoudGV4dD1mLnJlc3BvbnNlVGV4dCk7dHJ5e2k9Zi5zdGF0dXNUZXh0fWNhdGNoKGspe2k9XCJcIn1ofHwhYS5pc0xvY2FsfHxhLmNyb3NzRG9tYWluPzEyMjM9PT1oJiYoaD0yMDQpOmg9ai50ZXh0PzIwMDo0MDR9aiYmZChoLGksaixmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYS5hc3luYz80PT09Zi5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYik6Zi5vbnJlYWR5c3RhdGVjaGFuZ2U9WGJbZ109YjpiKCl9LGFib3J0OmZ1bmN0aW9uKCl7YiYmYih2b2lkIDAsITApfX19fSk7ZnVuY3Rpb24gWmIoKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319ZnVuY3Rpb24gJGIoKXt0cnl7cmV0dXJuIG5ldyBhLkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1jYXRjaChiKXt9fW0uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBtLmdsb2JhbEV2YWwoYSksYX19fSksbS5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIixhLmdsb2JhbD0hMSl9KSxtLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPXkuaGVhZHx8bShcImhlYWRcIilbMF18fHkuZG9jdW1lbnRFbGVtZW50O3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj15LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi5hc3luYz0hMCxhLnNjcmlwdENoYXJzZXQmJihiLmNoYXJzZXQ9YS5zY3JpcHRDaGFyc2V0KSxiLnNyYz1hLnVybCxiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihhLGMpeyhjfHwhYi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGIucmVhZHlTdGF0ZSkpJiYoYi5vbmxvYWQ9Yi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGwsY3x8ZSgyMDAsXCJzdWNjZXNzXCIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgX2I9W10sYWM9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LzttLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1fYi5wb3AoKXx8bS5leHBhbmRvK1wiX1wiK3ZiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxtLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGFjLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZhYy50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW0uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGFjLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KHdiLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG0uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxfYi5wdXNoKGUpKSxnJiZtLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG0ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8eTt2YXIgZD11LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bS5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZtKGUpLnJlbW92ZSgpLG0ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBiYz1tLmZuLmxvYWQ7bS5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmYmMpcmV0dXJuIGJjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9bS50cmltKGEuc2xpY2UoaCxhLmxlbmd0aCkpLGE9YS5zbGljZSgwLGgpKSxtLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihmPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZtLmFqYXgoe3VybDphLHR5cGU6ZixkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2U9YXJndW1lbnRzLGcuaHRtbChkP20oXCI8ZGl2PlwiKS5hcHBlbmQobS5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGV8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG0uZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7bS5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG0uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBtLmdyZXAobS50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBjYz1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBkYyhhKXtyZXR1cm4gbS5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlP2EuZGVmYXVsdFZpZXd8fGEucGFyZW50V2luZG93OiExfW0ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bS5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bShhKSxuPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW0uY3NzKGEsXCJ0b3BcIiksaT1tLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmbS5pbkFycmF5KFwiYXV0b1wiLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbS5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG4udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG4ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLFwidXNpbmdcImluIGI/Yi51c2luZy5jYWxsKGEsbik6bC5jc3Mobil9fSxtLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7bS5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZD17dG9wOjAsbGVmdDowfSxlPXRoaXNbMF0sZj1lJiZlLm93bmVyRG9jdW1lbnQ7aWYoZilyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxtLmNvbnRhaW5zKGIsZSk/KHR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PUsmJihkPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGM9ZGMoZikse3RvcDpkLnRvcCsoYy5wYWdlWU9mZnNldHx8Yi5zY3JvbGxUb3ApLShiLmNsaWVudFRvcHx8MCksbGVmdDpkLmxlZnQrKGMucGFnZVhPZmZzZXR8fGIuc2Nyb2xsTGVmdCktKGIuY2xpZW50TGVmdHx8MCl9KTpkfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz17dG9wOjAsbGVmdDowfSxkPXRoaXNbMF07cmV0dXJuXCJmaXhlZFwiPT09bS5jc3MoZCxcInBvc2l0aW9uXCIpP2I9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxtLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoYz1hLm9mZnNldCgpKSxjLnRvcCs9bS5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGMubGVmdCs9bS5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1jLnRvcC1tLmNzcyhkLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWMubGVmdC1tLmNzcyhkLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8Y2M7d2hpbGUoYSYmIW0ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1tLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8Y2N9KX19KSxtLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9L1kvLnRlc3QoYik7bS5mblthXT1mdW5jdGlvbihkKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEsZCxlKXt2YXIgZj1kYyhhKTtyZXR1cm4gdm9pZCAwPT09ZT9mP2IgaW4gZj9mW2JdOmYuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W2RdOmFbZF06dm9pZChmP2Yuc2Nyb2xsVG8oYz9tKGYpLnNjcm9sbExlZnQoKTplLGM/ZTptKGYpLnNjcm9sbFRvcCgpKTphW2RdPWUpfSxhLGQsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxtLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT1MYShrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1KYShhLGIpLEhhLnRlc3QoYyk/bShhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG0uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe20uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXttLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbS5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9tLmNzcyhiLGMsZyk6bS5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxtLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG0uZm4uYW5kU2VsZj1tLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBtfSk7dmFyIGVjPWEualF1ZXJ5LGZjPWEuJDtyZXR1cm4gbS5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1tJiYoYS4kPWZjKSxiJiZhLmpRdWVyeT09PW0mJihhLmpRdWVyeT1lYyksbX0sdHlwZW9mIGI9PT1LJiYoYS5qUXVlcnk9YS4kPW0pLG19KTtcclxuXHJcbi8qKlxyXG4gKiBzYW1zdW5nLmNvbSBqUXVlcnkgdjEuMTEuMyAtICQubm9Db25mbGljdCgpO1xyXG4gKi9cclxuLy9pZiAod2luZG93Ll9pc0V4aXN0KSB7XHJcbi8vXHRqUXVlcnkubm9Db25mbGljdCgpO1xyXG4vL1x0d2luZG93Ll9pc0V4aXN0ID0gbnVsbDtcclxuLy99Iiwid2luZG93LkdyYW5pdGUgPSB3aW5kb3cuR3Jhbml0ZSB8fCB7fTtcclxuXHJcbihmdW5jdGlvbihHcmFuaXRlLCAkKSB7XHJcbiAgICBHcmFuaXRlLlV0aWwgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0ge1xyXG4gICAgICAgICAgICBwYXRjaFRleHQ6IGZ1bmN0aW9uKHRleHQsIHNuaXBwZXRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc25pcHBldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISQuaXNBcnJheShzbmlwcGV0cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShcInswfVwiLCBzbmlwcGV0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbmlwcGV0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgoXCJ7XCIgKyBpICsgXCJ9XCIpLCBzbmlwcGV0c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuXHJcbiAgICB9KCkpO1xyXG5cclxufShHcmFuaXRlLCBqUXVlcnkpKTtcclxuXHJcblxyXG4oZnVuY3Rpb24gKEdyYW5pdGUsIHV0aWwsICQpIHtcclxuICAgIEdyYW5pdGUuSFRUUCA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY29udGV4dFBhdGggPSBudWxsLFxyXG4gICAgICAgICAgICBTQ1JJUFRfVVJMX1JFR0VYUCA9IC9eKD86aHR0cHxodHRwcyk6XFwvXFwvW15cXC9dKyhcXC8uKilcXC8oPzpldGMoXFwvLiopKlxcL2NsaWVudGxpYnN8bGlicyhcXC8uKikqXFwvY2xpZW50bGlic3xhcHBzKFxcLy4qKSpcXC9jbGllbnRsaWJzKS4qXFwuanMoXFw/LiopPyQvLFxyXG4gICAgICAgICAgICBFTkNPREVfUEFUSF9SRUdFWFAgPSAvW14xXFx3LVxcLiF+XFwqJ1xcKFxcKVxcLyU7OkAmPVxcJCxdLyxcclxuICAgICAgICAgICAgbG9naW5SZWRpcmVjdGVkID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHNlbGYgPSB7fTtcclxuICAgICAgICBzZWxmLmdldFNjaGVtZUFuZEF1dGhvcml0eSA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgdmFyIGVuZDtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoXCI6Ly9cIikgPT0gLTEpIHJldHVybiBcIlwiOyAvLyBlLmcuIHVybCB3YXMgL2VuLmh0bWxcclxuICAgICAgICAgICAgICAgIGVuZCA9IHVybC5pbmRleE9mKFwiL1wiLCB1cmwuaW5kZXhPZihcIjovL1wiKSArIDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoZW5kID09IC0xKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsIDogICAvLyBlLmcuIHVybCB3YXMgaHR0cDovL3d3dy5kYXkuY29tXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsLnN1YnN0cmluZygwLCBlbmQpOyAgLy8gZS5nLiB1cmwgd2FzIGh0dHA6Ly93d3cuZGF5LmNvbS9lbi5odG1sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLmdldENvbnRleHRQYXRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGV4dFBhdGg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLmRldGVjdENvbnRleHRQYXRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5DUVVSTEluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0UGF0aCA9IENRVVJMSW5mby5jb250ZXh0UGF0aCB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBJRSB0aGUgZmlyc3Qgc2NyaXB0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgd2lkZ2V0cyBqczogbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gU0NSSVBUX1VSTF9SRUdFWFAuZXhlYyhzY3JpcHRzW2ldLnNyYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRQYXRoID0gcmVzdWx0WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRQYXRoID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLmV4dGVybmFsaXplID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKFwiL1wiKSA9PSAwICYmIGNvbnRleHRQYXRoICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsLmluZGV4T2YoY29udGV4dFBhdGggKyBcIi9cIikgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHRQYXRoICsgdXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYuaW50ZXJuYWxpemUgPSBmdW5jdGlvbiAodXJsLCBkb2MpIHtcclxuICAgICAgICAgICAgaWYgKHVybC5jaGFyQXQoMCkgPT0gJy8nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dFBhdGggPT09IHVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRleHRQYXRoICYmIHVybC5pbmRleE9mKGNvbnRleHRQYXRoICsgXCIvXCIpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhjb250ZXh0UGF0aC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRvYykgZG9jID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIHZhciBkb2NIb3N0ID0gc2VsZi5nZXRTY2hlbWVBbmRBdXRob3JpdHkoZG9jLmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgICAgICB2YXIgdXJsSG9zdCA9IHNlbGYuZ2V0U2NoZW1lQW5kQXV0aG9yaXR5KHVybCk7XHJcbiAgICAgICAgICAgIGlmIChkb2NIb3N0ID09IHVybEhvc3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHVybEhvc3QubGVuZ3RoICsgKGNvbnRleHRQYXRoID8gY29udGV4dFBhdGgubGVuZ3RoIDogMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2VsZi5nZXRQYXRoID0gZnVuY3Rpb24gKHVybCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF1cmwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuQ1FVUkxJbmZvICYmIENRVVJMSW5mby5yZXF1ZXN0UGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDUVVSTEluZm8ucmVxdWVzdFBhdGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVybCA9IHNlbGYucmVtb3ZlUGFyYW1ldGVycyh1cmwpO1xyXG4gICAgICAgICAgICAgICAgdXJsID0gc2VsZi5yZW1vdmVBbmNob3IodXJsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdXJsID0gc2VsZi5pbnRlcm5hbGl6ZSh1cmwpO1xyXG4gICAgICAgICAgICB2YXIgaSA9IHVybC5pbmRleE9mKFwiLlwiLCB1cmwubGFzdEluZGV4T2YoXCIvXCIpKTtcclxuICAgICAgICAgICAgaWYgKGkgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYucmVtb3ZlQW5jaG9yID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoXCIjXCIpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZihcIiNcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLnJlbW92ZVBhcmFtZXRlcnMgPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihcIj9cIikgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKDAsIHVybC5pbmRleE9mKFwiP1wiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYuZW5jb2RlUGF0aE9mVVJJID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICB2YXIgcGFydHMsIGRlbGltO1xyXG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoXCI/XCIpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IHVybC5zcGxpdChcIj9cIik7XHJcbiAgICAgICAgICAgICAgICBkZWxpbSA9IFwiP1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHVybC5pbmRleE9mKFwiI1wiKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMgPSB1cmwuc3BsaXQoXCIjXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVsaW0gPSBcIiNcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gW3VybF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEVOQ09ERV9QQVRIX1JFR0VYUC50ZXN0KHBhcnRzWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgcGFydHNbMF0gPSBzZWxmLmVuY29kZVBhdGgocGFydHNbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJ0cy5qb2luKGRlbGltKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgc2VsZi5lbmNvZGVQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICAgICAgcGF0aCA9IGVuY29kZVVSSShwYXRoKS5yZXBsYWNlKC8lNUIvZywgJ1snKS5yZXBsYWNlKC8lNUQvZywgJ10nKTtcclxuICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXFwrL2csIFwiJTJCXCIpO1xyXG4gICAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC9cXD8vZywgXCIlM0ZcIik7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLzsvZywgXCIlM0JcIik7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLyMvZywgXCIlMjNcIik7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLz0vZywgXCIlM0RcIik7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcJC9nLCBcIiUyNFwiKTtcclxuICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvLC9nLCBcIiUyQ1wiKTtcclxuICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvJy9nLCBcIiUyN1wiKTtcclxuICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXCIvZywgXCIlMjJcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgICAgfTtcclxuICAgICAgICBzZWxmLmhhbmRsZUxvZ2luUmVkaXJlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghbG9naW5SZWRpcmVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpblJlZGlyZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoR3Jhbml0ZS5JMThuLmdldChcIllvdXIgcmVxdWVzdCBjb3VsZCBub3QgYmUgY29tcGxldGVkIGJlY2F1c2UgeW91IGhhdmUgYmVlbiBzaWduZWQgb3V0LlwiKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IHV0aWwuZ2V0VG9wV2luZG93KCkuZG9jdW1lbnQubG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICBsLmhyZWYgPSBzZWxmLmV4dGVybmFsaXplKHNsaW5nLkxPR0lOX1VSTCkgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiP3Jlc291cmNlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGwucGF0aG5hbWUgKyBsLnNlYXJjaCArIGwuaGFzaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYuZ2V0WGhySG9vayA9IGZ1bmN0aW9uICh1cmwsIG1ldGhvZCwgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIG1ldGhvZCA9IG1ldGhvZCB8fCBcIkdFVFwiO1xyXG4gICAgICAgICAgICBpZiAod2luZG93LkdfWEhSX0hPT0sgJiYgJC5pc0Z1bmN0aW9uKEdfWEhSX0hPT0spKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcInVybFwiOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtZXRob2RcIjogbWV0aG9kXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBbXCJwYXJhbXNcIl0gPSBwYXJhbXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR19YSFJfSE9PSyhwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxmLmV2YWwgPSBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBldmFsKFwiKFwiICsgKHJlc3BvbnNlLmJvZHkgPyByZXNwb25zZS5ib2R5IDpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXNwb25zZVRleHQpICsgXCIpXCIpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9KCkpO1xyXG5cclxufShHcmFuaXRlLCBHcmFuaXRlLlV0aWwsIGpRdWVyeSkpO1xyXG5cclxuKGZ1bmN0aW9uKGRvY3VtZW50LCBHcmFuaXRlLCB1dGlsLCBodHRwLCAkKSB7XHJcblxyXG4gICAgR3Jhbml0ZS5JMThuID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgdmFyIGRpY3RzID0ge30sXHJcblxyXG4gICAgICAgICAgICB1cmxQcmVmaXggPSBcIi9saWJzL2NxL2kxOG4vZGljdC5cIixcclxuXHJcbiAgICAgICAgICAgIHVybFN1ZmZpeCA9IFwiLmpzb25cIixcclxuXHJcbiAgICAgICAgICAgIG1hbnVhbExvY2FsZSA9IHVuZGVmaW5lZCxcclxuXHJcbiAgICAgICAgICAgIHBzZXVkb1RyYW5zbGF0aW9ucyA9IGZhbHNlLFxyXG5cclxuICAgICAgICAgICAgbGFuZ3VhZ2VzID0gbnVsbCxcclxuXHJcbiAgICAgICAgICAgIHNlbGYgPSB7fSxcclxuXHJcbiAgICAgICAgICAgIG1hbnVhbERpY3Rpb25hcnkgPSBmYWxzZSxcclxuXHJcbiAgICAgICAgICAgIGdldERpY3Rpb25hcnlVcmwgPSBmdW5jdGlvbihsb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYW51YWxEaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybFByZWZpeCArIGxvY2FsZSArIHVybFN1ZmZpeDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGljdGlvbmFyeVNyYyA9ICQoXCJodG1sXCIpLmF0dHIoXCJkYXRhLWkxOG4tZGljdGlvbmFyeS1zcmNcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkaWN0aW9uYXJ5U3JjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybFByZWZpeCArIGxvY2FsZSArIHVybFN1ZmZpeDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGljdGlvbmFyeVNyYy5yZXBsYWNlKFwie2xvY2FsZX1cIiwgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2FsZSkpLnJlcGxhY2UoXCJ7K2xvY2FsZX1cIiwgbG9jYWxlKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5MT0NBTEVfREVGQVVMVCA9IFwiZW5cIjtcclxuXHJcbiAgICAgICAgc2VsZi5QU0VVRE9fTEFOR1VBR0UgPSBcInp6XCI7XHJcblxyXG4gICAgICAgIHNlbGYuUFNFVURPX1BBVFRFUk5fS0VZID0gXCJfcHNldWRvUGF0dGVybl9cIjtcclxuXHJcbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oY29uZmlnKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxlKGNvbmZpZy5sb2NhbGUpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFVybFByZWZpeChjb25maWcudXJsUHJlZml4KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRVcmxTdWZmaXgoY29uZmlnLnVybFN1ZmZpeCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5zZXRMb2NhbGUgPSBmdW5jdGlvbihsb2NhbGUpIHtcclxuICAgICAgICAgICAgaWYgKCFsb2NhbGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIG1hbnVhbExvY2FsZSA9IGxvY2FsZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxmLmdldExvY2FsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKG1hbnVhbExvY2FsZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hbnVhbExvY2FsZSA9IG1hbnVhbExvY2FsZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWFudWFsTG9jYWxlIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nIHx8IHNlbGYuTE9DQUxFX0RFRkFVTFQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5zZXRVcmxQcmVmaXggPSBmdW5jdGlvbihwcmVmaXgpIHtcclxuICAgICAgICAgICAgaWYgKCFwcmVmaXgpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHVybFByZWZpeCA9IHByZWZpeDtcclxuICAgICAgICAgICAgbWFudWFsRGljdGlvbmFyeSA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5zZXRVcmxTdWZmaXggPSBmdW5jdGlvbihzdWZmaXgpIHtcclxuICAgICAgICAgICAgaWYgKCFzdWZmaXgpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHVybFN1ZmZpeCA9IHN1ZmZpeDtcclxuICAgICAgICAgICAgbWFudWFsRGljdGlvbmFyeSA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5nZXREaWN0aW9uYXJ5ID0gZnVuY3Rpb24obG9jYWxlKSB7XHJcbiAgICAgICAgICAgIGxvY2FsZSA9IGxvY2FsZSB8fCBzZWxmLmdldExvY2FsZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkaWN0c1tsb2NhbGVdKSB7XHJcbiAgICAgICAgICAgICAgICBwc2V1ZG9UcmFuc2xhdGlvbnMgPSAobG9jYWxlLmluZGV4T2Yoc2VsZi5QU0VVRE9fTEFOR1VBR0UpID09IDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJC5hamF4KGdldERpY3Rpb25hcnlVcmwobG9jYWxlKSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpY3RzW2xvY2FsZV0gPSAkLnBhcnNlSlNPTihyZXNwb25zZS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgICAgIGlmICghZGljdHNbbG9jYWxlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpY3RzW2xvY2FsZV0gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGljdHNbbG9jYWxlXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxmLmdldCA9IGZ1bmN0aW9uKHRleHQsIHNuaXBwZXRzLCBub3RlKSB7XHJcbiAgICAgICAgICAgIHZhciBkaWN0LCBuZXdUZXh0LCBsb29rdXBUZXh0O1xyXG5cclxuICAgICAgICAgICAgZGljdCA9IHNlbGYuZ2V0RGljdGlvbmFyeSgpO1xyXG5cclxuICAgICAgICAgICAgbG9va3VwVGV4dCA9IHBzZXVkb1RyYW5zbGF0aW9ucyA/IHNlbGYuUFNFVURPX1BBVFRFUk5fS0VZIDpcclxuICAgICAgICAgICAgICAgIG5vdGUgPyB0ZXh0ICsgXCIgKChcIiArIG5vdGUgKyBcIikpXCIgOlxyXG4gICAgICAgICAgICAgICAgdGV4dDtcclxuICAgICAgICAgICAgaWYgKGRpY3QpIHtcclxuICAgICAgICAgICAgICAgIG5ld1RleHQgPSBkaWN0W2xvb2t1cFRleHRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghbmV3VGV4dCkge1xyXG4gICAgICAgICAgICAgICAgbmV3VGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBzZXVkb1RyYW5zbGF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgbmV3VGV4dCA9IG5ld1RleHQucmVwbGFjZShcIntzdHJpbmd9XCIsIHRleHQpLnJlcGxhY2UoXCJ7Y29tbWVudH1cIiwgbm90ZSA/IG5vdGUgOiBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdXRpbC5wYXRjaFRleHQobmV3VGV4dCwgc25pcHBldHMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlbGYuZ2V0VmFyID0gZnVuY3Rpb24odGV4dCwgbm90ZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRleHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldCh0ZXh0LCBudWxsLCBub3RlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxmLmdldExhbmd1YWdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIWxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IGh0dHAuZXZhbChcIi9saWJzL3djbS9jb3JlL3Jlc291cmNlcy9sYW5ndWFnZXMub3ZlcmxheS5pbmZpbml0eS5qc29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChqc29uLCBmdW5jdGlvbihuYW1lLCBsYW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcudGl0bGUgPSBzZWxmLmdldFZhcihsYW5nLmxhbmd1YWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhbmcudGl0bGUgJiYgbGFuZy5jb3VudHJ5ICYmIGxhbmcuY291bnRyeSAhPSBcIipcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZy50aXRsZSArPSBcIiAoXCIgKyBzZWxmLmdldFZhcihsYW5nLmNvdW50cnkpICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZXMgPSBqc29uO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlcyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5wYXJzZUxvY2FsZSA9IGZ1bmN0aW9uKGxhbmdDb2RlKSB7XHJcbiAgICAgICAgICAgIGlmICghbGFuZ0NvZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwb3MgPSBsYW5nQ29kZS5pbmRleE9mKFwiX1wiKTtcclxuICAgICAgICAgICAgaWYgKHBvcyA8IDApIHtcclxuICAgICAgICAgICAgICAgIHBvcyA9IGxhbmdDb2RlLmluZGV4T2YoXCItXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFuZ3VhZ2UsIGNvdW50cnk7XHJcbiAgICAgICAgICAgIGlmIChwb3MgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IGxhbmdDb2RlO1xyXG4gICAgICAgICAgICAgICAgY291bnRyeSA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IGxhbmdDb2RlLnN1YnN0cmluZygwLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgY291bnRyeSA9IGxhbmdDb2RlLnN1YnN0cmluZyhwb3MgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY29kZTogbGFuZ0NvZGUsXHJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UsXHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5OiBjb3VudHJ5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcblxyXG4gICAgfSgpKTtcclxuXHJcbn0oZG9jdW1lbnQsIEdyYW5pdGUsIEdyYW5pdGUuVXRpbCwgR3Jhbml0ZS5IVFRQLCBqUXVlcnkpKTtcclxuXHJcbkdyYW5pdGUuSFRUUC5kZXRlY3RDb250ZXh0UGF0aCgpO1xyXG4iLCIvKlxyXG5DdXN0b20gc2xpY2suc21nLmpzXHJcbiAgICAgXyBfICAgICAgXyAgICAgICBfXHJcbiBfX198IChfKSBfX198IHwgX18gIChfKV9fX1xyXG4vIF9ffCB8IHwvIF9ffCB8LyAvICB8IC8gX198XHJcblxcX18gXFwgfCB8IChfX3wgICA8IF8gfCBcXF9fIFxcXHJcbnxfX18vX3xffFxcX19ffF98XFxfKF8pLyB8X19fL1xyXG4gICAgICAgICAgICAgICAgICAgfF9fL1xyXG5cclxuIFZlcnNpb246IDEuNS45XHJcbiAgQXV0aG9yOiBLZW4gV2hlZWxlclxyXG4gV2Vic2l0ZTogaHR0cDovL2tlbndoZWVsZXIuZ2l0aHViLmlvXHJcbiAgICBEb2NzOiBodHRwOi8va2Vud2hlZWxlci5naXRodWIuaW8vc2xpY2tcclxuICAgIFJlcG86IGh0dHA6Ly9naXRodWIuY29tL2tlbndoZWVsZXIvc2xpY2tcclxuICBJc3N1ZXM6IGh0dHA6Ly9naXRodWIuY29tL2tlbndoZWVsZXIvc2xpY2svaXNzdWVzXHJcblxyXG5AbW9kaWZ5XHJcbiAgICAtLiByb2xlPVwidG9vbGJhclwiIHJlbW92ZVxyXG4gICAgICAgICAgICBDT01NRU5UIDogbW9kaWZ5IC0gcm9sZT1cInRvb2xiYXJcIiByZW1vdmVcclxuXHJcbiAgICAgICAgICAgIE9SR1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2J1dHRvbicpLmF0dHIoJ3JvbGUnLCAnYnV0dG9uJykuZW5kKClcclxuICAgICAgICAgICAgICAgIC5jbG9zZXN0KCdkaXYnKS5hdHRyKCdyb2xlJywgJ3Rvb2xiYXInKTtcclxuXHJcbiAgICAgICAgICAgIENVU1RPTVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2J1dHRvbicpLmF0dHIoJ3JvbGUnLCAnYnV0dG9uJyk7XHJcblxyXG4gICAgLS4gZHJhZ2dhYmxlIGJ1ZyBmaXhcclxuICAgICAgICAgICAgQ09NTUVOVCA6IG1vZGlmeSAtIGRyYWdnYWJsZSBidWcgZml4XHJcblxyXG4gICAgICAgICAgICBPUkdcclxuICAgICAgICAgICAgICAgIGlmKCAhaW5pdGlhbCAmJiB0cmlnZ2VyQnJlYWtwb2ludCAhPT0gZmFsc2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2JyZWFrcG9pbnQnLCBbXywgdHJpZ2dlckJyZWFrcG9pbnRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENVU1RPTVxyXG4gICAgICAgICAgICAgICAgaWYoICFpbml0aWFsICYmIHRyaWdnZXJCcmVha3BvaW50ICE9PSBmYWxzZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBfLnRvdWNoT2JqZWN0LmN1clggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2JyZWFrcG9pbnQnLCBbXywgdHJpZ2dlckJyZWFrcG9pbnRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAqL1xyXG4vKiBnbG9iYWwgd2luZG93LCBkb2N1bWVudCwgZGVmaW5lLCBqUXVlcnksIHNldEludGVydmFsLCBjbGVhckludGVydmFsICovXHJcbihmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICB9XHJcblxyXG59KGZ1bmN0aW9uKCQpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHZhciBTbGljayA9IHdpbmRvdy5TbGljayB8fCB7fTtcclxuICAgIHdpbmRvdy5zbWcgPSB3aW5kb3cuc21nIHx8IHt9O1xyXG4gICAgd2luZG93LnNtZy5hZW0gPSB3aW5kb3cuc21nLmFlbSB8fCB7fTtcclxuICAgIEdyYW5pdGUuSTE4bi5zZXRMb2NhbGUoJCgnI3NpdGVDb2RlJykudmFsKCkpO1xyXG4gICAgd2luZG93LnNtZy5hZW0uZ2xvYmFsdGV4dCA9IHtcclxuICAgICAgICAgICAgX3ByZXYgOiBHcmFuaXRlLkkxOG4uZ2V0KFwiUHJldmlvdXNcIiwgW10sJCgnI3NpdGVDb2RlJykudmFsKCkpLFxyXG4gICAgICAgICAgICBfbmV4dCA6IEdyYW5pdGUuSTE4bi5nZXQoXCJOZXh0XCIsIFtdLCQoJyNzaXRlQ29kZScpLnZhbCgpKVxyXG4gICAgfTtcclxuICAgIC8vIGkxOG4gR2xvYmFsVGV4dFxyXG4gICAgdmFyIEdMT0JBTF9URVhUID0gd2luZG93LnNtZy5hZW0uZ2xvYmFsdGV4dDtcclxuXHJcbiAgICBTbGljayA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIGluc3RhbmNlVWlkID0gMDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gU2xpY2soZWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBfID0gdGhpcywgZGF0YVNldHRpbmdzO1xyXG5cclxuICAgICAgICAgICAgXy5kZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRBcnJvd3M6ICQoZWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmREb3RzOiAkKGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYXNOYXZGb3I6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBwcmV2QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLXJvbGU9XCJub25lXCIgY2xhc3M9XCJzbGljay1wcmV2XCIgYXJpYS1sYWJlbD1cIicrIEdMT0JBTF9URVhULl9wcmV2ICsnXCIgdGFiaW5kZXg9XCIwXCIgcm9sZT1cImJ1dHRvblwiPicrIEdMT0JBTF9URVhULl9wcmV2ICsnPC9idXR0b24+JyxcclxuICAgICAgICAgICAgICAgIG5leHRBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtcm9sZT1cIm5vbmVcIiBjbGFzcz1cInNsaWNrLW5leHRcIiBhcmlhLWxhYmVsPVwiJysgR0xPQkFMX1RFWFQuX25leHQgKydcIiB0YWJpbmRleD1cIjBcIiByb2xlPVwiYnV0dG9uXCI+JysgR0xPQkFMX1RFWFQuX25leHQgKyc8L2J1dHRvbj4nLFxyXG4gICAgICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYXV0b3BsYXlTcGVlZDogMzAwMCxcclxuICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyUGFkZGluZzogJzUwcHgnLFxyXG4gICAgICAgICAgICAgICAgY3NzRWFzZTogJ2Vhc2UnLFxyXG4gICAgICAgICAgICAgICAgY3VzdG9tUGFnaW5nOiBmdW5jdGlvbihzbGlkZXIsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1yb2xlPVwibm9uZVwiIHJvbGU9XCJidXR0b25cIiB0YWJpbmRleD1cIjBcIiAvPicpLnRleHQoJ3NsaWRlJyArIChpICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZG90c0NsYXNzOiAnc2xpY2stZG90cycsXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50czogJ2RpdicsXHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdsaW5lYXInLFxyXG4gICAgICAgICAgICAgICAgZWRnZUZyaWN0aW9uOiAwLjM1LFxyXG4gICAgICAgICAgICAgICAgZmFkZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmb2N1c09uU2VsZWN0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiAwLFxyXG4gICAgICAgICAgICAgICAgbGF6eUxvYWQ6ICdvbmRlbWFuZCcsXHJcbiAgICAgICAgICAgICAgICBtb2JpbGVGaXJzdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwYXVzZU9uRm9jdXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwYXVzZU9uRG90c0hvdmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbmRUbzogJ3dpbmRvdycsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcm93czogMSxcclxuICAgICAgICAgICAgICAgIHJ0bDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzbGlkZTogJycsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJSb3c6IDEsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICAgICAgICAgIHNwZWVkOiA1MDAsXHJcbiAgICAgICAgICAgICAgICBzd2lwZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHN3aXBlVG9TbGlkZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b3VjaE1vdmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b3VjaFRocmVzaG9sZDogNSxcclxuICAgICAgICAgICAgICAgIHVzZUNTUzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVzZVRyYW5zZm9ybTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmVydGljYWxTd2lwaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdhaXRGb3JBbmltYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgekluZGV4OiAxMDAwXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBfLmluaXRpYWxzID0ge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGF1dG9QbGF5VGltZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50RGlyZWN0aW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudExlZnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGU6IDAsXHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IDEsXHJcbiAgICAgICAgICAgICAgICAkZG90czogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxpc3RXaWR0aDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxpc3RIZWlnaHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsb2FkSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAkbmV4dEFycm93OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgJHByZXZBcnJvdzogbnVsbCxcclxuICAgICAgICAgICAgICAgIHNsaWRlQ291bnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzbGlkZVdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgJHNsaWRlVHJhY2s6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAkc2xpZGVzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc2xpZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzbGlkZU9mZnNldDogMCxcclxuICAgICAgICAgICAgICAgIHN3aXBlTGVmdDogbnVsbCxcclxuICAgICAgICAgICAgICAgICRsaXN0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdG91Y2hPYmplY3Q6IHt9LFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3Jtc0VuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdW5zbGlja2VkOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJC5leHRlbmQoXywgXy5pbml0aWFscyk7XHJcblxyXG4gICAgICAgICAgICBfLmFjdGl2ZUJyZWFrcG9pbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBfLmFuaW1UeXBlID0gbnVsbDtcclxuICAgICAgICAgICAgXy5hbmltUHJvcCA9IG51bGw7XHJcbiAgICAgICAgICAgIF8uYnJlYWtwb2ludHMgPSBbXTtcclxuICAgICAgICAgICAgXy5icmVha3BvaW50U2V0dGluZ3MgPSBbXTtcclxuICAgICAgICAgICAgXy5jc3NUcmFuc2l0aW9ucyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBfLmZvY3Vzc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF8uaW50ZXJydXB0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgXy5oaWRkZW4gPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgXy5wYXVzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBfLnBvc2l0aW9uUHJvcCA9IG51bGw7XHJcbiAgICAgICAgICAgIF8ucmVzcG9uZFRvID0gbnVsbDtcclxuICAgICAgICAgICAgXy5yb3dDb3VudCA9IDE7XHJcbiAgICAgICAgICAgIF8uc2hvdWxkQ2xpY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICBfLiRzbGlkZXIgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBfLiRzbGlkZXNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgICAgIF8udHJhbnNmb3JtVHlwZSA9IG51bGw7XHJcbiAgICAgICAgICAgIF8udHJhbnNpdGlvblR5cGUgPSBudWxsO1xyXG4gICAgICAgICAgICBfLnZpc2liaWxpdHlDaGFuZ2UgPSAndmlzaWJpbGl0eWNoYW5nZSc7XHJcbiAgICAgICAgICAgIF8ud2luZG93V2lkdGggPSAwO1xyXG4gICAgICAgICAgICBfLndpbmRvd1RpbWVyID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGRhdGFTZXR0aW5ncyA9ICQoZWxlbWVudCkuZGF0YSgnc2xpY2snKSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIF8ub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBfLmRlZmF1bHRzLCBzZXR0aW5ncywgZGF0YVNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgICAgIF8uY3VycmVudFNsaWRlID0gXy5vcHRpb25zLmluaXRpYWxTbGlkZTtcclxuXHJcbiAgICAgICAgICAgIF8ub3JpZ2luYWxTZXR0aW5ncyA9IF8ub3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQubW96SGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgXy5oaWRkZW4gPSAnbW96SGlkZGVuJztcclxuICAgICAgICAgICAgICAgIF8udmlzaWJpbGl0eUNoYW5nZSA9ICdtb3p2aXNpYmlsaXR5Y2hhbmdlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQud2Via2l0SGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgXy5oaWRkZW4gPSAnd2Via2l0SGlkZGVuJztcclxuICAgICAgICAgICAgICAgIF8udmlzaWJpbGl0eUNoYW5nZSA9ICd3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgXy5hdXRvUGxheSA9ICQucHJveHkoXy5hdXRvUGxheSwgXyk7XHJcbiAgICAgICAgICAgIF8uYXV0b1BsYXlDbGVhciA9ICQucHJveHkoXy5hdXRvUGxheUNsZWFyLCBfKTtcclxuICAgICAgICAgICAgXy5hdXRvUGxheUl0ZXJhdG9yID0gJC5wcm94eShfLmF1dG9QbGF5SXRlcmF0b3IsIF8pO1xyXG4gICAgICAgICAgICBfLmNoYW5nZVNsaWRlID0gJC5wcm94eShfLmNoYW5nZVNsaWRlLCBfKTtcclxuICAgICAgICAgICAgXy5jbGlja0hhbmRsZXIgPSAkLnByb3h5KF8uY2xpY2tIYW5kbGVyLCBfKTtcclxuICAgICAgICAgICAgXy5zZWxlY3RIYW5kbGVyID0gJC5wcm94eShfLnNlbGVjdEhhbmRsZXIsIF8pO1xyXG4gICAgICAgICAgICBfLnNldFBvc2l0aW9uID0gJC5wcm94eShfLnNldFBvc2l0aW9uLCBfKTtcclxuICAgICAgICAgICAgXy5zd2lwZUhhbmRsZXIgPSAkLnByb3h5KF8uc3dpcGVIYW5kbGVyLCBfKTtcclxuICAgICAgICAgICAgXy5kcmFnSGFuZGxlciA9ICQucHJveHkoXy5kcmFnSGFuZGxlciwgXyk7XHJcbiAgICAgICAgICAgIF8ua2V5SGFuZGxlciA9ICQucHJveHkoXy5rZXlIYW5kbGVyLCBfKTtcclxuXHJcbiAgICAgICAgICAgIF8uaW5zdGFuY2VVaWQgPSBpbnN0YW5jZVVpZCsrO1xyXG5cclxuICAgICAgICAgICAgLy8gQSBzaW1wbGUgd2F5IHRvIGNoZWNrIGZvciBIVE1MIHN0cmluZ3NcclxuICAgICAgICAgICAgLy8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKG11c3Qgc3RhcnQgd2l0aCA8KVxyXG4gICAgICAgICAgICAvLyBFeHRyYWN0ZWQgZnJvbSBqUXVlcnkgdjEuMTEgc291cmNlXHJcbiAgICAgICAgICAgIF8uaHRtbEV4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSopJC87XHJcblxyXG5cclxuICAgICAgICAgICAgXy5yZWdpc3RlckJyZWFrcG9pbnRzKCk7XHJcbiAgICAgICAgICAgIF8uaW5pdCh0cnVlKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gU2xpY2s7XHJcblxyXG4gICAgfSgpKTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuYWN0aXZhdGVBREEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlVHJhY2suZmluZCgnLnNsaWNrLWFjdGl2ZScpLmF0dHIoe1xyXG4gICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAnZmFsc2UnXHJcbiAgICAgICAgfSkuZmluZCgnYSwgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0JykuYXR0cih7XHJcbiAgICAgICAgICAgICd0YWJpbmRleCc6ICcwJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmFkZFNsaWRlID0gU2xpY2sucHJvdG90eXBlLnNsaWNrQWRkID0gZnVuY3Rpb24obWFya3VwLCBpbmRleCwgYWRkQmVmb3JlKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihpbmRleCkgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICBhZGRCZWZvcmUgPSBpbmRleDtcclxuICAgICAgICAgICAgaW5kZXggPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPCAwIHx8IChpbmRleCA+PSBfLnNsaWRlQ291bnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8udW5sb2FkKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YoaW5kZXgpID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDAgJiYgXy4kc2xpZGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJChtYXJrdXApLmFwcGVuZFRvKF8uJHNsaWRlVHJhY2spO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFkZEJlZm9yZSkge1xyXG4gICAgICAgICAgICAgICAgJChtYXJrdXApLmluc2VydEJlZm9yZShfLiRzbGlkZXMuZXEoaW5kZXgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQobWFya3VwKS5pbnNlcnRBZnRlcihfLiRzbGlkZXMuZXEoaW5kZXgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChhZGRCZWZvcmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICQobWFya3VwKS5wcmVwZW5kVG8oXy4kc2xpZGVUcmFjayk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKG1hcmt1cCkuYXBwZW5kVG8oXy4kc2xpZGVUcmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uJHNsaWRlcyA9IF8uJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpO1xyXG5cclxuICAgICAgICBfLiRzbGlkZVRyYWNrLmFwcGVuZChfLiRzbGlkZXMpO1xyXG5cclxuICAgICAgICBfLiRzbGlkZXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEtc2xpY2staW5kZXgnLCBpbmRleCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlc0NhY2hlID0gXy4kc2xpZGVzO1xyXG5cclxuICAgICAgICBfLnJlaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmFuaW1hdGVIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgPT09IDEgJiYgXy5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0ID09PSB0cnVlICYmIF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldEhlaWdodCA9IF8uJHNsaWRlcy5lcShfLmN1cnJlbnRTbGlkZSkub3V0ZXJIZWlnaHQodHJ1ZSk7XHJcbiAgICAgICAgICAgIF8uJGxpc3QuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRhcmdldEhlaWdodFxyXG4gICAgICAgICAgICB9LCBfLm9wdGlvbnMuc3BlZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmFuaW1hdGVTbGlkZSA9IGZ1bmN0aW9uKHRhcmdldExlZnQsIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIHZhciBhbmltUHJvcHMgPSB7fSxcclxuICAgICAgICAgICAgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uYW5pbWF0ZUhlaWdodCgpO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSAmJiBfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldExlZnQgPSAtdGFyZ2V0TGVmdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF8udHJhbnNmb3Jtc0VuYWJsZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRhcmdldExlZnRcclxuICAgICAgICAgICAgICAgIH0sIF8ub3B0aW9ucy5zcGVlZCwgXy5vcHRpb25zLmVhc2luZywgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHRhcmdldExlZnRcclxuICAgICAgICAgICAgICAgIH0sIF8ub3B0aW9ucy5zcGVlZCwgXy5vcHRpb25zLmVhc2luZywgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5jc3NUcmFuc2l0aW9ucyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfLm9wdGlvbnMucnRsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50TGVmdCA9IC0oXy5jdXJyZW50TGVmdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltU3RhcnQ6IF8uY3VycmVudExlZnRcclxuICAgICAgICAgICAgICAgIH0pLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1TdGFydDogdGFyZ2V0TGVmdFxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBfLm9wdGlvbnMuc3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBfLm9wdGlvbnMuZWFzaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uKG5vdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBNYXRoLmNlaWwobm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1Qcm9wc1tfLmFuaW1UeXBlXSA9ICd0cmFuc2xhdGUoJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ICsgJ3B4LCAwcHgpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKGFuaW1Qcm9wcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltUHJvcHNbXy5hbmltVHlwZV0gPSAndHJhbnNsYXRlKDBweCwnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgKyAncHgpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKGFuaW1Qcm9wcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5hcHBseVRyYW5zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldExlZnQgPSBNYXRoLmNlaWwodGFyZ2V0TGVmdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltUHJvcHNbXy5hbmltVHlwZV0gPSAndHJhbnNsYXRlM2QoJyArIHRhcmdldExlZnQgKyAncHgsIDBweCwgMHB4KSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1Qcm9wc1tfLmFuaW1UeXBlXSA9ICd0cmFuc2xhdGUzZCgwcHgsJyArIHRhcmdldExlZnQgKyAncHgsIDBweCknO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MoYW5pbVByb3BzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5kaXNhYmxlVHJhbnNpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIF8ub3B0aW9ucy5zcGVlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5nZXROYXZUYXJnZXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBhc05hdkZvciA9IF8ub3B0aW9ucy5hc05hdkZvcjtcclxuXHJcbiAgICAgICAgaWYgKCBhc05hdkZvciAmJiBhc05hdkZvciAhPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgYXNOYXZGb3IgPSAkKGFzTmF2Rm9yKS5ub3QoXy4kc2xpZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhc05hdkZvcjtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5hc05hdkZvciA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgYXNOYXZGb3IgPSBfLmdldE5hdlRhcmdldCgpO1xyXG5cclxuICAgICAgICBpZiAoIGFzTmF2Rm9yICE9PSBudWxsICYmIHR5cGVvZiBhc05hdkZvciA9PT0gJ29iamVjdCcgKSB7XHJcbiAgICAgICAgICAgIGFzTmF2Rm9yLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5zbGljaygnZ2V0U2xpY2snKTtcclxuICAgICAgICAgICAgICAgIGlmKCF0YXJnZXQudW5zbGlja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNsaWRlSGFuZGxlcihpbmRleCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5hcHBseVRyYW5zaXRpb24gPSBmdW5jdGlvbihzbGlkZSkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24gPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uW18udHJhbnNpdGlvblR5cGVdID0gXy50cmFuc2Zvcm1UeXBlICsgJyAnICsgXy5vcHRpb25zLnNwZWVkICsgJ21zICcgKyBfLm9wdGlvbnMuY3NzRWFzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uW18udHJhbnNpdGlvblR5cGVdID0gJ29wYWNpdHkgJyArIF8ub3B0aW9ucy5zcGVlZCArICdtcyAnICsgXy5vcHRpb25zLmNzc0Vhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmZhZGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKHRyYW5zaXRpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF8uJHNsaWRlcy5lcShzbGlkZSkuY3NzKHRyYW5zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5hdXRvUGxheSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uYXV0b1BsYXlDbGVhcigpO1xyXG5cclxuICAgICAgICBpZiAoIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKSB7XHJcbiAgICAgICAgICAgIF8uYXV0b1BsYXlUaW1lciA9IHNldEludGVydmFsKCBfLmF1dG9QbGF5SXRlcmF0b3IsIF8ub3B0aW9ucy5hdXRvcGxheVNwZWVkICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmF1dG9QbGF5Q2xlYXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5hdXRvUGxheVRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoXy5hdXRvUGxheVRpbWVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuYXV0b1BsYXlJdGVyYXRvciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsXHJcbiAgICAgICAgICAgIHNsaWRlVG8gPSBfLmN1cnJlbnRTbGlkZSArIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuXHJcbiAgICAgICAgaWYgKCAhXy5wYXVzZWQgJiYgIV8uaW50ZXJydXB0ZWQgJiYgIV8uZm9jdXNzZWQgKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gZmFsc2UgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfLmRpcmVjdGlvbiA9PT0gMSAmJiAoIF8uY3VycmVudFNsaWRlICsgMSApID09PSAoIF8uc2xpZGVDb3VudCAtIDEgKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZGlyZWN0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICggXy5kaXJlY3Rpb24gPT09IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlVG8gPSBfLmN1cnJlbnRTbGlkZSAtIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBfLmN1cnJlbnRTbGlkZSAtIDEgPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZGlyZWN0aW9uID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgXy5zbGlkZUhhbmRsZXIoIHNsaWRlVG8gKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmJ1aWxkQXJyb3dzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5hcnJvd3MgPT09IHRydWUgKSB7XHJcblxyXG4gICAgICAgICAgICBfLiRwcmV2QXJyb3cgPSAkKF8ub3B0aW9ucy5wcmV2QXJyb3cpLmFkZENsYXNzKCdzbGljay1hcnJvdycpO1xyXG4gICAgICAgICAgICBfLiRuZXh0QXJyb3cgPSAkKF8ub3B0aW9ucy5uZXh0QXJyb3cpLmFkZENsYXNzKCdzbGljay1hcnJvdycpO1xyXG5cclxuICAgICAgICAgICAgaWYoIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgXy4kcHJldkFycm93LnJlbW92ZUNsYXNzKCdzbGljay1oaWRkZW4nKS5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbiB0YWJpbmRleCcpO1xyXG4gICAgICAgICAgICAgICAgXy4kbmV4dEFycm93LnJlbW92ZUNsYXNzKCdzbGljay1oaWRkZW4nKS5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbiB0YWJpbmRleCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLmh0bWxFeHByLnRlc3QoXy5vcHRpb25zLnByZXZBcnJvdykpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cucHJlcGVuZFRvKF8ub3B0aW9ucy5hcHBlbmRBcnJvd3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLmh0bWxFeHByLnRlc3QoXy5vcHRpb25zLm5leHRBcnJvdykpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLiRuZXh0QXJyb3cuYXBwZW5kVG8oXy5vcHRpb25zLmFwcGVuZEFycm93cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uJHByZXZBcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWRpc2FibGVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cuYWRkKCBfLiRuZXh0QXJyb3cgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWhpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6ICd0cnVlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RhYmluZGV4JzogJy0xJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuYnVpbGREb3RzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgaSwgZG90O1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmRvdHMgPT09IHRydWUgJiYgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVyLmFkZENsYXNzKCdzbGljay1kb3R0ZWQnKTtcclxuXHJcbiAgICAgICAgICAgIGRvdCA9ICQoJzx1bCAvPicpLmFkZENsYXNzKF8ub3B0aW9ucy5kb3RzQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8PSBfLmdldERvdENvdW50KCk7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgZG90LmFwcGVuZCgkKCc8bGkgLz4nKS5hcHBlbmQoXy5vcHRpb25zLmN1c3RvbVBhZ2luZy5jYWxsKHRoaXMsIF8sIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF8uJGRvdHMgPSBkb3QuYXBwZW5kVG8oXy5vcHRpb25zLmFwcGVuZERvdHMpO1xyXG5cclxuICAgICAgICAgICAgXy4kZG90cy5maW5kKCdsaScpLmZpcnN0KCkuYWRkQ2xhc3MoJ3NsaWNrLWFjdGl2ZScpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5idWlsZE91dCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlcyA9IChfLm9wdGlvbnMuZWxlbWVudHMgPT09ICd1bCcpID9cclxuICAgICAgICAgICAgXy4kc2xpZGVyLmZpbmQoJz4nK18ub3B0aW9ucy5lbGVtZW50cykuY2hpbGRyZW4oIF8ub3B0aW9ucy5zbGlkZSArICc6bm90KC5zbGljay1jbG9uZWQpJykuYWRkQ2xhc3MoJ3NsaWNrLXNsaWRlJykgOlxyXG4gICAgICAgICAgICBfLiRzbGlkZXIuY2hpbGRyZW4oIF8ub3B0aW9ucy5zbGlkZSArICc6bm90KC5zbGljay1jbG9uZWQpJykuYWRkQ2xhc3MoJ3NsaWNrLXNsaWRlJyk7XHJcblxyXG4gICAgICAgIF8uc2xpZGVDb3VudCA9IF8uJHNsaWRlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICQoZWxlbWVudClcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLXNsaWNrLWluZGV4JywgaW5kZXgpXHJcbiAgICAgICAgICAgICAgICAuZGF0YSgnb3JpZ2luYWxTdHlsaW5nJywgJChlbGVtZW50KS5hdHRyKCdzdHlsZScpIHx8ICcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVyLmFkZENsYXNzKCdzbGljay1zbGlkZXInKTtcclxuXHJcbiAgICAgICAgaWYoXy5vcHRpb25zLmVsZW1lbnRzID09PSAndWwnKXtcclxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjayA9IF8uJHNsaWRlci5maW5kKCc+JytfLm9wdGlvbnMuZWxlbWVudHMpLmFkZENsYXNzKCdzbGljay10cmFjaycpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrID0gKF8uc2xpZGVDb3VudCA9PT0gMCkgP1xyXG4gICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz1cInNsaWNrLXRyYWNrXCIvPicpLmFwcGVuZFRvKF8uJHNsaWRlcikgOlxyXG4gICAgICAgICAgICAgICAgXy4kc2xpZGVzLndyYXBBbGwoJzxkaXYgY2xhc3M9XCJzbGljay10cmFja1wiLz4nKS5wYXJlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uJGxpc3QgPSBfLiRzbGlkZVRyYWNrLndyYXAoXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBhcmlhLWxpdmU9XCJwb2xpdGVcIiBjbGFzcz1cInNsaWNrLWxpc3RcIi8+JykucGFyZW50KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MoJ29wYWNpdHknLCAwKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlIHx8IF8ub3B0aW9ucy5zd2lwZVRvU2xpZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJ2ltZ1tkYXRhLWxhenldJywgXy4kc2xpZGVyKS5ub3QoJ1tzcmNdJykuYWRkQ2xhc3MoJ3NsaWNrLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgXy5zZXR1cEluZmluaXRlKCk7XHJcblxyXG4gICAgICAgIF8uYnVpbGRBcnJvd3MoKTtcclxuXHJcbiAgICAgICAgXy5idWlsZERvdHMoKTtcclxuXHJcbiAgICAgICAgXy51cGRhdGVEb3RzKCk7XHJcblxyXG5cclxuICAgICAgICBfLnNldFNsaWRlQ2xhc3Nlcyh0eXBlb2YgXy5jdXJyZW50U2xpZGUgPT09ICdudW1iZXInID8gXy5jdXJyZW50U2xpZGUgOiAwKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5kcmFnZ2FibGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgXy4kbGlzdC5hZGRDbGFzcygnZHJhZ2dhYmxlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmJ1aWxkUm93cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsIGEsIGIsIGMsIG5ld1NsaWRlcywgbnVtT2ZTbGlkZXMsIG9yaWdpbmFsU2xpZGVzLHNsaWRlc1BlclNlY3Rpb247XHJcblxyXG4gICAgICAgIG5ld1NsaWRlcyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICBvcmlnaW5hbFNsaWRlcyA9IChfLm9wdGlvbnMuZWxlbWVudHMgPT09ICd1bCcpID8gXy4kc2xpZGVyLmZpbmQoJz4nK18ub3B0aW9ucy5lbGVtZW50cykuY2hpbGRyZW4oKSA6IF8uJHNsaWRlci5jaGlsZHJlbigpO1xyXG5cclxuICAgICAgICBpZihfLm9wdGlvbnMucm93cyA+IDEpIHtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclNlY3Rpb24gPSBfLm9wdGlvbnMuc2xpZGVzUGVyUm93ICogXy5vcHRpb25zLnJvd3M7XHJcbiAgICAgICAgICAgIG51bU9mU2xpZGVzID0gTWF0aC5jZWlsKFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxTbGlkZXMubGVuZ3RoIC8gc2xpZGVzUGVyU2VjdGlvblxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZm9yKGEgPSAwOyBhIDwgbnVtT2ZTbGlkZXM7IGErKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGZvcihiID0gMDsgYiA8IF8ub3B0aW9ucy5yb3dzOyBiKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGMgPSAwOyBjIDwgXy5vcHRpb25zLnNsaWRlc1BlclJvdzsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAoYSAqIHNsaWRlc1BlclNlY3Rpb24gKyAoKGIgKiBfLm9wdGlvbnMuc2xpZGVzUGVyUm93KSArIGMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsU2xpZGVzLmdldCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQob3JpZ2luYWxTbGlkZXMuZ2V0KHRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBuZXdTbGlkZXMuYXBwZW5kQ2hpbGQoc2xpZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZXIuZW1wdHkoKS5hcHBlbmQobmV3U2xpZGVzKTtcclxuICAgICAgICAgICAgXy4kc2xpZGVyLmNoaWxkcmVuKCkuY2hpbGRyZW4oKS5jaGlsZHJlbigpXHJcbiAgICAgICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOigxMDAgLyBfLm9wdGlvbnMuc2xpZGVzUGVyUm93KSArICclJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmNoZWNrUmVzcG9uc2l2ZSA9IGZ1bmN0aW9uKGluaXRpYWwsIGZvcmNlVXBkYXRlKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgYnJlYWtwb2ludCwgdGFyZ2V0QnJlYWtwb2ludCwgcmVzcG9uZFRvV2lkdGgsIHRyaWdnZXJCcmVha3BvaW50ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHNsaWRlcldpZHRoID0gXy4kc2xpZGVyLndpZHRoKCk7XHJcbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgJCh3aW5kb3cpLndpZHRoKCk7XHJcblxyXG4gICAgICAgIGlmIChfLnJlc3BvbmRUbyA9PT0gJ3dpbmRvdycpIHtcclxuICAgICAgICAgICAgcmVzcG9uZFRvV2lkdGggPSB3aW5kb3dXaWR0aDtcclxuICAgICAgICB9IGVsc2UgaWYgKF8ucmVzcG9uZFRvID09PSAnc2xpZGVyJykge1xyXG4gICAgICAgICAgICByZXNwb25kVG9XaWR0aCA9IHNsaWRlcldpZHRoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXy5yZXNwb25kVG8gPT09ICdtaW4nKSB7XHJcbiAgICAgICAgICAgIHJlc3BvbmRUb1dpZHRoID0gTWF0aC5taW4od2luZG93V2lkdGgsIHNsaWRlcldpZHRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggXy5vcHRpb25zLnJlc3BvbnNpdmUgJiZcclxuICAgICAgICAgICAgXy5vcHRpb25zLnJlc3BvbnNpdmUubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIF8ub3B0aW9ucy5yZXNwb25zaXZlICE9PSBudWxsKSB7XHJcblxyXG4gICAgICAgICAgICB0YXJnZXRCcmVha3BvaW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoYnJlYWtwb2ludCBpbiBfLmJyZWFrcG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5icmVha3BvaW50cy5oYXNPd25Qcm9wZXJ0eShicmVha3BvaW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLm9yaWdpbmFsU2V0dGluZ3MubW9iaWxlRmlyc3QgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25kVG9XaWR0aCA8IF8uYnJlYWtwb2ludHNbYnJlYWtwb2ludF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJyZWFrcG9pbnQgPSBfLmJyZWFrcG9pbnRzW2JyZWFrcG9pbnRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRUb1dpZHRoID4gXy5icmVha3BvaW50c1ticmVha3BvaW50XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QnJlYWtwb2ludCA9IF8uYnJlYWtwb2ludHNbYnJlYWtwb2ludF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRCcmVha3BvaW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5hY3RpdmVCcmVha3BvaW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEJyZWFrcG9pbnQgIT09IF8uYWN0aXZlQnJlYWtwb2ludCB8fCBmb3JjZVVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLmFjdGl2ZUJyZWFrcG9pbnQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QnJlYWtwb2ludDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uYnJlYWtwb2ludFNldHRpbmdzW3RhcmdldEJyZWFrcG9pbnRdID09PSAndW5zbGljaycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8udW5zbGljayh0YXJnZXRCcmVha3BvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBfLm9yaWdpbmFsU2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5icmVha3BvaW50U2V0dGluZ3NbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJyZWFrcG9pbnRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgPSBfLm9wdGlvbnMuaW5pdGlhbFNsaWRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5yZWZyZXNoKGluaXRpYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJCcmVha3BvaW50ID0gdGFyZ2V0QnJlYWtwb2ludDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uYWN0aXZlQnJlYWtwb2ludCA9IHRhcmdldEJyZWFrcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uYnJlYWtwb2ludFNldHRpbmdzW3RhcmdldEJyZWFrcG9pbnRdID09PSAndW5zbGljaycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy51bnNsaWNrKHRhcmdldEJyZWFrcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBfLm9yaWdpbmFsU2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmJyZWFrcG9pbnRTZXR0aW5nc1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRCcmVha3BvaW50XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmN1cnJlbnRTbGlkZSA9IF8ub3B0aW9ucy5pbml0aWFsU2xpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5yZWZyZXNoKGluaXRpYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQnJlYWtwb2ludCA9IHRhcmdldEJyZWFrcG9pbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5hY3RpdmVCcmVha3BvaW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5hY3RpdmVCcmVha3BvaW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBfLm9wdGlvbnMgPSBfLm9yaWdpbmFsU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWwgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgPSBfLm9wdGlvbnMuaW5pdGlhbFNsaWRlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfLnJlZnJlc2goaW5pdGlhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckJyZWFrcG9pbnQgPSB0YXJnZXRCcmVha3BvaW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBvbmx5IHRyaWdnZXIgYnJlYWtwb2ludHMgZHVyaW5nIGFuIGFjdHVhbCBicmVhay4gbm90IG9uIGluaXRpYWxpemUuXHJcbiAgICAgICAgICAgIGlmKCAhaW5pdGlhbCAmJiB0cmlnZ2VyQnJlYWtwb2ludCAhPT0gZmFsc2UgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBtb2RpZnkgLSBkcmFnZ2FibGUgYnVnIGZpeFxyXG4gICAgICAgICAgICAgICAgXy50b3VjaE9iamVjdC5jdXJYID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2JyZWFrcG9pbnQnLCBbXywgdHJpZ2dlckJyZWFrcG9pbnRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5jaGFuZ2VTbGlkZSA9IGZ1bmN0aW9uKGV2ZW50LCBkb250QW5pbWF0ZSkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsXHJcbiAgICAgICAgICAgICR0YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLFxyXG4gICAgICAgICAgICBpbmRleE9mZnNldCwgc2xpZGVPZmZzZXQsIHVuZXZlbk9mZnNldDtcclxuXHJcbiAgICAgICAgLy8gSWYgdGFyZ2V0IGlzIGEgbGluaywgcHJldmVudCBkZWZhdWx0IGFjdGlvbi5cclxuICAgICAgICBpZigkdGFyZ2V0LmlzKCdhJykpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHRhcmdldCBpcyBub3QgdGhlIDxsaT4gZWxlbWVudCAoaWU6IGEgY2hpbGQpLCBmaW5kIHRoZSA8bGk+LlxyXG4gICAgICAgIGlmKCEkdGFyZ2V0LmlzKCdsaScpKSB7XHJcbiAgICAgICAgICAgICR0YXJnZXQgPSAkdGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1bmV2ZW5PZmZzZXQgPSAoXy5zbGlkZUNvdW50ICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsICE9PSAwKTtcclxuICAgICAgICBpbmRleE9mZnNldCA9IHVuZXZlbk9mZnNldCA/IDAgOiAoXy5zbGlkZUNvdW50IC0gXy5jdXJyZW50U2xpZGUpICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEubWVzc2FnZSkge1xyXG5cclxuICAgICAgICAgICAgY2FzZSAncHJldmlvdXMnOlxyXG4gICAgICAgICAgICAgICAgc2xpZGVPZmZzZXQgPSBpbmRleE9mZnNldCA9PT0gMCA/IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA6IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLSBpbmRleE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5zbGlkZUhhbmRsZXIoXy5jdXJyZW50U2xpZGUgLSBzbGlkZU9mZnNldCwgZmFsc2UsIGRvbnRBbmltYXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnbmV4dCc6XHJcbiAgICAgICAgICAgICAgICBzbGlkZU9mZnNldCA9IGluZGV4T2Zmc2V0ID09PSAwID8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDogaW5kZXhPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uc2xpZGVIYW5kbGVyKF8uY3VycmVudFNsaWRlICsgc2xpZGVPZmZzZXQsIGZhbHNlLCBkb250QW5pbWF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2luZGV4JzpcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGV2ZW50LmRhdGEuaW5kZXggPT09IDAgPyAwIDpcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4IHx8ICR0YXJnZXQuaW5kZXgoKSAqIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuXHJcbiAgICAgICAgICAgICAgICBfLnNsaWRlSGFuZGxlcihfLmNoZWNrTmF2aWdhYmxlKGluZGV4KSwgZmFsc2UsIGRvbnRBbmltYXRlKTtcclxuICAgICAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oKS50cmlnZ2VyKCdmb2N1cycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5jaGVja05hdmlnYWJsZSA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgbmF2aWdhYmxlcywgcHJldk5hdmlnYWJsZTtcclxuXHJcbiAgICAgICAgbmF2aWdhYmxlcyA9IF8uZ2V0TmF2aWdhYmxlSW5kZXhlcygpO1xyXG4gICAgICAgIHByZXZOYXZpZ2FibGUgPSAwO1xyXG4gICAgICAgIGlmIChpbmRleCA+IG5hdmlnYWJsZXNbbmF2aWdhYmxlcy5sZW5ndGggLSAxXSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IG5hdmlnYWJsZXNbbmF2aWdhYmxlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuIGluIG5hdmlnYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IG5hdmlnYWJsZXNbbl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHByZXZOYXZpZ2FibGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcmV2TmF2aWdhYmxlID0gbmF2aWdhYmxlc1tuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuY2xlYW5VcEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZG90cyAmJiBfLiRkb3RzICE9PSBudWxsKSB7XHJcblxyXG4gICAgICAgICAgICAkKCdsaScsIF8uJGRvdHMpXHJcbiAgICAgICAgICAgICAgICAub2ZmKCdjbGljay5zbGljaycsIF8uY2hhbmdlU2xpZGUpXHJcbiAgICAgICAgICAgICAgICAub2ZmKCdtb3VzZWVudGVyLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgdHJ1ZSkpXHJcbiAgICAgICAgICAgICAgICAub2ZmKCdtb3VzZWxlYXZlLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgZmFsc2UpKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLiRzbGlkZXIub2ZmKCdmb2N1cy5zbGljayBibHVyLnNsaWNrJyk7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYXJyb3dzID09PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuICAgICAgICAgICAgXy4kcHJldkFycm93ICYmIF8uJHByZXZBcnJvdy5vZmYoJ2NsaWNrLnNsaWNrJywgXy5jaGFuZ2VTbGlkZSk7XHJcbiAgICAgICAgICAgIF8uJG5leHRBcnJvdyAmJiBfLiRuZXh0QXJyb3cub2ZmKCdjbGljay5zbGljaycsIF8uY2hhbmdlU2xpZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy4kbGlzdC5vZmYoJ3RvdWNoc3RhcnQuc2xpY2sgbW91c2Vkb3duLnNsaWNrJywgXy5zd2lwZUhhbmRsZXIpO1xyXG4gICAgICAgIF8uJGxpc3Qub2ZmKCd0b3VjaG1vdmUuc2xpY2sgbW91c2Vtb3ZlLnNsaWNrJywgXy5zd2lwZUhhbmRsZXIpO1xyXG4gICAgICAgIF8uJGxpc3Qub2ZmKCd0b3VjaGVuZC5zbGljayBtb3VzZXVwLnNsaWNrJywgXy5zd2lwZUhhbmRsZXIpO1xyXG4gICAgICAgIF8uJGxpc3Qub2ZmKCd0b3VjaGNhbmNlbC5zbGljayBtb3VzZWxlYXZlLnNsaWNrJywgXy5zd2lwZUhhbmRsZXIpO1xyXG5cclxuICAgICAgICBfLiRsaXN0Lm9mZignY2xpY2suc2xpY2snLCBfLmNsaWNrSGFuZGxlcik7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZihfLnZpc2liaWxpdHlDaGFuZ2UsIF8udmlzaWJpbGl0eSk7XHJcblxyXG4gICAgICAgIF8uY2xlYW5VcFNsaWRlRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLiRsaXN0Lm9mZigna2V5ZG93bi5zbGljaycsIF8ua2V5SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmZvY3VzT25TZWxlY3QgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgJChfLiRzbGlkZVRyYWNrKS5jaGlsZHJlbigpLm9mZignY2xpY2suc2xpY2snLCBfLnNlbGVjdEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLm9mZignb3JpZW50YXRpb25jaGFuZ2Uuc2xpY2suc2xpY2stJyArIF8uaW5zdGFuY2VVaWQsIF8ub3JpZW50YXRpb25DaGFuZ2UpO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUuc2xpY2suc2xpY2stJyArIF8uaW5zdGFuY2VVaWQsIF8ucmVzaXplKTtcclxuXHJcbiAgICAgICAgJCgnW2RyYWdnYWJsZSE9dHJ1ZV0nLCBfLiRzbGlkZVRyYWNrKS5vZmYoJ2RyYWdzdGFydCcsIF8ucHJldmVudERlZmF1bHQpO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykub2ZmKCdsb2FkLnNsaWNrLnNsaWNrLScgKyBfLmluc3RhbmNlVWlkLCBfLnNldFBvc2l0aW9uKTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ3JlYWR5LnNsaWNrLnNsaWNrLScgKyBfLmluc3RhbmNlVWlkLCBfLnNldFBvc2l0aW9uKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5jbGVhblVwU2xpZGVFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLiRsaXN0Lm9mZignbW91c2VlbnRlci5zbGljaycsICQucHJveHkoXy5pbnRlcnJ1cHQsIF8sIHRydWUpKTtcclxuICAgICAgICBfLiRsaXN0Lm9mZignbW91c2VsZWF2ZS5zbGljaycsICQucHJveHkoXy5pbnRlcnJ1cHQsIF8sIGZhbHNlKSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuY2xlYW5VcFJvd3MgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLCBvcmlnaW5hbFNsaWRlcztcclxuXHJcbiAgICAgICAgaWYoXy5vcHRpb25zLnJvd3MgPiAxKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsU2xpZGVzID0gXy4kc2xpZGVzLmNoaWxkcmVuKCkuY2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgb3JpZ2luYWxTbGlkZXMucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgXy4kc2xpZGVyLmVtcHR5KCkuYXBwZW5kKG9yaWdpbmFsU2xpZGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5zaG91bGRDbGljayA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24ocmVmcmVzaCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uYXV0b1BsYXlDbGVhcigpO1xyXG5cclxuICAgICAgICBfLnRvdWNoT2JqZWN0ID0ge307XHJcblxyXG4gICAgICAgIF8uY2xlYW5VcEV2ZW50cygpO1xyXG5cclxuICAgICAgICAkKCcuc2xpY2stY2xvbmVkJywgXy4kc2xpZGVyKS5kZXRhY2goKTtcclxuXHJcbiAgICAgICAgaWYgKF8uJGRvdHMpIHtcclxuICAgICAgICAgICAgXy4kZG90cy5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIF8uJHByZXZBcnJvdyAmJiBfLiRwcmV2QXJyb3cubGVuZ3RoICkge1xyXG5cclxuICAgICAgICAgICAgXy4kcHJldkFycm93XHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NsaWNrLWRpc2FibGVkIHNsaWNrLWFycm93IHNsaWNrLWhpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignYXJpYS1oaWRkZW4gYXJpYS1kaXNhYmxlZCB0YWJpbmRleCcpXHJcbiAgICAgICAgICAgICAgICAuY3NzKCdkaXNwbGF5JywnJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIF8uaHRtbEV4cHIudGVzdCggXy5vcHRpb25zLnByZXZBcnJvdyApKSB7XHJcbiAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggXy4kbmV4dEFycm93ICYmIF8uJG5leHRBcnJvdy5sZW5ndGggKSB7XHJcblxyXG4gICAgICAgICAgICBfLiRuZXh0QXJyb3dcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2xpY2stZGlzYWJsZWQgc2xpY2stYXJyb3cgc2xpY2staGlkZGVuJylcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbiBhcmlhLWRpc2FibGVkIHRhYmluZGV4JylcclxuICAgICAgICAgICAgICAgIC5jc3MoJ2Rpc3BsYXknLCcnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggXy5odG1sRXhwci50ZXN0KCBfLm9wdGlvbnMubmV4dEFycm93ICkpIHtcclxuICAgICAgICAgICAgICAgIF8uJG5leHRBcnJvdy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoXy4kc2xpZGVzKSB7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZXNcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2xpY2stc2xpZGUgc2xpY2stYWN0aXZlIHNsaWNrLWNlbnRlciBzbGljay12aXNpYmxlIHNsaWNrLWN1cnJlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2FyaWEtaGlkZGVuJylcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdkYXRhLXNsaWNrLWluZGV4JylcclxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHlsZScsICQodGhpcykuZGF0YSgnb3JpZ2luYWxTdHlsaW5nJykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCk7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmRldGFjaCgpO1xyXG5cclxuICAgICAgICAgICAgXy4kbGlzdC5kZXRhY2goKTtcclxuXHJcbiAgICAgICAgICAgIF8uJHNsaWRlci5hcHBlbmQoXy4kc2xpZGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uY2xlYW5VcFJvd3MoKTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVyLnJlbW92ZUNsYXNzKCdzbGljay1zbGlkZXInKTtcclxuICAgICAgICBfLiRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgXy4kc2xpZGVyLnJlbW92ZUNsYXNzKCdzbGljay1kb3R0ZWQnKTtcclxuXHJcbiAgICAgICAgXy51bnNsaWNrZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZighcmVmcmVzaCkge1xyXG4gICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignZGVzdHJveScsIFtfXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmRpc2FibGVUcmFuc2l0aW9uID0gZnVuY3Rpb24oc2xpZGUpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uID0ge307XHJcblxyXG4gICAgICAgIHRyYW5zaXRpb25bXy50cmFuc2l0aW9uVHlwZV0gPSAnJztcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNzcyh0cmFuc2l0aW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfLiRzbGlkZXMuZXEoc2xpZGUpLmNzcyh0cmFuc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuZmFkZVNsaWRlID0gZnVuY3Rpb24oc2xpZGVJbmRleCwgY2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5jc3NUcmFuc2l0aW9ucyA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgICAgIF8uJHNsaWRlcy5lcShzbGlkZUluZGV4KS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgekluZGV4OiBfLm9wdGlvbnMuekluZGV4XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVzLmVxKHNsaWRlSW5kZXgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgICAgICB9LCBfLm9wdGlvbnMuc3BlZWQsIF8ub3B0aW9ucy5lYXNpbmcsIGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIF8uYXBwbHlUcmFuc2l0aW9uKHNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVzLmVxKHNsaWRlSW5kZXgpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgekluZGV4OiBfLm9wdGlvbnMuekluZGV4XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLmRpc2FibGVUcmFuc2l0aW9uKHNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBfLm9wdGlvbnMuc3BlZWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5mYWRlU2xpZGVPdXQgPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKF8uY3NzVHJhbnNpdGlvbnMgPT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZXMuZXEoc2xpZGVJbmRleCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgekluZGV4OiBfLm9wdGlvbnMuekluZGV4IC0gMlxyXG4gICAgICAgICAgICB9LCBfLm9wdGlvbnMuc3BlZWQsIF8ub3B0aW9ucy5lYXNpbmcpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgXy5hcHBseVRyYW5zaXRpb24oc2xpZGVJbmRleCk7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZXMuZXEoc2xpZGVJbmRleCkuY3NzKHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICB6SW5kZXg6IF8ub3B0aW9ucy56SW5kZXggLSAyXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuZmlsdGVyU2xpZGVzID0gU2xpY2sucHJvdG90eXBlLnNsaWNrRmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKGZpbHRlciAhPT0gbnVsbCkge1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVzQ2FjaGUgPSBfLiRzbGlkZXM7XHJcblxyXG4gICAgICAgICAgICBfLnVubG9hZCgpO1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpO1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVzQ2FjaGUuZmlsdGVyKGZpbHRlcikuYXBwZW5kVG8oXy4kc2xpZGVUcmFjayk7XHJcblxyXG4gICAgICAgICAgICBfLnJlaW5pdCgpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuZm9jdXNIYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgXy4kc2xpZGVyXHJcbiAgICAgICAgICAgIC5vZmYoJ2ZvY3VzLnNsaWNrIGJsdXIuc2xpY2snKVxyXG4gICAgICAgICAgICAub24oJ2ZvY3VzLnNsaWNrIGJsdXIuc2xpY2snLFxyXG4gICAgICAgICAgICAgICAgJyo6bm90KC5zbGljay1hcnJvdyknLCBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciAkc2YgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggXy5vcHRpb25zLnBhdXNlT25Gb2N1cyApIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmZvY3Vzc2VkID0gJHNmLmlzKCc6Zm9jdXMnKTtcclxuICAgICAgICAgICAgICAgICAgICBfLmF1dG9QbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5nZXRDdXJyZW50ID0gU2xpY2sucHJvdG90eXBlLnNsaWNrQ3VycmVudFNsaWRlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuICAgICAgICByZXR1cm4gXy5jdXJyZW50U2xpZGU7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuZ2V0RG90Q291bnQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICB2YXIgYnJlYWtQb2ludCA9IDA7XHJcbiAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHZhciBwYWdlclF0eSA9IDA7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgd2hpbGUgKGJyZWFrUG9pbnQgPCBfLnNsaWRlQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICsrcGFnZXJRdHk7XHJcbiAgICAgICAgICAgICAgICBicmVha1BvaW50ID0gY291bnRlciArIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuICAgICAgICAgICAgICAgIGNvdW50ZXIgKz0gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgPyBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgOiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBwYWdlclF0eSA9IF8uc2xpZGVDb3VudDtcclxuICAgICAgICB9IGVsc2UgaWYgKCFfLm9wdGlvbnMuYXNOYXZGb3IpIHtcclxuICAgICAgICAgICAgcGFnZXJRdHkgPSAxICsgTWF0aC5jZWlsKChfLnNsaWRlQ291bnQgLSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSAvIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKGJyZWFrUG9pbnQgPCBfLnNsaWRlQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICsrcGFnZXJRdHk7XHJcbiAgICAgICAgICAgICAgICBicmVha1BvaW50ID0gY291bnRlciArIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuICAgICAgICAgICAgICAgIGNvdW50ZXIgKz0gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgPyBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgOiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcGFnZXJRdHkgLSAxO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmdldExlZnQgPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgdGFyZ2V0TGVmdCxcclxuICAgICAgICAgICAgdmVydGljYWxIZWlnaHQsXHJcbiAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gMCxcclxuICAgICAgICAgICAgdGFyZ2V0U2xpZGU7XHJcblxyXG4gICAgICAgIF8uc2xpZGVPZmZzZXQgPSAwO1xyXG4gICAgICAgIHZlcnRpY2FsSGVpZ2h0ID0gXy4kc2xpZGVzLmZpcnN0KCkub3V0ZXJIZWlnaHQodHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuICAgICAgICAgICAgICAgIF8uc2xpZGVPZmZzZXQgPSAoXy5zbGlkZVdpZHRoICogXy5vcHRpb25zLnNsaWRlc1RvU2hvdykgKiAtMTtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gKHZlcnRpY2FsSGVpZ2h0ICogXy5vcHRpb25zLnNsaWRlc1RvU2hvdykgKiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVJbmRleCArIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA+IF8uc2xpZGVDb3VudCAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlSW5kZXggPiBfLnNsaWRlQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5zbGlkZU9mZnNldCA9ICgoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAtIChzbGlkZUluZGV4IC0gXy5zbGlkZUNvdW50KSkgKiBfLnNsaWRlV2lkdGgpICogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gKChfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC0gKHNsaWRlSW5kZXggLSBfLnNsaWRlQ291bnQpKSAqIHZlcnRpY2FsSGVpZ2h0KSAqIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uc2xpZGVPZmZzZXQgPSAoKF8uc2xpZGVDb3VudCAlIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCkgKiBfLnNsaWRlV2lkdGgpICogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gKChfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpICogdmVydGljYWxIZWlnaHQpICogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNsaWRlSW5kZXggKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ID4gXy5zbGlkZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBfLnNsaWRlT2Zmc2V0ID0gKChzbGlkZUluZGV4ICsgXy5vcHRpb25zLnNsaWRlc1RvU2hvdykgLSBfLnNsaWRlQ291bnQpICogXy5zbGlkZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxPZmZzZXQgPSAoKHNsaWRlSW5kZXggKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSAtIF8uc2xpZGVDb3VudCkgKiB2ZXJ0aWNhbEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcbiAgICAgICAgICAgIF8uc2xpZGVPZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUgJiYgXy5vcHRpb25zLmluZmluaXRlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIF8uc2xpZGVPZmZzZXQgKz0gXy5zbGlkZVdpZHRoICogTWF0aC5mbG9vcihfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC8gMikgLSBfLnNsaWRlV2lkdGg7XHJcbiAgICAgICAgfSBlbHNlIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLnNsaWRlT2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgXy5zbGlkZU9mZnNldCArPSBfLnNsaWRlV2lkdGggKiBNYXRoLmZsb29yKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldExlZnQgPSAoKHNsaWRlSW5kZXggKiBfLnNsaWRlV2lkdGgpICogLTEpICsgXy5zbGlkZU9mZnNldDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXRMZWZ0ID0gKChzbGlkZUluZGV4ICogdmVydGljYWxIZWlnaHQpICogLTEpICsgdmVydGljYWxPZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnZhcmlhYmxlV2lkdGggPT09IHRydWUpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgPD0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyB8fCBfLm9wdGlvbnMuaW5maW5pdGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRTbGlkZSA9IF8uJHNsaWRlVHJhY2suY2hpbGRyZW4oJy5zbGljay1zbGlkZScpLmVxKHNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0U2xpZGUgPSBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCcuc2xpY2stc2xpZGUnKS5lcShzbGlkZUluZGV4ICsgXy5vcHRpb25zLnNsaWRlc1RvU2hvdyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMucnRsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U2xpZGVbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gKF8uJHNsaWRlVHJhY2sud2lkdGgoKSAtIHRhcmdldFNsaWRlWzBdLm9mZnNldExlZnQgLSB0YXJnZXRTbGlkZS53aWR0aCgpKSAqIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gIDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gdGFyZ2V0U2xpZGVbMF0gPyB0YXJnZXRTbGlkZVswXS5vZmZzZXRMZWZ0ICogLTEgOiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgPD0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyB8fCBfLm9wdGlvbnMuaW5maW5pdGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2xpZGUgPSBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCcuc2xpY2stc2xpZGUnKS5lcShzbGlkZUluZGV4KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2xpZGUgPSBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCcuc2xpY2stc2xpZGUnKS5lcShzbGlkZUluZGV4ICsgXy5vcHRpb25zLnNsaWRlc1RvU2hvdyArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLm9wdGlvbnMucnRsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNsaWRlWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExlZnQgPSAoXy4kc2xpZGVUcmFjay53aWR0aCgpIC0gdGFyZ2V0U2xpZGVbMF0ub2Zmc2V0TGVmdCAtIHRhcmdldFNsaWRlLndpZHRoKCkpICogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9ICAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IHRhcmdldFNsaWRlWzBdID8gdGFyZ2V0U2xpZGVbMF0ub2Zmc2V0TGVmdCAqIC0xIDogMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ICs9IChfLiRsaXN0LndpZHRoKCkgLSB0YXJnZXRTbGlkZS5vdXRlcldpZHRoKCkpIC8gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldExlZnQ7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuZ2V0T3B0aW9uID0gU2xpY2sucHJvdG90eXBlLnNsaWNrR2V0T3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgcmV0dXJuIF8ub3B0aW9uc1tvcHRpb25dO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmdldE5hdmlnYWJsZUluZGV4ZXMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBicmVha1BvaW50ID0gMCxcclxuICAgICAgICAgICAgY291bnRlciA9IDAsXHJcbiAgICAgICAgICAgIGluZGV4ZXMgPSBbXSxcclxuICAgICAgICAgICAgbWF4O1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmluZmluaXRlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBtYXggPSBfLnNsaWRlQ291bnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnJlYWtQb2ludCA9IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCAqIC0xO1xyXG4gICAgICAgICAgICBjb3VudGVyID0gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsICogLTE7XHJcbiAgICAgICAgICAgIG1heCA9IF8uc2xpZGVDb3VudCAqIDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAoYnJlYWtQb2ludCA8IG1heCkge1xyXG4gICAgICAgICAgICBpbmRleGVzLnB1c2goYnJlYWtQb2ludCk7XHJcbiAgICAgICAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xyXG4gICAgICAgICAgICBjb3VudGVyICs9IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ID8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDogXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbmRleGVzO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmdldFNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmdldFNsaWRlQ291bnQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBzbGlkZXNUcmF2ZXJzZWQsIHN3aXBlZFNsaWRlLCBjZW50ZXJPZmZzZXQ7XHJcblxyXG4gICAgICAgIGNlbnRlck9mZnNldCA9IF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlID8gXy5zbGlkZVdpZHRoICogTWF0aC5mbG9vcihfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC8gMikgOiAwO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnN3aXBlVG9TbGlkZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmZpbmQoJy5zbGljay1zbGlkZScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGUub2Zmc2V0TGVmdCAtIGNlbnRlck9mZnNldCArICgkKHNsaWRlKS5vdXRlcldpZHRoKCkgLyAyKSA+IChfLnN3aXBlTGVmdCAqIC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXBlZFNsaWRlID0gc2xpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlc1RyYXZlcnNlZCA9IE1hdGguYWJzKCQoc3dpcGVkU2xpZGUpLmF0dHIoJ2RhdGEtc2xpY2staW5kZXgnKSAtIF8uY3VycmVudFNsaWRlKSB8fCAxO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNsaWRlc1RyYXZlcnNlZDtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuZ29UbyA9IFNsaWNrLnByb3RvdHlwZS5zbGlja0dvVG8gPSBmdW5jdGlvbihzbGlkZSwgZG9udEFuaW1hdGUpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLmNoYW5nZVNsaWRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2luZGV4JyxcclxuICAgICAgICAgICAgICAgIGluZGV4OiBwYXJzZUludChzbGlkZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGRvbnRBbmltYXRlKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oY3JlYXRpb24pIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoISQoXy4kc2xpZGVyKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xyXG5cclxuICAgICAgICAgICAgJChfLiRzbGlkZXIpLmFkZENsYXNzKCdzbGljay1pbml0aWFsaXplZCcpO1xyXG5cclxuICAgICAgICAgICAgXy5idWlsZFJvd3MoKTtcclxuICAgICAgICAgICAgXy5idWlsZE91dCgpO1xyXG4gICAgICAgICAgICBfLnNldFByb3BzKCk7XHJcbiAgICAgICAgICAgIF8uc3RhcnRMb2FkKCk7XHJcbiAgICAgICAgICAgIF8ubG9hZFNsaWRlcigpO1xyXG4gICAgICAgICAgICBfLmluaXRpYWxpemVFdmVudHMoKTtcclxuICAgICAgICAgICAgXy51cGRhdGVBcnJvd3MoKTtcclxuICAgICAgICAgICAgXy51cGRhdGVEb3RzKCk7XHJcbiAgICAgICAgICAgIF8uY2hlY2tSZXNwb25zaXZlKHRydWUpO1xyXG4gICAgICAgICAgICBfLmZvY3VzSGFuZGxlcigpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjcmVhdGlvbikge1xyXG4gICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignaW5pdCcsIFtfXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgXy5pbml0QURBKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5hdXRvcGxheSApIHtcclxuXHJcbiAgICAgICAgICAgIF8ucGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF8uYXV0b1BsYXkoKTtcclxuICAgICAgICAgICAgLy8gMjAxODEwMDUg7KCR6re87ISxIOydtOyKiCA6IOyKpO2BrOumsOumrOuNlCDsgqzsmqnsnpDqsIAg7J6Q64+ZIOyerOyDneuQmOuKlCBTbGlkZSDsmbjsl5Ag7Ja065ak7ZWcIOy9mO2FkOy4oOyXkOuPhCDsoJHqt7ztlZjsp4Ag66q77ZWY7JesIGF1dG9wbGF5IGNhcm91c2Vs7J24IOqyveyasCBhcmlhLWxpdmU9XCJwb2xpdGVcIiA9PiBhcmlhLWxpdmU9XCJvZmZcIuuhnCDsl4XrjbDsnbTtirhcclxuICAgICAgICAgICAgXy4kc2xpZGVyLmZpbmQoJy5zbGljay1saXN0JykuYXR0cignYXJpYS1saXZlJywgJ29mZicpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuaW5pdEFEQSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuICAgICAgICBfLiRzbGlkZXMuYWRkKF8uJHNsaWRlVHJhY2suZmluZCgnLnNsaWNrLWNsb25lZCcpKS5hdHRyKHtcclxuICAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLFxyXG4gICAgICAgICAgICAndGFiaW5kZXgnOiAnLTEnXHJcbiAgICAgICAgfSkuZmluZCgnYSwgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0JykuYXR0cih7XHJcbiAgICAgICAgICAgICd0YWJpbmRleCc6ICctMSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVUcmFjay5hdHRyKCdyb2xlJywgJ2xpc3Rib3gnKTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVzLm5vdChfLiRzbGlkZVRyYWNrLmZpbmQoJy5zbGljay1jbG9uZWQnKSkuZWFjaChmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAncm9sZSc6ICdvcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknOiAnc2xpY2stc2xpZGUnICsgXy5pbnN0YW5jZVVpZCArIGkgKyAnJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKF8uJGRvdHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gbW9kaWZ5IC0gcm9sZT1cInRvb2xiYXJcIiByZW1vdmVcclxuICAgICAgICAgICAgXy4kZG90cy5hdHRyKCdyb2xlJywgJ3RhYmxpc3QnKS5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24oaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyb2xlJzogJ3ByZXNlbnRhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiAnbmF2aWdhdGlvbicgKyBfLmluc3RhbmNlVWlkICsgaSArICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiAnc2xpY2stc2xpZGUnICsgXy5pbnN0YW5jZVVpZCArIGkgKyAnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5maXJzdCgpLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpLmVuZCgpXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnYnV0dG9uJykuYXR0cigncm9sZScsICdidXR0b24nKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIF8uYWN0aXZhdGVBREEoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5pbml0QXJyb3dFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmFycm93cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcbiAgICAgICAgICAgIF8uJHByZXZBcnJvd1xyXG4gICAgICAgICAgICAgICAub2ZmKCdjbGljay5zbGljaycpXHJcbiAgICAgICAgICAgICAgIC5vbignY2xpY2suc2xpY2snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ3ByZXZpb3VzJ1xyXG4gICAgICAgICAgICAgICB9LCBfLmNoYW5nZVNsaWRlKTtcclxuICAgICAgICAgICAgXy4kbmV4dEFycm93XHJcbiAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrLnNsaWNrJylcclxuICAgICAgICAgICAgICAgLm9uKCdjbGljay5zbGljaycsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnbmV4dCdcclxuICAgICAgICAgICAgICAgfSwgXy5jaGFuZ2VTbGlkZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmluaXREb3RFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmRvdHMgPT09IHRydWUgJiYgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xyXG4gICAgICAgICAgICAkKCdsaScsIF8uJGRvdHMpLm9uKCdjbGljay5zbGljaycsIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbmRleCdcclxuICAgICAgICAgICAgfSwgXy5jaGFuZ2VTbGlkZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5kb3RzID09PSB0cnVlICYmIF8ub3B0aW9ucy5wYXVzZU9uRG90c0hvdmVyID09PSB0cnVlICkge1xyXG5cclxuICAgICAgICAgICAgJCgnbGknLCBfLiRkb3RzKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgdHJ1ZSkpXHJcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlbGVhdmUuc2xpY2snLCAkLnByb3h5KF8uaW50ZXJydXB0LCBfLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuaW5pdFNsaWRlRXZlbnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKCBfLm9wdGlvbnMucGF1c2VPbkhvdmVyICkge1xyXG5cclxuICAgICAgICAgICAgXy4kbGlzdC5vbignbW91c2VlbnRlci5zbGljaycsICQucHJveHkoXy5pbnRlcnJ1cHQsIF8sIHRydWUpKTtcclxuICAgICAgICAgICAgXy4kbGlzdC5vbignbW91c2VsZWF2ZS5zbGljaycsICQucHJveHkoXy5pbnRlcnJ1cHQsIF8sIGZhbHNlKSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5pbml0aWFsaXplRXZlbnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgXy5pbml0QXJyb3dFdmVudHMoKTtcclxuXHJcbiAgICAgICAgXy5pbml0RG90RXZlbnRzKCk7XHJcbiAgICAgICAgXy5pbml0U2xpZGVFdmVudHMoKTtcclxuXHJcbiAgICAgICAgXy4kbGlzdC5vbigndG91Y2hzdGFydC5zbGljayBtb3VzZWRvd24uc2xpY2snLCB7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ3N0YXJ0J1xyXG4gICAgICAgIH0sIF8uc3dpcGVIYW5kbGVyKTtcclxuICAgICAgICBfLiRsaXN0Lm9uKCd0b3VjaG1vdmUuc2xpY2sgbW91c2Vtb3ZlLnNsaWNrJywge1xyXG4gICAgICAgICAgICBhY3Rpb246ICdtb3ZlJ1xyXG4gICAgICAgIH0sIF8uc3dpcGVIYW5kbGVyKTtcclxuICAgICAgICBfLiRsaXN0Lm9uKCd0b3VjaGVuZC5zbGljayBtb3VzZXVwLnNsaWNrJywge1xyXG4gICAgICAgICAgICBhY3Rpb246ICdlbmQnXHJcbiAgICAgICAgfSwgXy5zd2lwZUhhbmRsZXIpO1xyXG4gICAgICAgIF8uJGxpc3Qub24oJ3RvdWNoY2FuY2VsLnNsaWNrIG1vdXNlbGVhdmUuc2xpY2snLCB7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2VuZCdcclxuICAgICAgICB9LCBfLnN3aXBlSGFuZGxlcik7XHJcblxyXG4gICAgICAgIF8uJGxpc3Qub24oJ2NsaWNrLnNsaWNrJywgXy5jbGlja0hhbmRsZXIpO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihfLnZpc2liaWxpdHlDaGFuZ2UsICQucHJveHkoXy52aXNpYmlsaXR5LCBfKSk7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLiRsaXN0Lm9uKCdrZXlkb3duLnNsaWNrJywgXy5rZXlIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZm9jdXNPblNlbGVjdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAkKF8uJHNsaWRlVHJhY2spLmNoaWxkcmVuKCkub24oJ2NsaWNrLnNsaWNrJywgXy5zZWxlY3RIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQod2luZG93KS5vbignb3JpZW50YXRpb25jaGFuZ2Uuc2xpY2suc2xpY2stJyArIF8uaW5zdGFuY2VVaWQsICQucHJveHkoXy5vcmllbnRhdGlvbkNoYW5nZSwgXykpO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZS5zbGljay5zbGljay0nICsgXy5pbnN0YW5jZVVpZCwgJC5wcm94eShfLnJlc2l6ZSwgXykpO1xyXG5cclxuICAgICAgICAkKCdbZHJhZ2dhYmxlIT10cnVlXScsIF8uJHNsaWRlVHJhY2spLm9uKCdkcmFnc3RhcnQnLCBfLnByZXZlbnREZWZhdWx0KTtcclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdsb2FkLnNsaWNrLnNsaWNrLScgKyBfLmluc3RhbmNlVWlkLCBfLnNldFBvc2l0aW9uKTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbigncmVhZHkuc2xpY2suc2xpY2stJyArIF8uaW5zdGFuY2VVaWQsIF8uc2V0UG9zaXRpb24pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmluaXRVSSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYXJyb3dzID09PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuXHJcbiAgICAgICAgICAgIF8uJHByZXZBcnJvdy5zaG93KCk7XHJcbiAgICAgICAgICAgIF8uJG5leHRBcnJvdy5zaG93KCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5kb3RzID09PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuXHJcbiAgICAgICAgICAgIF8uJGRvdHMuc2hvdygpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUua2V5SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuICAgICAgICAgLy9Eb250IHNsaWRlIGlmIHRoZSBjdXJzb3IgaXMgaW5zaWRlIHRoZSBmb3JtIGZpZWxkcyBhbmQgYXJyb3cga2V5cyBhcmUgcHJlc3NlZFxyXG4gICAgICAgIGlmKCFldmVudC50YXJnZXQudGFnTmFtZS5tYXRjaCgnVEVYVEFSRUF8SU5QVVR8U0VMRUNUJykpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM3ICYmIF8ub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBfLmNoYW5nZVNsaWRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF8ub3B0aW9ucy5ydGwgPT09IHRydWUgPyAnbmV4dCcgOiAgJ3ByZXZpb3VzJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM5ICYmIF8ub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBfLmNoYW5nZVNsaWRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF8ub3B0aW9ucy5ydGwgPT09IHRydWUgPyAncHJldmlvdXMnIDogJ25leHQnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUubGF6eUxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBsb2FkUmFuZ2UsIGNsb25lUmFuZ2UsIHJhbmdlU3RhcnQsIHJhbmdlRW5kO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2FkSW1hZ2VzKGltYWdlc1Njb3BlKSB7XHJcblxyXG4gICAgICAgICAgICAkKCdpbWdbZGF0YS1sYXp5XScsIGltYWdlc1Njb3BlKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VTb3VyY2UgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtbGF6eScpLFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVG9Mb2FkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaW1hZ2VUb0xvYWQub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHsgb3BhY2l0eTogMCB9LCAxMDAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgaW1hZ2VTb3VyY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0sIDIwMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignZGF0YS1sYXp5JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2xpY2stbG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2xhenlMb2FkZWQnLCBbXywgaW1hZ2UsIGltYWdlU291cmNlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaW1hZ2VUb0xvYWQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0ciggJ2RhdGEtbGF6eScgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoICdzbGljay1sb2FkaW5nJyApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyggJ3NsaWNrLWxhenlsb2FkLWVycm9yJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignbGF6eUxvYWRFcnJvcicsIFsgXywgaW1hZ2UsIGltYWdlU291cmNlIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaW1hZ2VUb0xvYWQuc3JjID0gaW1hZ2VTb3VyY2U7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2VTdGFydCA9IF8uY3VycmVudFNsaWRlICsgKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyICsgMSk7XHJcbiAgICAgICAgICAgICAgICByYW5nZUVuZCA9IHJhbmdlU3RhcnQgKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICsgMjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlU3RhcnQgPSBNYXRoLm1heCgwLCBfLmN1cnJlbnRTbGlkZSAtIChfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC8gMiArIDEpKTtcclxuICAgICAgICAgICAgICAgIHJhbmdlRW5kID0gMiArIChfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC8gMiArIDEpICsgXy5jdXJyZW50U2xpZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByYW5nZVN0YXJ0ID0gXy5vcHRpb25zLmluZmluaXRlID8gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyArIF8uY3VycmVudFNsaWRlIDogXy5jdXJyZW50U2xpZGU7XHJcbiAgICAgICAgICAgIHJhbmdlRW5kID0gTWF0aC5jZWlsKHJhbmdlU3RhcnQgKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KTtcclxuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VTdGFydCA+IDApIHJhbmdlU3RhcnQtLTtcclxuICAgICAgICAgICAgICAgIGlmIChyYW5nZUVuZCA8PSBfLnNsaWRlQ291bnQpIHJhbmdlRW5kKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWRSYW5nZSA9IF8uJHNsaWRlci5maW5kKCcuc2xpY2stc2xpZGUnKS5zbGljZShyYW5nZVN0YXJ0LCByYW5nZUVuZCk7XHJcbiAgICAgICAgbG9hZEltYWdlcyhsb2FkUmFuZ2UpO1xyXG5cclxuICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuICAgICAgICAgICAgY2xvbmVSYW5nZSA9IF8uJHNsaWRlci5maW5kKCcuc2xpY2stc2xpZGUnKTtcclxuICAgICAgICAgICAgbG9hZEltYWdlcyhjbG9uZVJhbmdlKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICBpZiAoXy5jdXJyZW50U2xpZGUgPj0gXy5zbGlkZUNvdW50IC0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xyXG4gICAgICAgICAgICBjbG9uZVJhbmdlID0gXy4kc2xpZGVyLmZpbmQoJy5zbGljay1jbG9uZWQnKS5zbGljZSgwLCBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KTtcclxuICAgICAgICAgICAgbG9hZEltYWdlcyhjbG9uZVJhbmdlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKF8uY3VycmVudFNsaWRlID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNsb25lUmFuZ2UgPSBfLiRzbGlkZXIuZmluZCgnLnNsaWNrLWNsb25lZCcpLnNsaWNlKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKiAtMSk7XHJcbiAgICAgICAgICAgIGxvYWRJbWFnZXMoY2xvbmVSYW5nZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLmxvYWRTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLnNldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBfLiRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3NsaWNrLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgXy5pbml0VUkoKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5sYXp5TG9hZCA9PT0gJ3Byb2dyZXNzaXZlJykge1xyXG4gICAgICAgICAgICBfLnByb2dyZXNzaXZlTGF6eUxvYWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUubmV4dCA9IFNsaWNrLnByb3RvdHlwZS5zbGlja05leHQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLmNoYW5nZVNsaWRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ25leHQnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5vcmllbnRhdGlvbkNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uY2hlY2tSZXNwb25zaXZlKCk7XHJcbiAgICAgICAgXy5zZXRQb3NpdGlvbigpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnBhdXNlID0gU2xpY2sucHJvdG90eXBlLnNsaWNrUGF1c2UgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLmF1dG9QbGF5Q2xlYXIoKTtcclxuICAgICAgICBfLnBhdXNlZCA9IHRydWU7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUucGxheSA9IFNsaWNrLnByb3RvdHlwZS5zbGlja1BsYXkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLmF1dG9QbGF5KCk7XHJcbiAgICAgICAgXy5vcHRpb25zLmF1dG9wbGF5ID0gdHJ1ZTtcclxuICAgICAgICBfLnBhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgIF8uZm9jdXNzZWQgPSBmYWxzZTtcclxuICAgICAgICBfLmludGVycnVwdGVkID0gZmFsc2U7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUucG9zdFNsaWRlID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiggIV8udW5zbGlja2VkICkge1xyXG5cclxuICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2FmdGVyQ2hhbmdlJywgW18sIGluZGV4XSk7XHJcblxyXG4gICAgICAgICAgICBfLmFuaW1hdGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgXy5zZXRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgXy5zd2lwZUxlZnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBfLm9wdGlvbnMuYXV0b3BsYXkgKSB7XHJcbiAgICAgICAgICAgICAgICBfLmF1dG9QbGF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgXy5pbml0QURBKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnByZXYgPSBTbGljay5wcm90b3R5cGUuc2xpY2tQcmV2ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgXy5jaGFuZ2VTbGlkZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdwcmV2aW91cydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5wcm9ncmVzc2l2ZUxhenlMb2FkID0gZnVuY3Rpb24oIHRyeUNvdW50ICkge1xyXG5cclxuICAgICAgICB0cnlDb3VudCA9IHRyeUNvdW50IHx8IDE7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgJGltZ3NUb0xvYWQgPSAkKCAnaW1nW2RhdGEtbGF6eV0nLCBfLiRzbGlkZXIgKSxcclxuICAgICAgICAgICAgaW1hZ2UsXHJcbiAgICAgICAgICAgIGltYWdlU291cmNlLFxyXG4gICAgICAgICAgICBpbWFnZVRvTG9hZDtcclxuXHJcbiAgICAgICAgaWYgKCAkaW1nc1RvTG9hZC5sZW5ndGggKSB7XHJcblxyXG4gICAgICAgICAgICBpbWFnZSA9ICRpbWdzVG9Mb2FkLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGltYWdlU291cmNlID0gaW1hZ2UuYXR0cignZGF0YS1sYXp5Jyk7XHJcbiAgICAgICAgICAgIGltYWdlVG9Mb2FkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgICAgICAgICBpbWFnZVRvTG9hZC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCAnc3JjJywgaW1hZ2VTb3VyY2UgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdkYXRhLWxhenknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2xpY2stbG9hZGluZycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggXy5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0ID09PSB0cnVlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uc2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignbGF6eUxvYWRlZCcsIFsgXywgaW1hZ2UsIGltYWdlU291cmNlIF0pO1xyXG4gICAgICAgICAgICAgICAgXy5wcm9ncmVzc2l2ZUxhenlMb2FkKCk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaW1hZ2VUb0xvYWQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdHJ5Q291bnQgPCAzICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiB0cnkgdG8gbG9hZCB0aGUgaW1hZ2UgMyB0aW1lcyxcclxuICAgICAgICAgICAgICAgICAgICAgKiBsZWF2ZSBhIHNsaWdodCBkZWxheSBzbyB3ZSBkb24ndCBnZXRcclxuICAgICAgICAgICAgICAgICAgICAgKiBzZXJ2ZXJzIGJsb2NraW5nIHRoZSByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnByb2dyZXNzaXZlTGF6eUxvYWQoIHRyeUNvdW50ICsgMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCAnZGF0YS1sYXp5JyApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyggJ3NsaWNrLWxvYWRpbmcnIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCAnc2xpY2stbGF6eWxvYWQtZXJyb3InICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdsYXp5TG9hZEVycm9yJywgWyBfLCBpbWFnZSwgaW1hZ2VTb3VyY2UgXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF8ucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpbWFnZVRvTG9hZC5zcmMgPSBpbWFnZVNvdXJjZTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdhbGxJbWFnZXNMb2FkZWQnLCBbIF8gXSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLmNoZWNrRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBpc0Jsb2NrRnVsbFNjcmVlbjtcclxuICAgICAgICBpZihkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlzQmxvY2tGdWxsU2NyZWVuID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoXCJleGl0RnVsbHNjcmVlblwiIGluIGRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgaXNCbG9ja0Z1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcIndlYmtpdEV4aXRGdWxsc2NyZWVuXCIgaW4gZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICBpc0Jsb2NrRnVsbFNjcmVlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwibW96Q2FuY2VsRnVsbFNjcmVlblwiIGluIGRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICBpc0Jsb2NrRnVsbFNjcmVlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwibXNFeGl0RnVsbHNjcmVlblwiIGluIGRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICBpc0Jsb2NrRnVsbFNjcmVlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc0Jsb2NrRnVsbFNjcmVlbjtcclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiggaW5pdGlhbGl6aW5nICkge1xyXG4gICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3ZpZGVvLWxheWVyLW9wZW4nKSAmJiBTbGljay5jaGVja0Z1bGxTY3JlZW4oKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOuqqOuwlOydvCDtlbTsg4Hrj4Tsl5DshJwgQ29tbW9uIENhcm91c2VsIENvbnRhaW5lcuydmCBJbm5lciBDb21wb25lbnQg67mE65SU7Jik7J2YIO2SgOyKpO2BrOumsOydhCDtlZjrqbQg7KCE7LK07ZmU66m07J20IOq6vOyngOuKlCDsnbTsiogg7IiY7KCVXHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcywgY3VycmVudFNsaWRlLCBsYXN0VmlzaWJsZUluZGV4O1xyXG5cclxuICAgICAgICBsYXN0VmlzaWJsZUluZGV4ID0gXy5zbGlkZUNvdW50IC0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcclxuXHJcbiAgICAgICAgLy8gaW4gbm9uLWluZmluaXRlIHNsaWRlcnMsIHdlIGRvbid0IHdhbnQgdG8gZ28gcGFzdCB0aGVcclxuICAgICAgICAvLyBsYXN0IHZpc2libGUgaW5kZXguXHJcbiAgICAgICAgaWYoICFfLm9wdGlvbnMuaW5maW5pdGUgJiYgKCBfLmN1cnJlbnRTbGlkZSA+IGxhc3RWaXNpYmxlSW5kZXggKSkge1xyXG4gICAgICAgICAgICBfLmN1cnJlbnRTbGlkZSA9IGxhc3RWaXNpYmxlSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBsZXNzIHNsaWRlcyB0aGFuIHRvIHNob3csIGdvIHRvIHN0YXJ0LlxyXG4gICAgICAgIGlmICggXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKSB7XHJcbiAgICAgICAgICAgIF8uY3VycmVudFNsaWRlID0gMDtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50U2xpZGUgPSBfLmN1cnJlbnRTbGlkZTtcclxuXHJcbiAgICAgICAgXy5kZXN0cm95KHRydWUpO1xyXG5cclxuICAgICAgICAkLmV4dGVuZChfLCBfLmluaXRpYWxzLCB7IGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlIH0pO1xyXG5cclxuICAgICAgICBfLmluaXQoKTtcclxuXHJcbiAgICAgICAgaWYoICFpbml0aWFsaXppbmcgKSB7XHJcblxyXG4gICAgICAgICAgICBfLmNoYW5nZVNsaWRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaW5kZXgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBjdXJyZW50U2xpZGVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUucmVnaXN0ZXJCcmVha3BvaW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsIGJyZWFrcG9pbnQsIGN1cnJlbnRCcmVha3BvaW50LCBsLFxyXG4gICAgICAgICAgICByZXNwb25zaXZlU2V0dGluZ3MgPSBfLm9wdGlvbnMucmVzcG9uc2l2ZSB8fCBudWxsO1xyXG5cclxuICAgICAgICBpZiAoICQudHlwZShyZXNwb25zaXZlU2V0dGluZ3MpID09PSAnYXJyYXknICYmIHJlc3BvbnNpdmVTZXR0aW5ncy5sZW5ndGggKSB7XHJcblxyXG4gICAgICAgICAgICBfLnJlc3BvbmRUbyA9IF8ub3B0aW9ucy5yZXNwb25kVG8gfHwgJ3dpbmRvdyc7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBicmVha3BvaW50IGluIHJlc3BvbnNpdmVTZXR0aW5ncyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBsID0gXy5icmVha3BvaW50cy5sZW5ndGgtMTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRCcmVha3BvaW50ID0gcmVzcG9uc2l2ZVNldHRpbmdzW2JyZWFrcG9pbnRdLmJyZWFrcG9pbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNpdmVTZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShicmVha3BvaW50KSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGJyZWFrcG9pbnRzIGFuZCBjdXQgb3V0IGFueSBleGlzdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uZXMgd2l0aCB0aGUgc2FtZSBicmVha3BvaW50IG51bWJlciwgd2UgZG9uJ3Qgd2FudCBkdXBlcy5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSggbCA+PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggXy5icmVha3BvaW50c1tsXSAmJiBfLmJyZWFrcG9pbnRzW2xdID09PSBjdXJyZW50QnJlYWtwb2ludCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uYnJlYWtwb2ludHMuc3BsaWNlKGwsMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXy5icmVha3BvaW50cy5wdXNoKGN1cnJlbnRCcmVha3BvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICBfLmJyZWFrcG9pbnRTZXR0aW5nc1tjdXJyZW50QnJlYWtwb2ludF0gPSByZXNwb25zaXZlU2V0dGluZ3NbYnJlYWtwb2ludF0uc2V0dGluZ3M7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgXy5icmVha3BvaW50cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoIF8ub3B0aW9ucy5tb2JpbGVGaXJzdCApID8gYS1iIDogYi1hO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnJlaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlcyA9XHJcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2tcclxuICAgICAgICAgICAgICAgIC5jaGlsZHJlbihfLm9wdGlvbnMuc2xpZGUpXHJcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLXNsaWRlJyk7XHJcblxyXG4gICAgICAgIF8uc2xpZGVDb3VudCA9IF8uJHNsaWRlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmIChfLmN1cnJlbnRTbGlkZSA+PSBfLnNsaWRlQ291bnQgJiYgXy5jdXJyZW50U2xpZGUgIT09IDApIHtcclxuICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgPSBfLmN1cnJlbnRTbGlkZSAtIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLnNsaWRlQ291bnQgPD0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xyXG4gICAgICAgICAgICBfLmN1cnJlbnRTbGlkZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLnJlZ2lzdGVyQnJlYWtwb2ludHMoKTtcclxuXHJcbiAgICAgICAgXy5zZXRQcm9wcygpO1xyXG4gICAgICAgIF8uc2V0dXBJbmZpbml0ZSgpO1xyXG4gICAgICAgIF8uYnVpbGRBcnJvd3MoKTtcclxuICAgICAgICBfLnVwZGF0ZUFycm93cygpO1xyXG4gICAgICAgIF8uaW5pdEFycm93RXZlbnRzKCk7XHJcbiAgICAgICAgXy5idWlsZERvdHMoKTtcclxuICAgICAgICBfLnVwZGF0ZURvdHMoKTtcclxuICAgICAgICBfLmluaXREb3RFdmVudHMoKTtcclxuICAgICAgICBfLmNsZWFuVXBTbGlkZUV2ZW50cygpO1xyXG4gICAgICAgIF8uaW5pdFNsaWRlRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIF8uY2hlY2tSZXNwb25zaXZlKGZhbHNlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mb2N1c09uU2VsZWN0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICQoXy4kc2xpZGVUcmFjaykuY2hpbGRyZW4oKS5vbignY2xpY2suc2xpY2snLCBfLnNlbGVjdEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy5zZXRTbGlkZUNsYXNzZXModHlwZW9mIF8uY3VycmVudFNsaWRlID09PSAnbnVtYmVyJyA/IF8uY3VycmVudFNsaWRlIDogMCk7XHJcblxyXG4gICAgICAgIF8uc2V0UG9zaXRpb24oKTtcclxuICAgICAgICBfLmZvY3VzSGFuZGxlcigpO1xyXG5cclxuICAgICAgICBfLnBhdXNlZCA9ICFfLm9wdGlvbnMuYXV0b3BsYXk7XHJcbiAgICAgICAgXy5hdXRvUGxheSgpO1xyXG5cclxuICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcigncmVJbml0JywgW19dKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgIT09IF8ud2luZG93V2lkdGgpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF8ud2luZG93RGVsYXkpO1xyXG4gICAgICAgICAgICBfLndpbmRvd0RlbGF5ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfLndpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICBfLmNoZWNrUmVzcG9uc2l2ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYoICFfLnVuc2xpY2tlZCApIHsgXy5zZXRQb3NpdGlvbigpOyB9XHJcbiAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5yZW1vdmVTbGlkZSA9IFNsaWNrLnByb3RvdHlwZS5zbGlja1JlbW92ZSA9IGZ1bmN0aW9uKGluZGV4LCByZW1vdmVCZWZvcmUsIHJlbW92ZUFsbCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YoaW5kZXgpID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgcmVtb3ZlQmVmb3JlID0gaW5kZXg7XHJcbiAgICAgICAgICAgIGluZGV4ID0gcmVtb3ZlQmVmb3JlID09PSB0cnVlID8gMCA6IF8uc2xpZGVDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSByZW1vdmVCZWZvcmUgPT09IHRydWUgPyAtLWluZGV4IDogaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDwgMSB8fCBpbmRleCA8IDAgfHwgaW5kZXggPiBfLnNsaWRlQ291bnQgLSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8udW5sb2FkKCk7XHJcblxyXG4gICAgICAgIGlmIChyZW1vdmVBbGwgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jaGlsZHJlbigpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5lcShpbmRleCkucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLiRzbGlkZXMgPSBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSk7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVUcmFjay5hcHBlbmQoXy4kc2xpZGVzKTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVzQ2FjaGUgPSBfLiRzbGlkZXM7XHJcblxyXG4gICAgICAgIF8ucmVpbml0KCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2V0Q1NTID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBwb3NpdGlvblByb3BzID0ge30sXHJcbiAgICAgICAgICAgIHgsIHk7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMucnRsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gLXBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ID0gXy5wb3NpdGlvblByb3AgPT0gJ2xlZnQnID8gTWF0aC5jZWlsKHBvc2l0aW9uKSArICdweCcgOiAnMHB4JztcclxuICAgICAgICB5ID0gXy5wb3NpdGlvblByb3AgPT0gJ3RvcCcgPyBNYXRoLmNlaWwocG9zaXRpb24pICsgJ3B4JyA6ICcwcHgnO1xyXG5cclxuICAgICAgICBwb3NpdGlvblByb3BzW18ucG9zaXRpb25Qcm9wXSA9IHBvc2l0aW9uO1xyXG5cclxuICAgICAgICBpZiAoXy50cmFuc2Zvcm1zRW5hYmxlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MocG9zaXRpb25Qcm9wcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcG9zaXRpb25Qcm9wcyA9IHt9O1xyXG4gICAgICAgICAgICBpZiAoXy5jc3NUcmFuc2l0aW9ucyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uUHJvcHNbXy5hbmltVHlwZV0gPSAndHJhbnNsYXRlKCcgKyB4ICsgJywgJyArIHkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNzcyhwb3NpdGlvblByb3BzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uUHJvcHNbXy5hbmltVHlwZV0gPSAndHJhbnNsYXRlM2QoJyArIHggKyAnLCAnICsgeSArICcsIDBweCknO1xyXG4gICAgICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MocG9zaXRpb25Qcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgXy4kbGlzdC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICgnMHB4ICcgKyBfLm9wdGlvbnMuY2VudGVyUGFkZGluZylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgXy4kbGlzdC5oZWlnaHQoXy4kc2xpZGVzLmZpcnN0KCkub3V0ZXJIZWlnaHQodHJ1ZSkgKiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KTtcclxuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBfLiRsaXN0LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogKF8ub3B0aW9ucy5jZW50ZXJQYWRkaW5nICsgJyAwcHgnKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8ubGlzdFdpZHRoID0gXy4kbGlzdC53aWR0aCgpO1xyXG4gICAgICAgIF8ubGlzdEhlaWdodCA9IF8uJGxpc3QuaGVpZ2h0KCk7XHJcblxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsID09PSBmYWxzZSAmJiBfLm9wdGlvbnMudmFyaWFibGVXaWR0aCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgXy5zbGlkZVdpZHRoID0gTWF0aC5jZWlsKF8ubGlzdFdpZHRoIC8gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyk7XHJcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2sud2lkdGgoTWF0aC5jZWlsKChfLnNsaWRlV2lkdGggKiBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCcuc2xpY2stc2xpZGUnKS5sZW5ndGgpKSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoXy5vcHRpb25zLnZhcmlhYmxlV2lkdGggPT09IHRydWUpIHtcclxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay53aWR0aCg1MDAwICogXy5zbGlkZUNvdW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfLnNsaWRlV2lkdGggPSBNYXRoLmNlaWwoXy5saXN0V2lkdGgpO1xyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmhlaWdodChNYXRoLmNlaWwoKF8uJHNsaWRlcy5maXJzdCgpLm91dGVySGVpZ2h0KHRydWUpICogXy4kc2xpZGVUcmFjay5jaGlsZHJlbignLnNsaWNrLXNsaWRlJykubGVuZ3RoKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG9mZnNldCA9IF8uJHNsaWRlcy5maXJzdCgpLm91dGVyV2lkdGgodHJ1ZSkgLSBfLiRzbGlkZXMuZmlyc3QoKS53aWR0aCgpO1xyXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmFyaWFibGVXaWR0aCA9PT0gZmFsc2UpIF8uJHNsaWRlVHJhY2suY2hpbGRyZW4oJy5zbGljay1zbGlkZScpLndpZHRoKF8uc2xpZGVXaWR0aCAtIG9mZnNldCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2V0RmFkZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsXHJcbiAgICAgICAgICAgIHRhcmdldExlZnQ7XHJcblxyXG4gICAgICAgIF8uJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRhcmdldExlZnQgPSAoXy5zbGlkZVdpZHRoICogaW5kZXgpICogLTE7XHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMucnRsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHRhcmdldExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogXy5vcHRpb25zLnpJbmRleCAtIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdGFyZ2V0TGVmdCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiBfLm9wdGlvbnMuekluZGV4IC0gMixcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBfLiRzbGlkZXMuZXEoXy5jdXJyZW50U2xpZGUpLmNzcyh7XHJcbiAgICAgICAgICAgIHpJbmRleDogXy5vcHRpb25zLnpJbmRleCAtIDEsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyA9PT0gMSAmJiBfLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQgPT09IHRydWUgJiYgXy5vcHRpb25zLnZlcnRpY2FsID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SGVpZ2h0ID0gXy4kc2xpZGVzLmVxKF8uY3VycmVudFNsaWRlKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgICAgICAgICAgXy4kbGlzdC5jc3MoJ2hlaWdodCcsIHRhcmdldEhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnNldE9wdGlvbiA9XHJcbiAgICBTbGljay5wcm90b3R5cGUuc2xpY2tTZXRPcHRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYWNjZXB0cyBhcmd1bWVudHMgaW4gZm9ybWF0IG9mOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIC0gZm9yIGNoYW5naW5nIGEgc2luZ2xlIG9wdGlvbidzIHZhbHVlOlxyXG4gICAgICAgICAqICAgICAuc2xpY2soXCJzZXRPcHRpb25cIiwgb3B0aW9uLCB2YWx1ZSwgcmVmcmVzaCApXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAgLSBmb3IgY2hhbmdpbmcgYSBzZXQgb2YgcmVzcG9uc2l2ZSBvcHRpb25zOlxyXG4gICAgICAgICAqICAgICAuc2xpY2soXCJzZXRPcHRpb25cIiwgJ3Jlc3BvbnNpdmUnLCBbe30sIC4uLl0sIHJlZnJlc2ggKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIC0gZm9yIHVwZGF0aW5nIG11bHRpcGxlIHZhbHVlcyBhdCBvbmNlIChub3QgcmVzcG9uc2l2ZSlcclxuICAgICAgICAgKiAgICAgLnNsaWNrKFwic2V0T3B0aW9uXCIsIHsgJ29wdGlvbic6IHZhbHVlLCAuLi4gfSwgcmVmcmVzaCApXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcywgbCwgaXRlbSwgb3B0aW9uLCB2YWx1ZSwgcmVmcmVzaCA9IGZhbHNlLCB0eXBlO1xyXG5cclxuICAgICAgICBpZiggJC50eXBlKCBhcmd1bWVudHNbMF0gKSA9PT0gJ29iamVjdCcgKSB7XHJcblxyXG4gICAgICAgICAgICBvcHRpb24gPSAgYXJndW1lbnRzWzBdO1xyXG4gICAgICAgICAgICByZWZyZXNoID0gYXJndW1lbnRzWzFdO1xyXG4gICAgICAgICAgICB0eXBlID0gJ211bHRpcGxlJztcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICggJC50eXBlKCBhcmd1bWVudHNbMF0gKSA9PT0gJ3N0cmluZycgKSB7XHJcblxyXG4gICAgICAgICAgICBvcHRpb24gPSAgYXJndW1lbnRzWzBdO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGFyZ3VtZW50c1sxXTtcclxuICAgICAgICAgICAgcmVmcmVzaCA9IGFyZ3VtZW50c1syXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggYXJndW1lbnRzWzBdID09PSAncmVzcG9uc2l2ZScgJiYgJC50eXBlKCBhcmd1bWVudHNbMV0gKSA9PT0gJ2FycmF5JyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJ3Jlc3BvbnNpdmUnO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIGFyZ3VtZW50c1sxXSAhPT0gJ3VuZGVmaW5lZCcgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICdzaW5nbGUnO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdHlwZSA9PT0gJ3NpbmdsZScgKSB7XHJcblxyXG4gICAgICAgICAgICBfLm9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xyXG5cclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gJ211bHRpcGxlJyApIHtcclxuXHJcbiAgICAgICAgICAgICQuZWFjaCggb3B0aW9uICwgZnVuY3Rpb24oIG9wdCwgdmFsICkge1xyXG5cclxuICAgICAgICAgICAgICAgIF8ub3B0aW9uc1tvcHRdID0gdmFsO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKCB0eXBlID09PSAncmVzcG9uc2l2ZScgKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBpdGVtIGluIHZhbHVlICkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAkLnR5cGUoIF8ub3B0aW9ucy5yZXNwb25zaXZlICkgIT09ICdhcnJheScgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucy5yZXNwb25zaXZlID0gWyB2YWx1ZVtpdGVtXSBdO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGwgPSBfLm9wdGlvbnMucmVzcG9uc2l2ZS5sZW5ndGgtMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSByZXNwb25zaXZlIG9iamVjdCBhbmQgc3BsaWNlIG91dCBkdXBsaWNhdGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKCBsID49IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggXy5vcHRpb25zLnJlc3BvbnNpdmVbbF0uYnJlYWtwb2ludCA9PT0gdmFsdWVbaXRlbV0uYnJlYWtwb2ludCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLm9wdGlvbnMucmVzcG9uc2l2ZS5zcGxpY2UobCwxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGwtLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLm9wdGlvbnMucmVzcG9uc2l2ZS5wdXNoKCB2YWx1ZVtpdGVtXSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHJlZnJlc2ggKSB7XHJcblxyXG4gICAgICAgICAgICBfLnVubG9hZCgpO1xyXG4gICAgICAgICAgICBfLnJlaW5pdCgpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLnNldERpbWVuc2lvbnMoKTtcclxuXHJcbiAgICAgICAgXy5zZXRIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBfLnNldENTUyhfLmdldExlZnQoXy5jdXJyZW50U2xpZGUpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfLnNldEZhZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdzZXRQb3NpdGlvbicsIFtfXSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2V0UHJvcHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBib2R5U3R5bGUgPSBkb2N1bWVudC5ib2R5LnN0eWxlO1xyXG5cclxuICAgICAgICBfLnBvc2l0aW9uUHJvcCA9IF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gdHJ1ZSA/ICd0b3AnIDogJ2xlZnQnO1xyXG5cclxuICAgICAgICBpZiAoXy5wb3NpdGlvblByb3AgPT09ICd0b3AnKSB7XHJcbiAgICAgICAgICAgIF8uJHNsaWRlci5hZGRDbGFzcygnc2xpY2stdmVydGljYWwnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfLiRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3NsaWNrLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYm9keVN0eWxlLldlYmtpdFRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICBib2R5U3R5bGUuTW96VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIGJvZHlTdHlsZS5tc1RyYW5zaXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLnVzZUNTUyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgXy5jc3NUcmFuc2l0aW9ucyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggXy5vcHRpb25zLmZhZGUgKSB7XHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIF8ub3B0aW9ucy56SW5kZXggPT09ICdudW1iZXInICkge1xyXG4gICAgICAgICAgICAgICAgaWYoIF8ub3B0aW9ucy56SW5kZXggPCAzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucy56SW5kZXggPSAzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgXy5vcHRpb25zLnpJbmRleCA9IF8uZGVmYXVsdHMuekluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYm9keVN0eWxlLk9UcmFuc2Zvcm0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBfLmFuaW1UeXBlID0gJ09UcmFuc2Zvcm0nO1xyXG4gICAgICAgICAgICBfLnRyYW5zZm9ybVR5cGUgPSAnLW8tdHJhbnNmb3JtJztcclxuICAgICAgICAgICAgXy50cmFuc2l0aW9uVHlwZSA9ICdPVHJhbnNpdGlvbic7XHJcbiAgICAgICAgICAgIGlmIChib2R5U3R5bGUucGVyc3BlY3RpdmVQcm9wZXJ0eSA9PT0gdW5kZWZpbmVkICYmIGJvZHlTdHlsZS53ZWJraXRQZXJzcGVjdGl2ZSA9PT0gdW5kZWZpbmVkKSBfLmFuaW1UeXBlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChib2R5U3R5bGUuTW96VHJhbnNmb3JtICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgXy5hbmltVHlwZSA9ICdNb3pUcmFuc2Zvcm0nO1xyXG4gICAgICAgICAgICBfLnRyYW5zZm9ybVR5cGUgPSAnLW1vei10cmFuc2Zvcm0nO1xyXG4gICAgICAgICAgICBfLnRyYW5zaXRpb25UeXBlID0gJ01velRyYW5zaXRpb24nO1xyXG4gICAgICAgICAgICBpZiAoYm9keVN0eWxlLnBlcnNwZWN0aXZlUHJvcGVydHkgPT09IHVuZGVmaW5lZCAmJiBib2R5U3R5bGUuTW96UGVyc3BlY3RpdmUgPT09IHVuZGVmaW5lZCkgXy5hbmltVHlwZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm9keVN0eWxlLndlYmtpdFRyYW5zZm9ybSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIF8uYW5pbVR5cGUgPSAnd2Via2l0VHJhbnNmb3JtJztcclxuICAgICAgICAgICAgXy50cmFuc2Zvcm1UeXBlID0gJy13ZWJraXQtdHJhbnNmb3JtJztcclxuICAgICAgICAgICAgXy50cmFuc2l0aW9uVHlwZSA9ICd3ZWJraXRUcmFuc2l0aW9uJztcclxuICAgICAgICAgICAgaWYgKGJvZHlTdHlsZS5wZXJzcGVjdGl2ZVByb3BlcnR5ID09PSB1bmRlZmluZWQgJiYgYm9keVN0eWxlLndlYmtpdFBlcnNwZWN0aXZlID09PSB1bmRlZmluZWQpIF8uYW5pbVR5cGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvZHlTdHlsZS5tc1RyYW5zZm9ybSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIF8uYW5pbVR5cGUgPSAnbXNUcmFuc2Zvcm0nO1xyXG4gICAgICAgICAgICBfLnRyYW5zZm9ybVR5cGUgPSAnLW1zLXRyYW5zZm9ybSc7XHJcbiAgICAgICAgICAgIF8udHJhbnNpdGlvblR5cGUgPSAnbXNUcmFuc2l0aW9uJztcclxuICAgICAgICAgICAgaWYgKGJvZHlTdHlsZS5tc1RyYW5zZm9ybSA9PT0gdW5kZWZpbmVkKSBfLmFuaW1UeXBlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChib2R5U3R5bGUudHJhbnNmb3JtICE9PSB1bmRlZmluZWQgJiYgXy5hbmltVHlwZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgXy5hbmltVHlwZSA9ICd0cmFuc2Zvcm0nO1xyXG4gICAgICAgICAgICBfLnRyYW5zZm9ybVR5cGUgPSAndHJhbnNmb3JtJztcclxuICAgICAgICAgICAgXy50cmFuc2l0aW9uVHlwZSA9ICd0cmFuc2l0aW9uJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXy50cmFuc2Zvcm1zRW5hYmxlZCA9IF8ub3B0aW9ucy51c2VUcmFuc2Zvcm0gJiYgKF8uYW5pbVR5cGUgIT09IG51bGwgJiYgXy5hbmltVHlwZSAhPT0gZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnNldFNsaWRlQ2xhc3NlcyA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgY2VudGVyT2Zmc2V0LCBhbGxTbGlkZXMsIGluZGV4T2Zmc2V0LCByZW1haW5kZXI7XHJcblxyXG4gICAgICAgIGFsbFNsaWRlcyA9IF8uJHNsaWRlclxyXG4gICAgICAgICAgICAuZmluZCgnLnNsaWNrLXNsaWRlJylcclxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1hY3RpdmUgc2xpY2stY2VudGVyIHNsaWNrLWN1cnJlbnQnKVxyXG4gICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICBfLiRzbGlkZXNcclxuICAgICAgICAgICAgLmVxKGluZGV4KVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWN1cnJlbnQnKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XHJcblxyXG4gICAgICAgICAgICBjZW50ZXJPZmZzZXQgPSBNYXRoLmZsb29yKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IHRydWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gY2VudGVyT2Zmc2V0ICYmIGluZGV4IDw9IChfLnNsaWRlQ291bnQgLSAxKSAtIGNlbnRlck9mZnNldCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLiRzbGlkZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKGluZGV4IC0gY2VudGVyT2Zmc2V0LCBpbmRleCArIGNlbnRlck9mZnNldCArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhPZmZzZXQgPSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICsgaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsU2xpZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleE9mZnNldCAtIGNlbnRlck9mZnNldCArIDEsIGluZGV4T2Zmc2V0ICsgY2VudGVyT2Zmc2V0ICsgMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdzbGljay1hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFsbFNsaWRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXEoYWxsU2xpZGVzLmxlbmd0aCAtIDEgLSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWNlbnRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IF8uc2xpZGVDb3VudCAtIDEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsU2xpZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcShfLm9wdGlvbnMuc2xpZGVzVG9TaG93KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWNlbnRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF8uJHNsaWRlc1xyXG4gICAgICAgICAgICAgICAgLmVxKGluZGV4KVxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdzbGljay1jZW50ZXInKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDw9IChfLnNsaWRlQ291bnQgLSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSkge1xyXG5cclxuICAgICAgICAgICAgICAgIF8uJHNsaWRlc1xyXG4gICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleCwgaW5kZXggKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxsU2xpZGVzLmxlbmd0aCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgYWxsU2xpZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdzbGljay1hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZW1haW5kZXIgPSBfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93O1xyXG4gICAgICAgICAgICAgICAgaW5kZXhPZmZzZXQgPSBfLm9wdGlvbnMuaW5maW5pdGUgPT09IHRydWUgPyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICsgaW5kZXggOiBpbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyA9PSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgJiYgKF8uc2xpZGVDb3VudCAtIGluZGV4KSA8IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsU2xpZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleE9mZnNldCAtIChfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC0gcmVtYWluZGVyKSwgaW5kZXhPZmZzZXQgKyByZW1haW5kZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsU2xpZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleE9mZnNldCwgaW5kZXhPZmZzZXQgKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmxhenlMb2FkID09PSAnb25kZW1hbmQnKSB7XHJcbiAgICAgICAgICAgIF8ubGF6eUxvYWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2V0dXBJbmZpbml0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXMsXHJcbiAgICAgICAgICAgIGksIHNsaWRlSW5kZXgsIGluZmluaXRlQ291bnQ7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZmFkZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLm9wdGlvbnMuY2VudGVyTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gdHJ1ZSAmJiBfLm9wdGlvbnMuZmFkZSA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlSW5kZXggPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZUNvdW50ID0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyArIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZmluaXRlQ291bnQgPSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IF8uc2xpZGVDb3VudDsgaSA+IChfLnNsaWRlQ291bnQgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZUNvdW50KTsgaSAtPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleCA9IGkgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXy4kc2xpZGVzW3NsaWRlSW5kZXhdKS5jbG9uZSh0cnVlKS5hdHRyKCdpZCcsICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS1zbGljay1pbmRleCcsIHNsaWRlSW5kZXggLSBfLnNsaWRlQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wcmVwZW5kVG8oXy4kc2xpZGVUcmFjaykuYWRkQ2xhc3MoJ3NsaWNrLWNsb25lZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGluZmluaXRlQ291bnQ7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXy4kc2xpZGVzW3NsaWRlSW5kZXhdKS5jbG9uZSh0cnVlKS5hdHRyKCdpZCcsICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS1zbGljay1pbmRleCcsIHNsaWRlSW5kZXggKyBfLnNsaWRlQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhfLiRzbGlkZVRyYWNrKS5hZGRDbGFzcygnc2xpY2stY2xvbmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmZpbmQoJy5zbGljay1jbG9uZWQnKS5maW5kKCdbaWRdJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2lkJywgJycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5pbnRlcnJ1cHQgPSBmdW5jdGlvbiggdG9nZ2xlICkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmKCAhdG9nZ2xlICkge1xyXG4gICAgICAgICAgICBfLmF1dG9QbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF8uaW50ZXJydXB0ZWQgPSB0b2dnbGU7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2VsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPVxyXG4gICAgICAgICAgICAkKGV2ZW50LnRhcmdldCkuaXMoJy5zbGljay1zbGlkZScpID9cclxuICAgICAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KSA6XHJcbiAgICAgICAgICAgICAgICAkKGV2ZW50LnRhcmdldCkucGFyZW50cygnLnNsaWNrLXNsaWRlJyk7XHJcblxyXG4gICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KHRhcmdldEVsZW1lbnQuYXR0cignZGF0YS1zbGljay1pbmRleCcpKTtcclxuXHJcbiAgICAgICAgaWYgKCFpbmRleCkgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuXHJcbiAgICAgICAgICAgIF8uc2V0U2xpZGVDbGFzc2VzKGluZGV4KTtcclxuICAgICAgICAgICAgXy5hc05hdkZvcihpbmRleCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLnNsaWRlSGFuZGxlcihpbmRleCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUuc2xpZGVIYW5kbGVyID0gZnVuY3Rpb24oaW5kZXgsIHN5bmMsIGRvbnRBbmltYXRlKSB7XHJcblxyXG4gICAgICAgIHZhciB0YXJnZXRTbGlkZSwgYW5pbVNsaWRlLCBvbGRTbGlkZSwgc2xpZGVMZWZ0LCB0YXJnZXRMZWZ0ID0gbnVsbCxcclxuICAgICAgICAgICAgXyA9IHRoaXMsIG5hdlRhcmdldDtcclxuXHJcbiAgICAgICAgc3luYyA9IHN5bmMgfHwgZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChfLmFuaW1hdGluZyA9PT0gdHJ1ZSAmJiBfLm9wdGlvbnMud2FpdEZvckFuaW1hdGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSB0cnVlICYmIF8uY3VycmVudFNsaWRlID09PSBpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN5bmMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIF8uYXNOYXZGb3IoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBpbmRleDtcclxuICAgICAgICB0YXJnZXRMZWZ0ID0gXy5nZXRMZWZ0KHRhcmdldFNsaWRlKTtcclxuICAgICAgICBzbGlkZUxlZnQgPSBfLmdldExlZnQoXy5jdXJyZW50U2xpZGUpO1xyXG5cclxuICAgICAgICBfLmN1cnJlbnRMZWZ0ID0gXy5zd2lwZUxlZnQgPT09IG51bGwgPyBzbGlkZUxlZnQgOiBfLnN3aXBlTGVmdDtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gZmFsc2UgJiYgXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IGZhbHNlICYmIChpbmRleCA8IDAgfHwgaW5kZXggPiBfLmdldERvdENvdW50KCkgKiBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpKSB7XHJcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuZmFkZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFNsaWRlID0gXy5jdXJyZW50U2xpZGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9udEFuaW1hdGUgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmFuaW1hdGVTbGlkZShzbGlkZUxlZnQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnBvc3RTbGlkZSh0YXJnZXRTbGlkZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF8ucG9zdFNsaWRlKHRhcmdldFNsaWRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IGZhbHNlICYmIF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlICYmIChpbmRleCA8IDAgfHwgaW5kZXggPiAoXy5zbGlkZUNvdW50IC0gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSkpIHtcclxuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0U2xpZGUgPSBfLmN1cnJlbnRTbGlkZTtcclxuICAgICAgICAgICAgICAgIGlmIChkb250QW5pbWF0ZSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uYW5pbWF0ZVNsaWRlKHNsaWRlTGVmdCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucG9zdFNsaWRlKHRhcmdldFNsaWRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5wb3N0U2xpZGUodGFyZ2V0U2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggXy5vcHRpb25zLmF1dG9wbGF5ICkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKF8uYXV0b1BsYXlUaW1lcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFyZ2V0U2xpZGUgPCAwKSB7XHJcbiAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGFuaW1TbGlkZSA9IF8uc2xpZGVDb3VudCAtIChfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYW5pbVNsaWRlID0gXy5zbGlkZUNvdW50ICsgdGFyZ2V0U2xpZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFNsaWRlID49IF8uc2xpZGVDb3VudCkge1xyXG4gICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltU2xpZGUgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYW5pbVNsaWRlID0gdGFyZ2V0U2xpZGUgLSBfLnNsaWRlQ291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbmltU2xpZGUgPSB0YXJnZXRTbGlkZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uYW5pbWF0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2JlZm9yZUNoYW5nZScsIFtfLCBfLmN1cnJlbnRTbGlkZSwgYW5pbVNsaWRlXSk7XHJcblxyXG4gICAgICAgIG9sZFNsaWRlID0gXy5jdXJyZW50U2xpZGU7XHJcbiAgICAgICAgXy5jdXJyZW50U2xpZGUgPSBhbmltU2xpZGU7XHJcblxyXG4gICAgICAgIF8uc2V0U2xpZGVDbGFzc2VzKF8uY3VycmVudFNsaWRlKTtcclxuXHJcbiAgICAgICAgaWYgKCBfLm9wdGlvbnMuYXNOYXZGb3IgKSB7XHJcblxyXG4gICAgICAgICAgICBuYXZUYXJnZXQgPSBfLmdldE5hdlRhcmdldCgpO1xyXG4gICAgICAgICAgICBuYXZUYXJnZXQgPSBuYXZUYXJnZXQuc2xpY2soJ2dldFNsaWNrJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIG5hdlRhcmdldC5zbGlkZUNvdW50IDw9IG5hdlRhcmdldC5vcHRpb25zLnNsaWRlc1RvU2hvdyApIHtcclxuICAgICAgICAgICAgICAgIG5hdlRhcmdldC5zZXRTbGlkZUNsYXNzZXMoXy5jdXJyZW50U2xpZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXy51cGRhdGVEb3RzKCk7XHJcbiAgICAgICAgXy51cGRhdGVBcnJvd3MoKTtcclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChkb250QW5pbWF0ZSAhPT0gdHJ1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIF8uZmFkZVNsaWRlT3V0KG9sZFNsaWRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmZhZGVTbGlkZShhbmltU2xpZGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8ucG9zdFNsaWRlKGFuaW1TbGlkZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfLnBvc3RTbGlkZShhbmltU2xpZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF8uYW5pbWF0ZUhlaWdodCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZG9udEFuaW1hdGUgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgXy5hbmltYXRlU2xpZGUodGFyZ2V0TGVmdCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfLnBvc3RTbGlkZShhbmltU2xpZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfLnBvc3RTbGlkZShhbmltU2xpZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5zdGFydExvYWQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLmFycm93cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcblxyXG4gICAgICAgICAgICBfLiRwcmV2QXJyb3cuaGlkZSgpO1xyXG4gICAgICAgICAgICBfLiRuZXh0QXJyb3cuaGlkZSgpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZG90cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XHJcblxyXG4gICAgICAgICAgICBfLiRkb3RzLmhpZGUoKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLiRzbGlkZXIuYWRkQ2xhc3MoJ3NsaWNrLWxvYWRpbmcnKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5zd2lwZURpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgeERpc3QsIHlEaXN0LCByLCBzd2lwZUFuZ2xlLCBfID0gdGhpcztcclxuXHJcbiAgICAgICAgeERpc3QgPSBfLnRvdWNoT2JqZWN0LnN0YXJ0WCAtIF8udG91Y2hPYmplY3QuY3VyWDtcclxuICAgICAgICB5RGlzdCA9IF8udG91Y2hPYmplY3Quc3RhcnRZIC0gXy50b3VjaE9iamVjdC5jdXJZO1xyXG4gICAgICAgIHIgPSBNYXRoLmF0YW4yKHlEaXN0LCB4RGlzdCk7XHJcblxyXG4gICAgICAgIHN3aXBlQW5nbGUgPSBNYXRoLnJvdW5kKHIgKiAxODAgLyBNYXRoLlBJKTtcclxuICAgICAgICBpZiAoc3dpcGVBbmdsZSA8IDApIHtcclxuICAgICAgICAgICAgc3dpcGVBbmdsZSA9IDM2MCAtIE1hdGguYWJzKHN3aXBlQW5nbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChzd2lwZUFuZ2xlIDw9IDQ1KSAmJiAoc3dpcGVBbmdsZSA+PSAwKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKF8ub3B0aW9ucy5ydGwgPT09IGZhbHNlID8gJ2xlZnQnIDogJ3JpZ2h0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoc3dpcGVBbmdsZSA8PSAzNjApICYmIChzd2lwZUFuZ2xlID49IDMxNSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChfLm9wdGlvbnMucnRsID09PSBmYWxzZSA/ICdsZWZ0JyA6ICdyaWdodCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHN3aXBlQW5nbGUgPj0gMTM1KSAmJiAoc3dpcGVBbmdsZSA8PSAyMjUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXy5vcHRpb25zLnJ0bCA9PT0gZmFsc2UgPyAncmlnaHQnIDogJ2xlZnQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKChzd2lwZUFuZ2xlID49IDM1KSAmJiAoc3dpcGVBbmdsZSA8PSAxMzUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2Rvd24nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd1cCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAndmVydGljYWwnO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnN3aXBlRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBzbGlkZUNvdW50LFxyXG4gICAgICAgICAgICBkaXJlY3Rpb247XHJcblxyXG4gICAgICAgIF8uZHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICBfLmludGVycnVwdGVkID0gZmFsc2U7XHJcbiAgICAgICAgXy5zaG91bGRDbGljayA9ICggXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA+IDEwICkgPyBmYWxzZSA6IHRydWU7XHJcblxyXG4gICAgICAgIGlmICggXy50b3VjaE9iamVjdC5jdXJYID09PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggXy50b3VjaE9iamVjdC5lZGdlSGl0ID09PSB0cnVlICkge1xyXG4gICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignZWRnZScsIFtfLCBfLnN3aXBlRGlyZWN0aW9uKCkgXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIF8udG91Y2hPYmplY3Quc3dpcGVMZW5ndGggPj0gXy50b3VjaE9iamVjdC5taW5Td2lwZSApIHtcclxuXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IF8uc3dpcGVEaXJlY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoIGRpcmVjdGlvbiApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Rvd24nOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzbGlkZUNvdW50ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5vcHRpb25zLnN3aXBlVG9TbGlkZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmNoZWNrTmF2aWdhYmxlKCBfLmN1cnJlbnRTbGlkZSArIF8uZ2V0U2xpZGVDb3VudCgpICkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgKyBfLmdldFNsaWRlQ291bnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50RGlyZWN0aW9uID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAndXAnOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzbGlkZUNvdW50ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5vcHRpb25zLnN3aXBlVG9TbGlkZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmNoZWNrTmF2aWdhYmxlKCBfLmN1cnJlbnRTbGlkZSAtIF8uZ2V0U2xpZGVDb3VudCgpICkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgLSBfLmdldFNsaWRlQ291bnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50RGlyZWN0aW9uID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiggZGlyZWN0aW9uICE9ICd2ZXJ0aWNhbCcgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5zbGlkZUhhbmRsZXIoIHNsaWRlQ291bnQgKTtcclxuICAgICAgICAgICAgICAgIF8udG91Y2hPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdzd2lwZScsIFtfLCBkaXJlY3Rpb24gXSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIF8udG91Y2hPYmplY3Quc3RhcnRYICE9PSBfLnRvdWNoT2JqZWN0LmN1clggKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5zbGlkZUhhbmRsZXIoIF8uY3VycmVudFNsaWRlICk7XHJcbiAgICAgICAgICAgICAgICBfLnRvdWNoT2JqZWN0ID0ge307XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5zd2lwZUhhbmRsZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICgoXy5vcHRpb25zLnN3aXBlID09PSBmYWxzZSkgfHwgKCdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudCAmJiBfLm9wdGlvbnMuc3dpcGUgPT09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChfLm9wdGlvbnMuZHJhZ2dhYmxlID09PSBmYWxzZSAmJiBldmVudC50eXBlLmluZGV4T2YoJ21vdXNlJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8udG91Y2hPYmplY3QuZmluZ2VyQ291bnQgPSBldmVudC5vcmlnaW5hbEV2ZW50ICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAhPT0gdW5kZWZpbmVkID9cclxuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCA6IDE7XHJcblxyXG4gICAgICAgIF8udG91Y2hPYmplY3QubWluU3dpcGUgPSBfLmxpc3RXaWR0aCAvIF8ub3B0aW9uc1xyXG4gICAgICAgICAgICAudG91Y2hUaHJlc2hvbGQ7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWxTd2lwaW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIF8udG91Y2hPYmplY3QubWluU3dpcGUgPSBfLmxpc3RIZWlnaHQgLyBfLm9wdGlvbnNcclxuICAgICAgICAgICAgICAgIC50b3VjaFRocmVzaG9sZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGF0YS5hY3Rpb24pIHtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzpcclxuICAgICAgICAgICAgICAgIF8uc3dpcGVTdGFydChldmVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ21vdmUnOlxyXG4gICAgICAgICAgICAgICAgXy5zd2lwZU1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdlbmQnOlxyXG4gICAgICAgICAgICAgICAgXy5zd2lwZUVuZChldmVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnN3aXBlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgZWRnZVdhc0hpdCA9IGZhbHNlLFxyXG4gICAgICAgICAgICBjdXJMZWZ0LCBzd2lwZURpcmVjdGlvbiwgc3dpcGVMZW5ndGgsIHBvc2l0aW9uT2Zmc2V0LCB0b3VjaGVzO1xyXG5cclxuICAgICAgICB0b3VjaGVzID0gZXZlbnQub3JpZ2luYWxFdmVudCAhPT0gdW5kZWZpbmVkID8gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKCFfLmRyYWdnaW5nIHx8IHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VyTGVmdCA9IF8uZ2V0TGVmdChfLmN1cnJlbnRTbGlkZSk7XHJcblxyXG4gICAgICAgIF8udG91Y2hPYmplY3QuY3VyWCA9IHRvdWNoZXMgIT09IHVuZGVmaW5lZCA/IHRvdWNoZXNbMF0ucGFnZVggOiBldmVudC5jbGllbnRYO1xyXG4gICAgICAgIF8udG91Y2hPYmplY3QuY3VyWSA9IHRvdWNoZXMgIT09IHVuZGVmaW5lZCA/IHRvdWNoZXNbMF0ucGFnZVkgOiBldmVudC5jbGllbnRZO1xyXG5cclxuICAgICAgICBfLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoXHJcbiAgICAgICAgICAgIE1hdGgucG93KF8udG91Y2hPYmplY3QuY3VyWCAtIF8udG91Y2hPYmplY3Quc3RhcnRYLCAyKSkpO1xyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsU3dpcGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoXHJcbiAgICAgICAgICAgICAgICBNYXRoLnBvdyhfLnRvdWNoT2JqZWN0LmN1clkgLSBfLnRvdWNoT2JqZWN0LnN0YXJ0WSwgMikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN3aXBlRGlyZWN0aW9uID0gXy5zd2lwZURpcmVjdGlvbigpO1xyXG5cclxuICAgICAgICBpZiAoc3dpcGVEaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgIT09IHVuZGVmaW5lZCAmJiBfLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID4gNCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9zaXRpb25PZmZzZXQgPSAoXy5vcHRpb25zLnJ0bCA9PT0gZmFsc2UgPyAxIDogLTEpICogKF8udG91Y2hPYmplY3QuY3VyWCA+IF8udG91Y2hPYmplY3Quc3RhcnRYID8gMSA6IC0xKTtcclxuICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsU3dpcGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBwb3NpdGlvbk9mZnNldCA9IF8udG91Y2hPYmplY3QuY3VyWSA+IF8udG91Y2hPYmplY3Quc3RhcnRZID8gMSA6IC0xO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHN3aXBlTGVuZ3RoID0gXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aDtcclxuXHJcbiAgICAgICAgXy50b3VjaE9iamVjdC5lZGdlSGl0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGlmICgoXy5jdXJyZW50U2xpZGUgPT09IDAgJiYgc3dpcGVEaXJlY3Rpb24gPT09ICdyaWdodCcpIHx8IChfLmN1cnJlbnRTbGlkZSA+PSBfLmdldERvdENvdW50KCkgJiYgc3dpcGVEaXJlY3Rpb24gPT09ICdsZWZ0JykpIHtcclxuICAgICAgICAgICAgICAgIHN3aXBlTGVuZ3RoID0gXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aCAqIF8ub3B0aW9ucy5lZGdlRnJpY3Rpb247XHJcbiAgICAgICAgICAgICAgICBfLnRvdWNoT2JqZWN0LmVkZ2VIaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBfLnN3aXBlTGVmdCA9IGN1ckxlZnQgKyBzd2lwZUxlbmd0aCAqIHBvc2l0aW9uT2Zmc2V0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF8uc3dpcGVMZWZ0ID0gY3VyTGVmdCArIChzd2lwZUxlbmd0aCAqIChfLiRsaXN0LmhlaWdodCgpIC8gXy5saXN0V2lkdGgpKSAqIHBvc2l0aW9uT2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsU3dpcGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLnN3aXBlTGVmdCA9IGN1ckxlZnQgKyBzd2lwZUxlbmd0aCAqIHBvc2l0aW9uT2Zmc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSB0cnVlIHx8IF8ub3B0aW9ucy50b3VjaE1vdmUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLmFuaW1hdGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBfLnN3aXBlTGVmdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uc2V0Q1NTKF8uc3dpcGVMZWZ0KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS5zd2lwZVN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICB0b3VjaGVzO1xyXG5cclxuICAgICAgICBfLmludGVycnVwdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKF8udG91Y2hPYmplY3QuZmluZ2VyQ291bnQgIT09IDEgfHwgXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcclxuICAgICAgICAgICAgXy50b3VjaE9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRvdWNoZXMgPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLnRvdWNoT2JqZWN0LnN0YXJ0WCA9IF8udG91Y2hPYmplY3QuY3VyWCA9IHRvdWNoZXMgIT09IHVuZGVmaW5lZCA/IHRvdWNoZXMucGFnZVggOiBldmVudC5jbGllbnRYO1xyXG4gICAgICAgIF8udG91Y2hPYmplY3Quc3RhcnRZID0gXy50b3VjaE9iamVjdC5jdXJZID0gdG91Y2hlcyAhPT0gdW5kZWZpbmVkID8gdG91Y2hlcy5wYWdlWSA6IGV2ZW50LmNsaWVudFk7XHJcblxyXG4gICAgICAgIF8uZHJhZ2dpbmcgPSB0cnVlO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnVuZmlsdGVyU2xpZGVzID0gU2xpY2sucHJvdG90eXBlLnNsaWNrVW5maWx0ZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXy4kc2xpZGVzQ2FjaGUgIT09IG51bGwpIHtcclxuXHJcbiAgICAgICAgICAgIF8udW5sb2FkKCk7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCk7XHJcblxyXG4gICAgICAgICAgICBfLiRzbGlkZXNDYWNoZS5hcHBlbmRUbyhfLiRzbGlkZVRyYWNrKTtcclxuXHJcbiAgICAgICAgICAgIF8ucmVpbml0KCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS51bmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICAkKCcuc2xpY2stY2xvbmVkJywgXy4kc2xpZGVyKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgaWYgKF8uJGRvdHMpIHtcclxuICAgICAgICAgICAgXy4kZG90cy5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLiRwcmV2QXJyb3cgJiYgXy5odG1sRXhwci50ZXN0KF8ub3B0aW9ucy5wcmV2QXJyb3cpKSB7XHJcbiAgICAgICAgICAgIF8uJHByZXZBcnJvdy5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChfLiRuZXh0QXJyb3cgJiYgXy5odG1sRXhwci50ZXN0KF8ub3B0aW9ucy5uZXh0QXJyb3cpKSB7XHJcbiAgICAgICAgICAgIF8uJG5leHRBcnJvdy5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF8uJHNsaWRlc1xyXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NsaWNrLXNsaWRlIHNsaWNrLWFjdGl2ZSBzbGljay12aXNpYmxlIHNsaWNrLWN1cnJlbnQnKVxyXG4gICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpXHJcbiAgICAgICAgICAgIC5jc3MoJ3dpZHRoJywgJycpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgU2xpY2sucHJvdG90eXBlLnVuc2xpY2sgPSBmdW5jdGlvbihmcm9tQnJlYWtwb2ludCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcbiAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ3Vuc2xpY2snLCBbXywgZnJvbUJyZWFrcG9pbnRdKTtcclxuICAgICAgICBfLmRlc3Ryb3koKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS51cGRhdGVBcnJvd3MgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIF8gPSB0aGlzLFxyXG4gICAgICAgICAgICBjZW50ZXJPZmZzZXQ7XHJcblxyXG4gICAgICAgIGNlbnRlck9mZnNldCA9IE1hdGguZmxvb3IoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAvIDIpO1xyXG5cclxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5hcnJvd3MgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAmJlxyXG4gICAgICAgICAgICAhXy5vcHRpb25zLmluZmluaXRlICkge1xyXG5cclxuICAgICAgICAgICAgXy4kcHJldkFycm93LnJlbW92ZUNsYXNzKCdzbGljay1kaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgXy4kbmV4dEFycm93LnJlbW92ZUNsYXNzKCdzbGljay1kaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmN1cnJlbnRTbGlkZSA9PT0gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF8uJHByZXZBcnJvdy5hZGRDbGFzcygnc2xpY2stZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgIF8uJG5leHRBcnJvdy5yZW1vdmVDbGFzcygnc2xpY2stZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY3VycmVudFNsaWRlID49IF8uc2xpZGVDb3VudCAtIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgJiYgXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgXy4kbmV4dEFycm93LmFkZENsYXNzKCdzbGljay1kaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgXy4kcHJldkFycm93LnJlbW92ZUNsYXNzKCdzbGljay1kaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5jdXJyZW50U2xpZGUgPj0gXy5zbGlkZUNvdW50IC0gMSAmJiBfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIF8uJG5leHRBcnJvdy5hZGRDbGFzcygnc2xpY2stZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgIF8uJHByZXZBcnJvdy5yZW1vdmVDbGFzcygnc2xpY2stZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIFNsaWNrLnByb3RvdHlwZS51cGRhdGVEb3RzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKF8uJGRvdHMgIT09IG51bGwpIHtcclxuXHJcbiAgICAgICAgICAgIF8uJGRvdHNcclxuICAgICAgICAgICAgICAgIC5maW5kKCdsaScpXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NsaWNrLWFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgXy4kZG90c1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2xpJylcclxuICAgICAgICAgICAgICAgIC5lcShNYXRoLmZsb29yKF8uY3VycmVudFNsaWRlIC8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSlcclxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stYWN0aXZlJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBTbGljay5wcm90b3R5cGUudmlzaWJpbGl0eSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICggXy5vcHRpb25zLmF1dG9wbGF5ICkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCBkb2N1bWVudFtfLmhpZGRlbl0gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5pbnRlcnJ1cHRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIF8uaW50ZXJydXB0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5zbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBfID0gdGhpcyxcclxuICAgICAgICAgICAgb3B0ID0gYXJndW1lbnRzWzBdLFxyXG4gICAgICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcclxuICAgICAgICAgICAgbCA9IF8ubGVuZ3RoLFxyXG4gICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICByZXQ7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdCA9PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb3B0ID09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAgX1tpXS5zbGljayA9IG5ldyBTbGljayhfW2ldLCBvcHQpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXQgPSBfW2ldLnNsaWNrW29wdF0uYXBwbHkoX1tpXS5zbGljaywgYXJncyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmV0ICE9ICd1bmRlZmluZWQnKSByZXR1cm4gcmV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXztcclxuICAgIH07XHJcblxyXG59KSk7XHJcbiIsIi8qIVxyXG5qcXVlcnkuYW5pbWF0ZS1lbmhhbmNlZCBwbHVnaW4gdjEuMDVcclxuLS0tXHJcbmh0dHA6Ly9naXRodWIuY29tL2JlbmJhcm5ldHQvalF1ZXJ5LUFuaW1hdGUtRW5oYW5jZWRcclxuaHR0cDovL2JlbmJhcm5ldHQubmV0XHJcbkBiZW5wYmFybmV0dFxyXG4qL1xyXG4vKlxyXG5qcXVlcnkuYW5pbWF0ZS1lbmhhbmNlZCBwbHVnaW4gdjEuMDVcclxuLS0tXHJcbmh0dHA6Ly9naXRodWIuY29tL2JlbmJhcm5ldHQvalF1ZXJ5LUFuaW1hdGUtRW5oYW5jZWRcclxuaHR0cDovL2JlbmJhcm5ldHQubmV0XHJcbkBiZW5wYmFybmV0dFxyXG4tLS1cclxuQ29weXJpZ2h0IChjKSAyMDEyIEJlbiBCYXJuZXR0XHJcblxyXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cclxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcblRIRSBTT0ZUV0FSRS5cclxuLS0tXHJcbkV4dGVuZHMgalF1ZXJ5LmFuaW1hdGUoKSB0byBhdXRvbWF0aWNhbGx5IHVzZSBDU1MzIHRyYW5zZm9ybWF0aW9ucyB3aGVyZSBhcHBsaWNhYmxlLlxyXG5UZXN0ZWQgd2l0aCBqUXVlcnkgMS4zLjIrXHJcblxyXG5TdXBwb3J0cyAtbW96LXRyYW5zaXRpb24sIC13ZWJraXQtdHJhbnNpdGlvbiwgLW8tdHJhbnNpdGlvbiwgdHJhbnNpdGlvblxyXG5cclxuVGFyZ2V0dGVkIHByb3BlcnRpZXMgKGZvciBub3cpOlxyXG5cdC0gbGVmdFxyXG5cdC0gdG9wXHJcblx0LSBvcGFjaXR5XHJcblx0LSB3aWR0aFxyXG5cdC0gaGVpZ2h0XHJcblxyXG5Vc2FnZSAoZXhhY3RseSB0aGUgc2FtZSBhcyBpdCB3b3VsZCBiZSBub3JtYWxseSk6XHJcblxyXG5cdGpRdWVyeShlbGVtZW50KS5hbmltYXRlKHtsZWZ0OiAyMDB9LCAgNTAwLCBmdW5jdGlvbigpIHtcclxuXHRcdC8vIGNhbGxiYWNrXHJcblx0fSk7XHJcblxyXG5DaGFuZ2Vsb2c6XHJcblx0MS4wNSAoMTQvMDgvMjAxMyk6XHJcblx0XHQtIE1lcmdpbmcgUFIgIzEyNCBmaXggZm9yIGhpZ2hjaGFydHMgY2xhc2guIFRoYW5rcyBAYmVuc29uYyFcclxuXHJcblx0MS4wNCAoMTQvMDgvMjAxMyk6XHJcblx0XHQtIFVzaW5nIGZpeCBmcm9tIGlzc3VlICM2OSBieSBAcmlja3lrNTg2IHRvIHN1cHBvcnQgcGVyY2VudGFnZXNcclxuXHJcblx0MS4wMyAoMTkvNy8yMDEzKTpcclxuXHRcdC0gTWVyZ2UgUFIgIzEyOSAoVXNlIG9yaWdpbmFsQW5pbWF0ZU1ldGhvZCBpZiBhIHN0ZXAgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQuKSAvdGh4IEBsZWhuaVxyXG5cclxuXHQxLjAyICg4LzUvMjAxMyk6XHJcblx0XHQtIEZpeGluZyB1c2UzRCBkZWZhdWx0IGZsYWdzLiBJdCBtdXN0IGV4cGxpY2l0bHkgYmUgc2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgM2Qgbm93LCB0aGUgcGx1Z2luIGJ5IGRlZmF1bHQgd2lsbCB1c2UgaXQgaWYgYXZhaWxhYmxlLlxyXG5cclxuXHQxLjAxICg4LzUvMjAxMyk6XHJcblx0XHQtIEFkZGluZyBhcHByb3ByaWF0ZSBkaXNwbGF5IHZhbHVlIGZvciB3aWRlciByYW5nZSBvZiBlbGVtZW50cyAoaXNzdWUgIzEyMSAtIHRoYW5rcyBzbWFja3kpXHJcblxyXG5cdDEuMCAoOC81LzIxMDMpOlxyXG5cdFx0LSBGaXggYXZvaWRUcmFuc2Zvcm1zOiB0cnVlIGJlaGF2aW91ciBmb3IgZGlyZWN0aW9uYWwgdHJhbnNpdGlvbnNcclxuXHJcblx0MC45OS4xICgzLzQvMjAxMyk6XHJcblx0XHQtIEFkZCBTZXQgb3IgdW5zZXQgdGhlICdkaXNhYmxlZCBieSBkZWZhdWx0JyB2YWx1ZSAoUFIgIzExNylcclxuXHJcblx0MC45OSAoNS8xMi8yMDEyKTpcclxuXHRcdC0gUFIgIzEwOSBBZGRlZCBzdXBwb3J0IGZvciBsaXN0LWl0ZW0gbm9kZXMuIEZhZGVJbiBvbiB0YWdzIHdhcyBvbWl0dGluZyB0aGUgbGlzdC1zdHlsZSBzdXBwb3J0LiAodGh4IEBTZWFuQ2Fubm9uKVxyXG5cdFx0XHJcblx0MC45OCAoMTIvMTEvMjAxMik6XHJcblx0XHQtIE1lcmdpbmcgcHVsbCByZXF1ZXN0ICMxMDYgdGh4IEBnYm95c2tvIC0gY2hlY2tpbmcgZm9yIG93bmVyRG9jdW1lbnQgYmVmb3JlIHVzaW5nIGdldENvbXB1dGVkU3R5bGVcclxuXHJcblx0MC45NyAoNi8xMS8yMDEyKTpcclxuXHRcdC0gTWVyZ2luZyBwdWxsIHJlcXVlc3QgIzEwNCB0aHggQGdhdnJvY2hlbGVnbm91IC0gLmJpbmQgaW5zdGVhZCBvZiAub25lXHJcblxyXG5cdDAuOTZhICgyMC8wOC8yMDEyKTpcclxuXHRcdC0gQ2hlY2tpbmcgZXZlbnQgaXMgZnJvbSBkaXNwYXRjaCB0YXJnZXQgKGlzc3VlICM1OClcclxuXHJcblx0MC45NiAoMjAvMDgvMjAxMik6XHJcblx0XHQtIEZpeGVzIGZvciBjb250ZXh0LCBhbGwgZWxlbWVudHMgcmV0dXJuZWQgYXMgY29udGV4dCAoaXNzdWUgIzg0KVxyXG5cdFx0LSBSZXNldCBwb3NpdGlvbiB3aXRoIGxlYXZlVHJhbnNmb3JtcyAhPT0gdHJ1ZSBmaXhlcyAoaXNzdWUgIzkzKVxyXG5cdFx0XHJcblxyXG5cdDAuOTUgKDIwLzA4LzIwMTIpOlxyXG5cdFx0LSBJZiB0YXJnZXQgb3BhY2l0eSA9PSBjdXJyZW50IG9wYWNpdHksIHBhc3MgYmFjayB0byBqcXVlcnkgbmF0aXZlIHRvIGdldCBjYWxsYmFjayBmaXJpbmcgKCM5NClcclxuXHJcblx0MC45NCAoMjAvMDgvMjAxMik6XHJcblx0XHQtIEFkZHJlc3NlcyBGaXJlZm94IGNhbGxiYWNrIG1lY2hhbmlzbXMgKGlzc3VlICM5NClcclxuXHRcdC0gdXNpbmcgJC5vbmUoKSB0byBiaW5kIHRvIENTUyBjYWxsYmFja3MgaW4gYSBtb3JlIGdlbmVyaWMgd2F5XHJcblxyXG5cdDAuOTMgKDYvOC8yMDEyKTpcclxuXHRcdC0gQWRkaW5nIG90aGVyIE9wZXJhICd0cmFuc2l0aW9uZW5kJyBldmVudCAocmU6IGlzc3VlICM5MClcclxuXHJcblx0MC45MiAoNi84LzIwMTIpOlxyXG5cdFx0LSBTZXBlcmF0ZSB1bmJpbmRzIGludG8gZGlmZmVyZW50IHRocmVhZHMgKHJlOiBpc3N1ZSAjOTEpXHJcblxyXG5cdDAuOTEgKDIvNC8yMDEyKTpcclxuXHRcdC0gTWVyZ2UgUHVsbCBSZXF1ZXN0ICM3NCAtIFVuaXQgTWFuYWdlbWVudFxyXG5cclxuXHQwLjkwICg3LzMvMjAxMik6XHJcblx0XHQtIEFkZGluZyBwdWJsaWMgJC50b2dnbGVEaXNhYmxlZEJ5RGVmYXVsdCgpIGZlYXR1cmUgdG8gZGlzYWJsZSBlbnRpcmUgcGx1Z2luIGJ5IGRlZmF1bHQgKElzc3VlICM3MylcclxuXHJcblx0MC44OSAoMjQvMS8yMDEyKTpcclxuXHRcdC0gQWRkaW5nICdhdm9pZENTU1RyYW5zaXRpb25zJyBwcm9wZXJ0eS4gU2V0IHRvIHRydWUgdG8gZGlzYWJsZSBlbnRpcmUgcGx1Z2luLiAoSXNzdWUgIzQ3KVxyXG5cclxuXHQwLjg4ICgyNC8xLzIwMTIpOlxyXG5cdFx0LSBGaXggSXNzdWUgIzY3IGZvciBIaWdoY2hhcnRzSlMgY29tcGF0aWJpbGl0eVxyXG5cclxuXHQwLjg3ICgyNC8xLzIwMTIpOlxyXG5cdFx0LSBGaXggSXNzdWUgIzY2IHNlbGZDU1NEYXRhLm9yaWdpbmFsIGlzIHVuZGVmaW5lZFxyXG5cclxuXHQwLjg2ICg5LzEvMjAxMik6XHJcblx0XHQtIFN0cmljdCBKUyBmaXggZm9yIHVuZGVmaW5lZCB2YXJpYWJsZVxyXG5cclxuXHQwLjg1ICgyMC8xMi8yMDExKTpcclxuXHRcdC0gTWVyZ2UgUHVsbCByZXF1ZXN0ICM1NyBmcm9tIEtyb251elxyXG5cdFx0LSBDb2RlYmFzZSBjbGVhbmVkIGFuZCBub3cgcGFzc2VzIGpzaGludC5cclxuXHRcdC0gRml4ZWQgYSBmZXcgYnVncyAoaXQgbm93IHNhdmVzIGFuZCByZXN0b3JlcyB0aGUgb3JpZ2luYWwgY3NzIHRyYW5zaXRpb24gcHJvcGVydGllcykuXHJcblx0XHQtIGZhZGVPdXQoKSBpcyBmaXhlZCwgaXQgd2Fzbid0IHJlc3RvcmluZyB0aGUgb3BhY2l0eSBhZnRlciBoaWRpbmcgaXQuXHJcblxyXG5cdDAuODAgKDEzLzA5LzIwMTEpOlxyXG5cdFx0LSBJc3N1ZSAjMjggLSBSZXBvcnQgJChlbCkuaXMoJzphbmltYXRlZCcpIGZpeFxyXG5cclxuXHQwLjc5ICgwNi8wOS8yMDExKTpcclxuXHRcdC0gSXNzdWUgIzQyIC0gUmlnaHQgbmVnYXRpdmUgcG9zaXRpb24gYW5pbWF0aW9uOiBwbGVhc2Ugc2VlIGlzc3VlIG5vdGVzIG9uIEdpdGh1Yi5cclxuXHJcblx0MC43OCAoMDIvMDkvMjAxMSk6XHJcblx0XHQtIElzc3VlICMxOCAtIGpRdWVyeS8kIHJlZmVyZW5jZSBqb3lzXHJcblxyXG5cdDAuNzcgKDAyLzA5LzIwMTEpOlxyXG5cdFx0LSBBZGRpbmcgZmVhdHVyZSBvbiBHaXRodWIgaXNzdWUgIzQ0IC0gVXNlIDNEIFRyYW5zaXRpb25zIGJ5IGRlZmF1bHRcclxuXHJcblx0MC43NiAoMjgvMDYvMjAxMSk6XHJcblx0XHQtIEZpeGluZyBpc3N1ZSAjMzcgLSBmaXhlZCBzdG9wKCkgbWV0aG9kICh3aXRoIGdvdG9FbmQgPT0gZmFsc2UpXHJcblxyXG5cdDAuNzUgKDE1LzA2LzIwMTEpOlxyXG5cdFx0LSBGaXhpbmcgaXNzdWUgIzM1IHRvIHBhc3MgYWN0dWFsIG9iamVjdCBiYWNrIGFzIGNvbnRleHQgZm9yIGNhbGxiYWNrXHJcblxyXG5cdDAuNzQgKDI4LzA1LzIwMTEpOlxyXG5cdFx0LSBGaXhpbmcgaXNzdWUgIzI5IHRvIHBsYXkgbmljZSB3aXRoIDEuNitcclxuXHJcblx0MC43MyAoMDUvMDMvMjAxMSk6XHJcblx0XHQtIE1lcmdlZCBQdWxsIFJlcXVlc3QgIzI2OiBGaXhlZCBpc3N1ZSB3aXRoIGZhZGVPdXQoKSAvIFwiaGlkZVwiIHNob3J0Y3V0XHJcblxyXG5cdDAuNzIgKDA1LzAzLzIwMTEpOlxyXG5cdFx0LSBNZXJnZWQgUHVsbCBSZXF1ZXN0ICMyMzogQWRkZWQgUGVubmVyIGVxdWF0aW9uIGFwcHJveGltYXRpb25zIGZyb20gTWF0dGhldyBMZWluJ3MgQ2Vhc2VyLCBhbmQgYWRkZWQgZmFpbHNhZmUgZmFsbGJhY2tzXHJcblxyXG5cdDAuNzEgKDA1LzAzLzIwMTEpOlxyXG5cdFx0LSBNZXJnZWQgUHVsbCBSZXF1ZXN0ICMyNDogQ2hhbmdlcyB0cmFuc2xhdGlvbiBvYmplY3QgdG8gaW50ZWdlcnMgaW5zdGVhZCBvZiBzdHJpbmdzIHRvIGZpeCByZWxhdGl2ZSB2YWx1ZXMgYnVnIHdpdGggbGVhdmVUcmFuc2Zvcm1zID0gdHJ1ZVxyXG5cclxuXHQwLjcwICgxNy8wMy8yMDExKTpcclxuXHRcdC0gTWVyZ2VkIFB1bGwgUmVxdWVzdCBmcm9tIGFtbHctbnl0IHRvIGFkZCBib3R0b20vcmlnaHQgaGFuZGxpbmdcclxuXHJcblx0MC42OCAoMTUvMDIvMjAxMSk6XHJcblx0XHQtIHdpZHRoL2hlaWdodCBmaXhlcyAmIHF1ZXVlIGlzc3VlcyByZXNvbHZlZC5cclxuXHJcblx0MC42NyAoMTUvMDIvMjAxMSk6XHJcblx0XHQtIENvZGUgY2xlYW51cHMgJiBmaWxlIHNpemUgaW1wcm92ZW1lbnRzIGZvciBjb21wcmVzc2lvbi5cclxuXHJcblx0MC42NiAoMTUvMDIvMjAxMSk6XHJcblx0XHQtIFplcm8gc2Vjb25kIGZhZGVPdXQoKSwgZmFkZUluKCkgZml4ZXNcclxuXHJcblx0MC42NSAoMDEvMDIvMjAxMSk6XHJcblx0XHQtIENhbGxiYWNrcyB3aXRoIHF1ZXVlKCkgc3VwcG9ydCByZWZhY3RvcmVkIHRvIHN1cHBvcnQgZWxlbWVudCBhcnJheXNcclxuXHJcblx0MC42NCAoMjcvMDEvMjAxMSk6XHJcblx0XHQtIEJVR0ZJWCAjMTM6IC5zbGlkZVVwKCksIC5zbGlkZVRvZ2dsZSgpLCAuc2xpZGVEb3duKCkgYnVnZml4ZXMgaW4gV2Via2l0XHJcblxyXG5cdDAuNjMgKDEyLzAxLzIwMTEpOlxyXG5cdFx0LSBCVUdGSVggIzExOiBjYWxsYmFja3Mgbm90IGZpcmluZyB3aGVuIG5ldyB2YWx1ZSA9PSBvbGQgdmFsdWVcclxuXHJcblx0MC42MiAoMTAvMDEvMjAxMSk6XHJcblx0XHQtIEJVR0ZJWCAjMTE6IHF1ZXVlIGlzIG5vdCBhIGZ1bmN0aW9uIGlzc3VlIGZpeGVkXHJcblxyXG5cdDAuNjEgKDEwLzAxLzIwMTEpOlxyXG5cdFx0LSBCVUdGSVggIzEwOiBOZWdhdGl2ZSBwb3NpdGlvbnMgY29udmVydGluZyB0byBwb3NpdGl2ZVxyXG5cclxuXHQwLjYwICgwNi8wMS8yMDExKTpcclxuXHRcdC0gQW5pbWF0ZSBmdW5jdGlvbiByZXdyaXRlIGluIGFjY29yZGFuY2Ugd2l0aCBuZXcgcXVldWUgc3lzdGVtXHJcblx0XHQtIEJVR0ZJWCAjODogTGVmdC90b3AgcG9zaXRpb24gdmFsdWVzIGFsd2F5cyBhc3N1bWVkIHJlbGF0aXZlIHJhdGhlciB0aGFuIGFic29sdXRlXHJcblx0XHQtIEJVR0ZJWCAjOTogYW5pbWF0aW9uIGFzIGxhc3QgaXRlbSBpbiBhIGNoYWluIC0gdGhlIGNoYWluIGlzIGlnbm9yZWQ/XHJcblx0XHQtIEJVR0ZJWDogd2lkdGgvaGVpZ2h0IENTUzMgdHJhbnNmb3JtYXRpb24gd2l0aCBsZWZ0L3RvcCB3b3JraW5nXHJcblxyXG5cdDAuNTUgKDIyLzEyLzIwMTApOlxyXG5cdFx0LSBpc0VtcHR5T2JqZWN0IGZ1bmN0aW9uIGZvciA8alF1ZXJ5IDEuNCAocmVxdWlyZXMgMS4zLjIpXHJcblxyXG5cdDAuNTRhICgyMi8xMi8yMDEwKTpcclxuXHRcdC0gTGljZW5zZSBjaGFuZ2VkIHRvIE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXHJcblxyXG5cdDAuNTQgKDIyLzEyLzIwMTApOlxyXG5cdFx0LSBSZW1vdmVkIHNpbGx5IGNoZWNrIGZvciAnalF1ZXJ5IFVJJyBiYWlsb3V0cy4gU29ycnkuXHJcblx0XHQtIFNjb3BpbmcgaXNzdWVzIGZpeGVkIC0gSXNzdWUgIzQ6ICQodGhpcykgc2hvdWxkIGdpdmUgeW91IGEgcmVmZXJlbmNlIHRvIHRoZSBzZWxlY3RvciBiZWluZyBhbmltYXRlZC4uIHBlciBqcXVlcnkncyBjb3JlIGFuaW1hdGlvbiBmdW5jaXRvbi5cclxuXHJcblx0MC41MyAoMTcvMTEvMjAxMCk6XHJcblx0XHQtIE5ldyAkLnRyYW5zbGF0ZSgpIG1ldGhvZCB0byBlYXNpbHkgY2FsY3VsYXRlIGN1cnJlbnQgdHJhbnNmb3JtZWQgdHJhbnNsYXRpb25cclxuXHRcdC0gUmVwZWF0ZXIgY2FsbGJhY2sgYnVnIGZpeCBmb3IgbGVhdmVUcmFuc2Zvcm1zOnRydWUgKHdhcyBjb25zdGFudGx5IGFwcGVuZGluZyBwcm9wZXJ0aWVzKVxyXG5cclxuXHQwLjUyICgxNi8xMS8yMDEwKTpcclxuXHRcdC0gbGVhdmVUcmFuc2Zvcm1zOiB0cnVlIGJ1ZyBmaXhlc1xyXG5cdFx0LSAnQXBwbHlpbmcnIHVzZXIgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0YWluICd0aGlzJyBjb250ZXh0XHJcblxyXG5cdDAuNTEgKDA4LzExLzIwMTApOlxyXG5cdFx0LSBCYWlsaW5nIG91dCB3aXRoIGpRdWVyeSBVSS4gVGhpcyBpcyBvbmx5IHNvIHRoZSBwbHVnaW4gcGxheXMgbmljZSB3aXRoIG90aGVycyBhbmQgaXMgVEVNUE9SQVJZLlxyXG5cclxuXHQwLjUwICgwOC8xMS8yMDEwKTpcclxuXHRcdC0gU3VwcG9ydCBmb3IgJC5mbi5zdG9wKClcclxuXHRcdC0gRmV3ZXIgalF1ZXJ5LmZuIGVudHJpZXMgdG8gcHJlc2VydmUgbmFtZXNwYWNlXHJcblx0XHQtIEFsbCByZWZlcmVuY2VzICQgY29udmVydGVkIHRvIGpRdWVyeVxyXG5cdFx0LSBqc0RvYyBUb29sa2l0IHN0eWxlIGNvbW1lbnRpbmcgZm9yIGRvY3MgKGNvbWluZyBzb29uKVxyXG5cclxuXHQwLjQ5ICgxOS8xMC8yMDEwKTpcclxuXHRcdC0gSGFuZGxpbmcgb2YgJ3VuZGVmaW5lZCcgZXJyb3JzIGZvciBzZWNvbmRhcnkgQ1NTIG9iamVjdHNcclxuXHRcdC0gU3VwcG9ydCB0byBlbmhhbmNlICd3aWR0aCcgYW5kICdoZWlnaHQnIHByb3BlcnRpZXMgKGV4Y2VwdCBzaG9ydGN1dHMgaW52b2x2aW5nIGpRdWVyeS5meC5zdGVwLCBlLmcgc2xpZGVUb2dnbGUpXHJcblx0XHQtIEJ1Z2ZpeDogUG9zaXRpb25pbmcgd2hlbiB1c2luZyBhdm9pZFRyYW5zZm9ybXM6IHRydWUgKHRoYW5rcyBSYWxmIFNhbnRiZXJnZW4gcmVwb3J0cylcclxuXHRcdC0gQnVnZml4OiBDYWxsYmFja3MgYW5kIFNjb3BlIGlzc3Vlc1xyXG5cclxuXHQwLjQ4ICgxMy8xMC8yMDEwKTpcclxuXHRcdC0gQ2hlY2tzIGZvciAzZCBzdXBwb3J0IGJlZm9yZSBhcHBseWluZ1xyXG5cclxuXHQwLjQ3ICgxMi8xMC8yMDEwKTtcclxuXHRcdC0gQ29tcGF0aWJsZSB3aXRoIC5mYWRlSW4oKSwgLmZhZGVPdXQoKVxyXG5cdFx0LSBVc2Ugc2hvcnRjdXRzLCBubyBkdXJhdGlvbiBmb3IgalF1ZXJ5IGRlZmF1bHQgb3IgXCJmYXN0XCIgYW5kIFwic2xvd1wiXHJcblx0XHQtIENsZWFuIHVwIGNhbGxiYWNrIGV2ZW50IGxpc3RlbmVycyBvbiBjb21wbGV0ZSAocHJldmVudGluZyBtdWx0aXBsZSBjYWxsYmFja3MpXHJcblxyXG5cdDAuNDYgKDA3LzEwLzIwMTApO1xyXG5cdFx0LSBDb21wYXRpYmxlIHdpdGggLnNsaWRlVXAoKSwgLnNsaWRlRG93bigpLCAuc2xpZGVUb2dnbGUoKVxyXG5cclxuXHQwLjQ1ICgwNi8xMC8yMDEwKTpcclxuXHRcdC0gJ1plcm8nIHBvc2l0aW9uIGJ1ZyBmaXggKHdhcyBvcmlnaW5hbGx5IHRyYW5zbGF0aW5nIGJ5IDAgemVybyBwaXhlbHMsIGkuZS4gbm8gbW92ZW1lbnQpXHJcblxyXG5cdDAuNCAoMDUvMTAvMjAxMCk6XHJcblx0XHQtIEl0ZXJhdGUgb3ZlciBtdWx0aXBsZSBlbGVtZW50cyBhbmQgc3RvcmUgdHJhbnNmb3JtcyBpbiBqUXVlcnkuZGF0YSBwZXIgZWxlbWVudFxyXG5cdFx0LSBJbmNsdWRlIHN1cHBvcnQgZm9yIHJlbGF0aXZlIHZhbHVlcyAoKz0gLyAtPSlcclxuXHRcdC0gQmV0dGVyIHVuaXQgc2FuaXRpemF0aW9uXHJcblx0XHQtIFBlcmZvcm1hbmNlIHR3ZWFrc1xyXG5cdFx0LSBGaXggZm9yIG9wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uICh3YXMgcmVxdWlyZWQpXHJcblx0XHQtIEFwcGxpZXMgZGF0YVt0cmFuc2xhdGVYXSBhbmQgZGF0YVt0cmFuc2xhdGVZXSB0byBlbGVtZW50cyBmb3IgZWFzeSBhY2Nlc3NcclxuXHRcdC0gQWRkZWQgJ2Vhc2VJbk91dFF1aW50JyBlYXNpbmcgZnVuY3Rpb24gZm9yIENTUyB0cmFuc2l0aW9ucyAocmVxdWlyZXMgalF1ZXJ5IFVJIGZvciBKUyBhbmltcylcclxuXHRcdC0gTGVzcyBuZWVkIGZvciBsZWF2ZVRyYW5zZm9ybXMgPSB0cnVlIGR1ZSB0byBiZXR0ZXIgcG9zaXRpb24gZGV0ZWN0aW9uc1xyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKGpRdWVyeSwgb3JpZ2luYWxBbmltYXRlTWV0aG9kLCBvcmlnaW5hbFN0b3BNZXRob2QpIHtcclxuXHJcblx0Ly8gLS0tLS0tLS0tLVxyXG5cdC8vIFBsdWdpbiB2YXJpYWJsZXNcclxuXHQvLyAtLS0tLS0tLS0tXHJcblx0dmFyXHRjc3NUcmFuc2l0aW9uUHJvcGVydGllcyA9IFsndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0JywgJ29wYWNpdHknLCAnaGVpZ2h0JywgJ3dpZHRoJ10sXHJcblx0XHRkaXJlY3Rpb25zID0gWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnXSxcclxuXHRcdGNzc1ByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctby0nLCAnJ10sXHJcblx0XHRwbHVnaW5PcHRpb25zID0gWydhdm9pZFRyYW5zZm9ybXMnLCAndXNlVHJhbnNsYXRlM2QnLCAnbGVhdmVUcmFuc2Zvcm1zJ10sXHJcblx0XHRyZnhudW0gPSAvXihbKy1dPSk/KFtcXGQrLS5dKykoLiopJC8sXHJcblx0XHRydXBwZXIgPSAvKFtBLVpdKS9nLFxyXG5cdFx0ZGVmYXVsdEVuaGFuY2VEYXRhID0ge1xyXG5cdFx0XHRzZWNvbmRhcnk6IHt9LFxyXG5cdFx0XHRtZXRhOiB7XHJcblx0XHRcdFx0dG9wIDogMCxcclxuXHRcdFx0XHRyaWdodCA6IDAsXHJcblx0XHRcdFx0Ym90dG9tIDogMCxcclxuXHRcdFx0XHRsZWZ0IDogMFxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0dmFsVW5pdCA9ICdweCcsXHJcblxyXG5cdFx0REFUQV9LRVkgPSAnalFlJyxcclxuXHRcdENVQklDX0JFWklFUl9PUEVOID0gJ2N1YmljLWJlemllcignLFxyXG5cdFx0Q1VCSUNfQkVaSUVSX0NMT1NFID0gJyknLFxyXG5cclxuXHRcdG9yaWdpbmFsQW5pbWF0ZWRGaWx0ZXIgPSBudWxsLFxyXG5cdFx0cGx1Z2luRGlzYWJsZWREZWZhdWx0ID0gZmFsc2U7XHJcblxyXG5cclxuXHQvLyAtLS0tLS0tLS0tXHJcblx0Ly8gQ2hlY2sgaWYgdGhpcyBicm93c2VyIHN1cHBvcnRzIENTUzMgdHJhbnNpdGlvbnNcclxuXHQvLyAtLS0tLS0tLS0tXHJcblx0dmFyIHRoaXNCb2R5ID0gZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHR0aGlzU3R5bGUgPSB0aGlzQm9keS5zdHlsZSxcclxuXHRcdHRyYW5zaXRpb25FbmRFdmVudCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnLFxyXG5cdFx0Y3NzVHJhbnNpdGlvbnNTdXBwb3J0ZWQgPSB0aGlzU3R5bGUuV2Via2l0VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHRoaXNTdHlsZS5Nb3pUcmFuc2l0aW9uICE9PSB1bmRlZmluZWQgfHwgdGhpc1N0eWxlLk9UcmFuc2l0aW9uICE9PSB1bmRlZmluZWQgfHwgdGhpc1N0eWxlLnRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCxcclxuXHRcdGhhczNEID0gKCdXZWJLaXRDU1NNYXRyaXgnIGluIHdpbmRvdyAmJiAnbTExJyBpbiBuZXcgV2ViS2l0Q1NTTWF0cml4KCkpLFxyXG5cdFx0dXNlM0RCeURlZmF1bHQgPSBoYXMzRDtcclxuXHJcblxyXG5cclxuXHQvLyAtLS0tLS0tLS0tXHJcblx0Ly8gRXh0ZW5kZWQgOmFuaW1hdGVkIGZpbHRlclxyXG5cdC8vIC0tLS0tLS0tLS1cclxuXHRpZiAoIGpRdWVyeS5leHByICYmIGpRdWVyeS5leHByLmZpbHRlcnMgKSB7XHJcblx0XHRvcmlnaW5hbEFuaW1hdGVkRmlsdGVyID0galF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZDtcclxuXHRcdGpRdWVyeS5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbihlbGVtKSB7XHJcblx0XHRcdHJldHVybiBqUXVlcnkoZWxlbSkuZGF0YSgnZXZlbnRzJykgJiYgalF1ZXJ5KGVsZW0pLmRhdGEoJ2V2ZW50cycpW3RyYW5zaXRpb25FbmRFdmVudF0gPyB0cnVlIDogb3JpZ2luYWxBbmltYXRlZEZpbHRlci5jYWxsKHRoaXMsIGVsZW0pO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHRcdEBwcml2YXRlXHJcblx0XHRAbmFtZSBfZ2V0VW5pdFxyXG5cdFx0QGZ1bmN0aW9uXHJcblx0XHRAZGVzY3JpcHRpb24gUmV0dXJuIHVuaXQgdmFsdWUgKFwicHhcIiwgXCIlXCIsIFwiZW1cIiBmb3IgcmUtdXNlIGNvcnJlY3Qgb25lIHdoZW4gdHJhbnNsYXRpbmcpXHJcblx0XHRAcGFyYW0ge3ZhcmlhbnR9IFt2YWxdIFRhcmdldCB2YWx1ZVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gX2dldFVuaXQodmFsKXtcclxuXHRcdHJldHVybiB2YWwubWF0Y2goL1xcRCskLyk7XHJcblx0fVxyXG5cclxuXHJcblx0LyoqXHJcblx0XHRAcHJpdmF0ZVxyXG5cdFx0QG5hbWUgX2ludGVycHJldFZhbHVlXHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBJbnRlcnByZXQgdmFsdWUgKFwicHhcIiwgXCIrPVwiIGFuZCBcIi09XCIgc2FuaXRpc2F0aW9uKVxyXG5cdFx0QHBhcmFtIHtvYmplY3R9IFtlbGVtZW50XSBUaGUgRWxlbWVudCBmb3IgY3VycmVudCBDU1MgYW5hbHlzaXNcclxuXHRcdEBwYXJhbSB7dmFyaWFudH0gW3ZhbF0gVGFyZ2V0IHZhbHVlXHJcblx0XHRAcGFyYW0ge3N0cmluZ30gW3Byb3BdIFRoZSBwcm9wZXJ0eSB3ZSdyZSBsb29raW5nIGF0XHJcblx0XHRAcGFyYW0ge2Jvb2xlYW59IFtpc1RyYW5zZm9ybV0gSXMgdGhpcyBhIENTUzMgdHJhbnNmb3JtP1xyXG5cdCovXHJcblx0ZnVuY3Rpb24gX2ludGVycHJldFZhbHVlKGUsIHZhbCwgcHJvcCwgaXNUcmFuc2Zvcm0pIHtcclxuXHRcdC8vIHRoaXMgaXMgYSBuYXN0eSBmaXgsIGJ1dCB3ZSBjaGVjayBmb3IgcHJvcCA9PSAnZCcgdG8gc2VlIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBTVkcsIGFuZCBhYm9ydFxyXG5cdFx0aWYgKHByb3AgPT0gXCJkXCIpIHJldHVybjtcclxuXHRcdGlmICghX2lzVmFsaWRFbGVtZW50KGUpKSByZXR1cm47XHJcblx0XHRcclxuXHRcdHZhciBwYXJ0cyA9IHJmeG51bS5leGVjKHZhbCksXHJcblx0XHRcdHN0YXJ0ID0gZS5jc3MocHJvcCkgPT09ICdhdXRvJyA/IDAgOiBlLmNzcyhwcm9wKSxcclxuXHRcdFx0Y2xlYW5DU1NTdGFydCA9IHR5cGVvZiBzdGFydCA9PSAnc3RyaW5nJyA/IF9jbGVhblZhbHVlKHN0YXJ0KSA6IHN0YXJ0LFxyXG5cdFx0XHRjbGVhblRhcmdldCA9IHR5cGVvZiB2YWwgPT0gJ3N0cmluZycgPyBfY2xlYW5WYWx1ZSh2YWwpIDogdmFsLFxyXG5cdFx0XHRjbGVhblN0YXJ0ID0gaXNUcmFuc2Zvcm0gPT09IHRydWUgPyAwIDogY2xlYW5DU1NTdGFydCxcclxuXHRcdFx0aGlkZGVuID0gZS5pcygnOmhpZGRlbicpLFxyXG5cdFx0XHR0cmFuc2xhdGlvbiA9IGUudHJhbnNsYXRpb24oKTtcclxuXHJcblx0XHRpZiAocHJvcCA9PSAnbGVmdCcpIGNsZWFuU3RhcnQgPSBwYXJzZUludChjbGVhbkNTU1N0YXJ0LCAxMCkgKyB0cmFuc2xhdGlvbi54O1xyXG5cdFx0aWYgKHByb3AgPT0gJ3JpZ2h0JykgY2xlYW5TdGFydCA9IHBhcnNlSW50KGNsZWFuQ1NTU3RhcnQsIDEwKSArIHRyYW5zbGF0aW9uLng7XHJcblx0XHRpZiAocHJvcCA9PSAndG9wJykgY2xlYW5TdGFydCA9IHBhcnNlSW50KGNsZWFuQ1NTU3RhcnQsIDEwKSArIHRyYW5zbGF0aW9uLnk7XHJcblx0XHRpZiAocHJvcCA9PSAnYm90dG9tJykgY2xlYW5TdGFydCA9IHBhcnNlSW50KGNsZWFuQ1NTU3RhcnQsIDEwKSArIHRyYW5zbGF0aW9uLnk7XHJcblxyXG5cdFx0Ly8gZGVhbCB3aXRoIHNob3J0Y3V0c1xyXG5cdFx0aWYgKCFwYXJ0cyAmJiB2YWwgPT0gJ3Nob3cnKSB7XHJcblx0XHRcdGNsZWFuU3RhcnQgPSAxO1xyXG5cdFx0XHRpZiAoaGlkZGVuKSBlLmNzcyh7J2Rpc3BsYXknOiBfZG9tRWxlbWVudFZpc2libGVEaXNwbGF5VmFsdWUoZS5jb250ZXh0LnRhZ05hbWUpLCAnb3BhY2l0eSc6IDB9KTtcclxuXHRcdH0gZWxzZSBpZiAoIXBhcnRzICYmIHZhbCA9PSBcImhpZGVcIikge1xyXG5cdFx0XHRjbGVhblN0YXJ0ID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAocGFydHMpIHtcclxuXHRcdFx0dmFyIGVuZCA9IHBhcnNlRmxvYXQocGFydHNbMl0pO1xyXG5cclxuXHRcdFx0Ly8gSWYgYSArPS8tPSB0b2tlbiB3YXMgcHJvdmlkZWQsIHdlJ3JlIGRvaW5nIGEgcmVsYXRpdmUgYW5pbWF0aW9uXHJcblx0XHRcdGlmIChwYXJ0c1sxXSkgZW5kID0gKChwYXJ0c1sxXSA9PT0gJy09JyA/IC0xIDogMSkgKiBlbmQpICsgcGFyc2VJbnQoY2xlYW5TdGFydCwgMTApO1xyXG5cclxuXHRcdFx0Ly8gY2hlY2sgZm9yIHVuaXQgIGFzIHBlciBpc3N1ZSAjNjlcclxuXHRcdFx0aWYgKHBhcnRzWzNdID09ICclJykgZW5kID0gZW5kICsgJyUnO1xyXG5cclxuXHRcdFx0cmV0dXJuIGVuZDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBjbGVhblN0YXJ0O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0XHRAcHJpdmF0ZVxyXG5cdFx0QG5hbWUgX2dldFRyYW5zbGF0aW9uXHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBNYWtlIGEgdHJhbnNsYXRlIG9yIHRyYW5zbGF0ZTNkIHN0cmluZ1xyXG5cdFx0QHBhcmFtIHtpbnRlZ2VyfSBbeF1cclxuXHRcdEBwYXJhbSB7aW50ZWdlcn0gW3ldXHJcblx0XHRAcGFyYW0ge2Jvb2xlYW59IFt1c2UzRF0gVXNlIHRyYW5zbGF0ZTNkIGlmIGF2YWlsYWJsZT9cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIF9nZXRUcmFuc2xhdGlvbih4LCB5LCB1c2UzRCkge1xyXG5cdFx0cmV0dXJuICgodXNlM0QgPT09IHRydWUgfHwgKCh1c2UzREJ5RGVmYXVsdCA9PT0gdHJ1ZSAmJiB1c2UzRCAhPT0gZmFsc2UpKSAmJiBoYXMzRCkpID8gJ3RyYW5zbGF0ZTNkKCcgKyB4ICsgJ3B4LCAnICsgeSArICdweCwgMCknIDogJ3RyYW5zbGF0ZSgnICsgeCArICdweCwnICsgeSArICdweCknO1xyXG5cdH1cclxuXHJcblxyXG5cdC8qKlxyXG5cdFx0QHByaXZhdGVcclxuXHRcdEBuYW1lIF9hcHBseUNTU1RyYW5zaXRpb25cclxuXHRcdEBmdW5jdGlvblxyXG5cdFx0QGRlc2NyaXB0aW9uIEJ1aWxkIHVwIHRoZSBDU1Mgb2JqZWN0XHJcblx0XHRAcGFyYW0ge29iamVjdH0gW2VdIEVsZW1lbnRcclxuXHRcdEBwYXJhbSB7c3RyaW5nfSBbcHJvcGVydHldIFByb3BlcnR5IHdlJ3JlIGRlYWxpbmcgd2l0aFxyXG5cdFx0QHBhcmFtIHtpbnRlZ2VyfSBbZHVyYXRpb25dIER1cmF0aW9uXHJcblx0XHRAcGFyYW0ge3N0cmluZ30gW2Vhc2luZ10gRWFzaW5nIGZ1bmN0aW9uXHJcblx0XHRAcGFyYW0ge3ZhcmlhbnR9IFt2YWx1ZV0gU3RyaW5nL2ludGVnZXIgZm9yIHRhcmdldCB2YWx1ZVxyXG5cdFx0QHBhcmFtIHtib29sZWFufSBbaXNUcmFuc2Zvcm1dIElzIHRoaXMgYSBDU1MgdHJhbnNmb3JtYXRpb24/XHJcblx0XHRAcGFyYW0ge2Jvb2xlYW59IFtpc1RyYW5zbGF0YWJsZV0gSXMgdGhpcyBhIENTUyB0cmFuc2xhdGlvbj9cclxuXHRcdEBwYXJhbSB7Ym9vbGVhbn0gW3VzZTNEXSBVc2UgdHJhbnNsYXRlM2QgaWYgYXZhaWxhYmxlP1xyXG5cdCovXHJcblx0ZnVuY3Rpb24gX2FwcGx5Q1NTVHJhbnNpdGlvbihlLCBwcm9wZXJ0eSwgZHVyYXRpb24sIGVhc2luZywgdmFsdWUsIGlzVHJhbnNmb3JtLCBpc1RyYW5zbGF0YWJsZSwgdXNlM0QpIHtcclxuXHRcdHZhciBlQ1NTRGF0YSA9IGUuZGF0YShEQVRBX0tFWSksXHJcblx0XHRcdGVuaGFuY2VEYXRhID0gZUNTU0RhdGEgJiYgIV9pc0VtcHR5T2JqZWN0KGVDU1NEYXRhKSA/IGVDU1NEYXRhIDogalF1ZXJ5LmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdEVuaGFuY2VEYXRhKSxcclxuXHRcdFx0b2Zmc2V0UG9zaXRpb24gPSB2YWx1ZSxcclxuXHRcdFx0aXNEaXJlY3Rpb24gPSBqUXVlcnkuaW5BcnJheShwcm9wZXJ0eSwgZGlyZWN0aW9ucykgPiAtMTtcclxuXHJcblxyXG5cdFx0aWYgKGlzRGlyZWN0aW9uKSB7XHJcblx0XHRcdHZhciBtZXRhID0gZW5oYW5jZURhdGEubWV0YSxcclxuXHRcdFx0XHRjbGVhblByb3BlcnR5VmFsdWUgPSBfY2xlYW5WYWx1ZShlLmNzcyhwcm9wZXJ0eSkpIHx8IDAsXHJcblx0XHRcdFx0c3Rhc2hlZFByb3BlcnR5ID0gcHJvcGVydHkgKyAnX28nO1xyXG5cclxuXHRcdFx0b2Zmc2V0UG9zaXRpb24gPSB2YWx1ZSAtIGNsZWFuUHJvcGVydHlWYWx1ZTtcclxuXHJcblxyXG5cdFx0XHRtZXRhW3Byb3BlcnR5XSA9IG9mZnNldFBvc2l0aW9uO1xyXG5cdFx0XHRtZXRhW3N0YXNoZWRQcm9wZXJ0eV0gPSBlLmNzcyhwcm9wZXJ0eSkgPT0gJ2F1dG8nID8gMCArIG9mZnNldFBvc2l0aW9uIDogY2xlYW5Qcm9wZXJ0eVZhbHVlICsgb2Zmc2V0UG9zaXRpb24gfHwgMDtcclxuXHRcdFx0ZW5oYW5jZURhdGEubWV0YSA9IG1ldGE7XHJcblxyXG5cdFx0XHQvLyBmaXggMCBpc3N1ZSAodHJhbnNpdGlvbiBieSAwID0gbm90aGluZylcclxuXHRcdFx0aWYgKGlzVHJhbnNsYXRhYmxlICYmIG9mZnNldFBvc2l0aW9uID09PSAwKSB7XHJcblx0XHRcdFx0b2Zmc2V0UG9zaXRpb24gPSAwIC0gbWV0YVtzdGFzaGVkUHJvcGVydHldO1xyXG5cdFx0XHRcdG1ldGFbcHJvcGVydHldID0gb2Zmc2V0UG9zaXRpb247XHJcblx0XHRcdFx0bWV0YVtzdGFzaGVkUHJvcGVydHldID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHJlYXBwbHkgZGF0YSBhbmQgcmV0dXJuXHJcblx0XHRyZXR1cm4gZS5kYXRhKERBVEFfS0VZLCBfYXBwbHlDU1NXaXRoUHJlZml4KGUsIGVuaGFuY2VEYXRhLCBwcm9wZXJ0eSwgZHVyYXRpb24sIGVhc2luZywgb2Zmc2V0UG9zaXRpb24sIGlzVHJhbnNmb3JtLCBpc1RyYW5zbGF0YWJsZSwgdXNlM0QpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdFx0QHByaXZhdGVcclxuXHRcdEBuYW1lIF9hcHBseUNTU1dpdGhQcmVmaXhcclxuXHRcdEBmdW5jdGlvblxyXG5cdFx0QGRlc2NyaXB0aW9uIEhlbHBlciBmdW5jdGlvbiB0byBidWlsZCB1cCBDU1MgcHJvcGVydGllcyB1c2luZyB0aGUgdmFyaW91cyBwcmVmaXhlc1xyXG5cdFx0QHBhcmFtIHtvYmplY3R9IFtjc3NQcm9wZXJ0aWVzXSBDdXJyZW50IENTUyBvYmplY3QgdG8gbWVyZ2Ugd2l0aFxyXG5cdFx0QHBhcmFtIHtzdHJpbmd9IFtwcm9wZXJ0eV1cclxuXHRcdEBwYXJhbSB7aW50ZWdlcn0gW2R1cmF0aW9uXVxyXG5cdFx0QHBhcmFtIHtzdHJpbmd9IFtlYXNpbmddXHJcblx0XHRAcGFyYW0ge3ZhcmlhbnR9IFt2YWx1ZV1cclxuXHRcdEBwYXJhbSB7Ym9vbGVhbn0gW2lzVHJhbnNmb3JtXSBJcyB0aGlzIGEgQ1NTIHRyYW5zZm9ybWF0aW9uP1xyXG5cdFx0QHBhcmFtIHtib29sZWFufSBbaXNUcmFuc2xhdGFibGVdIElzIHRoaXMgYSBDU1MgdHJhbnNsYXRpb24/XHJcblx0XHRAcGFyYW0ge2Jvb2xlYW59IFt1c2UzRF0gVXNlIHRyYW5zbGF0ZTNkIGlmIGF2YWlsYWJsZT9cclxuXHQqL1xyXG5cdGZ1bmN0aW9uIF9hcHBseUNTU1dpdGhQcmVmaXgoZSwgY3NzUHJvcGVydGllcywgcHJvcGVydHksIGR1cmF0aW9uLCBlYXNpbmcsIHZhbHVlLCBpc1RyYW5zZm9ybSwgaXNUcmFuc2xhdGFibGUsIHVzZTNEKSB7XHJcblx0XHR2YXIgc2F2ZU9yaWdpbmFsID0gZmFsc2UsXHJcblx0XHRcdHRyYW5zZm9ybSA9IGlzVHJhbnNmb3JtID09PSB0cnVlICYmIGlzVHJhbnNsYXRhYmxlID09PSB0cnVlO1xyXG5cclxuXHJcblx0XHRjc3NQcm9wZXJ0aWVzID0gY3NzUHJvcGVydGllcyB8fCB7fTtcclxuXHRcdGlmICghY3NzUHJvcGVydGllcy5vcmlnaW5hbCkge1xyXG5cdFx0XHRjc3NQcm9wZXJ0aWVzLm9yaWdpbmFsID0ge307XHJcblx0XHRcdHNhdmVPcmlnaW5hbCA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRjc3NQcm9wZXJ0aWVzLnByb3BlcnRpZXMgPSBjc3NQcm9wZXJ0aWVzLnByb3BlcnRpZXMgfHwge307XHJcblx0XHRjc3NQcm9wZXJ0aWVzLnNlY29uZGFyeSA9IGNzc1Byb3BlcnRpZXMuc2Vjb25kYXJ5IHx8IHt9O1xyXG5cclxuXHRcdHZhciBtZXRhID0gY3NzUHJvcGVydGllcy5tZXRhLFxyXG5cdFx0XHRvcmlnaW5hbCA9IGNzc1Byb3BlcnRpZXMub3JpZ2luYWwsXHJcblx0XHRcdHByb3BlcnRpZXMgPSBjc3NQcm9wZXJ0aWVzLnByb3BlcnRpZXMsXHJcblx0XHRcdHNlY29uZGFyeSA9IGNzc1Byb3BlcnRpZXMuc2Vjb25kYXJ5O1xyXG5cclxuXHRcdGZvciAodmFyIGkgPSBjc3NQcmVmaXhlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHR2YXIgdHAgPSBjc3NQcmVmaXhlc1tpXSArICd0cmFuc2l0aW9uLXByb3BlcnR5JyxcclxuXHRcdFx0XHR0ZCA9IGNzc1ByZWZpeGVzW2ldICsgJ3RyYW5zaXRpb24tZHVyYXRpb24nLFxyXG5cdFx0XHRcdHRmID0gY3NzUHJlZml4ZXNbaV0gKyAndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nO1xyXG5cclxuXHRcdFx0cHJvcGVydHkgPSAodHJhbnNmb3JtID8gY3NzUHJlZml4ZXNbaV0gKyAndHJhbnNmb3JtJyA6IHByb3BlcnR5KTtcclxuXHJcblx0XHRcdGlmIChzYXZlT3JpZ2luYWwpIHtcclxuXHRcdFx0XHRvcmlnaW5hbFt0cF0gPSBlLmNzcyh0cCkgfHwgJyc7XHJcblx0XHRcdFx0b3JpZ2luYWxbdGRdID0gZS5jc3ModGQpIHx8ICcnO1xyXG5cdFx0XHRcdG9yaWdpbmFsW3RmXSA9IGUuY3NzKHRmKSB8fCAnJztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2Vjb25kYXJ5W3Byb3BlcnR5XSA9IHRyYW5zZm9ybSA/IF9nZXRUcmFuc2xhdGlvbihtZXRhLmxlZnQsIG1ldGEudG9wLCB1c2UzRCkgOiB2YWx1ZTtcclxuXHJcblx0XHRcdHByb3BlcnRpZXNbdHBdID0gKHByb3BlcnRpZXNbdHBdID8gcHJvcGVydGllc1t0cF0gKyAnLCcgOiAnJykgKyBwcm9wZXJ0eTtcclxuXHRcdFx0cHJvcGVydGllc1t0ZF0gPSAocHJvcGVydGllc1t0ZF0gPyBwcm9wZXJ0aWVzW3RkXSArICcsJyA6ICcnKSArIGR1cmF0aW9uICsgJ21zJztcclxuXHRcdFx0cHJvcGVydGllc1t0Zl0gPSAocHJvcGVydGllc1t0Zl0gPyBwcm9wZXJ0aWVzW3RmXSArICcsJyA6ICcnKSArIGVhc2luZztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gY3NzUHJvcGVydGllcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdFx0QHByaXZhdGVcclxuXHRcdEBuYW1lIF9pc0JveFNob3J0Y3V0XHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBTaG9ydGN1dCB0byBkZXRlY3QgaWYgd2UgbmVlZCB0byBzdGVwIGF3YXkgZnJvbSBzbGlkZVRvZ2dsZSwgQ1NTIGFjY2VsZXJhdGVkIHRyYW5zaXRpb25zICh0byBjb21lIGxhdGVyIHdpdGggZnguc3RlcCBzdXBwb3J0KVxyXG5cdFx0QHBhcmFtIHtvYmplY3R9IFtwcm9wXVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gX2lzQm94U2hvcnRjdXQocHJvcCkge1xyXG5cdFx0Zm9yICh2YXIgcHJvcGVydHkgaW4gcHJvcCkge1xyXG5cdFx0XHRpZiAoKHByb3BlcnR5ID09ICd3aWR0aCcgfHwgcHJvcGVydHkgPT0gJ2hlaWdodCcpICYmIChwcm9wW3Byb3BlcnR5XSA9PSAnc2hvdycgfHwgcHJvcFtwcm9wZXJ0eV0gPT0gJ2hpZGUnIHx8IHByb3BbcHJvcGVydHldID09ICd0b2dnbGUnKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHJcblx0LyoqXHJcblx0XHRAcHJpdmF0ZVxyXG5cdFx0QG5hbWUgX2lzRW1wdHlPYmplY3RcclxuXHRcdEBmdW5jdGlvblxyXG5cdFx0QGRlc2NyaXB0aW9uIENoZWNrIGlmIG9iamVjdCBpcyBlbXB0eSAoPDEuNCBjb21wYXRpYmlsaXR5KVxyXG5cdFx0QHBhcmFtIHtvYmplY3R9IFtvYmpdXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBfaXNFbXB0eU9iamVjdChvYmopIHtcclxuXHRcdGZvciAodmFyIGkgaW4gb2JqKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmV0Y2ggbW9zdCBhcHByb3ByaWF0ZSBkaXNwbGF5IHZhbHVlIGZvciBlbGVtZW50IHR5cGVzXHJcblx0ICogQHNlZSAgaHR0cHM6Ly9naXRodWIuY29tL2JlbmJhcm5ldHQvalF1ZXJ5LUFuaW1hdGUtRW5oYW5jZWQvaXNzdWVzLzEyMVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICogQHBhcmFtICB7W3R5cGVdfSB0YWdOYW1lIFtkZXNjcmlwdGlvbl1cclxuXHQgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIF9kb21FbGVtZW50VmlzaWJsZURpc3BsYXlWYWx1ZSh0YWdOYW1lKSB7XHJcblx0XHR0YWdOYW1lID0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xyXG5cdFx0dmFyIGRpc3BsYXlWYWx1ZXMgPSB7XHJcblx0XHRcdCdMSScgICAgICAgOiAnbGlzdC1pdGVtJyxcclxuXHRcdFx0J1RSJyAgICAgICA6ICd0YWJsZS1yb3cnLFxyXG5cdFx0XHQnVEQnICAgICAgIDogJ3RhYmxlLWNlbGwnLFxyXG5cdFx0XHQnVEgnICAgICAgIDogJ3RhYmxlLWNlbGwnLFxyXG5cdFx0XHQnQ0FQVElPTicgIDogJ3RhYmxlLWNhcHRpb24nLFxyXG5cdFx0XHQnQ09MJyAgICAgIDogJ3RhYmxlLWNvbHVtbicsXHJcblx0XHRcdCdDT0xHUk9VUCcgOiAndGFibGUtY29sdW1uLWdyb3VwJyxcclxuXHRcdFx0J1RGT09UJyAgICAgIDogJ3RhYmxlLWZvb3Rlci1ncm91cCcsXHJcblx0XHRcdCdUSEVBRCcgICAgICA6ICd0YWJsZS1oZWFkZXItZ3JvdXAnLFxyXG5cdFx0XHQnVEJPRFknICAgICAgOiAndGFibGUtcm93LWdyb3VwJ1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gdHlwZW9mIGRpc3BsYXlWYWx1ZXNbdGFnTmFtZV0gPT0gJ3N0cmluZycgPyBkaXNwbGF5VmFsdWVzW3RhZ05hbWVdIDogJ2Jsb2NrJztcclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHRcdEBwcml2YXRlXHJcblx0XHRAbmFtZSBfY2xlYW5WYWx1ZVxyXG5cdFx0QGZ1bmN0aW9uXHJcblx0XHRAZGVzY3JpcHRpb24gUmVtb3ZlICdweCcgYW5kIG90aGVyIGFydGlmYWN0c1xyXG5cdFx0QHBhcmFtIHt2YXJpYW50fSBbdmFsXVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gX2NsZWFuVmFsdWUodmFsKSB7XHJcblx0XHRyZXR1cm4gcGFyc2VGbG9hdCh2YWwucmVwbGFjZShfZ2V0VW5pdCh2YWwpLCAnJykpO1xyXG5cdH1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIF9pc1ZhbGlkRWxlbWVudChlbGVtZW50KSB7XHJcblx0XHR2YXIgYWxsVmFsaWQ9dHJ1ZTtcclxuXHRcdGVsZW1lbnQuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuXHRcdFx0YWxsVmFsaWQgPSBhbGxWYWxpZCAmJiBlbC5vd25lckRvY3VtZW50O1xyXG5cdFx0XHRyZXR1cm4gYWxsVmFsaWQ7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBhbGxWYWxpZDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdFx0QHByaXZhdGVcclxuXHRcdEBuYW1lIF9hcHByb3ByaWF0ZVByb3BlcnR5XHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBGdW5jdGlvbiB0byBjaGVjayBpZiBwcm9wZXJ0eSBzaG91bGQgYmUgaGFuZGxlZCBieSBwbHVnaW5cclxuXHRcdEBwYXJhbSB7c3RyaW5nfSBbcHJvcF1cclxuXHRcdEBwYXJhbSB7dmFyaWFudH0gW3ZhbHVlXVxyXG5cdCovXHJcblx0ZnVuY3Rpb24gX2FwcHJvcHJpYXRlUHJvcGVydHkocHJvcCwgdmFsdWUsIGVsZW1lbnQpIHtcclxuXHRcdGlmICghX2lzVmFsaWRFbGVtZW50KGVsZW1lbnQpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgaXMgPSBqUXVlcnkuaW5BcnJheShwcm9wLCBjc3NUcmFuc2l0aW9uUHJvcGVydGllcykgPiAtMTtcclxuXHRcdGlmICgocHJvcCA9PSAnd2lkdGgnIHx8IHByb3AgPT0gJ2hlaWdodCcgfHwgcHJvcCA9PSAnb3BhY2l0eScpICYmIChwYXJzZUZsb2F0KHZhbHVlKSA9PT0gcGFyc2VGbG9hdChlbGVtZW50LmNzcyhwcm9wKSkpKSBpcyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuIGlzO1xyXG5cdH1cclxuXHJcblxyXG5cdGpRdWVyeS5leHRlbmQoe1xyXG5cdFx0LyoqXHJcblx0XHRcdEBwdWJsaWNcclxuXHRcdFx0QG5hbWUgdG9nZ2xlM0RCeURlZmF1bHRcclxuXHRcdFx0QGZ1bmN0aW9uXHJcblx0XHRcdEBkZXNjcmlwdGlvbiBUb2dnbGUgZm9yIHBsdWdpbiBzZXR0aW5ncyB0byBhdXRvbWF0aWNhbGx5IHVzZSB0cmFuc2xhdGUzZCAod2hlcmUgYXZhaWxhYmxlKS4gVXNhZ2U6ICQudG9nZ2xlM0RCeURlZmF1bHRcclxuXHRcdCovXHJcblx0XHR0b2dnbGUzREJ5RGVmYXVsdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB1c2UzREJ5RGVmYXVsdCA9ICF1c2UzREJ5RGVmYXVsdDtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHRcdEBwdWJsaWNcclxuXHRcdFx0QG5hbWUgdG9nZ2xlRGlzYWJsZWRCeURlZmF1bHRcclxuXHRcdFx0QGZ1bmN0aW9uXHJcblx0XHRcdEBkZXNjcmlwdGlvbiBUb2dnbGUgdGhlIHBsdWdpbiB0byBiZSBkaXNhYmxlZCBieSBkZWZhdWx0IChjYW4gYmUgb3ZlcnJpZGRlbiBwZXIgYW5pbWF0aW9uIHdpdGggYXZvaWRDU1NUcmFuc2l0aW9ucylcclxuXHRcdCovXHJcblx0XHR0b2dnbGVEaXNhYmxlZEJ5RGVmYXVsdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiBwbHVnaW5EaXNhYmxlZERlZmF1bHQgPSAhcGx1Z2luRGlzYWJsZWREZWZhdWx0O1xyXG5cdFx0fSxcclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHRcdEBwdWJsaWNcclxuXHRcdFx0QG5hbWUgc2V0RGlzYWJsZWRCeURlZmF1bHRcclxuXHRcdFx0QGZ1bmN0aW9uXHJcblx0XHRcdEBkZXNjcmlwdGlvbiBTZXQgb3IgdW5zZXQgdGhlICdkaXNhYmxlZCBieSBkZWZhdWx0JyB2YWx1ZVxyXG5cdFx0Ki9cclxuXHRcdHNldERpc2FibGVkQnlEZWZhdWx0OiBmdW5jdGlvbihuZXdWYWx1ZSkge1xyXG5cdFx0XHRyZXR1cm4gcGx1Z2luRGlzYWJsZWREZWZhdWx0ID0gbmV3VmFsdWU7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cclxuXHQvKipcclxuXHRcdEBwdWJsaWNcclxuXHRcdEBuYW1lIHRyYW5zbGF0aW9uXHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBHZXQgY3VycmVudCBYIGFuZCBZIHRyYW5zbGF0aW9uc1xyXG5cdCovXHJcblx0alF1ZXJ5LmZuLnRyYW5zbGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIXRoaXNbMF0pIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyXHRlbGVtID0gdGhpc1swXSxcclxuXHRcdFx0Y1N0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSwgbnVsbCksXHJcblx0XHRcdHRyYW5zbGF0aW9uID0ge1xyXG5cdFx0XHRcdHg6IDAsXHJcblx0XHRcdFx0eTogMFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGlmIChjU3R5bGUpIHtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IGNzc1ByZWZpeGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0dmFyIHRyYW5zZm9ybSA9IGNTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGNzc1ByZWZpeGVzW2ldICsgJ3RyYW5zZm9ybScpO1xyXG5cdFx0XHRcdGlmICh0cmFuc2Zvcm0gJiYgKC9tYXRyaXgvaSkudGVzdCh0cmFuc2Zvcm0pKSB7XHJcblx0XHRcdFx0XHR2YXIgZXhwbG9kZWRNYXRyaXggPSB0cmFuc2Zvcm0ucmVwbGFjZSgvXm1hdHJpeFxcKC9pLCAnJykuc3BsaXQoLywgfFxcKSQvZyk7XHJcblx0XHRcdFx0XHR0cmFuc2xhdGlvbiA9IHtcclxuXHRcdFx0XHRcdFx0eDogcGFyc2VJbnQoZXhwbG9kZWRNYXRyaXhbNF0sIDEwKSxcclxuXHRcdFx0XHRcdFx0eTogcGFyc2VJbnQoZXhwbG9kZWRNYXRyaXhbNV0sIDEwKVxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJhbnNsYXRpb247XHJcblx0fTtcclxuXHJcblxyXG5cclxuXHQvKipcclxuXHRcdEBwdWJsaWNcclxuXHRcdEBuYW1lIGpRdWVyeS5mbi5hbmltYXRlXHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBUaGUgZW5oYW5jZWQgalF1ZXJ5LmFuaW1hdGUgZnVuY3Rpb25cclxuXHRcdEBwYXJhbSB7c3RyaW5nfSBbcHJvcGVydHldXHJcblx0XHRAcGFyYW0ge3N0cmluZ30gW3NwZWVkXVxyXG5cdFx0QHBhcmFtIHtzdHJpbmd9IFtlYXNpbmddXHJcblx0XHRAcGFyYW0ge2Z1bmN0aW9ufSBbY2FsbGJhY2tdXHJcblx0Ki9cclxuXHRqUXVlcnkuZm4uYW5pbWF0ZSA9IGZ1bmN0aW9uKHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrKSB7XHJcblx0XHRwcm9wID0gcHJvcCB8fCB7fTtcclxuXHRcdHZhciBpc1RyYW5zbGF0YWJsZSA9ICEodHlwZW9mIHByb3BbJ2JvdHRvbSddICE9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvcFsncmlnaHQnXSAhPT0gJ3VuZGVmaW5lZCcpLFxyXG5cdFx0XHRvcHRhbGwgPSBqUXVlcnkuc3BlZWQoc3BlZWQsIGVhc2luZywgY2FsbGJhY2spLFxyXG5cdFx0XHRjYWxsYmFja1F1ZXVlID0gMCxcclxuXHRcdFx0cHJvcGVydHlDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGNhbGxiYWNrUXVldWUtLTtcclxuXHRcdFx0XHRpZiAoY2FsbGJhY2tRdWV1ZSA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Ly8gd2UncmUgZG9uZSwgdHJpZ2dlciB0aGUgdXNlciBjYWxsYmFja1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBvcHRhbGwuY29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0b3B0YWxsLmNvbXBsZXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRieXBhc3NQbHVnaW4gPSAodHlwZW9mIHByb3BbJ2F2b2lkQ1NTVHJhbnNpdGlvbnMnXSAhPT0gJ3VuZGVmaW5lZCcpID8gcHJvcFsnYXZvaWRDU1NUcmFuc2l0aW9ucyddIDogcGx1Z2luRGlzYWJsZWREZWZhdWx0O1xyXG5cclxuXHRcdGlmIChieXBhc3NQbHVnaW4gPT09IHRydWUgfHwgIWNzc1RyYW5zaXRpb25zU3VwcG9ydGVkIHx8IF9pc0VtcHR5T2JqZWN0KHByb3ApIHx8IF9pc0JveFNob3J0Y3V0KHByb3ApIHx8IG9wdGFsbC5kdXJhdGlvbiA8PSAwIHx8IG9wdGFsbC5zdGVwKSB7XHJcblx0XHRcdHJldHVybiBvcmlnaW5hbEFuaW1hdGVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpc1sgb3B0YWxsLnF1ZXVlID09PSB0cnVlID8gJ3F1ZXVlJyA6ICdlYWNoJyBdKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IGpRdWVyeSh0aGlzKSxcclxuXHRcdFx0XHRvcHQgPSBqUXVlcnkuZXh0ZW5kKHt9LCBvcHRhbGwpLFxyXG5cdFx0XHRcdGNzc0NhbGxiYWNrID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0dmFyIHNlbGZDU1NEYXRhID0gc2VsZi5kYXRhKERBVEFfS0VZKSB8fCB7IG9yaWdpbmFsOiB7fSB9LFxyXG5cdFx0XHRcdFx0XHRyZXN0b3JlID0ge307XHJcblxyXG5cdFx0XHRcdFx0aWYgKGUuZXZlbnRQaGFzZSAhPSAyKSAgLy8gbm90IGF0IGRpc3BhdGNoaW5nIHRhcmdldCAodGhhbmtzIEB3YXJhcHBhIGlzc3VlICM1OClcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHRcdC8vIGNvbnZlcnQgdHJhbnNsYXRpb25zIHRvIGxlZnQgJiB0b3AgZm9yIGxheW91dFxyXG5cdFx0XHRcdFx0aWYgKHByb3AubGVhdmVUcmFuc2Zvcm1zICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSBjc3NQcmVmaXhlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcdFx0XHRcdHJlc3RvcmVbY3NzUHJlZml4ZXNbaV0gKyAndHJhbnNmb3JtJ10gPSAnJztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiAoaXNUcmFuc2xhdGFibGUgJiYgdHlwZW9mIHNlbGZDU1NEYXRhLm1ldGEgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaiA9IDAsIGRpcjsgKGRpciA9IGRpcmVjdGlvbnNbal0pOyArK2opIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJlc3RvcmVbZGlyXSA9IHNlbGZDU1NEYXRhLm1ldGFbZGlyICsgJ19vJ10gKyB2YWxVbml0O1xyXG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5KHRoaXMpLmNzcyhkaXIsIHJlc3RvcmVbZGlyXSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gcmVtb3ZlIHRyYW5zaXRpb24gdGltaW5nIGZ1bmN0aW9uc1xyXG5cdFx0XHRcdFx0c2VsZi5cclxuXHRcdFx0XHRcdFx0dW5iaW5kKHRyYW5zaXRpb25FbmRFdmVudCkuXHJcblx0XHRcdFx0XHRcdGNzcyhzZWxmQ1NTRGF0YS5vcmlnaW5hbCkuXHJcblx0XHRcdFx0XHRcdGNzcyhyZXN0b3JlKS5cclxuXHRcdFx0XHRcdFx0ZGF0YShEQVRBX0tFWSwgbnVsbCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gaWYgd2UgdXNlZCB0aGUgZmFkZU91dCBzaG9ydGN1dCBtYWtlIHN1cmUgZWxlbWVudHMgYXJlIGRpc3BsYXk6bm9uZVxyXG5cdFx0XHRcdFx0aWYgKHByb3Aub3BhY2l0eSA9PT0gJ2hpZGUnKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuY3NzKHsnZGlzcGxheSc6ICdub25lJywgJ29wYWNpdHknOiAnJ30pO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIHJ1biB0aGUgbWFpbiBjYWxsYmFjayBmdW5jdGlvblxyXG5cdFx0XHRcdFx0cHJvcGVydHlDYWxsYmFjay5jYWxsKHRoaXMpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZWFzaW5ncyA9IHtcclxuXHRcdFx0XHRcdGJvdW5jZTogQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC4wLCAwLjM1LCAuNSwgMS4zJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGxpbmVhcjogJ2xpbmVhcicsXHJcblx0XHRcdFx0XHRzd2luZzogJ2Vhc2UtaW4tb3V0JyxcclxuXHJcblx0XHRcdFx0XHQvLyBQZW5uZXIgZXF1YXRpb24gYXBwcm94aW1hdGlvbnMgZnJvbSBNYXR0aGV3IExlaW4ncyBDZWFzZXI6IGh0dHA6Ly9tYXR0aGV3bGVpbi5jb20vY2Vhc2VyL1xyXG5cdFx0XHRcdFx0ZWFzZUluUXVhZDogICAgIENVQklDX0JFWklFUl9PUEVOICsgJzAuNTUwLCAwLjA4NSwgMC42ODAsIDAuNTMwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VJbkN1YmljOiAgICBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MCcgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlSW5RdWFydDogICAgQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC44OTUsIDAuMDMwLCAwLjY4NSwgMC4yMjAnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZUluUXVpbnQ6ICAgIENVQklDX0JFWklFUl9PUEVOICsgJzAuNzU1LCAwLjA1MCwgMC44NTUsIDAuMDYwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VJblNpbmU6ICAgICBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjQ3MCwgMC4wMDAsIDAuNzQ1LCAwLjcxNScgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlSW5FeHBvOiAgICAgQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC45NTAsIDAuMDUwLCAwLjc5NSwgMC4wMzUnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZUluQ2lyYzogICAgIENVQklDX0JFWklFUl9PUEVOICsgJzAuNjAwLCAwLjA0MCwgMC45ODAsIDAuMzM1JyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VJbkJhY2s6ICAgICBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjYwMCwgLTAuMjgwLCAwLjczNSwgMC4wNDUnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZU91dFF1YWQ6ICAgIENVQklDX0JFWklFUl9PUEVOICsgJzAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VPdXRDdWJpYzogICBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjIxNSwgMC42MTAsIDAuMzU1LCAxLjAwMCcgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlT3V0UXVhcnQ6ICAgQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC4xNjUsIDAuODQwLCAwLjQ0MCwgMS4wMDAnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZU91dFF1aW50OiAgIENVQklDX0JFWklFUl9PUEVOICsgJzAuMjMwLCAxLjAwMCwgMC4zMjAsIDEuMDAwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VPdXRTaW5lOiAgICBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjM5MCwgMC41NzUsIDAuNTY1LCAxLjAwMCcgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlT3V0RXhwbzogICAgQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC4xOTAsIDEuMDAwLCAwLjIyMCwgMS4wMDAnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZU91dENpcmM6ICAgIENVQklDX0JFWklFUl9PUEVOICsgJzAuMDc1LCAwLjgyMCwgMC4xNjUsIDEuMDAwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VPdXRCYWNrOiAgICBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjE3NSwgMC44ODUsIDAuMzIwLCAxLjI3NScgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlSW5PdXRRdWFkOiAgQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC40NTUsIDAuMDMwLCAwLjUxNSwgMC45NTUnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZUluT3V0Q3ViaWM6IENVQklDX0JFWklFUl9PUEVOICsgJzAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEuMDAwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VJbk91dFF1YXJ0OiBDVUJJQ19CRVpJRVJfT1BFTiArICcwLjc3MCwgMC4wMDAsIDAuMTc1LCAxLjAwMCcgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlSW5PdXRRdWludDogQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC44NjAsIDAuMDAwLCAwLjA3MCwgMS4wMDAnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZUluT3V0U2luZTogIENVQklDX0JFWklFUl9PUEVOICsgJzAuNDQ1LCAwLjA1MCwgMC41NTAsIDAuOTUwJyArIENVQklDX0JFWklFUl9DTE9TRSxcclxuXHRcdFx0XHRcdGVhc2VJbk91dEV4cG86ICBDVUJJQ19CRVpJRVJfT1BFTiArICcxLjAwMCwgMC4wMDAsIDAuMDAwLCAxLjAwMCcgKyBDVUJJQ19CRVpJRVJfQ0xPU0UsXHJcblx0XHRcdFx0XHRlYXNlSW5PdXRDaXJjOiAgQ1VCSUNfQkVaSUVSX09QRU4gKyAnMC43ODUsIDAuMTM1LCAwLjE1MCwgMC44NjAnICsgQ1VCSUNfQkVaSUVSX0NMT1NFLFxyXG5cdFx0XHRcdFx0ZWFzZUluT3V0QmFjazogIENVQklDX0JFWklFUl9PUEVOICsgJzAuNjgwLCAtMC41NTAsIDAuMjY1LCAxLjU1MCcgKyBDVUJJQ19CRVpJRVJfQ0xPU0VcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGRvbVByb3BlcnRpZXMgPSB7fSxcclxuXHRcdFx0XHRjc3NFYXNpbmcgPSBlYXNpbmdzW29wdC5lYXNpbmcgfHwgJ3N3aW5nJ10gPyBlYXNpbmdzW29wdC5lYXNpbmcgfHwgJ3N3aW5nJ10gOiBvcHQuZWFzaW5nIHx8ICdzd2luZyc7XHJcblxyXG5cdFx0XHQvLyBzZXBlcmF0ZSBvdXQgdGhlIHByb3BlcnRpZXMgZm9yIHRoZSByZWxldmFudCBhbmltYXRpb24gZnVuY3Rpb25zXHJcblx0XHRcdGZvciAodmFyIHAgaW4gcHJvcCkge1xyXG5cdFx0XHRcdGlmIChqUXVlcnkuaW5BcnJheShwLCBwbHVnaW5PcHRpb25zKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRcdHZhciBpc0RpcmVjdGlvbiA9IGpRdWVyeS5pbkFycmF5KHAsIGRpcmVjdGlvbnMpID4gLTEsXHJcblx0XHRcdFx0XHRcdGNsZWFuVmFsID0gX2ludGVycHJldFZhbHVlKHNlbGYsIHByb3BbcF0sIHAsIChpc0RpcmVjdGlvbiAmJiBwcm9wLmF2b2lkVHJhbnNmb3JtcyAhPT0gdHJ1ZSkpO1xyXG5cclxuXHJcblx0XHRcdFx0XHRpZiAoLyoqcHJvcC5hdm9pZFRyYW5zZm9ybXMgIT09IHRydWUgJiYgKiovX2FwcHJvcHJpYXRlUHJvcGVydHkocCwgY2xlYW5WYWwsIHNlbGYpKSB7XHJcblx0XHRcdFx0XHRcdF9hcHBseUNTU1RyYW5zaXRpb24oXHJcblx0XHRcdFx0XHRcdFx0c2VsZixcclxuXHRcdFx0XHRcdFx0XHRwLFxyXG5cdFx0XHRcdFx0XHRcdG9wdC5kdXJhdGlvbixcclxuXHRcdFx0XHRcdFx0XHRjc3NFYXNpbmcsXHJcblx0XHRcdFx0XHRcdFx0Y2xlYW5WYWwsIC8vaXNEaXJlY3Rpb24gJiYgcHJvcC5hdm9pZFRyYW5zZm9ybXMgPT09IHRydWUgPyBjbGVhblZhbCArIHZhbFVuaXQgOiBjbGVhblZhbCxcclxuXHRcdFx0XHRcdFx0XHRpc0RpcmVjdGlvbiAmJiBwcm9wLmF2b2lkVHJhbnNmb3JtcyAhPT0gdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRpc1RyYW5zbGF0YWJsZSxcclxuXHRcdFx0XHRcdFx0XHRwcm9wLnVzZVRyYW5zbGF0ZTNkKTtcclxuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZG9tUHJvcGVydGllc1twXSA9IHByb3BbcF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLnVuYmluZCh0cmFuc2l0aW9uRW5kRXZlbnQpO1xyXG5cclxuXHRcdFx0dmFyIHNlbGZDU1NEYXRhID0gc2VsZi5kYXRhKERBVEFfS0VZKTtcclxuXHJcblxyXG5cdFx0XHRpZiAoc2VsZkNTU0RhdGEgJiYgIV9pc0VtcHR5T2JqZWN0KHNlbGZDU1NEYXRhKSAmJiAhX2lzRW1wdHlPYmplY3Qoc2VsZkNTU0RhdGEuc2Vjb25kYXJ5KSkge1xyXG5cdFx0XHRcdGNhbGxiYWNrUXVldWUrKztcclxuXHJcblx0XHRcdFx0c2VsZi5jc3Moc2VsZkNTU0RhdGEucHJvcGVydGllcyk7XHJcblxyXG5cdFx0XHRcdC8vIHN0b3JlIGluIGEgdmFyIHRvIGF2b2lkIGFueSB0aW1pbmcgaXNzdWVzLCBkZXBlbmRpbmcgb24gYW5pbWF0aW9uIGR1cmF0aW9uXHJcblx0XHRcdFx0dmFyIHNlY29uZGFyeSA9IHNlbGZDU1NEYXRhLnNlY29uZGFyeTtcclxuXHJcblx0XHRcdFx0Ly8gaGFzIHRvIGJlIGRvbmUgaW4gYSB0aW1lb3V0IHRvIGVuc3VyZSB0cmFuc2l0aW9uIHByb3BlcnRpZXMgYXJlIHNldFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLmJpbmQodHJhbnNpdGlvbkVuZEV2ZW50LCBjc3NDYWxsYmFjaykuY3NzKHNlY29uZGFyeSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Ly8gaXQgd29uJ3QgZ2V0IGZpcmVkIG90aGVyd2lzZVxyXG5cdFx0XHRcdG9wdC5xdWV1ZSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBmaXJlIHVwIERPTSBiYXNlZCBhbmltYXRpb25zXHJcblx0XHRcdGlmICghX2lzRW1wdHlPYmplY3QoZG9tUHJvcGVydGllcykpIHtcclxuXHRcdFx0XHRjYWxsYmFja1F1ZXVlKys7XHJcblx0XHRcdFx0b3JpZ2luYWxBbmltYXRlTWV0aG9kLmFwcGx5KHNlbGYsIFtkb21Qcm9wZXJ0aWVzLCB7XHJcblx0XHRcdFx0XHRkdXJhdGlvbjogb3B0LmR1cmF0aW9uLFxyXG5cdFx0XHRcdFx0ZWFzaW5nOiBqUXVlcnkuZWFzaW5nW29wdC5lYXNpbmddID8gb3B0LmVhc2luZyA6IChqUXVlcnkuZWFzaW5nLnN3aW5nID8gJ3N3aW5nJyA6ICdsaW5lYXInKSxcclxuXHRcdFx0XHRcdGNvbXBsZXRlOiBwcm9wZXJ0eUNhbGxiYWNrLFxyXG5cdFx0XHRcdFx0cXVldWU6IG9wdC5xdWV1ZVxyXG5cdFx0XHRcdH1dKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gc3RyaWN0IEpTIGNvbXBsaWFuY2VcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuICAgIGpRdWVyeS5mbi5hbmltYXRlLmRlZmF1bHRzID0ge307XHJcblxyXG5cclxuXHQvKipcclxuXHRcdEBwdWJsaWNcclxuXHRcdEBuYW1lIGpRdWVyeS5mbi5zdG9wXHJcblx0XHRAZnVuY3Rpb25cclxuXHRcdEBkZXNjcmlwdGlvbiBUaGUgZW5oYW5jZWQgalF1ZXJ5LnN0b3AgZnVuY3Rpb24gKHJlc2V0cyB0cmFuc2Zvcm1zIHRvIGxlZnQvdG9wKVxyXG5cdFx0QHBhcmFtIHtib29sZWFufSBbY2xlYXJRdWV1ZV1cclxuXHRcdEBwYXJhbSB7Ym9vbGVhbn0gW2dvdG9FbmRdXHJcblx0XHRAcGFyYW0ge2Jvb2xlYW59IFtsZWF2ZVRyYW5zZm9ybXNdIExlYXZlIHRyYW5zZm9ybXMvdHJhbnNsYXRpb25zIGFzIHRoZXkgYXJlPyBEZWZhdWx0OiBmYWxzZSAocmVzZXQgdHJhbnNsYXRpb25zIHRvIGNhbGN1bGF0ZWQgZXhwbGljaXQgbGVmdC90b3AgcHJvcHMpXHJcblx0Ki9cclxuXHRqUXVlcnkuZm4uc3RvcCA9IGZ1bmN0aW9uKGNsZWFyUXVldWUsIGdvdG9FbmQsIGxlYXZlVHJhbnNmb3Jtcykge1xyXG5cdFx0aWYgKCFjc3NUcmFuc2l0aW9uc1N1cHBvcnRlZCkgcmV0dXJuIG9yaWdpbmFsU3RvcE1ldGhvZC5hcHBseSh0aGlzLCBbY2xlYXJRdWV1ZSwgZ290b0VuZF0pO1xyXG5cclxuXHRcdC8vIGNsZWFyIHRoZSBxdWV1ZT9cclxuXHRcdGlmIChjbGVhclF1ZXVlKSB0aGlzLnF1ZXVlKFtdKTtcclxuXHJcblx0XHQvLyByb3V0ZSB0byBhcHByb3ByaWF0ZSBzdG9wIG1ldGhvZHNcclxuXHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkodGhpcyksXHJcblx0XHRcdFx0c2VsZkNTU0RhdGEgPSBzZWxmLmRhdGEoREFUQV9LRVkpO1xyXG5cclxuXHRcdFx0Ly8gaXMgdGhpcyBhIENTUyB0cmFuc2l0aW9uP1xyXG5cdFx0XHRpZiAoc2VsZkNTU0RhdGEgJiYgIV9pc0VtcHR5T2JqZWN0KHNlbGZDU1NEYXRhKSkge1xyXG5cdFx0XHRcdHZhciBpLCByZXN0b3JlID0ge307XHJcblxyXG5cdFx0XHRcdGlmIChnb3RvRW5kKSB7XHJcblx0XHRcdFx0XHQvLyBncmFiIGVuZCBzdGF0ZSBwcm9wZXJ0aWVzXHJcblx0XHRcdFx0XHRyZXN0b3JlID0gc2VsZkNTU0RhdGEuc2Vjb25kYXJ5O1xyXG5cclxuXHRcdFx0XHRcdGlmICghbGVhdmVUcmFuc2Zvcm1zICYmIHR5cGVvZiBzZWxmQ1NTRGF0YS5tZXRhWydsZWZ0X28nXSAhPT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBzZWxmQ1NTRGF0YS5tZXRhWyd0b3BfbyddICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdFx0cmVzdG9yZVsnbGVmdCddID0gdHlwZW9mIHNlbGZDU1NEYXRhLm1ldGFbJ2xlZnRfbyddICE9PSB1bmRlZmluZWQgPyBzZWxmQ1NTRGF0YS5tZXRhWydsZWZ0X28nXSA6ICdhdXRvJztcclxuXHRcdFx0XHRcdFx0cmVzdG9yZVsndG9wJ10gPSB0eXBlb2Ygc2VsZkNTU0RhdGEubWV0YVsndG9wX28nXSAhPT0gdW5kZWZpbmVkID8gc2VsZkNTU0RhdGEubWV0YVsndG9wX28nXSA6ICdhdXRvJztcclxuXHJcblx0XHRcdFx0XHRcdC8vIHJlbW92ZSB0aGUgdHJhbnNmb3JtYXRpb25zXHJcblx0XHRcdFx0XHRcdGZvciAoaSA9IGNzc1ByZWZpeGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0XHRcdFx0cmVzdG9yZVtjc3NQcmVmaXhlc1tpXSsndHJhbnNmb3JtJ10gPSAnJztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIV9pc0VtcHR5T2JqZWN0KHNlbGZDU1NEYXRhLnNlY29uZGFyeSkpIHtcclxuXHRcdFx0XHRcdHZhciBjU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzZWxmWzBdLCBudWxsKTtcclxuXHRcdFx0XHRcdGlmIChjU3R5bGUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gZ3JhYiBjdXJyZW50IHByb3BlcnRpZXNcclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgcHJvcCBpbiBzZWxmQ1NTRGF0YS5zZWNvbmRhcnkpIHtcclxuXHRcdFx0XHRcdFx0XHRpZihzZWxmQ1NTRGF0YS5zZWNvbmRhcnkuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHByb3AgPSBwcm9wLnJlcGxhY2UocnVwcGVyLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHJlc3RvcmVbcHJvcF0gPSBjU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBpcyB0aGlzIGEgbWF0cml4IHByb3BlcnR5PyBleHRyYWN0IGxlZnQgYW5kIHRvcCBhbmQgYXBwbHlcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghbGVhdmVUcmFuc2Zvcm1zICYmICgvbWF0cml4L2kpLnRlc3QocmVzdG9yZVtwcm9wXSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGV4cGxvZGVkTWF0cml4ID0gcmVzdG9yZVtwcm9wXS5yZXBsYWNlKC9ebWF0cml4XFwoL2ksICcnKS5zcGxpdCgvLCB8XFwpJC9nKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGFwcGx5IHRoZSBleHBsaWNpdCBsZWZ0L3RvcCBwcm9wc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXN0b3JlWydsZWZ0J10gPSAocGFyc2VGbG9hdChleHBsb2RlZE1hdHJpeFs0XSkgKyBwYXJzZUZsb2F0KHNlbGYuY3NzKCdsZWZ0JykpICsgdmFsVW5pdCkgfHwgJ2F1dG8nO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXN0b3JlWyd0b3AnXSA9IChwYXJzZUZsb2F0KGV4cGxvZGVkTWF0cml4WzVdKSArIHBhcnNlRmxvYXQoc2VsZi5jc3MoJ3RvcCcpKSArIHZhbFVuaXQpIHx8ICdhdXRvJztcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlbW92ZSB0aGUgdHJhbnNmb3JtYXRpb25zXHJcblx0XHRcdFx0XHRcdFx0XHRcdGZvciAoaSA9IGNzc1ByZWZpeGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzdG9yZVtjc3NQcmVmaXhlc1tpXSsndHJhbnNmb3JtJ10gPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUmVtb3ZlIHRyYW5zaXRpb24gdGltaW5nIGZ1bmN0aW9uc1xyXG5cdFx0XHRcdC8vIE1vdmluZyB0byBzZXBlcmF0ZSB0aHJlYWQgKHJlOiBBbmltYXRpb24gcmV2ZXJ0cyB3aGVuIGZpbmlzaGVkIGluIEFuZHJvaWQgLSBpc3N1ZSAjOTEpXHJcblx0XHRcdFx0c2VsZi51bmJpbmQodHJhbnNpdGlvbkVuZEV2ZW50KTtcclxuXHRcdFx0XHRzZWxmLlxyXG5cdFx0XHRcdFx0Y3NzKHNlbGZDU1NEYXRhLm9yaWdpbmFsKS5cclxuXHRcdFx0XHRcdGNzcyhyZXN0b3JlKS5cclxuXHRcdFx0XHRcdGRhdGEoREFUQV9LRVksIG51bGwpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vIGRvbSB0cmFuc2l0aW9uXHJcblx0XHRcdFx0b3JpZ2luYWxTdG9wTWV0aG9kLmFwcGx5KHNlbGYsIFtjbGVhclF1ZXVlLCBnb3RvRW5kXSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH07XHJcbn0pKGpRdWVyeSwgalF1ZXJ5LmZuLmFuaW1hdGUsIGpRdWVyeS5mbi5zdG9wKTsiLCIvKiFcclxuV2F5cG9pbnRzIC0gNC4wLjBcclxuQ29weXJpZ2h0IMKpIDIwMTEtMjAxNSBDYWxlYiBUcm91Z2h0b25cclxuTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG5odHRwczovL2dpdGh1Yi5jb20vaW1ha2V3ZWJ0aGluZ3Mvd2F5cG9pbnRzL2Jsb2cvbWFzdGVyL2xpY2Vuc2VzLnR4dFxyXG4qL1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gIHZhciBrZXlDb3VudGVyID0gMFxyXG4gIHZhciBhbGxXYXlwb2ludHMgPSB7fVxyXG5cclxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvd2F5cG9pbnQgKi9cclxuICBmdW5jdGlvbiBXYXlwb2ludChvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb25zIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpXHJcbiAgICB9XHJcbiAgICBpZiAoIW9wdGlvbnMuZWxlbWVudCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGVsZW1lbnQgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpXHJcbiAgICB9XHJcbiAgICBpZiAoIW9wdGlvbnMuaGFuZGxlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGhhbmRsZXIgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5rZXkgPSAnd2F5cG9pbnQtJyArIGtleUNvdW50ZXJcclxuICAgIHRoaXMub3B0aW9ucyA9IFdheXBvaW50LkFkYXB0ZXIuZXh0ZW5kKHt9LCBXYXlwb2ludC5kZWZhdWx0cywgb3B0aW9ucylcclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMub3B0aW9ucy5lbGVtZW50XHJcbiAgICB0aGlzLmFkYXB0ZXIgPSBuZXcgV2F5cG9pbnQuQWRhcHRlcih0aGlzLmVsZW1lbnQpXHJcbiAgICB0aGlzLmNhbGxiYWNrID0gb3B0aW9ucy5oYW5kbGVyXHJcbiAgICB0aGlzLmF4aXMgPSB0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCdcclxuICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMub3B0aW9ucy5lbmFibGVkXHJcbiAgICB0aGlzLnRyaWdnZXJQb2ludCA9IG51bGxcclxuICAgIHRoaXMuZ3JvdXAgPSBXYXlwb2ludC5Hcm91cC5maW5kT3JDcmVhdGUoe1xyXG4gICAgICBuYW1lOiB0aGlzLm9wdGlvbnMuZ3JvdXAsXHJcbiAgICAgIGF4aXM6IHRoaXMuYXhpc1xyXG4gICAgfSlcclxuICAgIHRoaXMuY29udGV4dCA9IFdheXBvaW50LkNvbnRleHQuZmluZE9yQ3JlYXRlQnlFbGVtZW50KHRoaXMub3B0aW9ucy5jb250ZXh0KVxyXG5cclxuICAgIGlmIChXYXlwb2ludC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5vZmZzZXQgPSBXYXlwb2ludC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdXHJcbiAgICB9XHJcbiAgICB0aGlzLmdyb3VwLmFkZCh0aGlzKVxyXG4gICAgdGhpcy5jb250ZXh0LmFkZCh0aGlzKVxyXG4gICAgYWxsV2F5cG9pbnRzW3RoaXMua2V5XSA9IHRoaXNcclxuICAgIGtleUNvdW50ZXIgKz0gMVxyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIFdheXBvaW50LnByb3RvdHlwZS5xdWV1ZVRyaWdnZXIgPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcclxuICAgIHRoaXMuZ3JvdXAucXVldWVUcmlnZ2VyKHRoaXMsIGRpcmVjdGlvbilcclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBXYXlwb2ludC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKGFyZ3MpIHtcclxuICAgIGlmICghdGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY2FsbGJhY2spIHtcclxuICAgICAgdGhpcy5jYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyogUHVibGljICovXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rlc3Ryb3kgKi9cclxuICBXYXlwb2ludC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5jb250ZXh0LnJlbW92ZSh0aGlzKVxyXG4gICAgdGhpcy5ncm91cC5yZW1vdmUodGhpcylcclxuICAgIGRlbGV0ZSBhbGxXYXlwb2ludHNbdGhpcy5rZXldXHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgKi9cclxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGlzYWJsZSAqL1xyXG4gIFdheXBvaW50LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZVxyXG4gICAgcmV0dXJuIHRoaXNcclxuICB9XHJcblxyXG4gIC8qIFB1YmxpYyAqL1xyXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9lbmFibGUgKi9cclxuICBXYXlwb2ludC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmNvbnRleHQucmVmcmVzaCgpXHJcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlXHJcbiAgICByZXR1cm4gdGhpc1xyXG4gIH1cclxuXHJcbiAgLyogUHVibGljICovXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL25leHQgKi9cclxuICBXYXlwb2ludC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ3JvdXAubmV4dCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgLyogUHVibGljICovXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3ByZXZpb3VzICovXHJcbiAgV2F5cG9pbnQucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ncm91cC5wcmV2aW91cyh0aGlzKVxyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIFdheXBvaW50Lmludm9rZUFsbCA9IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgdmFyIGFsbFdheXBvaW50c0FycmF5ID0gW11cclxuICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIGFsbFdheXBvaW50cykge1xyXG4gICAgICBhbGxXYXlwb2ludHNBcnJheS5wdXNoKGFsbFdheXBvaW50c1t3YXlwb2ludEtleV0pXHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gYWxsV2F5cG9pbnRzQXJyYXkubGVuZ3RoOyBpIDwgZW5kOyBpKyspIHtcclxuICAgICAgYWxsV2F5cG9pbnRzQXJyYXlbaV1bbWV0aG9kXSgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgKi9cclxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGVzdHJveS1hbGwgKi9cclxuICBXYXlwb2ludC5kZXN0cm95QWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBXYXlwb2ludC5pbnZva2VBbGwoJ2Rlc3Ryb3knKVxyXG4gIH1cclxuXHJcbiAgLyogUHVibGljICovXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rpc2FibGUtYWxsICovXHJcbiAgV2F5cG9pbnQuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgV2F5cG9pbnQuaW52b2tlQWxsKCdkaXNhYmxlJylcclxuICB9XHJcblxyXG4gIC8qIFB1YmxpYyAqL1xyXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9lbmFibGUtYWxsICovXHJcbiAgV2F5cG9pbnQuZW5hYmxlQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBXYXlwb2ludC5pbnZva2VBbGwoJ2VuYWJsZScpXHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgKi9cclxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvcmVmcmVzaC1hbGwgKi9cclxuICBXYXlwb2ludC5yZWZyZXNoQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBXYXlwb2ludC5Db250ZXh0LnJlZnJlc2hBbGwoKVxyXG4gIH1cclxuXHJcbiAgLyogUHVibGljICovXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3ZpZXdwb3J0LWhlaWdodCAqL1xyXG4gIFdheXBvaW50LnZpZXdwb3J0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcclxuICB9XHJcblxyXG4gIC8qIFB1YmxpYyAqL1xyXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS92aWV3cG9ydC13aWR0aCAqL1xyXG4gIFdheXBvaW50LnZpZXdwb3J0V2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGhcclxuICB9XHJcblxyXG4gIFdheXBvaW50LmFkYXB0ZXJzID0gW11cclxuXHJcbiAgV2F5cG9pbnQuZGVmYXVsdHMgPSB7XHJcbiAgICBjb250ZXh0OiB3aW5kb3csXHJcbiAgICBjb250aW51b3VzOiB0cnVlLFxyXG4gICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgIGdyb3VwOiAnZGVmYXVsdCcsXHJcbiAgICBob3Jpem9udGFsOiBmYWxzZSxcclxuICAgIG9mZnNldDogMFxyXG4gIH1cclxuXHJcbiAgV2F5cG9pbnQub2Zmc2V0QWxpYXNlcyA9IHtcclxuICAgICdib3R0b20taW4tdmlldyc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlubmVySGVpZ2h0KCkgLSB0aGlzLmFkYXB0ZXIub3V0ZXJIZWlnaHQoKVxyXG4gICAgfSxcclxuICAgICdyaWdodC1pbi12aWV3JzogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuaW5uZXJXaWR0aCgpIC0gdGhpcy5hZGFwdGVyLm91dGVyV2lkdGgoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgd2luZG93LldheXBvaW50ID0gV2F5cG9pbnRcclxufSgpKVxyXG47KGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0J1xyXG5cclxuICBmdW5jdGlvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWVTaGltKGNhbGxiYWNrKSB7XHJcbiAgICB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKVxyXG4gIH1cclxuXHJcbiAgdmFyIGtleUNvdW50ZXIgPSAwXHJcbiAgdmFyIGNvbnRleHRzID0ge31cclxuICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnRcclxuICB2YXIgb2xkV2luZG93TG9hZCA9IHdpbmRvdy5vbmxvYWRcclxuXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQgKi9cclxuICBmdW5jdGlvbiBDb250ZXh0KGVsZW1lbnQpIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcclxuICAgIHRoaXMuQWRhcHRlciA9IFdheXBvaW50LkFkYXB0ZXJcclxuICAgIHRoaXMuYWRhcHRlciA9IG5ldyB0aGlzLkFkYXB0ZXIoZWxlbWVudClcclxuICAgIHRoaXMua2V5ID0gJ3dheXBvaW50LWNvbnRleHQtJyArIGtleUNvdW50ZXJcclxuICAgIHRoaXMuZGlkU2Nyb2xsID0gZmFsc2VcclxuICAgIHRoaXMuZGlkUmVzaXplID0gZmFsc2VcclxuICAgIHRoaXMub2xkU2Nyb2xsID0ge1xyXG4gICAgICB4OiB0aGlzLmFkYXB0ZXIuc2Nyb2xsTGVmdCgpLFxyXG4gICAgICB5OiB0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKClcclxuICAgIH1cclxuICAgIHRoaXMud2F5cG9pbnRzID0ge1xyXG4gICAgICB2ZXJ0aWNhbDoge30sXHJcbiAgICAgIGhvcml6b250YWw6IHt9XHJcbiAgICB9XHJcblxyXG4gICAgZWxlbWVudC53YXlwb2ludENvbnRleHRLZXkgPSB0aGlzLmtleVxyXG4gICAgY29udGV4dHNbZWxlbWVudC53YXlwb2ludENvbnRleHRLZXldID0gdGhpc1xyXG4gICAga2V5Q291bnRlciArPSAxXHJcblxyXG4gICAgdGhpcy5jcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyKClcclxuICAgIHRoaXMuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlcigpXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgQ29udGV4dC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcclxuICAgIHZhciBheGlzID0gd2F5cG9pbnQub3B0aW9ucy5ob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJ1xyXG4gICAgdGhpcy53YXlwb2ludHNbYXhpc11bd2F5cG9pbnQua2V5XSA9IHdheXBvaW50XHJcbiAgICB0aGlzLnJlZnJlc2goKVxyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIENvbnRleHQucHJvdG90eXBlLmNoZWNrRW1wdHkgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBob3Jpem9udGFsRW1wdHkgPSB0aGlzLkFkYXB0ZXIuaXNFbXB0eU9iamVjdCh0aGlzLndheXBvaW50cy5ob3Jpem9udGFsKVxyXG4gICAgdmFyIHZlcnRpY2FsRW1wdHkgPSB0aGlzLkFkYXB0ZXIuaXNFbXB0eU9iamVjdCh0aGlzLndheXBvaW50cy52ZXJ0aWNhbClcclxuICAgIGlmIChob3Jpem9udGFsRW1wdHkgJiYgdmVydGljYWxFbXB0eSkge1xyXG4gICAgICB0aGlzLmFkYXB0ZXIub2ZmKCcud2F5cG9pbnRzJylcclxuICAgICAgZGVsZXRlIGNvbnRleHRzW3RoaXMua2V5XVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIENvbnRleHQucHJvdG90eXBlLmNyZWF0ZVRocm90dGxlZFJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7XHJcbiAgICAgIHNlbGYuaGFuZGxlUmVzaXplKClcclxuICAgICAgc2VsZi5kaWRSZXNpemUgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWRhcHRlci5vbigncmVzaXplLndheXBvaW50cycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoIXNlbGYuZGlkUmVzaXplKSB7XHJcbiAgICAgICAgc2VsZi5kaWRSZXNpemUgPSB0cnVlXHJcbiAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc2l6ZUhhbmRsZXIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxIYW5kbGVyKCkge1xyXG4gICAgICBzZWxmLmhhbmRsZVNjcm9sbCgpXHJcbiAgICAgIHNlbGYuZGlkU2Nyb2xsID0gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFkYXB0ZXIub24oJ3Njcm9sbC53YXlwb2ludHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCFzZWxmLmRpZFNjcm9sbCB8fCBXYXlwb2ludC5pc1RvdWNoKSB7XHJcbiAgICAgICAgc2VsZi5kaWRTY3JvbGwgPSB0cnVlXHJcbiAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbEhhbmRsZXIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgQ29udGV4dC5wcm90b3R5cGUuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24oKSB7XHJcbiAgICBXYXlwb2ludC5Db250ZXh0LnJlZnJlc2hBbGwoKVxyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIENvbnRleHQucHJvdG90eXBlLmhhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRyaWdnZXJlZEdyb3VwcyA9IHt9XHJcbiAgICB2YXIgYXhlcyA9IHtcclxuICAgICAgaG9yaXpvbnRhbDoge1xyXG4gICAgICAgIG5ld1Njcm9sbDogdGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSxcclxuICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLngsXHJcbiAgICAgICAgZm9yd2FyZDogJ3JpZ2h0JyxcclxuICAgICAgICBiYWNrd2FyZDogJ2xlZnQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHZlcnRpY2FsOiB7XHJcbiAgICAgICAgbmV3U2Nyb2xsOiB0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC55LFxyXG4gICAgICAgIGZvcndhcmQ6ICdkb3duJyxcclxuICAgICAgICBiYWNrd2FyZDogJ3VwJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgYXhpc0tleSBpbiBheGVzKSB7XHJcbiAgICAgIHZhciBheGlzID0gYXhlc1theGlzS2V5XVxyXG4gICAgICB2YXIgaXNGb3J3YXJkID0gYXhpcy5uZXdTY3JvbGwgPiBheGlzLm9sZFNjcm9sbFxyXG4gICAgICB2YXIgZGlyZWN0aW9uID0gaXNGb3J3YXJkID8gYXhpcy5mb3J3YXJkIDogYXhpcy5iYWNrd2FyZFxyXG5cclxuICAgICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gdGhpcy53YXlwb2ludHNbYXhpc0tleV0pIHtcclxuICAgICAgICB2YXIgd2F5cG9pbnQgPSB0aGlzLndheXBvaW50c1theGlzS2V5XVt3YXlwb2ludEtleV1cclxuICAgICAgICB2YXIgd2FzQmVmb3JlVHJpZ2dlclBvaW50ID0gYXhpcy5vbGRTY3JvbGwgPCB3YXlwb2ludC50cmlnZ2VyUG9pbnRcclxuICAgICAgICB2YXIgbm93QWZ0ZXJUcmlnZ2VyUG9pbnQgPSBheGlzLm5ld1Njcm9sbCA+PSB3YXlwb2ludC50cmlnZ2VyUG9pbnRcclxuICAgICAgICB2YXIgY3Jvc3NlZEZvcndhcmQgPSB3YXNCZWZvcmVUcmlnZ2VyUG9pbnQgJiYgbm93QWZ0ZXJUcmlnZ2VyUG9pbnRcclxuICAgICAgICB2YXIgY3Jvc3NlZEJhY2t3YXJkID0gIXdhc0JlZm9yZVRyaWdnZXJQb2ludCAmJiAhbm93QWZ0ZXJUcmlnZ2VyUG9pbnRcclxuICAgICAgICBpZiAoY3Jvc3NlZEZvcndhcmQgfHwgY3Jvc3NlZEJhY2t3YXJkKSB7XHJcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoZGlyZWN0aW9uKVxyXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgZ3JvdXBLZXkgaW4gdHJpZ2dlcmVkR3JvdXBzKSB7XHJcbiAgICAgIHRyaWdnZXJlZEdyb3Vwc1tncm91cEtleV0uZmx1c2hUcmlnZ2VycygpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbGRTY3JvbGwgPSB7XHJcbiAgICAgIHg6IGF4ZXMuaG9yaXpvbnRhbC5uZXdTY3JvbGwsXHJcbiAgICAgIHk6IGF4ZXMudmVydGljYWwubmV3U2Nyb2xsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgQ29udGV4dC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgICBpZiAodGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3cpIHtcclxuICAgICAgcmV0dXJuIFdheXBvaW50LnZpZXdwb3J0SGVpZ2h0KClcclxuICAgIH1cclxuICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cclxuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuaW5uZXJIZWlnaHQoKVxyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIENvbnRleHQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XHJcbiAgICBkZWxldGUgdGhpcy53YXlwb2ludHNbd2F5cG9pbnQuYXhpc11bd2F5cG9pbnQua2V5XVxyXG4gICAgdGhpcy5jaGVja0VtcHR5KClcclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBDb250ZXh0LnByb3RvdHlwZS5pbm5lcldpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xyXG4gICAgaWYgKHRoaXMuZWxlbWVudCA9PSB0aGlzLmVsZW1lbnQud2luZG93KSB7XHJcbiAgICAgIHJldHVybiBXYXlwb2ludC52aWV3cG9ydFdpZHRoKClcclxuICAgIH1cclxuICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cclxuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuaW5uZXJXaWR0aCgpXHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgKi9cclxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dC1kZXN0cm95ICovXHJcbiAgQ29udGV4dC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGFsbFdheXBvaW50cyA9IFtdXHJcbiAgICBmb3IgKHZhciBheGlzIGluIHRoaXMud2F5cG9pbnRzKSB7XHJcbiAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNdKSB7XHJcbiAgICAgICAgYWxsV2F5cG9pbnRzLnB1c2godGhpcy53YXlwb2ludHNbYXhpc11bd2F5cG9pbnRLZXldKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gYWxsV2F5cG9pbnRzLmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XHJcbiAgICAgIGFsbFdheXBvaW50c1tpXS5kZXN0cm95KClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qIFB1YmxpYyAqL1xyXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LXJlZnJlc2ggKi9cclxuICBDb250ZXh0LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xyXG4gICAgdmFyIGlzV2luZG93ID0gdGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3dcclxuICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cclxuICAgIHZhciBjb250ZXh0T2Zmc2V0ID0gaXNXaW5kb3cgPyB1bmRlZmluZWQgOiB0aGlzLmFkYXB0ZXIub2Zmc2V0KClcclxuICAgIHZhciB0cmlnZ2VyZWRHcm91cHMgPSB7fVxyXG4gICAgdmFyIGF4ZXNcclxuXHJcbiAgICB0aGlzLmhhbmRsZVNjcm9sbCgpXHJcbiAgICBheGVzID0ge1xyXG4gICAgICBob3Jpem9udGFsOiB7XHJcbiAgICAgICAgY29udGV4dE9mZnNldDogaXNXaW5kb3cgPyAwIDogY29udGV4dE9mZnNldC5sZWZ0LFxyXG4gICAgICAgIGNvbnRleHRTY3JvbGw6IGlzV2luZG93ID8gMCA6IHRoaXMub2xkU2Nyb2xsLngsXHJcbiAgICAgICAgY29udGV4dERpbWVuc2lvbjogdGhpcy5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC54LFxyXG4gICAgICAgIGZvcndhcmQ6ICdyaWdodCcsXHJcbiAgICAgICAgYmFja3dhcmQ6ICdsZWZ0JyxcclxuICAgICAgICBvZmZzZXRQcm9wOiAnbGVmdCdcclxuICAgICAgfSxcclxuICAgICAgdmVydGljYWw6IHtcclxuICAgICAgICBjb250ZXh0T2Zmc2V0OiBpc1dpbmRvdyA/IDAgOiBjb250ZXh0T2Zmc2V0LnRvcCxcclxuICAgICAgICBjb250ZXh0U2Nyb2xsOiBpc1dpbmRvdyA/IDAgOiB0aGlzLm9sZFNjcm9sbC55LFxyXG4gICAgICAgIGNvbnRleHREaW1lbnNpb246IHRoaXMuaW5uZXJIZWlnaHQoKSxcclxuICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLnksXHJcbiAgICAgICAgZm9yd2FyZDogJ2Rvd24nLFxyXG4gICAgICAgIGJhY2t3YXJkOiAndXAnLFxyXG4gICAgICAgIG9mZnNldFByb3A6ICd0b3AnXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBheGlzS2V5IGluIGF4ZXMpIHtcclxuICAgICAgdmFyIGF4aXMgPSBheGVzW2F4aXNLZXldXHJcbiAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNLZXldKSB7XHJcbiAgICAgICAgdmFyIHdheXBvaW50ID0gdGhpcy53YXlwb2ludHNbYXhpc0tleV1bd2F5cG9pbnRLZXldXHJcbiAgICAgICAgdmFyIGFkanVzdG1lbnQgPSB3YXlwb2ludC5vcHRpb25zLm9mZnNldFxyXG4gICAgICAgIHZhciBvbGRUcmlnZ2VyUG9pbnQgPSB3YXlwb2ludC50cmlnZ2VyUG9pbnRcclxuICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9IDBcclxuICAgICAgICB2YXIgZnJlc2hXYXlwb2ludCA9IG9sZFRyaWdnZXJQb2ludCA9PSBudWxsXHJcbiAgICAgICAgdmFyIGNvbnRleHRNb2RpZmllciwgd2FzQmVmb3JlU2Nyb2xsLCBub3dBZnRlclNjcm9sbFxyXG4gICAgICAgIHZhciB0cmlnZ2VyZWRCYWNrd2FyZCwgdHJpZ2dlcmVkRm9yd2FyZFxyXG5cclxuICAgICAgICBpZiAod2F5cG9pbnQuZWxlbWVudCAhPT0gd2F5cG9pbnQuZWxlbWVudC53aW5kb3cpIHtcclxuICAgICAgICAgIGVsZW1lbnRPZmZzZXQgPSB3YXlwb2ludC5hZGFwdGVyLm9mZnNldCgpW2F4aXMub2Zmc2V0UHJvcF1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYWRqdXN0bWVudCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgYWRqdXN0bWVudCA9IGFkanVzdG1lbnQuYXBwbHkod2F5cG9pbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhZGp1c3RtZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgYWRqdXN0bWVudCA9IHBhcnNlRmxvYXQoYWRqdXN0bWVudClcclxuICAgICAgICAgIGlmICh3YXlwb2ludC5vcHRpb25zLm9mZnNldC5pbmRleE9mKCclJykgPiAtIDEpIHtcclxuICAgICAgICAgICAgYWRqdXN0bWVudCA9IE1hdGguY2VpbChheGlzLmNvbnRleHREaW1lbnNpb24gKiBhZGp1c3RtZW50IC8gMTAwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dE1vZGlmaWVyID0gYXhpcy5jb250ZXh0U2Nyb2xsIC0gYXhpcy5jb250ZXh0T2Zmc2V0XHJcbiAgICAgICAgd2F5cG9pbnQudHJpZ2dlclBvaW50ID0gZWxlbWVudE9mZnNldCArIGNvbnRleHRNb2RpZmllciAtIGFkanVzdG1lbnRcclxuICAgICAgICB3YXNCZWZvcmVTY3JvbGwgPSBvbGRUcmlnZ2VyUG9pbnQgPCBheGlzLm9sZFNjcm9sbFxyXG4gICAgICAgIG5vd0FmdGVyU2Nyb2xsID0gd2F5cG9pbnQudHJpZ2dlclBvaW50ID49IGF4aXMub2xkU2Nyb2xsXHJcbiAgICAgICAgdHJpZ2dlcmVkQmFja3dhcmQgPSB3YXNCZWZvcmVTY3JvbGwgJiYgbm93QWZ0ZXJTY3JvbGxcclxuICAgICAgICB0cmlnZ2VyZWRGb3J3YXJkID0gIXdhc0JlZm9yZVNjcm9sbCAmJiAhbm93QWZ0ZXJTY3JvbGxcclxuXHJcbiAgICAgICAgaWYgKCFmcmVzaFdheXBvaW50ICYmIHRyaWdnZXJlZEJhY2t3YXJkKSB7XHJcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoYXhpcy5iYWNrd2FyZClcclxuICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghZnJlc2hXYXlwb2ludCAmJiB0cmlnZ2VyZWRGb3J3YXJkKSB7XHJcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoYXhpcy5mb3J3YXJkKVxyXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZyZXNoV2F5cG9pbnQgJiYgYXhpcy5vbGRTY3JvbGwgPj0gd2F5cG9pbnQudHJpZ2dlclBvaW50KSB7XHJcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoYXhpcy5mb3J3YXJkKVxyXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xyXG4gICAgICBmb3IgKHZhciBncm91cEtleSBpbiB0cmlnZ2VyZWRHcm91cHMpIHtcclxuICAgICAgICB0cmlnZ2VyZWRHcm91cHNbZ3JvdXBLZXldLmZsdXNoVHJpZ2dlcnMoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiB0aGlzXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgQ29udGV4dC5maW5kT3JDcmVhdGVCeUVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gQ29udGV4dC5maW5kQnlFbGVtZW50KGVsZW1lbnQpIHx8IG5ldyBDb250ZXh0KGVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgQ29udGV4dC5yZWZyZXNoQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKHZhciBjb250ZXh0SWQgaW4gY29udGV4dHMpIHtcclxuICAgICAgY29udGV4dHNbY29udGV4dElkXS5yZWZyZXNoKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qIFB1YmxpYyAqL1xyXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LWZpbmQtYnktZWxlbWVudCAqL1xyXG4gIENvbnRleHQuZmluZEJ5RWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHJldHVybiBjb250ZXh0c1tlbGVtZW50LndheXBvaW50Q29udGV4dEtleV1cclxuICB9XHJcblxyXG4gIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChvbGRXaW5kb3dMb2FkKSB7XHJcbiAgICAgIG9sZFdpbmRvd0xvYWQoKVxyXG4gICAgfVxyXG4gICAgQ29udGV4dC5yZWZyZXNoQWxsKClcclxuICB9XHJcblxyXG4gIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgcmVxdWVzdEZuID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lU2hpbVxyXG4gICAgcmVxdWVzdEZuLmNhbGwod2luZG93LCBjYWxsYmFjaylcclxuICB9XHJcbiAgV2F5cG9pbnQuQ29udGV4dCA9IENvbnRleHRcclxufSgpKVxyXG47KGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0J1xyXG5cclxuICBmdW5jdGlvbiBieVRyaWdnZXJQb2ludChhLCBiKSB7XHJcbiAgICByZXR1cm4gYS50cmlnZ2VyUG9pbnQgLSBiLnRyaWdnZXJQb2ludFxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYnlSZXZlcnNlVHJpZ2dlclBvaW50KGEsIGIpIHtcclxuICAgIHJldHVybiBiLnRyaWdnZXJQb2ludCAtIGEudHJpZ2dlclBvaW50XHJcbiAgfVxyXG5cclxuICB2YXIgZ3JvdXBzID0ge1xyXG4gICAgdmVydGljYWw6IHt9LFxyXG4gICAgaG9yaXpvbnRhbDoge31cclxuICB9XHJcbiAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50XHJcblxyXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9ncm91cCAqL1xyXG4gIGZ1bmN0aW9uIEdyb3VwKG9wdGlvbnMpIHtcclxuICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZVxyXG4gICAgdGhpcy5heGlzID0gb3B0aW9ucy5heGlzXHJcbiAgICB0aGlzLmlkID0gdGhpcy5uYW1lICsgJy0nICsgdGhpcy5heGlzXHJcbiAgICB0aGlzLndheXBvaW50cyA9IFtdXHJcbiAgICB0aGlzLmNsZWFyVHJpZ2dlclF1ZXVlcygpXHJcbiAgICBncm91cHNbdGhpcy5heGlzXVt0aGlzLm5hbWVdID0gdGhpc1xyXG4gIH1cclxuXHJcbiAgLyogUHJpdmF0ZSAqL1xyXG4gIEdyb3VwLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbih3YXlwb2ludCkge1xyXG4gICAgdGhpcy53YXlwb2ludHMucHVzaCh3YXlwb2ludClcclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBHcm91cC5wcm90b3R5cGUuY2xlYXJUcmlnZ2VyUXVldWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLnRyaWdnZXJRdWV1ZXMgPSB7XHJcbiAgICAgIHVwOiBbXSxcclxuICAgICAgZG93bjogW10sXHJcbiAgICAgIGxlZnQ6IFtdLFxyXG4gICAgICByaWdodDogW11cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBHcm91cC5wcm90b3R5cGUuZmx1c2hUcmlnZ2VycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yICh2YXIgZGlyZWN0aW9uIGluIHRoaXMudHJpZ2dlclF1ZXVlcykge1xyXG4gICAgICB2YXIgd2F5cG9pbnRzID0gdGhpcy50cmlnZ2VyUXVldWVzW2RpcmVjdGlvbl1cclxuICAgICAgdmFyIHJldmVyc2UgPSBkaXJlY3Rpb24gPT09ICd1cCcgfHwgZGlyZWN0aW9uID09PSAnbGVmdCdcclxuICAgICAgd2F5cG9pbnRzLnNvcnQocmV2ZXJzZSA/IGJ5UmV2ZXJzZVRyaWdnZXJQb2ludCA6IGJ5VHJpZ2dlclBvaW50KVxyXG4gICAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gd2F5cG9pbnRzLmxlbmd0aDsgaSA8IGVuZDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIHdheXBvaW50ID0gd2F5cG9pbnRzW2ldXHJcbiAgICAgICAgaWYgKHdheXBvaW50Lm9wdGlvbnMuY29udGludW91cyB8fCBpID09PSB3YXlwb2ludHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgd2F5cG9pbnQudHJpZ2dlcihbZGlyZWN0aW9uXSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuY2xlYXJUcmlnZ2VyUXVldWVzKClcclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBHcm91cC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XHJcbiAgICB0aGlzLndheXBvaW50cy5zb3J0KGJ5VHJpZ2dlclBvaW50KVxyXG4gICAgdmFyIGluZGV4ID0gV2F5cG9pbnQuQWRhcHRlci5pbkFycmF5KHdheXBvaW50LCB0aGlzLndheXBvaW50cylcclxuICAgIHZhciBpc0xhc3QgPSBpbmRleCA9PT0gdGhpcy53YXlwb2ludHMubGVuZ3RoIC0gMVxyXG4gICAgcmV0dXJuIGlzTGFzdCA/IG51bGwgOiB0aGlzLndheXBvaW50c1tpbmRleCArIDFdXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgR3JvdXAucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcclxuICAgIHRoaXMud2F5cG9pbnRzLnNvcnQoYnlUcmlnZ2VyUG9pbnQpXHJcbiAgICB2YXIgaW5kZXggPSBXYXlwb2ludC5BZGFwdGVyLmluQXJyYXkod2F5cG9pbnQsIHRoaXMud2F5cG9pbnRzKVxyXG4gICAgcmV0dXJuIGluZGV4ID8gdGhpcy53YXlwb2ludHNbaW5kZXggLSAxXSA6IG51bGxcclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBHcm91cC5wcm90b3R5cGUucXVldWVUcmlnZ2VyID0gZnVuY3Rpb24od2F5cG9pbnQsIGRpcmVjdGlvbikge1xyXG4gICAgdGhpcy50cmlnZ2VyUXVldWVzW2RpcmVjdGlvbl0ucHVzaCh3YXlwb2ludClcclxuICB9XHJcblxyXG4gIC8qIFByaXZhdGUgKi9cclxuICBHcm91cC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcclxuICAgIHZhciBpbmRleCA9IFdheXBvaW50LkFkYXB0ZXIuaW5BcnJheSh3YXlwb2ludCwgdGhpcy53YXlwb2ludHMpXHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICB0aGlzLndheXBvaW50cy5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgKi9cclxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZmlyc3QgKi9cclxuICBHcm91cC5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLndheXBvaW50c1swXVxyXG4gIH1cclxuXHJcbiAgLyogUHVibGljICovXHJcbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2xhc3QgKi9cclxuICBHcm91cC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMud2F5cG9pbnRzW3RoaXMud2F5cG9pbnRzLmxlbmd0aCAtIDFdXHJcbiAgfVxyXG5cclxuICAvKiBQcml2YXRlICovXHJcbiAgR3JvdXAuZmluZE9yQ3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGdyb3Vwc1tvcHRpb25zLmF4aXNdW29wdGlvbnMubmFtZV0gfHwgbmV3IEdyb3VwKG9wdGlvbnMpXHJcbiAgfVxyXG5cclxuICBXYXlwb2ludC5Hcm91cCA9IEdyb3VwXHJcbn0oKSlcclxuOyhmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCdcclxuXHJcbiAgdmFyICQgPSB3aW5kb3cualF1ZXJ5XHJcbiAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50XHJcblxyXG4gIGZ1bmN0aW9uIEpRdWVyeUFkYXB0ZXIoZWxlbWVudCkge1xyXG4gICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudClcclxuICB9XHJcblxyXG4gICQuZWFjaChbXHJcbiAgICAnaW5uZXJIZWlnaHQnLFxyXG4gICAgJ2lubmVyV2lkdGgnLFxyXG4gICAgJ29mZicsXHJcbiAgICAnb2Zmc2V0JyxcclxuICAgICdvbicsXHJcbiAgICAnb3V0ZXJIZWlnaHQnLFxyXG4gICAgJ291dGVyV2lkdGgnLFxyXG4gICAgJ3Njcm9sbExlZnQnLFxyXG4gICAgJ3Njcm9sbFRvcCdcclxuICBdLCBmdW5jdGlvbihpLCBtZXRob2QpIHtcclxuICAgIEpRdWVyeUFkYXB0ZXIucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXHJcbiAgICAgIHJldHVybiB0aGlzLiRlbGVtZW50W21ldGhvZF0uYXBwbHkodGhpcy4kZWxlbWVudCwgYXJncylcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAkLmVhY2goW1xyXG4gICAgJ2V4dGVuZCcsXHJcbiAgICAnaW5BcnJheScsXHJcbiAgICAnaXNFbXB0eU9iamVjdCdcclxuICBdLCBmdW5jdGlvbihpLCBtZXRob2QpIHtcclxuICAgIEpRdWVyeUFkYXB0ZXJbbWV0aG9kXSA9ICRbbWV0aG9kXVxyXG4gIH0pXHJcblxyXG4gIFdheXBvaW50LmFkYXB0ZXJzLnB1c2goe1xyXG4gICAgbmFtZTogJ2pxdWVyeScsXHJcbiAgICBBZGFwdGVyOiBKUXVlcnlBZGFwdGVyXHJcbiAgfSlcclxuICBXYXlwb2ludC5BZGFwdGVyID0gSlF1ZXJ5QWRhcHRlclxyXG59KCkpXHJcbjsoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gIHZhciBXYXlwb2ludCA9IHdpbmRvdy5XYXlwb2ludFxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVFeHRlbnNpb24oZnJhbWV3b3JrKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB3YXlwb2ludHMgPSBbXVxyXG4gICAgICB2YXIgb3ZlcnJpZGVzID0gYXJndW1lbnRzWzBdXHJcblxyXG4gICAgICBpZiAoZnJhbWV3b3JrLmlzRnVuY3Rpb24oYXJndW1lbnRzWzBdKSkge1xyXG4gICAgICAgIG92ZXJyaWRlcyA9IGZyYW1ld29yay5leHRlbmQoe30sIGFyZ3VtZW50c1sxXSlcclxuICAgICAgICBvdmVycmlkZXMuaGFuZGxlciA9IGFyZ3VtZW50c1swXVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBmcmFtZXdvcmsuZXh0ZW5kKHt9LCBvdmVycmlkZXMsIHtcclxuICAgICAgICAgIGVsZW1lbnQ6IHRoaXNcclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgb3B0aW9ucy5jb250ZXh0ID0gZnJhbWV3b3JrKHRoaXMpLmNsb3Nlc3Qob3B0aW9ucy5jb250ZXh0KVswXVxyXG4gICAgICAgIH1cclxuICAgICAgICB3YXlwb2ludHMucHVzaChuZXcgV2F5cG9pbnQob3B0aW9ucykpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICByZXR1cm4gd2F5cG9pbnRzXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAod2luZG93LmpRdWVyeSkge1xyXG4gICAgd2luZG93LmpRdWVyeS5mbi53YXlwb2ludCA9IGNyZWF0ZUV4dGVuc2lvbih3aW5kb3cualF1ZXJ5KVxyXG4gIH1cclxuICBpZiAod2luZG93LlplcHRvKSB7XHJcbiAgICB3aW5kb3cuWmVwdG8uZm4ud2F5cG9pbnQgPSBjcmVhdGVFeHRlbnNpb24od2luZG93LlplcHRvKVxyXG4gIH1cclxufSgpKVxyXG47IiwiLyohXHJcbldheXBvaW50cyBJbnZpZXcgU2hvcnRjdXQgLSA0LjAuMFxyXG5Db3B5cmlnaHQgwqkgMjAxMS0yMDE1IENhbGViIFRyb3VnaHRvblxyXG5MaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbmh0dHBzOi8vZ2l0aHViLmNvbS9pbWFrZXdlYnRoaW5ncy93YXlwb2ludHMvYmxvZy9tYXN0ZXIvbGljZW5zZXMudHh0XHJcbiovXHJcbiFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoKXt9ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9aS5BZGFwdGVyLmV4dGVuZCh7fSxlLmRlZmF1bHRzLHQpLHRoaXMuYXhpcz10aGlzLm9wdGlvbnMuaG9yaXpvbnRhbD9cImhvcml6b250YWxcIjpcInZlcnRpY2FsXCIsdGhpcy53YXlwb2ludHM9W10sdGhpcy5lbGVtZW50PXRoaXMub3B0aW9ucy5lbGVtZW50LHRoaXMuY3JlYXRlV2F5cG9pbnRzKCl9dmFyIGk9d2luZG93LldheXBvaW50O2UucHJvdG90eXBlLmNyZWF0ZVdheXBvaW50cz1mdW5jdGlvbigpe2Zvcih2YXIgdD17dmVydGljYWw6W3tkb3duOlwiZW50ZXJcIix1cDpcImV4aXRlZFwiLG9mZnNldDpcIjEwMCVcIn0se2Rvd246XCJlbnRlcmVkXCIsdXA6XCJleGl0XCIsb2Zmc2V0OlwiYm90dG9tLWluLXZpZXdcIn0se2Rvd246XCJleGl0XCIsdXA6XCJlbnRlcmVkXCIsb2Zmc2V0OjB9LHtkb3duOlwiZXhpdGVkXCIsdXA6XCJlbnRlclwiLG9mZnNldDpmdW5jdGlvbigpe3JldHVybi10aGlzLmFkYXB0ZXIub3V0ZXJIZWlnaHQoKX19XSxob3Jpem9udGFsOlt7cmlnaHQ6XCJlbnRlclwiLGxlZnQ6XCJleGl0ZWRcIixvZmZzZXQ6XCIxMDAlXCJ9LHtyaWdodDpcImVudGVyZWRcIixsZWZ0OlwiZXhpdFwiLG9mZnNldDpcInJpZ2h0LWluLXZpZXdcIn0se3JpZ2h0OlwiZXhpdFwiLGxlZnQ6XCJlbnRlcmVkXCIsb2Zmc2V0OjB9LHtyaWdodDpcImV4aXRlZFwiLGxlZnQ6XCJlbnRlclwiLG9mZnNldDpmdW5jdGlvbigpe3JldHVybi10aGlzLmFkYXB0ZXIub3V0ZXJXaWR0aCgpfX1dfSxlPTAsaT10W3RoaXMuYXhpc10ubGVuZ3RoO2k+ZTtlKyspe3ZhciBuPXRbdGhpcy5heGlzXVtlXTt0aGlzLmNyZWF0ZVdheXBvaW50KG4pfX0sZS5wcm90b3R5cGUuY3JlYXRlV2F5cG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLndheXBvaW50cy5wdXNoKG5ldyBpKHtjb250ZXh0OnRoaXMub3B0aW9ucy5jb250ZXh0LGVsZW1lbnQ6dGhpcy5vcHRpb25zLmVsZW1lbnQsZW5hYmxlZDp0aGlzLm9wdGlvbnMuZW5hYmxlZCxoYW5kbGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihpKXtlLm9wdGlvbnNbdFtpXV0uY2FsbChlLGkpfX0odCksb2Zmc2V0OnQub2Zmc2V0LGhvcml6b250YWw6dGhpcy5vcHRpb25zLmhvcml6b250YWx9KSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMud2F5cG9pbnRzLmxlbmd0aDtlPnQ7dCsrKXRoaXMud2F5cG9pbnRzW3RdLmRlc3Ryb3koKTt0aGlzLndheXBvaW50cz1bXX0sZS5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy53YXlwb2ludHMubGVuZ3RoO2U+dDt0KyspdGhpcy53YXlwb2ludHNbdF0uZGlzYWJsZSgpfSxlLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMud2F5cG9pbnRzLmxlbmd0aDtlPnQ7dCsrKXRoaXMud2F5cG9pbnRzW3RdLmVuYWJsZSgpfSxlLmRlZmF1bHRzPXtjb250ZXh0OndpbmRvdyxlbmFibGVkOiEwLGVudGVyOnQsZW50ZXJlZDp0LGV4aXQ6dCxleGl0ZWQ6dH0saS5JbnZpZXc9ZX0oKTsiLCIvKiFcclxuICogalF1ZXJ5IG91dHNpZGUgZXZlbnRzIC0gdjEuMSAtIDMvMTYvMjAxMFxyXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1vdXRzaWRlLWV2ZW50cy1wbHVnaW4vXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4gKi9cclxuXHJcbi8vIFNjcmlwdDogalF1ZXJ5IG91dHNpZGUgZXZlbnRzXHJcbi8vXHJcbi8vICpWZXJzaW9uOiAxLjEsIExhc3QgdXBkYXRlZDogMy8xNi8yMDEwKlxyXG4vL1xyXG4vLyBQcm9qZWN0IEhvbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1vdXRzaWRlLWV2ZW50cy1wbHVnaW4vXHJcbi8vIEdpdEh1YiAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktb3V0c2lkZS1ldmVudHMvXHJcbi8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktb3V0c2lkZS1ldmVudHMvcmF3L21hc3Rlci9qcXVlcnkuYmEtb3V0c2lkZS1ldmVudHMuanNcclxuLy8gKE1pbmlmaWVkKSAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1vdXRzaWRlLWV2ZW50cy9yYXcvbWFzdGVyL2pxdWVyeS5iYS1vdXRzaWRlLWV2ZW50cy5taW4uanMgKDAuOWtiKVxyXG4vL1xyXG4vLyBBYm91dDogTGljZW5zZVxyXG4vL1xyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW4sXHJcbi8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4vLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXHJcbi8vXHJcbi8vIEFib3V0OiBFeGFtcGxlc1xyXG4vL1xyXG4vLyBUaGVzZSB3b3JraW5nIGV4YW1wbGVzLCBjb21wbGV0ZSB3aXRoIGZ1bGx5IGNvbW1lbnRlZCBjb2RlLCBpbGx1c3RyYXRlIGEgZmV3XHJcbi8vIHdheXMgaW4gd2hpY2ggdGhpcyBwbHVnaW4gY2FuIGJlIHVzZWQuXHJcbi8vXHJcbi8vIGNsaWNrb3V0c2lkZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktb3V0c2lkZS1ldmVudHMvZXhhbXBsZXMvY2xpY2tvdXRzaWRlL1xyXG4vLyBkYmxjbGlja291dHNpZGUgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LW91dHNpZGUtZXZlbnRzL2V4YW1wbGVzL2RibGNsaWNrb3V0c2lkZS9cclxuLy8gbW91c2VvdmVyb3V0c2lkZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktb3V0c2lkZS1ldmVudHMvZXhhbXBsZXMvbW91c2VvdmVyb3V0c2lkZS9cclxuLy8gZm9jdXNvdXRzaWRlIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1vdXRzaWRlLWV2ZW50cy9leGFtcGxlcy9mb2N1c291dHNpZGUvXHJcbi8vXHJcbi8vIEFib3V0OiBTdXBwb3J0IGFuZCBUZXN0aW5nXHJcbi8vXHJcbi8vIEluZm9ybWF0aW9uIGFib3V0IHdoYXQgdmVyc2lvbiBvciB2ZXJzaW9ucyBvZiBqUXVlcnkgdGhpcyBwbHVnaW4gaGFzIGJlZW5cclxuLy8gdGVzdGVkIHdpdGgsIHdoYXQgYnJvd3NlcnMgaXQgaGFzIGJlZW4gdGVzdGVkIGluLCBhbmQgd2hlcmUgdGhlIHVuaXQgdGVzdHNcclxuLy8gcmVzaWRlIChzbyB5b3UgY2FuIHRlc3QgaXQgeW91cnNlbGYpLlxyXG4vL1xyXG4vLyBqUXVlcnkgVmVyc2lvbnMgLSAxLjQuMlxyXG4vLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi0zLjYsIFNhZmFyaSAzLTQsIENocm9tZSwgT3BlcmEgOS42LTEwLjEuXHJcbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktb3V0c2lkZS1ldmVudHMvdW5pdC9cclxuLy9cclxuLy8gQWJvdXQ6IFJlbGVhc2UgSGlzdG9yeVxyXG4vL1xyXG4vLyAxLjEgLSAoMy8xNi8yMDEwKSBNYWRlIFwiY2xpY2tvdXRzaWRlXCIgcGx1Z2luIG1vcmUgZ2VuZXJhbCwgcmVzdWx0aW5nIGluIGFcclxuLy8gICAgICAgd2hvbGUgbmV3IHBsdWdpbiB3aXRoIG1vcmUgdGhhbiBhIGRvemVuIGRlZmF1bHQgXCJvdXRzaWRlXCIgZXZlbnRzIGFuZFxyXG4vLyAgICAgICBhIG1ldGhvZCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBuZXcgb25lcy5cclxuLy8gMS4wIC0gKDIvMjcvMjAxMCkgSW5pdGlhbCByZWxlYXNlXHJcbi8vXHJcbi8vIFRvcGljOiBEZWZhdWx0IFwib3V0c2lkZVwiIGV2ZW50c1xyXG4vL1xyXG4vLyBOb3RlIHRoYXQgZWFjaCBcIm91dHNpZGVcIiBldmVudCBpcyBwb3dlcmVkIGJ5IGFuIFwib3JpZ2luYXRpbmdcIiBldmVudC4gT25seVxyXG4vLyB3aGVuIHRoZSBvcmlnaW5hdGluZyBldmVudCBpcyB0cmlnZ2VyZWQgb24gYW4gZWxlbWVudCBvdXRzaWRlIHRoZSBlbGVtZW50XHJcbi8vIHRvIHdoaWNoIHRoYXQgb3V0c2lkZSBldmVudCBpcyBib3VuZCB3aWxsIHRoZSBib3VuZCBldmVudCBiZSB0cmlnZ2VyZWQuXHJcbi8vXHJcbi8vIEJlY2F1c2UgZWFjaCBvdXRzaWRlIGV2ZW50IGlzIHBvd2VyZWQgYnkgYSBzZXBhcmF0ZSBvcmlnaW5hdGluZyBldmVudCxcclxuLy8gc3RvcHBpbmcgcHJvcGFnYXRpb24gb2YgdGhhdCBvcmlnaW5hdGluZyBldmVudCB3aWxsIHByZXZlbnQgaXRzIHJlbGF0ZWRcclxuLy8gb3V0c2lkZSBldmVudCBmcm9tIHRyaWdnZXJpbmcuXHJcbi8vXHJcbi8vICBPVVRTSURFIEVWRU5UICAgICAtIE9SSUdJTkFUSU5HIEVWRU5UXHJcbi8vICBjbGlja291dHNpZGUgICAgICAtIGNsaWNrXHJcbi8vICBkYmxjbGlja291dHNpZGUgICAtIGRibGNsaWNrXHJcbi8vICBmb2N1c291dHNpZGUgICAgICAtIGZvY3VzaW5cclxuLy8gIGJsdXJvdXRzaWRlICAgICAgIC0gZm9jdXNvdXRcclxuLy8gIG1vdXNlbW92ZW91dHNpZGUgIC0gbW91c2Vtb3ZlXHJcbi8vICBtb3VzZWRvd25vdXRzaWRlICAtIG1vdXNlZG93blxyXG4vLyAgbW91c2V1cG91dHNpZGUgICAgLSBtb3VzZXVwXHJcbi8vICBtb3VzZW92ZXJvdXRzaWRlICAtIG1vdXNlb3ZlclxyXG4vLyAgbW91c2VvdXRvdXRzaWRlICAgLSBtb3VzZW91dFxyXG4vLyAga2V5ZG93bm91dHNpZGUgICAgLSBrZXlkb3duXHJcbi8vICBrZXlwcmVzc291dHNpZGUgICAtIGtleXByZXNzXHJcbi8vICBrZXl1cG91dHNpZGUgICAgICAtIGtleXVwXHJcbi8vICBjaGFuZ2VvdXRzaWRlICAgICAtIGNoYW5nZVxyXG4vLyAgc2VsZWN0b3V0c2lkZSAgICAgLSBzZWxlY3RcclxuLy8gIHN1Ym1pdG91dHNpZGUgICAgIC0gc3VibWl0XHJcbi8vICB0b3VjaHN0YXJ0b3V0c2lkZSAtIHRvdWNoc3RhcnRcclxuLy8gIHRvdWNoZW5kb3V0c2lkZSAgIC0gdG91Y2hlbmRcclxuXHJcbihmdW5jdGlvbigkLGRvYyxvdXRzaWRlKXtcclxuICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cclxuXHJcbiAgJC5tYXAoXHJcbiAgICAvLyBBbGwgdGhlc2UgZXZlbnRzIHdpbGwgZ2V0IGFuIFwib3V0c2lkZVwiIGV2ZW50IGNvdW50ZXJwYXJ0IGJ5IGRlZmF1bHQuXHJcbiAgICAnY2xpY2sgZGJsY2xpY2sgbW91c2Vtb3ZlIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIHRvdWNoc3RhcnQgdG91Y2hlbmQnLnNwbGl0KCcgJyksXHJcbiAgICBmdW5jdGlvbiggZXZlbnRfbmFtZSApIHsganFfYWRkT3V0c2lkZUV2ZW50KCBldmVudF9uYW1lICk7IH1cclxuICApO1xyXG5cclxuICAvLyBUaGUgZm9jdXMgYW5kIGJsdXIgZXZlbnRzIGFyZSByZWFsbHkgZm9jdXNpbiBhbmQgZm9jdXNvdXQgd2hlbiBpdCBjb21lc1xyXG4gIC8vIHRvIGRlbGVnYXRpb24sIHNvIHRoZXkgYXJlIGEgc3BlY2lhbCBjYXNlLlxyXG4gIGpxX2FkZE91dHNpZGVFdmVudCggJ2ZvY3VzaW4nLCAgJ2ZvY3VzJyArIG91dHNpZGUgKTtcclxuICBqcV9hZGRPdXRzaWRlRXZlbnQoICdmb2N1c291dCcsICdibHVyJyArIG91dHNpZGUgKTtcclxuXHJcbiAgLy8gTWV0aG9kOiBqUXVlcnkuYWRkT3V0c2lkZUV2ZW50XHJcbiAgLy9cclxuICAvLyBSZWdpc3RlciBhIG5ldyBcIm91dHNpZGVcIiBldmVudCB0byBiZSB3aXRoIHRoaXMgbWV0aG9kLiBBZGRpbmcgYW4gb3V0c2lkZVxyXG4gIC8vIGV2ZW50IHRoYXQgYWxyZWFkeSBleGlzdHMgd2lsbCBwcm9iYWJseSBibG93IHRoaW5ncyB1cCwgc28gY2hlY2sgdGhlXHJcbiAgLy8gPERlZmF1bHQgXCJvdXRzaWRlXCIgZXZlbnRzPiBsaXN0IGJlZm9yZSB0cnlpbmcgdG8gYWRkIGEgbmV3IG9uZS5cclxuICAvL1xyXG4gIC8vIFVzYWdlOlxyXG4gIC8vXHJcbiAgLy8gPiBqUXVlcnkuYWRkT3V0c2lkZUV2ZW50KCBldmVudF9uYW1lIFssIG91dHNpZGVfZXZlbnRfbmFtZSBdICk7XHJcbiAgLy9cclxuICAvLyBBcmd1bWVudHM6XHJcbiAgLy9cclxuICAvLyAgZXZlbnRfbmFtZSAtIChTdHJpbmcpIFRoZSBuYW1lIG9mIHRoZSBvcmlnaW5hdGluZyBldmVudCB0aGF0IHRoZSBuZXdcclxuICAvLyAgICBcIm91dHNpZGVcIiBldmVudCB3aWxsIGJlIHBvd2VyZWQgYnkuIFRoaXMgZXZlbnQgY2FuIGJlIGEgbmF0aXZlIG9yXHJcbiAgLy8gICAgY3VzdG9tIGV2ZW50LCBhcyBsb25nIGFzIGl0IGJ1YmJsZXMgdXAgdGhlIERPTSB0cmVlLlxyXG4gIC8vICBvdXRzaWRlX2V2ZW50X25hbWUgLSAoU3RyaW5nKSBBbiBvcHRpb25hbCBuYW1lIGZvciB0aGUgbmV3IFwib3V0c2lkZVwiXHJcbiAgLy8gICAgZXZlbnQuIElmIG9taXR0ZWQsIHRoZSBvdXRzaWRlIGV2ZW50IHdpbGwgYmUgbmFtZWQgd2hhdGV2ZXIgdGhlXHJcbiAgLy8gICAgdmFsdWUgb2YgYGV2ZW50X25hbWVgIGlzIHBsdXMgdGhlIFwib3V0c2lkZVwiIHN1ZmZpeC5cclxuICAvL1xyXG4gIC8vIFJldHVybnM6XHJcbiAgLy9cclxuICAvLyAgTm90aGluZy5cclxuXHJcbiAgJC5hZGRPdXRzaWRlRXZlbnQgPSBqcV9hZGRPdXRzaWRlRXZlbnQ7XHJcblxyXG4gIGZ1bmN0aW9uIGpxX2FkZE91dHNpZGVFdmVudCggZXZlbnRfbmFtZSwgb3V0c2lkZV9ldmVudF9uYW1lICkge1xyXG5cclxuICAgIC8vIFRoZSBcIm91dHNpZGVcIiBldmVudCBuYW1lLlxyXG4gICAgb3V0c2lkZV9ldmVudF9uYW1lID0gb3V0c2lkZV9ldmVudF9uYW1lIHx8IGV2ZW50X25hbWUgKyBvdXRzaWRlO1xyXG5cclxuICAgIC8vIEEgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIGFsbCBlbGVtZW50cyB0byB3aGljaCB0aGUgXCJvdXRzaWRlXCIgZXZlbnQgaXNcclxuICAgIC8vIGJvdW5kLlxyXG4gICAgdmFyIGVsZW1zID0gJCgpLFxyXG5cclxuICAgICAgLy8gVGhlIFwib3JpZ2luYXRpbmdcIiBldmVudCwgbmFtZXNwYWNlZCBmb3IgZWFzeSB1bmJpbmRpbmcuXHJcbiAgICAgIGV2ZW50X25hbWVzcGFjZWQgPSBldmVudF9uYW1lICsgJy4nICsgb3V0c2lkZV9ldmVudF9uYW1lICsgJy1zcGVjaWFsLWV2ZW50JztcclxuXHJcbiAgICAvLyBFdmVudDogb3V0c2lkZSBldmVudHNcclxuICAgIC8vXHJcbiAgICAvLyBBbiBcIm91dHNpZGVcIiBldmVudCBpcyB0cmlnZ2VyZWQgb24gYW4gZWxlbWVudCB3aGVuIGl0cyBjb3JyZXNwb25kaW5nXHJcbiAgICAvLyBcIm9yaWdpbmF0aW5nXCIgZXZlbnQgaXMgdHJpZ2dlcmVkIG9uIGFuIGVsZW1lbnQgb3V0c2lkZSB0aGUgZWxlbWVudCBpblxyXG4gICAgLy8gcXVlc3Rpb24uIFNlZSB0aGUgPERlZmF1bHQgXCJvdXRzaWRlXCIgZXZlbnRzPiBsaXN0IGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG4gICAgLy9cclxuICAgIC8vIFVzYWdlOlxyXG4gICAgLy9cclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdjbGlja291dHNpZGUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgLy8gPiAgIHZhciBjbGlja2VkX2VsZW0gPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAvLyA+ICAgLi4uXHJcbiAgICAvLyA+IH0pO1xyXG4gICAgLy9cclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdkYmxjbGlja291dHNpZGUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgLy8gPiAgIHZhciBkb3VibGVfY2xpY2tlZF9lbGVtID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgLy8gPiAgIC4uLlxyXG4gICAgLy8gPiB9KTtcclxuICAgIC8vXHJcbiAgICAvLyA+IGpRdWVyeSgnc2VsZWN0b3InKS5iaW5kKCAnbW91c2VvdmVyb3V0c2lkZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAvLyA+ICAgdmFyIG1vdXNlZF9vdmVyX2VsZW0gPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAvLyA+ICAgLi4uXHJcbiAgICAvLyA+IH0pO1xyXG4gICAgLy9cclxuICAgIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdmb2N1c291dHNpZGUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgLy8gPiAgIHZhciBmb2N1c2VkX2VsZW0gPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAvLyA+ICAgLi4uXHJcbiAgICAvLyA+IH0pO1xyXG4gICAgLy9cclxuICAgIC8vIFlvdSBnZXQgdGhlIGlkZWEsIHJpZ2h0P1xyXG5cclxuICAgICQuZXZlbnQuc3BlY2lhbFsgb3V0c2lkZV9ldmVudF9uYW1lIF0gPSB7XHJcblxyXG4gICAgICAvLyBDYWxsZWQgb25seSB3aGVuIHRoZSBmaXJzdCBcIm91dHNpZGVcIiBldmVudCBjYWxsYmFjayBpcyBib3VuZCBwZXJcclxuICAgICAgLy8gZWxlbWVudC5cclxuICAgICAgc2V0dXA6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIC8vIEFkZCB0aGlzIGVsZW1lbnQgdG8gdGhlIGxpc3Qgb2YgZWxlbWVudHMgdG8gd2hpY2ggdGhpcyBcIm91dHNpZGVcIlxyXG4gICAgICAgIC8vIGV2ZW50IGlzIGJvdW5kLlxyXG4gICAgICAgIGVsZW1zID0gZWxlbXMuYWRkKCB0aGlzICk7XHJcblxyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGVsZW1lbnQgZ2V0dGluZyB0aGUgZXZlbnQgYm91bmQsIGJpbmQgYSBoYW5kbGVyXHJcbiAgICAgICAgLy8gdG8gZG9jdW1lbnQgdG8gY2F0Y2ggYWxsIGNvcnJlc3BvbmRpbmcgXCJvcmlnaW5hdGluZ1wiIGV2ZW50cy5cclxuICAgICAgICBpZiAoIGVsZW1zLmxlbmd0aCA9PT0gMSApIHtcclxuICAgICAgICAgICQoZG9jKS5iaW5kKCBldmVudF9uYW1lc3BhY2VkLCBoYW5kbGVfZXZlbnQgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBDYWxsZWQgb25seSB3aGVuIHRoZSBsYXN0IFwib3V0c2lkZVwiIGV2ZW50IGNhbGxiYWNrIGlzIHVuYm91bmQgcGVyXHJcbiAgICAgIC8vIGVsZW1lbnQuXHJcbiAgICAgIHRlYXJkb3duOiBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgdGhpcyBlbGVtZW50IGZyb20gdGhlIGxpc3Qgb2YgZWxlbWVudHMgdG8gd2hpY2ggdGhpc1xyXG4gICAgICAgIC8vIFwib3V0c2lkZVwiIGV2ZW50IGlzIGJvdW5kLlxyXG4gICAgICAgIGVsZW1zID0gZWxlbXMubm90KCB0aGlzICk7XHJcblxyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgZWxlbWVudCByZW1vdmVkLCByZW1vdmUgdGhlIFwib3JpZ2luYXRpbmdcIiBldmVudFxyXG4gICAgICAgIC8vIGhhbmRsZXIgb24gZG9jdW1lbnQgdGhhdCBwb3dlcnMgdGhpcyBcIm91dHNpZGVcIiBldmVudC5cclxuICAgICAgICBpZiAoIGVsZW1zLmxlbmd0aCA9PT0gMCApIHtcclxuICAgICAgICAgICQoZG9jKS51bmJpbmQoIGV2ZW50X25hbWVzcGFjZWQgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBDYWxsZWQgZXZlcnkgdGltZSBhIFwib3V0c2lkZVwiIGV2ZW50IGNhbGxiYWNrIGlzIGJvdW5kIHRvIGFuIGVsZW1lbnQuXHJcbiAgICAgIGFkZDogZnVuY3Rpb24oIGhhbmRsZU9iaiApIHtcclxuICAgICAgICB2YXIgb2xkX2hhbmRsZXIgPSBoYW5kbGVPYmouaGFuZGxlcjtcclxuXHJcbiAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBleGVjdXRlZCBldmVyeSB0aW1lIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQuIFRoaXMgaXNcclxuICAgICAgICAvLyB1c2VkIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGV2ZW50LnRhcmdldCByZWZlcmVuY2Ugd2l0aCBvbmUgdGhhdCBpc1xyXG4gICAgICAgIC8vIG1vcmUgdXNlZnVsLlxyXG4gICAgICAgIGhhbmRsZU9iai5oYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50LCBlbGVtICkge1xyXG5cclxuICAgICAgICAgIC8vIFNldCB0aGUgZXZlbnQgb2JqZWN0J3MgLnRhcmdldCBwcm9wZXJ0eSB0byB0aGUgZWxlbWVudCB0aGF0IHRoZVxyXG4gICAgICAgICAgLy8gdXNlciBpbnRlcmFjdGVkIHdpdGgsIG5vdCB0aGUgZWxlbWVudCB0aGF0IHRoZSBcIm91dHNpZGVcIiBldmVudCB3YXNcclxuICAgICAgICAgIC8vIHdhcyB0cmlnZ2VyZWQgb24uXHJcbiAgICAgICAgICBldmVudC50YXJnZXQgPSBlbGVtO1xyXG5cclxuICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIGFjdHVhbCBib3VuZCBoYW5kbGVyLlxyXG4gICAgICAgICAgb2xkX2hhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgXCJvcmlnaW5hdGluZ1wiIGV2ZW50IGlzIHRyaWdnZXJlZC4uXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVfZXZlbnQoIGV2ZW50ICkge1xyXG5cclxuICAgICAgLy8gSXRlcmF0ZSBvdmVyIGFsbCBlbGVtZW50cyB0byB3aGljaCB0aGlzIFwib3V0c2lkZVwiIGV2ZW50IGlzIGJvdW5kLlxyXG4gICAgICAkKGVsZW1zKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIGVsZW0gPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGlzIGVsZW1lbnQgaXNuJ3QgdGhlIGVsZW1lbnQgb24gd2hpY2ggdGhlIGV2ZW50IHdhcyB0cmlnZ2VyZWQsXHJcbiAgICAgICAgLy8gYW5kIHRoaXMgZWxlbWVudCBkb2Vzbid0IGNvbnRhaW4gc2FpZCBlbGVtZW50LCB0aGVuIHNhaWQgZWxlbWVudCBpc1xyXG4gICAgICAgIC8vIGNvbnNpZGVyZWQgdG8gYmUgb3V0c2lkZSwgYW5kIHRoZSBcIm91dHNpZGVcIiBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCFcclxuICAgICAgICBpZiAoIHRoaXMgIT09IGV2ZW50LnRhcmdldCAmJiAhZWxlbS5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGggKSB7XHJcblxyXG4gICAgICAgICAgLy8gVXNlIHRyaWdnZXJIYW5kbGVyIGluc3RlYWQgb2YgdHJpZ2dlciBzbyB0aGF0IHRoZSBcIm91dHNpZGVcIiBldmVudFxyXG4gICAgICAgICAgLy8gZG9lc24ndCBidWJibGUuIFBhc3MgaW4gdGhlIFwib3JpZ2luYXRpbmdcIiBldmVudCdzIC50YXJnZXQgc28gdGhhdFxyXG4gICAgICAgICAgLy8gdGhlIFwib3V0c2lkZVwiIGV2ZW50LnRhcmdldCBjYW4gYmUgb3ZlcnJpZGRlbiB3aXRoIHNvbWV0aGluZyBtb3JlXHJcbiAgICAgICAgICAvLyBtZWFuaW5nZnVsLlxyXG4gICAgICAgICAgZWxlbS50cmlnZ2VySGFuZGxlciggb3V0c2lkZV9ldmVudF9uYW1lLCBbIGV2ZW50LnRhcmdldCBdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gIH07XHJcblxyXG59KShqUXVlcnksZG9jdW1lbnQsXCJvdXRzaWRlXCIpO1xyXG4iLCIvKiFcclxuICogc2Ftc3VuZy5jb20gLSBQaGFzZTIgLSBKYXZhc2NyaXB0IE5hbWVzcGFjZSBEZWZpbmVkXHJcbiAqIHNyYyA6IGpzL3NyYy9zbWcvYWVtL25hbWVzcGFjZS5qc1xyXG4gKlxyXG4gKiBAdmVyc2lvbiAxLjAuMFxyXG4gKiBAc2luY2UgMjAxNi4wMi4wMVxyXG4gKi9cclxuOyhmdW5jdGlvbih3aW4pIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZykge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBzYW1zdW5nLmNvbSBuYW1lc3BhY2VcclxuXHRcdCAqIEBuYW1lICB3aW5kb3cuc21nXHJcblx0XHQgKiBAbmFtZXNwYWNlXHJcblx0XHQgKi9cclxuXHRcdHdpbi5zbWcgPSB7fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBoYXNlMiBBRU0gTmFtZXNwYWNlXHJcblx0ICogQG5hbWUgIHdpbmRvdy5zbWcuYWVtXHJcblx0ICogQG5hbWVzcGFjZVxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtID0gd2luLnNtZy5hZW0gfHwge307XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBoYXNlMiBBRU0gU3RhdGljIFZhbHVlcyBEZWZpbmVkXHJcblx0ICovXHJcblx0d2luLnNtZy5hZW0udmFyU3RhdGljID0gd2luLnNtZy5hZW0udmFyU3RhdGljIHx8IHt9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQaGFzZTIgQUVNIEN1c3RvbSBFdmVudHMgRGVmaW5lZFxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLmN1c3RvbUV2ZW50ID0gd2luLnNtZy5hZW0uY3VzdG9tRXZlbnQgfHwge307XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBoYXNlMiBBRU0gVXRpbGl0eSBTY3JpcHQgRGVmaW5lZFxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLnV0aWwgPSB3aW4uc21nLmFlbS51dGlsIHx8IHt9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQaGFzZTIgQUVNIENvbW1vbiBTY3JpcHQgRGVmaW5lZFxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLmNvbW1vbiA9IHdpbi5zbWcuYWVtLmNvbW1vbiB8fCB7fTtcclxuXHJcblx0LyoqXHJcblx0ICogUGhhc2UyIEFFTSBDb21wb25lbnRzIE5hbWVzcGFjZVxyXG5cdCAqIEBuYW1lICB3aW5kb3cuc21nLmFlbS5jb21wb25lbnRzXHJcblx0ICogQG5hbWVzcGFjZVxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLmNvbXBvbmVudHMgPSB3aW4uc21nLmFlbS5jb21wb25lbnRzIHx8IHt9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQaGFzZTIgSG9tZSBDb21wb25lbnRzIE5hbWVzcGFjZVxyXG5cdCAqIEBuYW1lICB3aW5kb3cuc21nLmFlbS5jb21wb25lbnRzLmhvbWVcclxuXHQgKiBAbmFtZXNwYWNlXHJcblx0ICovXHJcblx0d2luLnNtZy5hZW0uY29tcG9uZW50cy5ob21lID0gd2luLnNtZy5hZW0uY29tcG9uZW50cy5ob21lIHx8IHt9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQaGFzZTIgQWJvdXRTYW1zdW5nIENvbXBvbmVudHMgTmFtZXNwYWNlXHJcblx0ICogQG5hbWUgIHdpbmRvdy5zbWcuYWVtLmNvbXBvbmVudHMuYWJvdXRzYW1zdW5nXHJcblx0ICogQG5hbWVzcGFjZVxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLmNvbXBvbmVudHMuYWJvdXRzYW1zdW5nID0gd2luLnNtZy5hZW0uY29tcG9uZW50cy5hYm91dHNhbXN1bmcgfHwge307XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBoYXNlMiBBRU0gVGVtcGxhdGVzIE5hbWVzcGFjZVxyXG5cdCAqIEBuYW1lICB3aW5kb3cuc21nLmFlbS50ZW1wbGF0ZXNcclxuXHQgKiBAbmFtZXNwYWNlXHJcblx0ICovXHJcblx0d2luLnNtZy5hZW0udGVtcGxhdGVzID0gd2luLnNtZy5hZW0udGVtcGxhdGVzIHx8IHt9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQaGFzZTIgSG9tZSBUZW1wbGF0ZXMgTmFtZXNwYWNlXHJcblx0ICogQG5hbWUgIHdpbmRvdy5zbWcuYWVtLnRlbXBsYXRlcy5ob21lXHJcblx0ICogQG5hbWVzcGFjZVxyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLnRlbXBsYXRlcy5ob21lID0gd2luLnNtZy5hZW0udGVtcGxhdGVzLmhvbWUgfHwge307XHJcbn0pKHdpbmRvdyk7IiwiLyohXHJcbiAqIHNhbXN1bmcuY29tIC0gUGhhc2UyIC0gVXRpbGl0eSBTY3JpcHQgRGVmaW5lZFxyXG4gKiBzcmMgOiBqcy9zcmMvc21nL2FlbS9zdGF0aWMvc21nLmFlbS51dGlsLmpzXHJcbiAqXHJcbiAqIEB2ZXJzaW9uIDEuMC4wXHJcbiAqIEBzaW5jZSAyMDE2LjAyLjA0XHJcbiAqL1xyXG47KGZ1bmN0aW9uKHdpbiwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZykge1xyXG4gICAgICAgIHdpbi5zbWcgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtKSB7XHJcbiAgICAgICAgd2luLnNtZy5hZW0gPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLnV0aWwpIHtcclxuICAgICAgICB3aW4uc21nLmFlbS51dGlsID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxcclxuICAgICAgICBkb2MgPSB3aW4uZG9jdW1lbnQ7XHJcblxyXG4gICAgLy8gd2luZG93IHNhZmFyaSBjaGVja1xyXG4gICAgKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIGFuTmV0c2NhcGUgPSAobmF2aWdhdG9yLmFwcE5hbWUgPT0gXCJOZXRzY2FwZVwiKSxcclxuICAgICAgICAgICAgYXZNYWMgPSAobmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1hY1wiKSAhPSAtMSksXHJcbiAgICAgICAgICAgIHVhU2FmYXJpID0gKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlNhZmFyaVwiKSAhPSAtMSksXHJcbiAgICAgICAgICAgIHVhQ2hyb21lID0gKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkNocm9tZVwiKSAhPSAtMSk7XHJcbiAgICAgICAgd2luLmlzUGNTYWZhcmkgPSAoIGFuTmV0c2NhcGUgJiYgIWF2TWFjICYmIHVhU2FmYXJpICYmICF1YUNocm9tZSApID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIHdpbmRvdy5zbWcuYWVtLnV0aWxcclxuICAgICAqIEBuYW1lc3BhY2VcclxuICAgICAqIEByZXF1aXJlcyBqUXVlcnlcclxuICAgICAqIEByZXF1aXJlcyBuYW1lc3BhY2UuanNcclxuICAgICAqL1xyXG4gICAgd2luLnNtZy5hZW0udXRpbCA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpc0FycmF5IDogZnVuY3Rpb24oYXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FycmF5JyA9PT0gJC50eXBlKGFycik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZiA6IGZ1bmN0aW9uKG9yZywgc3JjKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNyYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChzcmMsIHByb3ApKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJ29iamVjdCcgPT09ICQudHlwZShvcmdbcHJvcF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ1twcm9wXSA9ICh0aGlzLmlzQXJyYXkob3JnW3Byb3BdKSA/IHNyY1twcm9wXS5zbGljZSgwKSA6IHRoaXMuZGVmKG9yZ1twcm9wXSwgc3JjW3Byb3BdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnW3Byb3BdID0gc3JjW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHdpblNpemUgOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aW5fd2ggPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdyA6ICghd2luLmlzUGNTYWZhcmkpID8gd2luLmlubmVyV2lkdGggfHwgZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2MuYm9keS5jbGllbnRXaWR0aCA6ICQod2luKS53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGggOiAoIXdpbi5pc1BjU2FmYXJpKSA/IHdpbi5pbm5lckhlaWdodCB8fCBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2MuYm9keS5jbGllbnRIZWlnaHQgOiAkKHdpbikuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luX3doO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRRdWVyeVN0ciA6IGZ1bmN0aW9uKGhyZWYpIHtcclxuICAgICAgICAgICAgICAgIGhyZWYgPSBocmVmIHx8IHdpbi5sb2NhdGlvbi5ocmVmO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB2YXJzID0ge307XHJcbiAgICAgICAgICAgICAgICBocmVmLnJlcGxhY2UoL1s/Jl0rKFtePSZdKyk9KFteJl0qKS9naSwgZnVuY3Rpb24obSxrZXksdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXJzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhcnM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHdpbk9wZW5lciA6IGZ1bmN0aW9uKGFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZQYXJhbXMgPSAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmwgXHRcdDogJy8vd3d3LnNhbXN1bmcuY29tJyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lIFx0XHQ6ICdzbWdfb3BlbmVyXycgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCBcdFx0OiA0MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IFx0XHQ6IDQwMCxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0IFx0XHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wIFx0XHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyc1x0OiAnbm8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXIgXHQ6ICdubycsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gXHQ6ICdubycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3JpZXMgOiAnbm8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyBcdFx0OiAnbm8nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lbnViYXIgXHQ6ICdubycsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlIFx0OiAnbm8nXHJcbiAgICAgICAgICAgICAgICB9LCBvcGVuZXIsIHNldHRpbmcsIG9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyBcdFx0PSB3aW4uc21nLnV0aWwuZGVmKGRlZlBhcmFtcywgKGFyZ3MgfHwge30pKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMubGVmdCBcdD0gb3B0aW9ucy5sZWZ0IHx8ICggc2NyZWVuLndpZHRoIC8gMiAtIG9wdGlvbnMud2lkdGggLyAyICk7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnRvcCBcdD0gb3B0aW9ucy50b3AgfHwgKCBzY3JlZW4uaGVpZ2h0IC8gMiAtIG9wdGlvbnMuaGVpZ2h0IC8gMiApO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciggdmFyIHByb3AgaW4gb3B0aW9ucyApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiggcHJvcCAhPSAndXJsJyAmJiBwcm9wICE9ICduYW1lJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZyArPSAnLCcgKyBwcm9wICsgJz0nICsgb3B0aW9uc1sgcHJvcCBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldHRpbmcgPSBzZXR0aW5nLnN1YnN0ciggMSwgc2V0dGluZy5sZW5ndGggKTtcclxuICAgICAgICAgICAgICAgIG9wZW5lciA9IHdpbmRvdy5vcGVuKCBvcHRpb25zLnVybCwgb3B0aW9ucy5uYW1lLCBzZXR0aW5nICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3BlbmVyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpbWdMb2FkZXIgOiBmdW5jdGlvbihpbWcsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBpbWcuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2IgPSAoY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fSk7XHJcblx0XHRcdFx0XHQvKmZvciBJRSAxMC0qL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlIHx8ICQodGhpcykuaGVpZ2h0KCkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmFwcGx5KGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5sb2FkKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuYXBwbHkoaW1nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZ3T3JpZW50YXRpb25VcGRhdGUgOiBmdW5jdGlvbihjc3MpIHtcclxuICAgICAgICAgICAgICAgICQod2luKS5vbignb3JpZW50YXRpb25jaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdndFbGVtID0gJChjc3MgfHwgJy5qcy12dycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdndFbGVtLnNpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZ3RWxlbS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZ3RWxlbS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaVBhZFZXUmVuZGVyIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudndPcmllbnRhdGlvblVwZGF0ZSgnLmpzLXZ3Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIENvb2tpZSA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZlBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzIDogJycsIHBhdGg6ICcvJywgZG9tYWluIDogJycsIHNlY3VyZSA6ICcnXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Q29va2llIDogZnVuY3Rpb24oY25hbWUsIGN2YWx1ZSwgZXhkYXlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKChleGRheXMgfHwgMCkgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0ID0gd2luLnNtZy5hZW0udXRpbC5kZWYoZGVmUGFyYW1zLCB7IGV4cGlyZXMgOiBkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmFtZSwgJz0nLCBjdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQuZXhwaXJlcyA/ICc7IGV4cGlyZXM9JyArIG9wdC5leHBpcmVzLnRvVVRDU3RyaW5nKCkgOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5wYXRoICAgID8gJzsgcGF0aD0nICsgb3B0LnBhdGggOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5kb21haW4gID8gJzsgZG9tYWluPScgKyBvcHQuZG9tYWluIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQuc2VjdXJlICA/ICc7IHNlY3VyZScgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0Q29va2llIDogZnVuY3Rpb24oY25hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArICc9JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTAsIGxlbmc9Y2EubGVuZ3RoOyBpPGxlbmc7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGNhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApPT0nICcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gYy5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLGMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbG9hZENTUyA6IGZ1bmN0aW9uKHVybHMsIGNiLCBub2NhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXVybHMgfHwgJ3N0cmluZycgPT09ICQudHlwZSh1cmxzKSkgdXJscyA9IFt1cmxzXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaGVhZCA9ICQoJ2hlYWQnKSwgZGZkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgJC5tYXAodXJscywgZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9kZmQgPSAkLkRlZmVycmVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGZkcy5wdXNoKF9kZmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJzxsaW5rPicpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVsJyA6ICdzdHlsZXNoZWV0JywgdHlwZSA6ICd0ZXh0L2NzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYgOiB1cmwgKyAoISFub2NhY2hlID8gJz9fdHM9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpIDogJycpXHJcbiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8oaGVhZCkubG9hZChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RmZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkLndoZW4uYXBwbHkoJCwgZGZkcykuZG9uZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKGNiKSkgY2IoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRTZXJ2ZXJUaW1lIDogZnVuY3Rpb24oY2FsbEJhY2ssIHNlcnZlclVybCkge1xyXG4gICAgICAgICAgICAgICAgc2VydmVyVXJsID0gc2VydmVyVXJsIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBjYWxsQmFjayA9IGNhbGxCYWNrIHx8IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmwgOiBzZXJ2ZXJVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoZSA6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKHJlcywgc3RhdHVzLCB4aHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sobmV3IERhdGUoeGhyLmdldFJlc3BvbnNlSGVhZGVyKCdEYXRlJykpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0UmVzdHJpY3RCeXRlcyA6IGZ1bmN0aW9uKHN0ciwgbWF4Qnl0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdHJMZW5nID0gc3RyLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICByQnl0ZSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgckxlbiA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyQ2hhciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIG1heEJ5dGVzID0gbWF4Qnl0ZXMgfHwgMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzdHJMZW5nOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHJDaGFyID0gc3RyLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXNjYXBlKHN0ckNoYXIpLmxlbmd0aCA+IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckJ5dGUgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByQnl0ZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYockJ5dGUgPD0gbWF4Qnl0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckxlbiA9IGkrMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlcyA6IHJCeXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY3RMZW5nIDogckxlblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc0FlbUVkaXRNb2RlIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbi5wYXJlbnQgJiYgd2luLmZyYW1lRWxlbWVudCAmJiAkKHdpbi5wYXJlbnQuZG9jdW1lbnQpLmZpbmQoJy5mb3VuZGF0aW9uLWF1dGhvcmluZy11aS1tb2RlJykuc2l6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmxhZztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2xpY2tPcHRpb25Db250cm9sRnVuY3MgOiB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VPcHQgOiBmdW5jdGlvbih0YXJnZXRDYXJvdXNlbCwgdGFyZ2V0T3B0LCBlYWNoRGF0YVRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhU2xpY2tPcHQgPSB0YXJnZXRDYXJvdXNlbC5kYXRhKCdzbGljay1vcHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVNsaWNrT3B0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyXHRjaGFuZ2VPcHQgPSAkLmV4dGVuZCh0cnVlLCB7fSwgdGFyZ2V0T3B0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1NsaWRlID0gZGF0YVNsaWNrT3B0LmF1dG9TbGlkZU9wdHMuYXV0b1NsaWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvU2xpZGVUaW1lID0gZGF0YVNsaWNrT3B0LmF1dG9TbGlkZU9wdHMuYXV0b1NsaWRlVGltZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmZpbml0ZSA9IGRhdGFTbGlja09wdC5pbmZpbml0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU9wdC5hdXRvcGxheSA9IGF1dG9TbGlkZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlT3B0LmF1dG9wbGF5U3BlZWQgPSBhdXRvU2xpZGVUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VPcHQuaW5maW5pdGUgPSBpc0luZmluaXRlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE9wdC5yZXNwb25zaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VPcHQucmVzcG9uc2l2ZVswXS5zZXR0aW5ncy5pbmZpbml0ZSA9IGlzSW5maW5pdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENhcm91c2VsLmRhdGEoJ2lzQXV0b1NsaWRlJywgYXV0b1NsaWRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVhY2hEYXRhVGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhY2hEYXRhVGFyZ2V0LmRhdGEoJ2lzQXV0b1NsaWRlJywgYXV0b1NsaWRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhbmdlT3B0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRPcHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldFRvZ2dsZUJ1dHRvbjogZnVuY3Rpb24odGFyZ2V0Q2Fyb3VzZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXNBdXRvU2xpZGUgPSB0YXJnZXRDYXJvdXNlbC5kYXRhKCdpc0F1dG9TbGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENhcm91c2VsID0gKHRhcmdldENhcm91c2VsLmhhc0NsYXNzKCdzLXNsaWNrJykpID8gdGFyZ2V0Q2Fyb3VzZWwgOiB0YXJnZXRDYXJvdXNlbC5maW5kKCcucy1zbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0F1dG9TbGlkZSA9PT0gdW5kZWZpbmVkIHx8IGlzQXV0b1NsaWRlID09PSBmYWxzZSkge3JldHVybjt9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRDYXJvdXNlbC5maW5kKCcuc2xpY2stZG90cycpLmxlbmd0aCAmJiAhdGFyZ2V0Q2Fyb3VzZWwuc2libGluZ3MoJy5zLXNsaWNrLWRvdHMnKS5maW5kKCcuc2xpY2stZG90cycpLmxlbmd0aCkge3JldHVybjt9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvdHNTdHIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlQnRuV3JhcDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZG90c0FwcGVuZEVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcHBlbmRUeXBlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBdXRvU2xpZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG90c1N0ciArPSAnPGxpIGNsYXNzPVwic2xpY2stZG90cy1hdXRvcGxheVwiPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdHNTdHIgKz0gJzxidXR0b24gY2xhc3M9XCJzLWF1dG9wbGF5LXBhdXNlXCI+QXV0byBQbGF5PC9idXR0b24+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG90c1N0ciArPSAnPC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdHNTdHIgKz0gJzxsaSBjbGFzcz1cInNsaWNrLWRvdHMtYXV0b3BsYXlcIj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzU3RyICs9ICc8YnV0dG9uIGNsYXNzPVwicy1hdXRvcGxheS1wbGF5XCI+QXV0byBQbGF5PC9idXR0b24+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG90c1N0ciArPSAnPC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENhcm91c2VsLmZpbmQoJy5zbGljay1kb3RzJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdHNBcHBlbmRFbCA9IHRhcmdldENhcm91c2VsLmZpbmQoJy5zbGljay1kb3RzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFR5cGUgPSAnc21nJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldENhcm91c2VsLnNpYmxpbmdzKCcucy1zbGljay1kb3RzJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdHNBcHBlbmRFbCA9IHRhcmdldENhcm91c2VsLnNpYmxpbmdzKCcucy1zbGljay1kb3RzJykuZmluZCgnLnNsaWNrLWRvdHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVHlwZSA9ICdjbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG90c0FwcGVuZEVsLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzQXBwZW5kRWwuYXBwZW5kKCQoZG90c1N0cikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdG5XcmFwID0gZG90c0FwcGVuZEVsLmZpbmQoJy5zbGljay1kb3RzLWF1dG9wbGF5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0VG9nZ2xlQnV0dG9uU3RhdHVzID0gZnVuY3Rpb24odG9nZ2xlQnRuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2dnbGVCdG4uaGFzQ2xhc3MoJ3MtYXV0b3BsYXktcGF1c2UnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2Fyb3VzZWwuc2xpY2soJ3NsaWNrUGxheScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2Fyb3VzZWwuc2xpY2soJ3NsaWNrUGF1c2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdXRvU2xpZGVUb2dnbGVIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlQnRuID0gJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJz4gYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2dnbGVCdG4uaGFzQ2xhc3MoJ3MtYXV0b3BsYXktcGF1c2UnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnJlbW92ZUNsYXNzKCdzLWF1dG9wbGF5LXBhdXNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdG4uYWRkQ2xhc3MoJ3MtYXV0b3BsYXktcGxheScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2Fyb3VzZWwuc2xpY2soJ3NsaWNrUGF1c2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi5yZW1vdmVDbGFzcygncy1hdXRvcGxheS1wbGF5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdG4uYWRkQ2xhc3MoJ3MtYXV0b3BsYXktcGF1c2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENhcm91c2VsLnNsaWNrKCdzbGlja1BsYXknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiaW5kVG9nZ2xlQ2xpY2tFdmVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdG5XcmFwLm9mZignY2xpY2suc21nYWVtdXRpbCcpLm9uKCdjbGljay5zbWdhZW11dGlsJywgYXV0b1NsaWRlVG9nZ2xlSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFrcG9pbnRDaGFuZ2VIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0Q2Fyb3VzZWwuZGF0YSgnZGV0YWNoZWRCdXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyXHRhcHBlbmRUeXBlID0gdGFyZ2V0Q2Fyb3VzZWwuZGF0YSgnYXBwZW5kVHlwZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcGVuZFR5cGUgPT09ICdzbWcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDYXJvdXNlbC5maW5kKCcuc2xpY2stZG90cycpLmFwcGVuZCh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFwcGVuZFR5cGUgPT09ICdjbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENhcm91c2VsLnNpYmxpbmdzKCcucy1zbGljay1kb3RzJykuZmluZCgnLnNsaWNrLWRvdHMnKS5hcHBlbmQodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZFRvZ2dsZUNsaWNrRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VG9nZ2xlQnV0dG9uU3RhdHVzKHRhcmdldC5maW5kKCc+IGJ1dHRvbicpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDYXJvdXNlbC5kYXRhKCdkZXRhY2hlZEJ1dHRvbicsIHRvZ2dsZUJ0bldyYXApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENhcm91c2VsLmRhdGEoJ2FwcGVuZFR5cGUnLCBhcHBlbmRUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDYXJvdXNlbC5vZmYoJ2JyZWFrcG9pbnQuc21nYWVtdXRpbCcpLm9uKCdicmVha3BvaW50LnNtZ2FlbXV0aWwnLCBicmVha3BvaW50Q2hhbmdlSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYmluZFRvZ2dsZUNsaWNrRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHdpbi5zbWcuYWVtLnV0aWwuY29va2llID0gbmV3IHdpbi5zbWcuYWVtLnV0aWwuQ29va2llKCk7XHJcblxyXG4gICAgJChmdW5jdGlvbigpIHtcclxuICAgICAgICB3aW4uc21nLmFlbS51dGlsLmlQYWRWV1JlbmRlcigpO1xyXG4gICAgfSk7XHJcbn0pKHdpbmRvdywgd2luZG93LmpRdWVyeSk7IiwiLyohXHJcbiAqIHNhbXN1bmcuY29tIC0gUGhhc2UyIC0gU3RhdGljIFZhbHVlcyBEZWZpbmVkXHJcbiAqIHNyYyA6IGpzL3NyYy9zbWcvYWVtL3N0YXRpYy9zbWcuYWVtLnN0YXRpYy5qc1xyXG4gKlxyXG4gKiBAdmVyc2lvbiAxLjAuMFxyXG4gKiBAc2luY2UgMjAxNi4wMi4wNFxyXG4gKi9cclxuOyhmdW5jdGlvbih3aW4pIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZykge1xyXG5cdFx0d2luLnNtZyA9IHt9O1xyXG5cdH1cclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nLmFlbSkge1xyXG5cdFx0d2luLnNtZy5hZW0gPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZy5hZW0udmFyU3RhdGljKSB7XHJcblx0XHR3aW4uc21nLmFlbS52YXJTdGF0aWMgPSB7fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBuYW1lIHdpbmRvdy5zbWcuYWVtLnZhclN0YXRpY1xyXG5cdCAqIEBuYW1lc3BhY2VcclxuXHQgKiBAcmVxdWlyZXMgbmFtZXNwYWNlLmpzXHJcblx0ICovXHJcblx0d2luLnNtZy5hZW0udmFyU3RhdGljID0ge1xyXG5cdFx0Q1NTIDoge1xyXG5cdFx0XHRWSURFT19PUEVOIDogJ3ZpZGVvLW9wZW4nLFxyXG5cdFx0XHRMQVlFUl9PUEVORUQgOiAnbGF5ZXItb3BlbmVkLW1vJyxcclxuXHJcblx0XHRcdFNFQVJDSF9QT1MgOiAnc2VhcmNoLXBvcycsXHJcblx0XHRcdE5BVl9PUEVOIDogJ25hdi1vcGVuJyxcclxuXHRcdFx0TkFWX0NMT1NFIDogJ25hdi1jbG9zZScsXHJcblxyXG5cdFx0XHRIQVNfQU5JTUFURUQgOiAnaGFzLWFuaW1hdGVkJyxcclxuXHJcblx0XHRcdElTX1NIT1cgOiAnaXMtc2hvdycsXHJcblx0XHRcdElTX0hJREUgOiAnaXMtaGlkZScsXHJcblx0XHRcdElTX09QRU4gOiAnaXMtb3BlbicsXHJcblx0XHRcdElTX1NFTEVDVCA6ICdpcy1zZWxlY3QnLFxyXG5cclxuXHRcdFx0SlNfSU1HX1NSQyA6ICdqcy1pbWctc3JjJyxcclxuXHRcdFx0SlNfSU1HX0xBWlkgOiAnanMtaW1nLWxhenknLFxyXG5cdFx0XHRKU19JTUdfTEFaWV9MT0FERUQgOiAnanMtaW1nLWxhenktbG9hZGVkJyxcclxuXHJcblx0XHRcdExBWllfTE9BREVEIDogJ2xhenktbG9hZGVkJyxcclxuXHJcblx0XHRcdFNXSVRDSF9NT0JJTEUgOiAnc3dpdGNoLW1vYmlsZScsXHJcblx0XHRcdFNXSVRDSF9UQUJMRVQgOiAnc3dpdGNoLXRhYmxldCdcclxuXHRcdH0sXHJcblx0XHREQVRBX0FUVFIgOiB7XHJcblx0XHRcdFNSQ19QQyA6ICdkYXRhLXNyYy1wYycsXHJcblx0XHRcdFNSQ19NT0JJTEUgOiAnZGF0YS1zcmMtbW9iaWxlJyxcclxuXHRcdFx0REFUQV9TUkMgOiAnZGF0YS1zcmMnXHJcblx0XHR9LFxyXG5cdFx0U1VQUE9SVCA6IHtcclxuXHRcdFx0Tk9fU1ZHIDogJ25vLXN2ZycsXHJcblx0XHRcdE5PX0NTUzMgOiAnbm8tY3NzMycsXHJcblx0XHRcdElFX0xUXzggOiAnbHQtaWU4JyxcclxuXHRcdFx0Q09PS0lFX1dBUk5JTkcgOiAnY29va2llLXdhcm5pbmcnLFxyXG5cdFx0XHRUT1VDSF9ERVZJQ0UgOiAndG91Y2gtZGV2aWNlJ1xyXG5cdFx0fSxcclxuXHRcdFJFU1BPTlNJVkUgOiB7XHJcblx0XHRcdERFU0tUT1AgOiB7XHJcblx0XHRcdFx0TkFNRSA6ICdkZXNrdG9wJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRUQUJMRVQgOiB7XHJcblx0XHRcdFx0TkFNRSA6ICd0YWJsZXQnLFxyXG5cdFx0XHRcdFdJRFRIIDogMTI4MFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRNT0JJTEUgOiB7XHJcblx0XHRcdFx0TkFNRSA6ICdtb2JpbGUnLFxyXG5cdFx0XHRcdFdJRFRIIDogNzY4XHJcblx0XHRcdH0sXHJcblx0XHRcdE1JTl9NT0JJTEUgOiB7XHJcblx0XHRcdFx0TkFNRSA6ICdtaW5fbW9iaWxlJyxcclxuXHRcdFx0XHRXSURUSCA6IDMyMFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRHTkIgOiB7XHJcblx0XHRcdFx0TkFNRSA6ICdnbmJfcmVwb25zaXZlJyxcclxuXHRcdFx0XHRXSURUSCA6IDEwMjRcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdEJBQ0tUT1RPUCA6IHtcclxuXHRcdFx0VE9QX1BPU0lUSU9OIDogJ3RvcF9wb3NpdGlvbidcclxuXHRcdH1cclxuXHR9O1xyXG5cclxufSkod2luZG93KTtcclxuIiwiLyohXHJcbiAqIHNhbXN1bmcuY29tIC0gUGhhc2UyIC0gQ3VzdG9tIEV2ZW50cyBEZWZpbmVkXHJcbiAqIHNyYyA6IGpzL3NyYy9zbWcvYWVtL2V2ZW50L3NtZy5hZW0uZXZlbnQuanNcclxuICpcclxuICogQHZlcnNpb24gMS4wLjBcclxuICogQHNpbmNlIDIwMTYuMTAuMTBcclxuICovXHJcbjsoZnVuY3Rpb24od2luKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcpIHtcclxuXHRcdHdpbi5zbWcgPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZy5hZW0pIHtcclxuXHRcdHdpbi5zbWcuYWVtID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLmN1c3RvbUV2ZW50KSB7XHJcblx0XHR3aW4uc21nLmFlbS5jdXN0b21FdmVudCA9IHt9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQG5hbWUgd2luZG93LnNtZy5hZW0uY3VzdG9tRXZlbnRcclxuXHQgKiBAbmFtZXNwYWNlXHJcblx0ICogQHJlcXVpcmVzIG5hbWVzcGFjZS5qc1xyXG5cdCAqL1xyXG5cdHdpbi5zbWcuYWVtLmN1c3RvbUV2ZW50ID0ge1xyXG5cdFx0Q09OTkVDVCA6IHt9LFxyXG5cdFx0VklERU8gOiB7XHJcblx0XHRcdFBMQVkgOiAnQUVNX1ZJREVPX1BMQVknLFxyXG5cdFx0XHRDTE9TRSA6ICdBRU1fVklERU9fQ0xPU0UnXHJcblx0XHR9LFxyXG5cdFx0UkVTUE9OU0lWRSA6IHtcclxuXHRcdFx0R0VUX1NUQVRVUyA6ICdBRU1fUkVTUE9OU0lWRV9HRVRfU1RBVFVTJyxcclxuXHRcdFx0Q0hBTkdFIDogJ0FFTV9SRVNQT05TSVZFX0NIQU5HRSdcclxuXHRcdH0sXHJcblx0XHRCQUNLVE9UT1AgOiB7XHJcblx0XHRcdFBPU0lUSU9OX0NIQU5HRSA6ICdBRU1fUE9TSVRJT05fQ0hBTkdFJ1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG59KSh3aW5kb3cpO1xyXG4iLCIvKiFcclxuICogc2Ftc3VuZy5jb20gLSBQaGFzZTIgLSBDb21tb24gU2NyaXB0IERlZmluZWRcclxuICogc3JjIDoganMvc3JjL3NtZy9hZW0vY29tbW9uL3NtZy5hZW0uY29tbW9uLmpzXHJcbiAqXHJcbiAqIEB2ZXJzaW9uIDEuMC4wXHJcbiAqIEBzaW5jZSAyMDE2LjAyLjA0XHJcbiAqL1xyXG47KGZ1bmN0aW9uKHdpbiwgJCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nKSB7XHJcblx0XHR3aW4uc21nID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtKSB7XHJcblx0XHR3aW4uc21nLmFlbSA9IHt9O1xyXG5cdH1cclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nLmFlbS5jb21tb24pIHtcclxuXHRcdHdpbi5zbWcuYWVtLmNvbW1vbiA9IHt9O1xyXG5cdH1cclxuXHJcblx0Ly8gU3RhdGljIFZhbHVlc1xyXG5cdHZhciBWX1NUQVRJQyA9IHdpbi5zbWcuYWVtLnZhclN0YXRpYyxcclxuXHQvLyBVdGlsaXR5IFNjcmlwdFxyXG5cdFVUSUwgPSB3aW4uc21nLmFlbS51dGlsLFxyXG5cdC8vIEN1c3RvbSBFdmVudHNcclxuXHRDU1RfRVZFTlQgPSB3aW4uc21nLmFlbS5jdXN0b21FdmVudDtcclxuXHJcblx0LyoqXHJcblx0ICogQG5hbWUgd2luZG93LnNtZy5hZW0uY29tbW9uXHJcblx0ICogQG5hbWVzcGFjZVxyXG5cdCAqIEByZXF1aXJlcyBqUXVlcnlcclxuXHQgKiBAcmVxdWlyZXMgbmFtZXNwYWNlLmpzXHJcblx0ICogQHJlcXVpcmVzIHdpbmRvdy5zbWcuYWVtLnN0YXRpYy5qc1xyXG5cdCAqIEByZXF1aXJlcyB3aW5kb3cuc21nLmFlbS51dGlsLmpzXHJcblx0ICogQHJlcXVpcmVzIHdpbmRvdy5zbWcuYWVtLmV2ZW50LmpzXHJcblx0ICovXHJcblx0d2luLnNtZy5hZW0uY29tbW9uID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aW5pdCA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuZGV0ZWN0aW9uKCk7XHJcblxyXG5cdFx0XHRcdHRoaXMucmVzcG9uc2l2ZU5hbWUgPSAnJztcclxuXHRcdFx0XHR0aGlzLnJlc3BvbnNpdmVOYW1lRXggPSAnJztcclxuXHRcdFx0XHR0aGlzLnJlc3BvbnNpdmVHTkIgPSAnJztcclxuXHRcdFx0XHR0aGlzLnJlc3BvbnNpdmVHTkJFeCA9ICcnO1xyXG5cclxuXHJcblx0XHRcdFx0JCgnYm9keScpLm9uKENTVF9FVkVOVC5SRVNQT05TSVZFLkdFVF9TVEFUVVMsICQucHJveHkodGhpcy5yZXNpemVMaXN0ZW5lciwgdGhpcykpO1xyXG5cdFx0XHRcdCQod2luKS5vbigncmVzaXplJywgJC5wcm94eSh0aGlzLnJlc2l6ZUxpc3RlbmVyLCB0aGlzKSk7XHJcblx0XHRcdFx0dGhpcy5yZXNpemVMaXN0ZW5lcigpO1xyXG5cclxuXHRcdFx0XHR0aGlzLnNraXBOYXZnYXRpb24gPSAgJChcIi5zLXNraXAtY29udGVudFwiKS5jaGlsZHJlbigpO1xyXG5cdFx0XHRcdHRoaXMuc2tpcE5hdmdhdGlvbi5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuc2tpcE5hdmdhdGlvbkZ1bmMsIHRoaXMpKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHRcdH0sXHJcblx0XHRcdGRldGVjdGlvbiA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vIFNWRyBTdXBwb3J0IENoZWNrXHJcblx0XHRcdFx0aWYgKCFkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0ltYWdlJywgJzEuMScpKSB7XHJcblx0XHRcdFx0XHQkKCdib2R5JykuYWRkQ2xhc3MoVl9TVEFUSUMuU1VQUE9SVC5OT19TVkcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSUUgbHQgOCBDaGVja1xyXG5cdFx0XHRcdGlmIChkb2N1bWVudC5hbGwgJiYgIWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuXHRcdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcyhWX1NUQVRJQy5TVVBQT1JULklFX0xUXzgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ1NTMyBTdXBwb3J0IENoZWNrXHJcblx0XHRcdFx0dmFyIHRoaXNCb2R5ID0gZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRcdFx0dGhpc1N0eWxlID0gdGhpc0JvZHkuc3R5bGUsXHJcblx0XHRcdFx0Y3NzM3N1cHBvcnQgPSB0aGlzU3R5bGUudHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHRoaXNTdHlsZS5XZWJraXRUcmFuc2l0aW9uICE9PSB1bmRlZmluZWQgfHwgdGhpc1N0eWxlLk1velRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fCB0aGlzU3R5bGUuTXNUcmFuc2l0aW9uICE9PSB1bmRlZmluZWQgfHwgdGhpc1N0eWxlLk9UcmFuc2l0aW9uICE9PSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0aWYgKCFjc3Mzc3VwcG9ydCkge1xyXG5cdFx0XHRcdFx0JCgnYm9keScpLmFkZENsYXNzKFZfU1RBVElDLlNVUFBPUlQuTk9fQ1NTMyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUb3VjaCBTdXBwb3J0IENoZWNrXHJcblx0XHRcdFx0dmFyIHN1cHBvcnRzVG91Y2ggPSAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5NYXhUb3VjaFBvaW50cyA+IDApIHx8IChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcclxuXHRcdFx0XHRpZiAoc3VwcG9ydHNUb3VjaCkge1xyXG5cdFx0XHRcdFx0JCgnYm9keScpLmFkZENsYXNzKFZfU1RBVElDLlNVUFBPUlQuVE9VQ0hfREVWSUNFKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHJlc2l6ZUxpc3RlbmVyIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHZhciB3aW5XaWR0aCA9IFVUSUwud2luU2l6ZSgpLnc7XHJcblxyXG5cdFx0XHRcdGlmICh3aW5XaWR0aCA8PSBWX1NUQVRJQy5SRVNQT05TSVZFLk1PQklMRS5XSURUSCkge1xyXG5cdFx0XHRcdFx0dGhpcy5yZXNwb25zaXZlTmFtZSA9IFZfU1RBVElDLlJFU1BPTlNJVkUuTU9CSUxFLk5BTUU7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh3aW5XaWR0aCA8PSBWX1NUQVRJQy5SRVNQT05TSVZFLlRBQkxFVC5XSURUSCkge1xyXG5cdFx0XHRcdFx0dGhpcy5yZXNwb25zaXZlTmFtZSA9IFZfU1RBVElDLlJFU1BPTlNJVkUuVEFCTEVULk5BTUU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMucmVzcG9uc2l2ZU5hbWUgPSBWX1NUQVRJQy5SRVNQT05TSVZFLkRFU0tUT1AuTkFNRTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICh3aW5XaWR0aCA8PSBWX1NUQVRJQy5SRVNQT05TSVZFLkdOQi5XSURUSCkge1xyXG5cdFx0XHRcdFx0dGhpcy5yZXNwb25zaXZlR05CID0gVl9TVEFUSUMuUkVTUE9OU0lWRS5HTkIuTkFNRTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5yZXNwb25zaXZlR05CID0gJyc7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAodGhpcy5yZXNwb25zaXZlTmFtZSAhPT0gdGhpcy5yZXNwb25zaXZlTmFtZUV4IHx8IHRoaXMucmVzcG9uc2l2ZUdOQiAhPT0gdGhpcy5yZXNwb25zaXZlR05CRXgpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVzcG9uc2l2ZU5hbWVFeCA9IHRoaXMucmVzcG9uc2l2ZU5hbWU7XHJcblx0XHRcdFx0XHR0aGlzLnJlc3BvbnNpdmVHTkJFeCA9IHRoaXMucmVzcG9uc2l2ZUdOQjtcclxuXHRcdFx0XHRcdCQoJ2JvZHknKS50cmlnZ2VyKENTVF9FVkVOVC5SRVNQT05TSVZFLkNIQU5HRSwgeyBSRVNQT05TSVZFX05BTUUgOiB0aGlzLnJlc3BvbnNpdmVOYW1lLCBSRVNQT05TSVZFX0dOQl9OQU1FIDogdGhpcy5yZXNwb25zaXZlR05CLCBpc01vYmlsZSA6IHdpbldpZHRoIDw9IFZfU1RBVElDLlJFU1BPTlNJVkUuTU9CSUxFLldJRFRIIH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKGUgJiYgZS50eXBlID09PSBDU1RfRVZFTlQuUkVTUE9OU0lWRS5HRVRfU1RBVFVTKSB7XHJcblx0XHRcdFx0XHQkKCdib2R5JykudHJpZ2dlcihDU1RfRVZFTlQuUkVTUE9OU0lWRS5DSEFOR0UsIHsgUkVTUE9OU0lWRV9OQU1FIDogdGhpcy5yZXNwb25zaXZlTmFtZSwgUkVTUE9OU0lWRV9HTkJfTkFNRSA6IHRoaXMucmVzcG9uc2l2ZUdOQiwgaXNNb2JpbGUgOiB3aW5XaWR0aCA8PSBWX1NUQVRJQy5SRVNQT05TSVZFLk1PQklMRS5XSURUSCB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHNraXBOYXZnYXRpb25GdW5jIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0T2JqZWN0U2VsZWN0b3IgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cihcImhyZWZcIik7XHJcblx0XHRcdFx0aWYgKHRhcmdldE9iamVjdFNlbGVjdG9yID09ICcjYWNjSGVscCcpIHtcclxuXHRcdFx0XHRcdCQodGFyZ2V0T2JqZWN0U2VsZWN0b3IpLmZvY3VzKCk7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHQkKHRhcmdldE9iamVjdFNlbGVjdG9yKS5hdHRyKCd0YWJpbmRleCcsIC0xKS5mb2N1cygpLnJlbW92ZUF0dHIoJ3RhYmluZGV4JywnJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKCk7XHJcblxyXG5cdHZhciBjb21tb247XHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdGNvbW1vbiA9IHdpbi5zbWcuYWVtLmNvbW1vbi5pbml0KCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIGNvbmZyaWN0IHNhbXN1bmcubWluLmpzIC0gcmVzaXplXHJcblx0JCh3aW4pLm9uKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRpZiAoIWNvbW1vbiB8fCAhY29tbW9uLnJlc2l6ZUxpc3RlbmVyKSByZXR1cm47XHJcblx0XHRjb21tb24ucmVzaXplTGlzdGVuZXIuY2FsbChjb21tb24sIGUpO1xyXG5cdH0pO1xyXG59KSh3aW5kb3csIHdpbmRvdy5qUXVlcnkpO1xyXG5cclxuXHJcblxyXG5cclxuLy8gY29udGVudHMgaGVpZ2h0IG1hdGNoaW5nXHJcbjsoZnVuY3Rpb24gKHdpbiwgJCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0aWYoIHR5cGVvZiAkLmZuLmhlaWdodE1hdGNoID09PSAnZnVuY3Rpb24nKSAkLmZuLmhlaWdodE1hdGNoID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcclxuXHQvLyBTdGF0aWMgVmFsdWVzXHJcblx0dmFyIFZfU1RBVElDID0gd2luLnNtZy5hZW0udmFyU3RhdGljLFxyXG5cdC8vIFV0aWxpdHkgU2NyaXB0XHJcblx0VVRJTCA9IHdpbi5zbWcuYWVtLnV0aWwsXHJcblx0Ly8gQ3VzdG9tIEV2ZW50c1xyXG5cdENTVF9FVkVOVCA9IHdpbi5zbWcuYWVtLmN1c3RvbUV2ZW50O1xyXG5cclxuXHR3aW4uX2hlaWdodE1hdGNoID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgb3B0aW9ucykge1xyXG5cdFx0dmFyIGRlZlBhcmFtcyA9IHtcclxuXHRcdFx0Y29tcFR5cGUgOiAnbGlzdCcsXHJcblx0XHRcdGxpc3RXcmFwIDogJycsXHJcblx0XHRcdGlzTGlzdE1hdGNoIDogdHJ1ZSxcclxuXHRcdFx0dGFyZ2V0RWxlbWVudHMgOiBbXSxcclxuXHRcdFx0bWF0Y2hBbGlnbklnbm9yZSA6ICcnLFxyXG5cdFx0XHRtYXRjaEFsaWduIDogMCxcclxuXHRcdFx0bWF0Y2hBdHRyIDogJ2hlaWdodCcsXHJcblx0XHRcdGZvcmNlTW9iaWxlOiBmYWxzZVxyXG5cdFx0fTtcclxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cdFx0dGhpcy5vcHRzID0gVVRJTC5kZWYoZGVmUGFyYW1zLCAob3B0aW9ucyB8fCB7fSkpO1xyXG5cclxuXHRcdHRoaXMuaW5pdCgpO1xyXG5cdH07XHJcblx0d2luLl9oZWlnaHRNYXRjaC5wcm90b3R5cGUgPSB7XHJcblx0XHRpbml0IDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aGlzLnNldEVsZW1lbnRzKCk7XHJcblx0XHRcdHRoaXMuYmluZEV2ZW50cygpO1xyXG5cdFx0XHR0aGlzLm1heEhlaWdodEJ1aWxkQ2hrKCk7XHJcblx0XHR9LFxyXG5cdFx0c2V0RWxlbWVudHMgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuJGJvZHkgPSAkKCdib2R5Jyk7XHJcblx0XHRcdHRoaXMuSVNfTU9CSUxFX01PREUgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5vYmogPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcclxuXHRcdFx0dGhpcy5pc0NvbHVtbnMgPSB0aGlzLm9iai5oYXNDbGFzcygnY20tY29sdW1uc19faXRlbScpO1xyXG5cdFx0XHR0aGlzLmNvbHVtbkxpbmVDbGFzcyA9ICdpcy1hY3RpdmUtbGluZSc7XHJcblx0XHRcdHRoaXMub3B0cy5tYXRjaEFsaWduID0gKHRoaXMub3B0cy5tYXRjaEFsaWduID4gMCkgPyB0aGlzLm9wdHMubWF0Y2hBbGlnbiA6IHRoaXMub2JqLmxlbmd0aDtcclxuXHRcdFx0dGhpcy5tYXhMaW5lID0gTWF0aC5jZWlsKHRoaXMub2JqLmxlbmd0aCAvIHRoaXMub3B0cy5tYXRjaEFsaWduKTtcclxuXHRcdFx0dGhpcy5zZXRUaW1lID0gNTAwO1xyXG5cdFx0fSxcclxuXHRcdGdldFRhcmdldEVsZW1lbnQgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmKHRoaXMuY29udGFpbmVyLmhhc0NsYXNzKHRoaXMub3B0cy50YXJnZXRFbGVtZW50cy5zdWJzdHJpbmcoMSkpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnRhaW5lci5maW5kKHRoaXMub3B0cy50YXJnZXRFbGVtZW50cyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRiaW5kRXZlbnRzIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aGlzLiRib2R5Lm9uKENTVF9FVkVOVC5SRVNQT05TSVZFLkNIQU5HRSwgJC5wcm94eSh0aGlzLm9uUmVzcG9uc2l2ZUNoYW5nZSwgdGhpcykpO1xyXG5cdFx0XHR0aGlzLiRib2R5LnRyaWdnZXIoQ1NUX0VWRU5ULlJFU1BPTlNJVkUuR0VUX1NUQVRVUyk7XHJcblx0XHRcdCQod2luKS5vbigncmVzaXplIG9yaWVudGF0aW9uY2hhbmdlJywgJC5wcm94eSh0aGlzLnJlc2l6ZUZ1bmMsIHRoaXMpKTtcclxuXHRcdH0sXHJcblx0XHRyZXNpemVGdW5jIDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aGlzLm1heEhlaWdodEJ1aWxkQ2hrKCk7XHJcblx0XHR9LFxyXG5cdFx0bWF4SGVpZ2h0QnVpbGRDaGsgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmKHRoaXMuSVNfTU9CSUxFX01PREUpe1xyXG5cdFx0XHRcdHRoaXMubWF4SGVpZ2h0QnVpbGQoZmFsc2UpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0aGlzLm1heEhlaWdodEJ1aWxkKHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0bWF4SGVpZ2h0QnVpbGQgOiBmdW5jdGlvbiAodHlwZSkge1xyXG5cdFx0XHR2YXIgc2V0VGltZSA9IHRoaXMuc2V0VGltZTtcclxuXHRcdFx0aWYodGhpcy5vcHRzLmNvbXBUeXBlID09ICdjYXJvdXNlbCcgJiYgIXRoaXMuSVNfTU9CSUxFX01PREUpIHtcclxuXHRcdFx0XHRzZXRUaW1lID0gODAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHRoaXMuaXNDb2x1bW5zKSB7XHJcblx0XHRcdFx0c2V0VGltZSArPSAxMDAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodGhpcy5vcHRzLmZvcmNlTW9iaWxlKSB7XHJcblx0XHRcdFx0dHlwZSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKHR5cGUpe1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBoZWlnaHRBcnJheSA9IFtdO1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1heExpbmU7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRoZWlnaHRBcnJheVtpXSA9IFtdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIG1heCA9IHRoaXMub2JqLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMub2JqLmVxKGkpLm91dGVySGVpZ2h0KCcnKTtcclxuXHRcdFx0XHRcdFx0dmFyIF9hcnJheUluZGV4ID0gcGFyc2VJbnQoKGkgLyB0aGlzLm9wdHMubWF0Y2hBbGlnbiksIDEwKSxcclxuXHRcdFx0XHRcdFx0X2hlaWdodCAgID0gdGhpcy5vYmouZXEoaSkub3V0ZXJIZWlnaHQoKTtcclxuXHRcdFx0XHRcdFx0aGVpZ2h0QXJyYXlbX2FycmF5SW5kZXhdLnB1c2goX2hlaWdodCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWF4TGluZTsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdGhlaWdodEFycmF5W2ldID0gTWF0aC5tYXguYXBwbHkobnVsbCwgaGVpZ2h0QXJyYXlbaV0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIG1heCA9IHRoaXMub2JqLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHZhciBfYXJyYXlJbmRleCA9IHBhcnNlSW50KChpIC8gdGhpcy5vcHRzLm1hdGNoQWxpZ24pLCAxMCk7XHJcblx0XHRcdFx0XHRcdHZhciBjdXJyZW50ICAgPSB0aGlzLm9iai5lcShpKTtcclxuXHRcdFx0XHRcdFx0aWYoaGVpZ2h0QXJyYXlbX2FycmF5SW5kZXhdID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnQuY3NzKHRoaXMub3B0cy5tYXRjaEF0dHIsIGhlaWdodEFycmF5W19hcnJheUluZGV4XSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMub2JqLmNsb3Nlc3QoJy5jbS1jb2x1bW5zLS1zZXBhcmF0aW9uLWxpbmUnKS5hZGRDbGFzcyh0aGlzLmNvbHVtbkxpbmVDbGFzcyk7XHJcblx0XHRcdFx0XHRpZih0aGlzLm9wdHMuY29tcFR5cGUgPT0gJ2Nhcm91c2VsJykge1xyXG5cdFx0XHRcdFx0XHRpZih0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcucy1zbGljaycpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKSB0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcucy1zbGljaycpLnNsaWNrKCdzZXRQb3NpdGlvbicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIHRoaXMpLCBzZXRUaW1lKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbWF4ID0gdGhpcy5vYmoubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHtcclxuXHRcdFx0XHRcdHRoaXMub2JqLmVxKGkpLm91dGVySGVpZ2h0KCcnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYodGhpcy5JU19NT0JJTEVfTU9ERSkge1xyXG5cdFx0XHRcdFx0XHRpZih0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcucy1zbGljaycpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKSB0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcucy1zbGljaycpLnNsaWNrKCdzZXRQb3NpdGlvbicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIHRoaXMpLCBzZXRUaW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdG9uUmVzcG9uc2l2ZUNoYW5nZSA6IGZ1bmN0aW9uKGUsIGRhdGEpIHtcclxuXHRcdFx0aWYgKGRhdGEuUkVTUE9OU0lWRV9OQU1FID09PSBWX1NUQVRJQy5SRVNQT05TSVZFLk1PQklMRS5OQU1FKSB7XHJcblx0XHRcdFx0dGhpcy5JU19NT0JJTEVfTU9ERSA9IHRydWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5JU19NT0JJTEVfTU9ERSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5oZWlnaHRNYXRjaCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG5cdFx0aWYoIW9wdGlvbnMubWF0Y2hFbGVtZW50cyB8fCAhJCh0aGlzKS5sZW5ndGgpIHJldHVybjtcclxuXHJcblx0XHR2YXIgY2FyZFdyYXAgICAgPSAkKHRoaXMpLFxyXG5cdFx0XHRjaGlsZCAgICAgICA9IGNhcmRXcmFwLmZpbmQob3B0aW9ucy5saXN0V3JhcCk7XHJcblxyXG5cdFx0aWYoIW9wdGlvbnMubGlzdFdyYXApIGNoaWxkID0gY2FyZFdyYXA7XHJcblxyXG5cdFx0aWYob3B0aW9ucy5jb21wVHlwZSA9PSAnbGlzdCcgJiYgY2hpbGQubGVuZ3RoIDw9IDEpIHJldHVybjtcclxuXHJcblx0XHRpZihvcHRpb25zLmNvbXBUeXBlID09ICdjYXJvdXNlbCcpIG9wdGlvbnMuaXNMaXN0TWF0Y2ggPSBmYWxzZTtcclxuXHJcblx0XHRpZihvcHRpb25zLmZvcmNlTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMuSVNfTU9CSUxFX01PREUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKG9wdGlvbnMuaXNMaXN0TWF0Y2gpIG9wdGlvbnMubWF0Y2hFbGVtZW50cy5wdXNoKG9wdGlvbnMubGlzdFdyYXApO1xyXG5cclxuXHRcdGlmKG9wdGlvbnMubWF0Y2hBbGlnbklnbm9yZSkge1xyXG5cdFx0XHRpZihjYXJkV3JhcC5jaGlsZHJlbihvcHRpb25zLm1hdGNoQWxpZ25JZ25vcmUpLmxlbmd0aCkge1xyXG5cdFx0XHRcdG9wdGlvbnMubWF0Y2hBbGlnbiA9IDA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGZvcih2YXIgcHJvcCBpbiBvcHRpb25zLm1hdGNoRWxlbWVudHMpIHtcclxuXHRcdFx0b3B0aW9ucy50YXJnZXRFbGVtZW50cyA9IG9wdGlvbnMubWF0Y2hFbGVtZW50c1twcm9wXTtcclxuXHRcdFx0bmV3IHdpbi5faGVpZ2h0TWF0Y2goY2hpbGQsIG9wdGlvbnMpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn0pKHdpbmRvdywgd2luZG93LmpRdWVyeSk7XHJcblxyXG47KGZ1bmN0aW9uICh3aW4sICQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0aWYoIHR5cGVvZiAkLmZuLmxpc3RTZWVNb3JlID09PSAnZnVuY3Rpb24nKSAkLmZuLmxpc3RTZWVNb3JlID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcblx0Ly8gU3RhdGljIFZhbHVlc1xyXG5cdHZhciBWX1NUQVRJQyA9IHdpbi5zbWcuYWVtLnZhclN0YXRpYyxcclxuXHQvLyBVdGlsaXR5IFNjcmlwdFxyXG5cdFVUSUwgPSB3aW4uc21nLmFlbS51dGlsLFxyXG5cdC8vIEN1c3RvbSBFdmVudHNcclxuXHRDU1RfRVZFTlQgPSB3aW4uc21nLmFlbS5jdXN0b21FdmVudDtcclxuXHJcblx0JC5mbi5saXN0U2VlTW9yZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblx0XHR2YXIgZGVmUGFyYW1zID0ge1xyXG5cdFx0XHR1c2VTZWVNb3JlIDogJ3MtdXNlLXNlZW1vcmUnLFxyXG5cdFx0XHRjb21wb25lbnQgOiAnJyxcclxuXHRcdFx0bGlzdEl0ZW1zIDogJycsXHJcblx0XHRcdG1vcmVCdG4gOiAnLnMtYnRuLWVuY2FzZWQnLFxyXG5cdFx0XHRhcHBlbmRUeXBlIDogZmFsc2UsXHJcblx0XHRcdGl0ZW1WaXNpYmxlIDogJycsXHJcblx0XHRcdGl0ZW1BY3RpdmUgOiAnaXMtaXRlbS1hY3RpdmUnLFxyXG5cdFx0XHRpdGVtSW50ZXJ2YWwgOiAxMDAsXHJcblx0XHRcdHBlclBhZ2VEZWZhdWx0IDoge1xyXG5cdFx0XHRcdHBjIDogOSxcclxuXHRcdFx0XHRtbyA6IDZcclxuXHRcdFx0fSxcclxuXHRcdFx0cGVyUGFnZU51bSA6IHtcclxuXHRcdFx0XHRwYyA6ICdkYXRhLXBjLXBlci1wYWdlJyxcclxuXHRcdFx0XHRtbyA6ICdkYXRhLW1vLXBlci1wYWdlJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRoZWlnaHRNYXRjaCA6IHtcclxuXHRcdFx0XHRoYXNDb21wb25lbnQgOiBbXSxcclxuXHRcdFx0XHRtYXRjaEVsZW1lbnRzIDogW10sXHJcblx0XHRcdFx0bWF0Y2hBbGlnbiA6IDNcclxuXHRcdFx0fSxcclxuXHRcdFx0bWFzb25yeSA6IHtcclxuXHRcdFx0XHRoYXNDb21wb25lbnQgOiBbXSxcclxuXHRcdFx0XHRpdGVtV3JhcCA6ICcnLFxyXG5cdFx0XHRcdGl0ZW1zIDogJydcclxuXHRcdFx0fSxcclxuXHRcdFx0c2Nyb2xsVmlldyA6IHRydWUsXHJcblx0XHRcdHNjcm9sbFZpZXdJZ25vcmUgOiBbXSxcclxuXHRcdFx0bW9yZUludGVydmFsVmlldyA6IHRydWUsXHJcblx0XHRcdG1vcmVJbnRlcnZhbFZpZXdJZ25vcmUgOiBbXSxcclxuXHRcdFx0YmVmb3JlRnVuYyA6IG51bGwsXHJcblx0XHRcdGFmdGVyRnVuYyA6IG51bGxcclxuXHRcdH07XHJcblx0XHR2YXIgb3B0cyA9IFVUSUwuZGVmKGRlZlBhcmFtcywgKG9wdGlvbnMgfHwge30pKTtcclxuXHRcdHZhciAkY29tcG9uZW50cyA9ICQob3B0cy5jb21wb25lbnQpO1xyXG5cdFx0dmFyICRib2R5ID0gJCgnYm9keScpO1xyXG5cdFx0dmFyIGlzTW9iaWxlID0gbnVsbDtcclxuXHJcblx0XHR2YXIgc2V0QmluZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkYm9keS5vbihDU1RfRVZFTlQuUkVTUE9OU0lWRS5DSEFOR0UsIG9uUmVzcG9uc2l2ZUNoYW5nZSk7XHJcblx0XHRcdCRib2R5LnRyaWdnZXIoQ1NUX0VWRU5ULlJFU1BPTlNJVkUuR0VUX1NUQVRVUyk7XHJcblx0XHRcdCRjb21wb25lbnRzLm9uKCdjbGljaycsIG9wdHMubW9yZUJ0biwgb25WaWV3TW9yZSk7XHJcblx0XHR9XHJcblx0XHR2YXIgc2V0TWFzb25yeSA9IChmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuXHJcblx0XHRcdHZhciBldmVudExpc3QgPSB7XHJcblxyXG5cdFx0XHRcdG1hc29ucnkgOiBmdW5jdGlvbiggZWwgKXtcclxuXHJcblx0XHRcdFx0XHRpZiAoICRodG1sLmhhc0NsYXNzKCdydGwnKSApIHtcclxuXHJcblx0XHRcdFx0XHRcdGVsLmFkZENsYXNzKCdqcy1tYXNvbnJ5LWxvYWQnKS5tYXNvbnJ5KHtcclxuXHRcdFx0XHRcdFx0XHRpdGVtU2VsZWN0b3I6IGV2ZW50TGlzdC5pdGVtcyxcclxuXHRcdFx0XHRcdFx0XHRob3Jpem9udGFsT3JkZXI6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0b3JpZ2luTGVmdDogZmFsc2VcclxuXHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRcdGVsLmFkZENsYXNzKCdqcy1tYXNvbnJ5LWxvYWQnKS5tYXNvbnJ5KHtcclxuXHRcdFx0XHRcdFx0XHRpdGVtU2VsZWN0b3I6IGV2ZW50TGlzdC5pdGVtcyxcclxuXHRcdFx0XHRcdFx0XHRwZXJjZW50UG9zaXRpb246IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0aG9yaXpvbnRhbE9yZGVyOiB0cnVlXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcclxuXHRcdFx0XHR9LFxyXG5cclxuXHRcdFx0XHRsb2FkQ2hlY2s6IGZ1bmN0aW9uKCBlbCwgY29udGFpbmVyLCBjYiApe1xyXG5cclxuXHRcdFx0XHRcdHZhciBsb2FkQ291bnQgPSAwO1xyXG5cdFx0XHRcdFx0dmFyIGVsTGVuZ3RoID0gZWwubGVuZ3RoO1xyXG5cclxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZWxMZW5ndGg7IGkrKyl7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpbWcuc3JjID0gZWwuZXEoaSkuYXR0cignc3JjJyk7XHJcblxyXG5cdFx0XHRcdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdFx0XHRcdFx0bG9hZENvdW50ICs9IDE7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKCBsb2FkQ291bnQgPT0gZWxMZW5ndGggKSBjYihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0fSxcclxuXHJcblx0XHRcdFx0YWN0TWFzb25yeTogZnVuY3Rpb24oIGNvbnRhaW5lciwgJGl0ZW1zICl7XHJcblxyXG5cdFx0XHRcdFx0dmFyIGl0ZW1zSW1hZ2UgPSAkaXRlbXMuZmluZCgnaW1nJyk7XHJcblxyXG5cdFx0XHRcdFx0aWYoIWNvbnRhaW5lci5sZW5ndGgpIHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRldmVudExpc3QubG9hZENoZWNrKGl0ZW1zSW1hZ2UsIGNvbnRhaW5lciwgZXZlbnRMaXN0Lm1hc29ucnkpO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0dmFyIGluaXQgPSBmdW5jdGlvbihtQ29tcG9uZW50LCBpdGVtV3JhcCwgaXRlbXMpe1xyXG5cclxuXHRcdFx0XHR2YXIgJGNvbXBvbmVudHMgPSBtQ29tcG9uZW50O1xyXG5cdFx0XHRcdHZhciAkY29tcG9uZW50TGlzdCA9ICRjb21wb25lbnRzLmZpbmQoaXRlbVdyYXApO1xyXG5cdFx0XHRcdHZhciAkaXRlbXMgPSAkY29tcG9uZW50cy5maW5kKGl0ZW1zKTtcclxuXHJcblx0XHRcdFx0aWYgKCBVVElMLmlzQWVtRWRpdE1vZGUoKSApIHJldHVybjtcclxuXHRcdFx0XHRpZiAoISRjb21wb25lbnRzLmxlbmd0aCkgcmV0dXJuO1xyXG5cdFx0XHRcdGlmICghJGl0ZW1zLmxlbmd0aCkgcmV0dXJuO1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgJC5mbi5tYXNvbnJ5ICE9ICdmdW5jdGlvbicpIHJldHVybjtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRldmVudExpc3QuaXRlbXMgPSBpdGVtcztcclxuXHRcdFx0XHRldmVudExpc3QuYWN0TWFzb25yeSggJGNvbXBvbmVudExpc3QsICRpdGVtcyApO1xyXG5cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblxyXG5cdFx0XHRcdGluaXQ6IGluaXRcclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fSkoKTtcclxuXHRcdHZhciBvblJlc3BvbnNpdmVDaGFuZ2UgPSBmdW5jdGlvbihlLCBkYXRhKSB7XHJcblx0XHRcdGlmIChkYXRhLlJFU1BPTlNJVkVfTkFNRSA9PT0gVl9TVEFUSUMuUkVTUE9OU0lWRS5NT0JJTEUuTkFNRSkge1xyXG5cdFx0XHRcdGlzTW9iaWxlID0gdHJ1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpc01vYmlsZSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIG9uVmlld01vcmUgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dmFyICRjdXJyZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLFxyXG5cdFx0XHRcdCRjb21wb25lbnQgPSAkY3VycmVudC5jbG9zZXN0KG9wdHMuY29tcG9uZW50KTtcclxuXHRcdFx0dmFyIGlzUHJvbW9GZWVkID0gdHJ1ZSxcclxuXHRcdFx0XHRpc1ZpZXdNb3JlID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCRjb21wb25lbnQubGVuZ3RoKSB7XHJcblx0XHRcdFx0c2V0Vmlld01vcmVDVEEuaW5pdCh7XHJcblx0XHRcdFx0XHRjb21wb25lbnQgOiAkY29tcG9uZW50LCBcclxuXHRcdFx0XHRcdGlzVmlld01vcmUgOiBpc1ZpZXdNb3JlLFxyXG5cdFx0XHRcdFx0aXNQcm9tb0ZlZWQgOiBpc1Byb21vRmVlZFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHNldFZpZXdNb3JlQ1RBID0ge1xyXG5cdFx0XHRnZXRJc0ludGVydmFsIDogZnVuY3Rpb24oJGNvbXBvbmVudCkge1xyXG5cclxuXHRcdFx0XHR2YXIgaXNJbnRlcnZhbCA9IG9wdHMubW9yZUludGVydmFsVmlldztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZihvcHRzLm1vcmVJbnRlcnZhbFZpZXdJZ25vcmUubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRcdFx0Zm9yKHZhciBhID0gMDsgYSA8IG9wdHMubW9yZUludGVydmFsVmlld0lnbm9yZS5sZW5ndGg7IGErKykge1xyXG5cdFx0XHRcdFx0XHRpZihvcHRzLm1vcmVJbnRlcnZhbFZpZXdJZ25vcmVbYV0pIHtcclxuXHRcdFx0XHRcdFx0XHRpZigkY29tcG9uZW50Lmhhc0NsYXNzKG9wdHMubW9yZUludGVydmFsVmlld0lnbm9yZVthXSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlzSW50ZXJ2YWwgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYob3B0cy5tb3JlSW50ZXJ2YWxWaWV3SWdub3JlWzBdKSB7XHJcblx0XHRcdFx0XHRcdGlmKCRjb21wb25lbnQuaGFzQ2xhc3Mob3B0cy5tb3JlSW50ZXJ2YWxWaWV3SWdub3JlWzBdKSkge1xyXG5cdFx0XHRcdFx0XHRcdGlzSW50ZXJ2YWwgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gaXNJbnRlcnZhbDtcclxuXHRcdFx0fSxcclxuXHRcdFx0Z2V0Vmlld0NudCA6IGZ1bmN0aW9uKCRjb21wb25lbnQpIHtcclxuXHRcdFx0XHR2YXIgdmlld0NudCA9IDA7XHJcblx0XHRcdFx0aWYoaXNNb2JpbGUpIHtcclxuXHRcdFx0XHRcdHZpZXdDbnQgPSAoJGNvbXBvbmVudC5hdHRyKG9wdHMucGVyUGFnZU51bS5tbykpID8gcGFyc2VJbnQoJGNvbXBvbmVudC5hdHRyKG9wdHMucGVyUGFnZU51bS5tbykpIDogb3B0cy5wZXJQYWdlRGVmYXVsdC5tbztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dmlld0NudCA9ICgkY29tcG9uZW50LmF0dHIob3B0cy5wZXJQYWdlTnVtLnBjKSkgPyBwYXJzZUludCgkY29tcG9uZW50LmF0dHIob3B0cy5wZXJQYWdlTnVtLnBjKSkgOiBvcHRzLnBlclBhZ2VEZWZhdWx0LnBjO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gdmlld0NudDtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0SXRlbUFjdGl2ZSA6IGZ1bmN0aW9uKCRjb21wb25lbnQsIGNudCkge1xyXG5cdFx0XHRcdCRjb21wb25lbnQuZmluZChvcHRzLmxpc3RJdGVtcyArICc6bHQoJyArIChjbnQpICsgJyknKS5hZGRDbGFzcyhvcHRzLml0ZW1BY3RpdmUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRoaWRlTW9yZUNUQSA6IGZ1bmN0aW9uKCRjb21wb25lbnQsICRjdGEpIHtcclxuXHRcdFx0XHRpZihvcHRzLmFwcGVuZFR5cGUpIHtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmKCEkY29tcG9uZW50LmZpbmQob3B0cy5saXN0SXRlbXMgKyAnOm5vdCg6dmlzaWJsZSknKS5sZW5ndGggJiYgJGN0YS5sZW5ndGggJiYgJGN0YS5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHRcdFx0XHQkY3RhLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRnZXRJc01hdGhjaEhlaWdodCA6IGZ1bmN0aW9uKCRjb21wb25lbnQpIHtcclxuXHRcdFx0XHR2YXIgaENvbXBvbmVudCA9ICcnO1xyXG5cdFx0XHRcdGlmKG9wdHMuaGVpZ2h0TWF0Y2guaGFzQ29tcG9uZW50ICYmIG9wdHMuaGVpZ2h0TWF0Y2gubWF0Y2hFbGVtZW50cykge1xyXG5cdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG9wdHMuaGVpZ2h0TWF0Y2guaGFzQ29tcG9uZW50Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdGlmKG9wdHMuaGVpZ2h0TWF0Y2guaGFzQ29tcG9uZW50W2ldKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYoJGNvbXBvbmVudC5oYXNDbGFzcyhvcHRzLmhlaWdodE1hdGNoLmhhc0NvbXBvbmVudFtpXSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGhDb21wb25lbnQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gaENvbXBvbmVudDtcclxuXHRcdFx0fSxcclxuXHRcdFx0Z2V0SXNNYXNvbnJ5IDogZnVuY3Rpb24oJGNvbXBvbmVudCkge1xyXG5cdFx0XHRcdHZhciBtQ29tcG9uZW50ID0gJyc7XHJcblx0XHRcdFx0aWYob3B0cy5tYXNvbnJ5Lmhhc0NvbXBvbmVudCAmJiBvcHRzLm1hc29ucnkuaXRlbVdyYXAgJiYgb3B0cy5tYXNvbnJ5Lml0ZW1zKSB7XHJcblx0XHRcdFx0XHRmb3IodmFyIGEgPSAwOyBhIDwgb3B0cy5tYXNvbnJ5Lmhhc0NvbXBvbmVudC5sZW5ndGg7IGErKykge1xyXG5cdFx0XHRcdFx0XHRpZihvcHRzLm1hc29ucnkuaGFzQ29tcG9uZW50W2FdKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYoJGNvbXBvbmVudC5oYXNDbGFzcyhvcHRzLm1hc29ucnkuaGFzQ29tcG9uZW50W2FdKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0bUNvbXBvbmVudCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBtQ29tcG9uZW50O1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRpbml0IDogZnVuY3Rpb24oaW5mbykge1xyXG5cdFx0XHRcdHZhciAkY3RhID0gaW5mby5jb21wb25lbnQuZmluZChvcHRzLm1vcmVCdG4pLFxyXG5cdFx0XHRcdFx0JGl0ZW1zID0gaW5mby5jb21wb25lbnQuZmluZChvcHRzLmxpc3RJdGVtcyksXHJcblx0XHRcdFx0XHQkdmlld0xpc3Q7XHJcblx0XHRcdFx0dmFyIHZpZXdDbnQgPSB0aGlzLmdldFZpZXdDbnQoaW5mby5jb21wb25lbnQpLFxyXG5cdFx0XHRcdFx0aXNJbnRlcnZhbCA9IHRoaXMuZ2V0SXNJbnRlcnZhbChpbmZvLmNvbXBvbmVudCksXHJcblx0XHRcdFx0XHRtQ29tcG9uZW50ID0gdGhpcy5nZXRJc01hc29ucnkoaW5mby5jb21wb25lbnQpLFxyXG5cdFx0XHRcdFx0aENvbXBvbmVudCA9IHRoaXMuZ2V0SXNNYXRoY2hIZWlnaHQoaW5mby5jb21wb25lbnQpO1xyXG5cclxuXHJcblxyXG5cdFx0XHRcdGlmKCFVVElMLmlzQWVtRWRpdE1vZGUoKSkge1xyXG5cdFx0XHRcdFx0aWYoaW5mby5jb21wb25lbnQuaGFzQ2xhc3Mob3B0cy51c2VTZWVNb3JlKSkge1xyXG5cdFx0XHRcdFx0XHR2YXIgY250ID0gdmlld0NudCxcclxuXHRcdFx0XHRcdFx0XHR2aXNpYmxlTGVuZ3RoID0gaW5mby5jb21wb25lbnQuZmluZChvcHRzLmxpc3RJdGVtcyArICc6dmlzaWJsZScpLmxlbmd0aDtcclxuXHJcblx0XHRcdFx0XHRcdGlmKGluZm8uaXNWaWV3TW9yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNudCA9IHZpc2libGVMZW5ndGggKyB2aWV3Q250O1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGlmKCEkY3RhLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y250ID0gJGl0ZW1zLmxlbmd0aDtcclxuXHRcdFx0XHRcdFx0XHRcdHZpZXdDbnQgPSAkaXRlbXMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0aWYob3B0cy5iZWZvcmVGdW5jICE9IG51bGwpIG9wdHMuYmVmb3JlRnVuYyhpbmZvLmNvbXBvbmVudCwgaXNNb2JpbGUpO1xyXG5cclxuXHRcdFx0XHRcdFx0dGhpcy5zZXRJdGVtQWN0aXZlKGluZm8uY29tcG9uZW50LCBjbnQpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmhpZGVNb3JlQ1RBKGluZm8uY29tcG9uZW50LCAkY3RhKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmKGlzSW50ZXJ2YWwpIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZihoQ29tcG9uZW50KSBjb2x1bW5NYXRjaChpbmZvLCAoY250IC0gdmlld0NudCAtIDEpKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgayA9IHZpc2libGVMZW5ndGg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKGsgPT0gY250KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGVhckludGVydmFsKGludGVydmFsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKG1Db21wb25lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZihvcHRzLmFmdGVyRnVuYyAhPSBudWxsKSBvcHRzLmFmdGVyRnVuYyhpbmZvLmNvbXBvbmVudCwgaXNNb2JpbGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldE1hc29ucnkuaW5pdChpbmZvLmNvbXBvbmVudCwgb3B0cy5tYXNvbnJ5Lml0ZW1XcmFwLCBvcHRzLm1hc29ucnkuaXRlbXMpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYob3B0cy5hZnRlckZ1bmMgIT0gbnVsbCkgb3B0cy5hZnRlckZ1bmMoaW5mby5jb21wb25lbnQsIGlzTW9iaWxlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0JGl0ZW1zLmVxKGspLmFkZENsYXNzKG9wdHMuaXRlbVZpc2libGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aysrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgb3B0cy5pdGVtSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSwgNDAwKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0fSwgMTAwKTtcclxuXHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYobUNvbXBvbmVudCB8fCBoQ29tcG9uZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IodmFyIGsgPSB2aXNpYmxlTGVuZ3RoOyBrIDw9IGNudDsgaysrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmKGsgPT0gY250KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKG1Db21wb25lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0TWFzb25yeS5pbml0KGluZm8uY29tcG9uZW50LCBvcHRzLm1hc29ucnkuaXRlbVdyYXAsIG9wdHMubWFzb25yeS5pdGVtcyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZihoQ29tcG9uZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbHVtbk1hdGNoKGluZm8sIChjbnQgLSB2aWV3Q250IC0gMSkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYob3B0cy5hZnRlckZ1bmMgIT0gbnVsbCkgb3B0cy5hZnRlckZ1bmMoaW5mby5jb21wb25lbnQsIGlzTW9iaWxlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCRpdGVtcy5lcShrKS5hZGRDbGFzcyhvcHRzLml0ZW1WaXNpYmxlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHQkaXRlbXMuYWRkQ2xhc3Mob3B0cy5pdGVtVmlzaWJsZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZihvcHRzLmFmdGVyRnVuYyAhPSBudWxsKSBvcHRzLmFmdGVyRnVuYyhpbmZvLmNvbXBvbmVudCwgaXNNb2JpbGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dmFyIGNudCA9ICRpdGVtcy5sZW5ndGgsXHJcblx0XHRcdFx0XHRcdFx0dmlld0NudCA9ICRpdGVtcy5sZW5ndGg7XHJcblx0XHRcdFx0XHRcdGlmKG1Db21wb25lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRzZXRNYXNvbnJ5LmluaXQoaW5mby5jb21wb25lbnQsIG9wdHMubWFzb25yeS5pdGVtV3JhcCwgb3B0cy5tYXNvbnJ5Lml0ZW1zKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZihoQ29tcG9uZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sdW1uTWF0Y2goaW5mbywgKGNudCAtIHZpZXdDbnQgLSAxKSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aW5mby5pc1ZpZXdNb3JlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdGlmKG9wdHMuYWZ0ZXJGdW5jICE9IG51bGwpIG9wdHMuYWZ0ZXJGdW5jKGluZm8uY29tcG9uZW50LCBpc01vYmlsZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGNvbHVtbk1hdGNoID0gZnVuY3Rpb24oaW5mbywgY250KXtcclxuXHRcdFx0dmFyIGNudCA9IHBhcnNlSW50KGNudCkgfHwgMDtcclxuXHRcdFx0dmFyIGxpc3RXcmFwID0gb3B0cy5saXN0SXRlbXM7XHJcblxyXG5cclxuXHRcdFx0aWYoaW5mby5jb21wb25lbnQuaGFzQ2xhc3MoJ2NtLWNvbHVtbnMtLXNlcGFyYXRpb24tbGluZScpKSB7XHJcblx0XHRcdFx0aWYoaW5mby5jb21wb25lbnQuaGFzQ2xhc3MoJ2NtLWNvbHVtbnMtLTJjb2x1bW5zJykpIHtcclxuXHRcdFx0XHRcdG9wdHMuaGVpZ2h0TWF0Y2gubWF0Y2hBbGlnbiA9IDI7XHJcblx0XHRcdFx0fSBlbHNlIGlmKGluZm8uY29tcG9uZW50Lmhhc0NsYXNzKCdjbS1jb2x1bW5zLS0zY29sdW1ucycpKSB7XHJcblx0XHRcdFx0XHRvcHRzLmhlaWdodE1hdGNoLm1hdGNoQWxpZ24gPSAzO1xyXG5cdFx0XHRcdH0gZWxzZSBpZihpbmZvLmNvbXBvbmVudC5oYXNDbGFzcygnY20tY29sdW1ucy0tNGNvbHVtbnMnKSkge1xyXG5cdFx0XHRcdFx0b3B0cy5oZWlnaHRNYXRjaC5tYXRjaEFsaWduID0gNDtcclxuXHRcdFx0XHR9IGVsc2UgaWYoaW5mby5jb21wb25lbnQuaGFzQ2xhc3MoJ2NtLWNvbHVtbnMtLTVjb2x1bW5zJykpIHtcclxuXHRcdFx0XHRcdG9wdHMuaGVpZ2h0TWF0Y2gubWF0Y2hBbGlnbiA9IDU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZihpbmZvLmlzVmlld01vcmUpIHtcclxuXHRcdFx0XHRsaXN0V3JhcCA9IG9wdHMubGlzdEl0ZW1zICsgJzpndCgnICsgY250ICsgJyknO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpbmZvLmNvbXBvbmVudC5oZWlnaHRNYXRjaCh7XHJcblx0XHRcdFx0bGlzdFdyYXAgICAgICA6IGxpc3RXcmFwLFxyXG5cdFx0XHRcdG1hdGNoQWxpZ25JZ25vcmUgIDogJy5zbGljay1pbml0aWFsaXplZCcsXHJcblx0XHRcdFx0bWF0Y2hFbGVtZW50cyAgICAgOiBvcHRzLmhlaWdodE1hdGNoLm1hdGNoRWxlbWVudHMsXHJcblx0XHRcdFx0bWF0Y2hBbGlnbiA6IG9wdHMuaGVpZ2h0TWF0Y2gubWF0Y2hBbGlnblxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgaW5pdERBID0gZnVuY3Rpb24oJGNvbXBvbmVudCwgaXNTY3JvbGwpIHtcclxuXHRcdFx0aWYoaXNTY3JvbGwgJiYgKHR5cGVvZiAkLmZuLmZlYXR1cmUgPT0gJ2Z1bmN0aW9uJykgJiYgJGNvbXBvbmVudC5oYXNDbGFzcyhvcHRzLnVzZVNlZU1vcmUpKSB7XHJcblx0XHRcdFx0JGNvbXBvbmVudC5mZWF0dXJlKHtcclxuXHRcdFx0XHRcdG9uVmlzaWJsZSA6IGZ1bmN0aW9uKCR0YXJnZXQpIHtcclxuXHRcdFx0XHRcdFx0aWYoISR0YXJnZXQuaGFzQ2xhc3MoJ2pzLWZlYXR1cmUtbG9hZGVkJykpIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgaXNQcm9tb0ZlZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdHZhciBpc1ZpZXdNb3JlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0JHRhcmdldC5hZGRDbGFzcygnanMtZmVhdHVyZS1sb2FkZWQnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRWaWV3TW9yZUNUQS5pbml0KHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbXBvbmVudCA6ICR0YXJnZXQsIFxyXG5cdFx0XHRcdFx0XHRcdFx0aXNWaWV3TW9yZSA6IGlzVmlld01vcmUsXHJcblx0XHRcdFx0XHRcdFx0XHRpc1Byb21vRmVlZCA6IGlzUHJvbW9GZWVkXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZighJGNvbXBvbmVudC5oYXNDbGFzcygnanMtZmVhdHVyZS1sb2FkZWQnKSkge1xyXG5cdFx0XHRcdFx0dmFyIGlzUHJvbW9GZWVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHZhciBpc1ZpZXdNb3JlID0gZmFsc2U7XHJcblx0XHRcdFx0XHQkY29tcG9uZW50LmFkZENsYXNzKCdqcy1mZWF0dXJlLWxvYWRlZCcpO1xyXG5cdFx0XHRcdFx0c2V0Vmlld01vcmVDVEEuaW5pdCh7XHJcblx0XHRcdFx0XHRcdGNvbXBvbmVudCA6ICRjb21wb25lbnQsIFxyXG5cdFx0XHRcdFx0XHRpc1ZpZXdNb3JlIDogaXNWaWV3TW9yZSxcclxuXHRcdFx0XHRcdFx0aXNQcm9tb0ZlZWQgOiBpc1Byb21vRmVlZFxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGdldElzU2Nyb2xsID0gZnVuY3Rpb24oJGNvbXBvbmVudCkge1xyXG5cclxuXHRcdFx0dmFyIGlzU2Nyb2xsID0gb3B0cy5zY3JvbGxWaWV3O1xyXG5cdFx0XHRcclxuXHRcdFx0aWYob3B0cy5zY3JvbGxWaWV3SWdub3JlLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0XHRmb3IodmFyIGEgPSAwOyBhIDwgb3B0cy5zY3JvbGxWaWV3SWdub3JlLmxlbmd0aDsgYSsrKSB7XHJcblx0XHRcdFx0XHRpZihvcHRzLnNjcm9sbFZpZXdJZ25vcmVbYV0pIHtcclxuXHRcdFx0XHRcdFx0aWYoJGNvbXBvbmVudC5oYXNDbGFzcyhvcHRzLnNjcm9sbFZpZXdJZ25vcmVbYV0pKSB7XHJcblx0XHRcdFx0XHRcdFx0aXNTY3JvbGwgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZihvcHRzLnNjcm9sbFZpZXdJZ25vcmVbMF0pIHtcclxuXHRcdFx0XHRcdGlmKCRjb21wb25lbnQuaGFzQ2xhc3Mob3B0cy5zY3JvbGxWaWV3SWdub3JlWzBdKSkge1xyXG5cdFx0XHRcdFx0XHRpc1Njcm9sbCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gaXNTY3JvbGw7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR2YXIgJGNvbXBvbmVudDtcclxuXHRcdFx0dmFyIGlzU2Nyb2xsID0gb3B0cy5zY3JvbGxWaWV3O1xyXG5cclxuXHRcdFx0c2V0QmluZEV2ZW50cygpO1xyXG5cdFx0XHRpZihvcHRzLnNjcm9sbFZpZXcpIHtcclxuXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgJGNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdCRjb21wb25lbnQgPSAkY29tcG9uZW50cy5lcShpKTtcclxuXHRcdFx0XHRcdGlzU2Nyb2xsID0gZ2V0SXNTY3JvbGwoJGNvbXBvbmVudCk7XHJcblx0XHRcdFx0XHRpbml0REEoJGNvbXBvbmVudCwgaXNTY3JvbGwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgJGNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdCRjb21wb25lbnQgPSAkY29tcG9uZW50cy5lcShpKTtcclxuXHRcdFx0XHRcdGluaXREQSgkY29tcG9uZW50LCBmYWxzZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpbml0KCk7XHJcblx0fVxyXG5cclxuXHRpZiggdHlwZW9mICQuZ2V0STE4bkRpY3Rpb24gPT09ICdmdW5jdGlvbicpICQuZ2V0STE4bkRpY3Rpb24gPSBmdW5jdGlvbigpIHt9O1xyXG5cdCQuZ2V0STE4bkRpY3Rpb24gPSBmdW5jdGlvbiAoa2V5LCB0ZXh0KSB7XHJcblxyXG5cdFx0aWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgR3Jhbml0ZSkge1xyXG5cdFx0XHRyZXR1cm4gdGV4dDtcclxuXHRcdH1cclxuXHRcdGlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEdyYW5pdGUuSTE4bikge1xyXG5cdFx0XHRyZXR1cm4gdGV4dDtcclxuXHRcdH1cclxuXHJcblx0XHRHcmFuaXRlLkkxOG4uc2V0TG9jYWxlKCQoJyNzaXRlQ29kZScpLnZhbCgpKTtcclxuXHRcdHJldHVybiBHcmFuaXRlLkkxOG4uZ2V0KGtleSwgW10sICQoJyNzaXRlQ29kZScpLnZhbCgpKSB8fCB0ZXh0O1xyXG5cclxuXHR9XHJcbn0pKHdpbmRvdywgd2luZG93LmpRdWVyeSk7IiwiLyohXHJcbiAqIHNhbXN1bmcuY29tIC0gUGhhc2UyIC0gQWNjZXNzaWJpbGl0eSBDaGVja2JveCBTY3JpcHRcclxuICogc3JjIDoganMvc3JjL3NtZy9hZW0vYWNjZXNzaWJpbGl0eS9wbGFjZWhvZGVyL3NtZy5hZW0uYWNjLmNoZWNrYm94LmpzXHJcbiAqXHJcbiAqIEB2ZXJzaW9uIDEuMC4wXHJcbiAqIEBzaW5jZSAyMDE2LjAyLjA0XHJcbiAqL1xyXG47KGZ1bmN0aW9uKHdpbiwgJCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nKSB7XHJcblx0XHR3aW4uc21nID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtKSB7XHJcblx0XHR3aW4uc21nLmFlbSA9IHt9O1xyXG5cdH1cclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nLmFlbS5hY2Nlc3NpYmlsaXR5KSB7XHJcblx0XHR3aW4uc21nLmFlbS5hY2Nlc3NpYmlsaXR5ID0ge307XHJcblx0fVxyXG5cclxuXHQvLyBVdGlsaXR5IFNjcmlwdFxyXG5cdHZhciBVVElMID0gd2luLnNtZy5hZW0udXRpbDtcclxuXHJcblx0dmFyIG5hbWVzcGFjZSA9IHdpbi5zbWcuYWVtLmFjY2Vzc2liaWxpdHk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBuYW1lIHdpbmRvdy5zbWcuYWVtLmFjY2Vzc2liaWxpdHkuY2hlY2tib3hcclxuXHQgKiBAbmFtZXNwYWNlXHJcblx0ICogQHJlcXVpcmVzIGpRdWVyeVxyXG5cdCAqIEByZXF1aXJlcyBuYW1lc3BhY2UuanNcclxuXHQgKiBAcmVxdWlyZXMgd2luZG93LnNtZy5hZW0uc3RhdGljLmpzXHJcblx0ICogQHJlcXVpcmVzIHdpbmRvdy5zbWcuYWVtLnV0aWwuanNcclxuXHQgKiBAcmVxdWlyZXMgd2luZG93LnNtZy5hZW0uZXZlbnQuanNcclxuXHQgKi9cclxuXHRuYW1lc3BhY2UuY2hlY2tib3ggPSAoZnVuY3Rpb24oKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IE9wdGlvbnNcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR2YXIgZGVmUGFyYW1zID0ge1xyXG5cdFx0XHR0YXJnZXRzIDogJ1tkYXRhLWFjY2Vzc2liaWxpdHk9XFwnY2hlY2tib3hcXCddJyxcclxuXHRcdFx0dGFyZ2V0c1ZhbHVlIDogJ2RhdGEtYWNjLWNoZWNrYm94LXZhbHVlJyxcclxuXHRcdFx0aG9sZGVyIDogJ2RhdGEtYWNjLWNoZWNrYm94JyxcclxuXHRcdFx0aG9sZGVyVGFyZ2V0IDogJ2RhdGEtYWNjLWNoZWNrYm94LXRhcmdldCcsXHJcblx0XHRcdG9uQ2xhc3MgOiAnZGF0YS1hY2Mtb25jbGFzcydcclxuXHRcdH07XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0IDogZnVuY3Rpb24oY29udGFpbmVyLCBhcmdzKSB7XHJcblx0XHRcdFx0aWYgKCEodGhpcy5jb250YWluZXIgPSBjb250YWluZXIpLnNpemUoKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHR0aGlzLm9wdHMgPSBVVElMLmRlZihkZWZQYXJhbXMsIChhcmdzIHx8IHt9KSk7XHJcblxyXG5cdFx0XHRcdHRoaXMuc2V0RWxlbWVudHMoKTtcclxuXHRcdFx0XHR0aGlzLnNldEJpbmRFdmVudHMoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0RWxlbWVudHMgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnRhcmdldHMgPSB0aGlzLmNvbnRhaW5lci5maW5kKHRoaXMub3B0cy50YXJnZXRzKTtcclxuXHRcdFx0XHR0aGlzLmhvbGRlcnMgPSAkKCdbJyArIHRoaXMub3B0cy5ob2xkZXIgKyAnXScpO1xyXG5cclxuXHRcdFx0XHQkLmVhY2godGhpcy50YXJnZXRzLCAkLnByb3h5KGZ1bmN0aW9uKGlkeCwgZWxtKSB7XHJcblx0XHRcdFx0XHQkKGVsbSkuYXR0cih0aGlzLm9wdHMudGFyZ2V0c1ZhbHVlLCAkKGVsbSkuYXR0cignY2hlY2tlZCcpKTtcclxuXHRcdFx0XHR9LCB0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldEJpbmRFdmVudHMgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLmhvbGRlcnMub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLm9uSG9sZGVyQ2xpY2ssIHRoaXMpKTtcclxuXHRcdFx0XHR0aGlzLnRhcmdldHMub24oJ2NoYW5nZScsICQucHJveHkodGhpcy5vblRhcmdldENoYW5nZSwgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR1bkVsZW1lbnRzIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHRhcmdldCxcclxuXHRcdFx0XHR0YXJnZXRJbmZvO1xyXG5cdFx0XHRcdCQuZWFjaCh0aGlzLnRhcmdldHMsICQucHJveHkoZnVuY3Rpb24oaWR4LCBlbG0pIHtcclxuXHRcdFx0XHRcdHRhcmdldCA9ICQoZWxtKTtcclxuXHRcdFx0XHRcdHRhcmdldEluZm8gPSB0aGlzLmdldFRhcmdldEluZm8odGFyZ2V0KTtcclxuXHJcblx0XHRcdFx0XHR0YXJnZXQucmVtb3ZlQXR0cignY2hlY2tlZCcsICdjaGVja2VkJyk7XHJcblx0XHRcdFx0XHR0YXJnZXQucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuXHRcdFx0XHRcdGlmICh0YXJnZXRJbmZvLm9uQ2xhc3MpIHtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0SW5mby5ob2xkZXIucmVtb3ZlQ2xhc3ModGFyZ2V0SW5mby5vbkNsYXNzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCB0aGlzKSk7XHJcblx0XHRcdFx0dGhpcy50YXJnZXRzID0gW107XHJcblx0XHRcdFx0dGhpcy5ob2xkZXJzID0gW107XHJcblx0XHRcdH0sXHJcblx0XHRcdHVuQmluZEV2ZW50cyA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuaG9sZGVycy5vZmYoJ2NsaWNrJywgJC5wcm94eSh0aGlzLm9uSG9sZGVyQ2xpY2ssIHRoaXMpKTtcclxuXHRcdFx0XHR0aGlzLnRhcmdldHMub2ZmKCdjaGFuZ2UnLCAkLnByb3h5KHRoaXMub25UYXJnZXRDaGFuZ2UsIHRoaXMpKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0b25Ib2xkZXJDbGljayA6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG5cdFx0XHRcdHRhcmdldCA9ICQoJ1snICsgdGhpcy5vcHRzLmhvbGRlclRhcmdldCArICc9XFwnJyArIHRhcmdldC5hdHRyKHRoaXMub3B0cy5ob2xkZXIpICsgJ1xcJ10nKTtcclxuXHJcblx0XHRcdFx0aWYgKHRhcmdldC5zaXplKCkpIHtcclxuXHRcdFx0XHRcdHRhcmdldC50cmlnZ2VyKCdjbGljaycpLmZvY3VzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRvblRhcmdldENoYW5nZSA6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLFxyXG5cdFx0XHRcdHRhcmdldEluZm8gPSB0aGlzLmdldFRhcmdldEluZm8odGFyZ2V0KSxcclxuXHRcdFx0XHRob2xkZXIgPSB0YXJnZXRJbmZvLmhvbGRlcixcclxuXHRcdFx0XHRvbkNsYXNzID0gdGFyZ2V0SW5mby5vbkNsYXNzLFxyXG5cdFx0XHRcdGlzQ2hlY2tlZCA9IHRhcmdldC5hdHRyKCdjaGVja2VkJyk7XHJcblxyXG5cdFx0XHRcdGlmICghaXNDaGVja2VkKSB7XHJcblx0XHRcdFx0XHR0YXJnZXQuYXR0cignY2hlY2tlZCcsICdjaGVja2VkJyk7XHJcblx0XHRcdFx0XHR0YXJnZXQucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG5cdFx0XHRcdFx0aWYgKG9uQ2xhc3MpIHtcclxuXHRcdFx0XHRcdFx0aG9sZGVyLmFkZENsYXNzKG9uQ2xhc3MpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0YXJnZXQucmVtb3ZlQXR0cignY2hlY2tlZCcsICdjaGVja2VkJyk7XHJcblx0XHRcdFx0XHR0YXJnZXQucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuXHRcdFx0XHRcdGlmIChvbkNsYXNzKSB7XHJcblx0XHRcdFx0XHRcdGhvbGRlci5yZW1vdmVDbGFzcyhvbkNsYXNzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGdldFRhcmdldEluZm8gOiBmdW5jdGlvbih0YXJnZXQpIHtcclxuXHRcdFx0XHR0YXJnZXQgPSAkKCdbJyArIHRoaXMub3B0cy5ob2xkZXIgKyAnPVxcJycgKyB0YXJnZXQuYXR0cih0aGlzLm9wdHMuaG9sZGVyVGFyZ2V0KSArICdcXCddJyk7XHJcblxyXG5cdFx0XHRcdGlmICh0YXJnZXQuc2l6ZSgpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4geyBob2xkZXIgOiB0YXJnZXQsIG9uQ2xhc3MgOiB0YXJnZXQuYXR0cih0aGlzLm9wdHMub25DbGFzcykgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHsgaG9sZGVyIDogJycsIG9uQ2xhc3MgOiAnJyB9O1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnVuQmluZEV2ZW50cygpO1xyXG5cdFx0XHRcdHRoaXMudW5FbGVtZW50cygpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRyZWZyZXNoIDogZnVuY3Rpb24oY29udGFpbmVyLCBhcmdzKSB7XHJcblx0XHRcdFx0Y29udGFpbmVyID0gY29udGFpbmVyIHx8IHRoaXMuY29udGFpbmVyO1xyXG5cclxuXHRcdFx0XHR0aGlzLmRlc3Ryb3koKTtcclxuXHRcdFx0XHR0aGlzLmluaXQoY29udGFpbmVyLCBhcmdzKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0bmFtZXNwYWNlLmNoZWNrYm94LmluaXQoJCgnYm9keScpKTtcclxuXHR9KTtcclxuXHJcbn0pKHdpbmRvdywgd2luZG93LmpRdWVyeSk7IiwiLyohXHJcbiAqIHNhbXN1bmcuY29tIC0gUGhhc2UyIC0gQWNjZXNzaWJpbGl0eSBQbGFjZWhvbGRlciBTY3JpcHRcclxuICogc3JjIDoganMvc3JjL3NtZy9hZW0vYWNjZXNzaWJpbGl0eS9wbGFjZWhvZGVyL3NtZy5hZW0uYWNjLnBsYWNlaG9sZGVyLmpzXHJcbiAqXHJcbiAqIEB2ZXJzaW9uIDEuMC4wXHJcbiAqIEBzaW5jZSAyMDE2LjAyLjA0XHJcbiAqL1xyXG47KGZ1bmN0aW9uKHdpbiwgJCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nKSB7XHJcblx0XHR3aW4uc21nID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtKSB7XHJcblx0XHR3aW4uc21nLmFlbSA9IHt9O1xyXG5cdH1cclxuXHJcblx0aWYoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nLmFlbS5hY2Nlc3NpYmlsaXR5KSB7XHJcblx0XHR3aW4uc21nLmFlbS5hY2Nlc3NpYmlsaXR5ID0ge307XHJcblx0fVxyXG5cclxuXHQvLyBVdGlsaXR5IFNjcmlwdFxyXG5cdHZhciBVVElMID0gd2luLnNtZy5hZW0udXRpbDtcclxuXHJcblx0dmFyIG5hbWVzcGFjZSA9IHdpbi5zbWcuYWVtLmFjY2Vzc2liaWxpdHk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBuYW1lIHdpbmRvdy5zbWcuYWVtLmFjY2Vzc2liaWxpdHkucGxhY2Vob2xkZXJcclxuXHQgKiBAbmFtZXNwYWNlXHJcblx0ICogQHJlcXVpcmVzIGpRdWVyeVxyXG5cdCAqIEByZXF1aXJlcyBuYW1lc3BhY2UuanNcclxuXHQgKiBAcmVxdWlyZXMgd2luZG93LnNtZy5hZW0uc3RhdGljLmpzXHJcblx0ICogQHJlcXVpcmVzIHdpbmRvdy5zbWcuYWVtLnV0aWwuanNcclxuXHQgKiBAcmVxdWlyZXMgd2luZG93LnNtZy5hZW0uZXZlbnQuanNcclxuXHQgKi9cclxuXHRuYW1lc3BhY2UucGxhY2Vob2xkZXIgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IE9wdGlvbnNcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR2YXIgZGVmUGFyYW1zID0ge1xyXG5cdFx0XHR0YXJnZXRzIDogJ1tkYXRhLWFjY2Vzc2liaWxpdHk9XFwncGxhY2Vob2xkZXJcXCddJyxcclxuXHRcdFx0dGFyZ2V0c1ZhbHVlIDogJ2RhdGEtYWNjLXBsYWNlaG9sZGVyLXZhbHVlJyxcclxuXHRcdFx0aG9sZGVyIDogJ2RhdGEtYWNjLXBsYWNlaG9sZGVyJyxcclxuXHRcdFx0aG9sZGVyVGFyZ2V0IDogJ2RhdGEtYWNjLXBsYWNlaG9sZGVyLXRhcmdldCcsXHJcblx0XHRcdG9uQ2xhc3MgOiAnZGF0YS1hY2Mtb25jbGFzcydcclxuXHRcdH07XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0IDogZnVuY3Rpb24oY29udGFpbmVyLCBhcmdzKSB7XHJcblx0XHRcdFx0aWYgKCEodGhpcy5jb250YWluZXIgPSBjb250YWluZXIpLnNpemUoKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHR0aGlzLm9wdHMgPSBVVElMLmRlZihkZWZQYXJhbXMsIChhcmdzIHx8IHt9KSk7XHJcblxyXG5cdFx0XHRcdHRoaXMuc2V0RWxlbWVudHMoKTtcclxuXHRcdFx0XHR0aGlzLnNldEJpbmRFdmVudHMoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0RWxlbWVudHMgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnRhcmdldHMgPSB0aGlzLmNvbnRhaW5lci5maW5kKHRoaXMub3B0cy50YXJnZXRzKTtcclxuXHJcblx0XHRcdFx0JC5lYWNoKHRoaXMudGFyZ2V0cywgJC5wcm94eShmdW5jdGlvbihpZHgsIGVsbSkge1xyXG5cdFx0XHRcdFx0JChlbG0pLmF0dHIodGhpcy5vcHRzLnRhcmdldHNWYWx1ZSwgJChlbG0pLnZhbCgpKTtcclxuXHRcdFx0XHR9LCB0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldEJpbmRFdmVudHMgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnRhcmdldHMub24oJ2ZvY3VzJywgJC5wcm94eSh0aGlzLm9uVGFyZ2V0c0ZvY3VzLCB0aGlzKSlcclxuXHRcdFx0XHRcdFx0XHQub24oJ2JsdXInLCAkLnByb3h5KHRoaXMub25UYXJnZXRzQmx1ciwgdGhpcykpXHJcblx0XHRcdFx0XHRcdFx0Lm9uKCdrZXlkb3duIGtleXVwJywgJC5wcm94eSh0aGlzLm9uVGFyZ2V0c0NoYW5nZSwgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR1bkVsZW1lbnRzIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JC5lYWNoKHRoaXMudGFyZ2V0cywgJC5wcm94eShmdW5jdGlvbihpZHgsIGVsbSkge1xyXG5cdFx0XHRcdFx0JChlbG0pLnZhbCgkKGVsbSkuYXR0cih0aGlzLm9wdHMudGFyZ2V0c1ZhbHVlKSk7XHJcblx0XHRcdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdFx0XHR2YXIgdGFyZ2V0LFxyXG5cdFx0XHRcdHRhcmdldEluZm87XHJcblx0XHRcdFx0JC5lYWNoKCQoJ1snICsgdGhpcy5vcHRzLmhvbGRlciArICddJyksICQucHJveHkoZnVuY3Rpb24oaWR4LCBlbG0pIHtcclxuXHRcdFx0XHRcdHRhcmdldCA9ICQoZWxtKTtcclxuXHRcdFx0XHRcdHRhcmdldEluZm8gPSB0aGlzLmdldFRhcmdldEluZm8odGFyZ2V0KTtcclxuXHJcblx0XHRcdFx0XHRpZiAodGFyZ2V0SW5mby5vbkNsYXNzKSB7XHJcblx0XHRcdFx0XHRcdHRhcmdldC5yZW1vdmVDbGFzcyh0YXJnZXRJbmZvLm9uQ2xhc3MpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0LnNob3coKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0XHRcdHRoaXMudGFyZ2V0cyA9IFtdO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR1bkJpbmRFdmVudHMgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnRhcmdldHMub2ZmKCdmb2N1cycsICQucHJveHkodGhpcy5vblRhcmdldHNGb2N1cywgdGhpcykpXHJcblx0XHRcdFx0XHRcdFx0Lm9mZignYmx1cicsICQucHJveHkodGhpcy5vblRhcmdldHNCbHVyLCB0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdG9uVGFyZ2V0c0ZvY3VzIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHZhciB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCksXHJcblx0XHRcdFx0dGFyZ2V0SW5mbyA9IHRoaXMuZ2V0VGFyZ2V0SW5mbyh0YXJnZXQpLFxyXG5cdFx0XHRcdGhvbGRlciA9IHRhcmdldEluZm8uaG9sZGVyLFxyXG5cdFx0XHRcdG9uQ2xhc3MgPSB0YXJnZXRJbmZvLm9uQ2xhc3M7XHJcblxyXG5cdFx0XHRcdGlmICghaG9sZGVyKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAodGFyZ2V0LnZhbCgpKSB7XHJcblx0XHRcdFx0XHRpZiAob25DbGFzcykge1xyXG5cdFx0XHRcdFx0XHRob2xkZXIuYWRkQ2xhc3Mob25DbGFzcyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRob2xkZXIuY3NzKHsgJ3Zpc2liaWxpdHknIDogJ2hpZGRlbicgfSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRvblRhcmdldHNCbHVyIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHZhciB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCksXHJcblx0XHRcdFx0dGFyZ2V0SW5mbyA9IHRoaXMuZ2V0VGFyZ2V0SW5mbyh0YXJnZXQpLFxyXG5cdFx0XHRcdGhvbGRlciA9IHRhcmdldEluZm8uaG9sZGVyLFxyXG5cdFx0XHRcdG9uQ2xhc3MgPSB0YXJnZXRJbmZvLm9uQ2xhc3M7XHJcblxyXG5cdFx0XHRcdGlmICghaG9sZGVyKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIXRhcmdldC52YWwoKSkge1xyXG5cdFx0XHRcdFx0aWYgKG9uQ2xhc3MpIHtcclxuXHRcdFx0XHRcdFx0aG9sZGVyLnJlbW92ZUNsYXNzKG9uQ2xhc3MpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aG9sZGVyLmNzcyh7ICd2aXNpYmlsaXR5JyA6ICd2aXNpYmxlJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdG9uVGFyZ2V0c0NoYW5nZSA6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLFxyXG5cdFx0XHRcdHRhcmdldEluZm8gPSB0aGlzLmdldFRhcmdldEluZm8odGFyZ2V0KSxcclxuXHRcdFx0XHRob2xkZXIgPSB0YXJnZXRJbmZvLmhvbGRlcixcclxuXHRcdFx0XHRvbkNsYXNzID0gdGFyZ2V0SW5mby5vbkNsYXNzO1xyXG5cclxuXHRcdFx0XHRpZiAoIWhvbGRlcikge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKHRhcmdldC52YWwoKSkge1xyXG5cdFx0XHRcdFx0aWYgKG9uQ2xhc3MpIHtcclxuXHRcdFx0XHRcdFx0aG9sZGVyLmFkZENsYXNzKG9uQ2xhc3MpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aG9sZGVyLmNzcyh7ICd2aXNpYmlsaXR5JyA6ICdoaWRkZW4nIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAob25DbGFzcykge1xyXG5cdFx0XHRcdFx0XHRob2xkZXIucmVtb3ZlQ2xhc3Mob25DbGFzcyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRob2xkZXIuY3NzKHsgJ3Zpc2liaWxpdHknIDogJ3Zpc2libGUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0Z2V0VGFyZ2V0SW5mbyA6IGZ1bmN0aW9uKHRhcmdldCkge1xyXG5cdFx0XHRcdHRhcmdldCA9ICQoJ1snICsgdGhpcy5vcHRzLmhvbGRlciArICc9XFwnJyArIHRhcmdldC5hdHRyKHRoaXMub3B0cy5ob2xkZXJUYXJnZXQpICsgJ1xcJ10nKTtcclxuXHJcblx0XHRcdFx0aWYgKHRhcmdldC5zaXplKCkpIHtcclxuXHRcdFx0XHRcdHJldHVybiB7IGhvbGRlciA6IHRhcmdldCwgb25DbGFzcyA6IHRhcmdldC5hdHRyKHRoaXMub3B0cy5vbkNsYXNzKSB9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4geyBob2xkZXIgOiAnJywgb25DbGFzcyA6ICcnIH07XHJcblx0XHRcdH0sXHJcblx0XHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMudW5CaW5kRXZlbnRzKCk7XHJcblx0XHRcdFx0dGhpcy51bkVsZW1lbnRzKCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHJlZnJlc2ggOiBmdW5jdGlvbihjb250YWluZXIsIGFyZ3MpIHtcclxuXHRcdFx0XHRjb250YWluZXIgPSBjb250YWluZXIgfHwgdGhpcy5jb250YWluZXI7XHJcblxyXG5cdFx0XHRcdHRoaXMuZGVzdHJveSgpO1xyXG5cdFx0XHRcdHRoaXMuaW5pdChjb250YWluZXIsIGFyZ3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKCk7XHJcblxyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHRuYW1lc3BhY2UucGxhY2Vob2xkZXIuaW5pdCgkKCdib2R5JykpO1xyXG5cdH0pO1xyXG5cclxufSkod2luZG93LCB3aW5kb3cualF1ZXJ5KTsiLCIvKiFcclxuICogc2Ftc3VuZy5jb20gLSBQaGFzZTIgLSBQcm9kdWN0IFRlbXBsYXRlc1xyXG4gKiBzcmMgOiBqcy9zcmMvc21nL2FlbS90ZW1wbGF0ZXMvcHJvZHVjdC9wcm9kdWN0LWJhY2t0b3RvcC5qc1xyXG4gKlxyXG4gKiBAdmVyc2lvbiAxLjAuMFxyXG4gKiBAc2luY2UgMjAxNi4xMC4xMFxyXG4gKi9cclxuOyhmdW5jdGlvbiAod2luLCAkKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcpIHtcclxuXHRcdHdpbi5zbWcgPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZy5hZW0pIHtcclxuXHRcdHdpbi5zbWcuYWVtID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLnRlbXBsYXRlcykge1xyXG5cdFx0d2luLnNtZy5hZW0udGVtcGxhdGVzID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLnRlbXBsYXRlcy5wcm9kdWN0KSB7XHJcblx0XHR3aW4uc21nLmFlbS50ZW1wbGF0ZXMucHJvZHVjdCA9IHt9O1xyXG5cdH1cclxuXHJcblx0Ly8gVl9TVEFUSUMgVmFsdWVzXHJcblx0dmFyIFZfU1RBVElDID0gd2luLnNtZy5hZW0udmFyU3RhdGljLFxyXG5cdC8vIFV0aWxpdHkgU2NyaXB0XHJcblx0VVRJTCA9IHdpbi5zbWcuYWVtLnV0aWwsXHJcblx0Ly8gQ3VzdG9tIEV2ZW50c1xyXG5cdENTVF9FVkVOVCA9IHdpbi5zbWcuYWVtLmN1c3RvbUV2ZW50O1xyXG5cclxuXHR2YXIgbmFtZXNwYWNlID0gd2luLnNtZy5hZW0udGVtcGxhdGVzLnByb2R1Y3Q7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBuYW1lIHdpbmRvdy5zbWcuYWVtLnRlbXBsYXRlcy5wcm9kdWN0LmRldGFpbHNcclxuXHQgKiBAbmFtZXNwYWNlXHJcblx0ICogQHJlcXVpcmVzIGpRdWVyeVxyXG5cdCAqIEByZXF1aXJlcyBuYW1lc3BhY2UuanNcclxuXHQgKi9cclxuXHRuYW1lc3BhY2UuYmFja3RvdG9wID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBAZGVzY3JpcHRpb24gRGVmYXVsdCBPcHRpb25zXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dmFyIGRlZlBhcmFtcyA9IHtcclxuXHRcdFx0dG9wQnRuIDoge1xyXG5cdFx0XHRcdHdyYXAgOiAnLnMtZ290b3Atd3JhcCcsXHJcblx0XHRcdFx0YnRuIDogJy5zLWJ0bi1nb3RvcCcsXHJcblx0XHRcdFx0b25DbGFzcyA6ICdzLXNob3cnLFxyXG5cdFx0XHRcdHNwZWVkIDogMTAwMFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRmb290ZXIgOiB7XHJcblx0XHRcdFx0dGFyZ2V0IDogJyNmb290ZXInXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0IDogZnVuY3Rpb24oY29udGFpbmVyLCBhcmdzKSB7XHJcblx0XHRcdFx0aWYgKCEodGhpcy5jb250YWluZXIgPSBjb250YWluZXIpLnNpemUoKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHR0aGlzLm9wdHMgPSBVVElMLmRlZihkZWZQYXJhbXMsIChhcmdzIHx8IHt9KSk7XHJcblx0XHRcdFx0dGhpcy5zZXRFbGVtZW50cygpO1xyXG5cdFx0XHRcdHRoaXMub25CaW5kRXZlbnQoKTtcclxuXHRcdFx0XHR0aGlzLmRlZlNldHVwKCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldEVsZW1lbnRzIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5odG1sQm9keSA9ICQoJ2h0bWwsIGJvZHknKTtcclxuXHRcdFx0XHR0aGlzLmZvb3RlciA9ICQodGhpcy5vcHRzLmZvb3Rlci50YXJnZXQpO1xyXG5cdFx0XHRcdHRoaXMudG9wQnRuV3JhcCA9IHRoaXMuY29udGFpbmVyLmZpbmQodGhpcy5vcHRzLnRvcEJ0bi53cmFwKTtcclxuXHRcdFx0XHR0aGlzLnRvcEJ0biA9IHRoaXMudG9wQnRuV3JhcC5maW5kKHRoaXMub3B0cy50b3BCdG4uYnRuKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0b25CaW5kRXZlbnQgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnRvcEJ0bi5vbignY2xpY2snLCAkLnByb3h5KHRoaXMub25Ub3BCdG5DbGljaywgdGhpcykpO1xyXG5cclxuXHRcdFx0XHQkKHdpbikub24oJ3Njcm9sbCB0b3VjaG1vdmUnLCAkLnByb3h5KHRoaXMub25TY3JvbGxMaXN0ZW5lciwgdGhpcykpO1xyXG5cdFx0XHRcdHRoaXMub25TY3JvbGxMaXN0ZW5lcigpO1xyXG5cclxuXHRcdFx0XHQkKENTVF9FVkVOVC5DT05ORUNUKS5vbihDU1RfRVZFTlQuQkFDS1RPVE9QLlBPU0lUSU9OX0NIQU5HRSwgJC5wcm94eSh0aGlzLnNldFBvc2l0aW9uLCB0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGRlZlNldHVwIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh3aW4pLm9uKCdsb2FkJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0JCh3aW4pLnRyaWdnZXIoJ3Njcm9sbCcpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRvblRvcEJ0bkNsaWNrIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5odG1sQm9keS5hbmltYXRlKHtzY3JvbGxUb3AgOiAwfSwgdGhpcy5vcHRzLnRvcEJ0bi5zcGVlZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldFBvc2l0aW9uIDogZnVuY3Rpb24oZSwgZGF0YSkge1xyXG5cdFx0XHRcdGlmKHRoaXMudG9wUG9zaXRpb24gPT09IGRhdGEuVE9QX1BPU0lUSU9OKSByZXR1cm47XHJcblx0XHRcdFx0dGhpcy50b3BQb3NpdGlvbiA9IGRhdGEuVE9QX1BPU0lUSU9OO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRvblNjcm9sbExpc3RlbmVyIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHdpblRvcCA9ICQod2luKS5zY3JvbGxUb3AoKSxcclxuXHRcdFx0XHR3aW5IZWlnaHQgPSBVVElMLndpblNpemUoKS5oLFxyXG5cdFx0XHRcdGZvb3RlclRvcCA9ICh0aGlzLmZvb3Rlci5zaXplKCkpID8gdGhpcy5mb290ZXIub2Zmc2V0KCkudG9wIDogMDtcclxuXHJcblx0XHRcdFx0aWYodHlwZW9mIHRoaXMudG9wUG9zaXRpb24gPT09ICd1bmRlZmluZWQnKSB0aGlzLnRvcFBvc2l0aW9uID0gd2luVG9wO1xyXG5cclxuXHRcdFx0XHRpZiAod2luVG9wID4gdGhpcy50b3BQb3NpdGlvbiAmJiAod2luVG9wICsgd2luSGVpZ2h0KSA8IGZvb3RlclRvcCkge1xyXG5cdFx0XHRcdFx0aWYoIXRoaXMudG9wQnRuV3JhcC5oYXNDbGFzcyh0aGlzLm9wdHMudG9wQnRuLm9uQ2xhc3MpKSB0aGlzLnRvcEJ0bldyYXAuYWRkQ2xhc3ModGhpcy5vcHRzLnRvcEJ0bi5vbkNsYXNzKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYodGhpcy50b3BCdG5XcmFwLmhhc0NsYXNzKHRoaXMub3B0cy50b3BCdG4ub25DbGFzcykpIHRoaXMudG9wQnRuV3JhcC5yZW1vdmVDbGFzcyh0aGlzLm9wdHMudG9wQnRuLm9uQ2xhc3MpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0bmFtZXNwYWNlLmJhY2t0b3RvcC5pbml0KCQoJ2JvZHknKSk7XHJcblx0fSk7XHJcbn0pKHdpbmRvdywgd2luZG93LmpRdWVyeSk7XHJcbiIsIiIsIi8qIVxyXG4gKiBzYW1zdW5nLmNvbSAtIFBoYXNlMiAtIFZpZGVvIENvbXBvbmVudHNcclxuICogc3JjIDoganMvc3JjL3NtZy9hZW0vY29tcG9uZW50cy92aWRlby9zbWcuYWVtLmNvbXBvbmVudHMudmlkZW8uanNcclxuICpcclxuICogQHZlcnNpb24gMS4wLjBcclxuICogQHNpbmNlIDIwMTYuMDMuMThcclxuICovXHJcbjsoZnVuY3Rpb24gKHdpbiwgJCwgalF1ZXJ5KSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcpIHtcclxuXHRcdHdpbi5zbWcgPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZy5hZW0pIHtcclxuXHRcdHdpbi5zbWcuYWVtID0ge307XHJcblx0fVxyXG5cclxuXHRpZigndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLmNvbXBvbmVudHMpIHtcclxuXHRcdHdpbi5zbWcuYWVtLmNvbXBvbmVudHMgPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luLnNtZy5hZW0uY29tcG9uZW50cy52aWRlbykge1xyXG5cdFx0d2luLnNtZy5hZW0uY29tcG9uZW50cy52aWRlbyA9IHt9O1xyXG5cdH1cclxuXHJcblx0aWYgKCQoKS5qcXVlcnkgIT09IGpRdWVyeSgpLmpxdWVyeSkge1xyXG5cdFx0aWYgKGpRdWVyeS5mbi5iY0Nocm9tZVBsYXllcikge1xyXG5cdFx0XHQkID0galF1ZXJ5O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gU3RhdGljIFZhbHVlc1xyXG5cdHZhciBWX1NUQVRJQyA9IHdpbi5zbWcuYWVtLnZhclN0YXRpYyxcclxuXHQvLyBVdGlsaXR5IFNjcmlwdFxyXG5cdFVUSUwgPSB3aW4uc21nLmFlbS51dGlsO1xyXG5cclxuXHR2YXIgbmFtZXNwYWNlID0gd2luLnNtZy5hZW0uY29tcG9uZW50cztcclxuXHJcblx0LyoqXHJcblx0ICogQG5hbWUgd2luZG93LnNtZy5hZW0uY29tcG9uZW50cy52aWRlb1xyXG5cdCAqIEBuYW1lc3BhY2VcclxuXHQgKiBAcmVxdWlyZXMgalF1ZXJ5XHJcblx0ICogQHJlcXVpcmVzIG5hbWVzcGFjZS5qc1xyXG5cdCAqIEByZXF1aXJlcyB3aW5kb3cuc21nLnN0YXRpYy5qc1xyXG5cdCAqIEByZXF1aXJlcyB3aW5kb3cuc21nLnV0aWwuanNcclxuXHQgKi9cclxuXHRuYW1lc3BhY2UudmlkZW8gPSAoZnVuY3Rpb24oKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IE9wdGlvbnNcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR2YXIgZGVmUGFyYW1zID0ge1xyXG5cdFx0XHR2aWRlb3MgOiAnLmpzLXZpZGVvJyxcclxuXHRcdFx0Y3RhUGxheVZpZGVvOiAnLmpzLXBvcC1idG4sIGJ1dHRvbi5qcy12aWRlbycsXHJcblx0XHRcdHlvdXR1YmUgOiB7XHJcblx0XHRcdFx0aWZyYW1lIDogJzxpZnJhbWUgc3JjPVxcJ2Fib3V0OmJsYW5rXFwnIGZyYW1lYm9yZGVyPVxcJzBcXCcgd2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JyxcclxuXHRcdFx0XHRlbWJlZFNyYyA6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC97e1ZJREVPX0lEfX0/d21vZGU9b3BhcXVlJnJlbD0wJmVuYWJsZWpzYXBpPTEmdmVyc2lvbj0zJyxcclxuXHRcdFx0XHRhdXRvUGxheSA6ICdmYWxzZSdcclxuXHRcdFx0fSxcclxuXHRcdFx0YnJpZ2h0Y292ZSA6IHtcclxuXHRcdFx0XHRwbGF5ZXJUeXBlIDogJycsXHJcblx0XHRcdFx0Y291bnRyeUNvZGUgOiAnJyxcclxuXHRcdFx0XHRkaXZJRCA6ICcnLFxyXG5cdFx0XHRcdHZpZGVvVGFnSUQgOiAnJyxcclxuXHRcdFx0XHR2aWRlb0lEIDogJycsXHJcblx0XHRcdFx0dmlkZW9XaWR0aCA6ICcxMDAlJyxcclxuXHRcdFx0XHR2aWRlb0hlaWdodCA6ICcxMDAlJyxcclxuXHRcdFx0XHRhdXRvUGxheSA6ICdmYWxzZScsXHJcblx0XHRcdFx0Y2FwdGlvblVSTCA6ICcnXHJcblx0XHRcdH0sXHJcblx0XHRcdG1wNDoge1xyXG5cdFx0XHRcdC8vdmlkZW9FbGVtZW50OiAnPHZpZGVvIHNyYz1cIlwiIHBsYXlzaW5saW5lIHRpdGxlPVwiXCIgY2xhc3M9XCJzLXZpZGVvXCI+PC92aWRlbz4nLFxyXG5cdFx0XHRcdHZpZGVvRWxlbWVudDogJzx2aWRlbyBwbGF5c2lubGluZSBjbGFzcz1cInMtdmlkZW9cIiBjb250cm9sc0xpc3Q9XCJub2Rvd25sb2FkXCI+PHNvdXJjZSBzcmM9XCJcIiB0eXBlPVwidmlkZW8vbXA0XCI+PC92aWRlbz4nLFxyXG5cdFx0XHRcdHRpdGxlOiAnJyxcclxuXHRcdFx0XHR2aWRlb1VSTDogJycsXHJcblx0XHRcdFx0aW1nVVJMIDogJycsXHJcblx0XHRcdFx0YXV0b3BsYXk6ICdmYWxzZScsXHJcblx0XHRcdFx0bXV0ZTogJ2ZhbHNlJyxcclxuXHRcdFx0XHRjb250cm9sczogJ2ZhbHNlJyxcclxuXHRcdFx0XHRwbGF5QnRuOiAnLnMtbXA0LXZpZGVvLXBsYXksIC5qcy1wb3AtYnRuJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRhcGFyYXQgOiB7XHJcblx0XHRcdFx0aWZyYW1lIDogJzxpZnJhbWUgc3JjPVxcJ2Fib3V0OmJsYW5rXFwnIGZyYW1lYm9yZGVyPVxcJzBcXCcgd2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JyxcclxuXHRcdFx0XHRlbWJlZFNyYyA6ICdodHRwczovL3d3dy5hcGFyYXQuY29tL3ZpZGVvL3ZpZGVvL2VtYmVkL3Z0L2ZyYW1lL3BpZC8wL3Nob3dhZHN0YXJ0L25vL3Nob3d2aWRlby95ZXMvdmlkZW9oYXNoL3t7VklERU9fSUR9fScsXHJcblx0XHRcdFx0YXV0b1BsYXkgOiAnZmFsc2UnXHJcblx0XHRcdH0sXHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aW5pdCA6IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXJncykge1xyXG5cdFx0XHRcdGlmICghKHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyKS5zaXplKCkpIHJldHVybjtcclxuXHJcblx0XHRcdFx0ZGVmUGFyYW1zLmJyaWdodGNvdmUudGVtcGxhdGVSZWFkeUhhbmRsZXIgPSAkLnByb3h5KHRoaXMub25CcmlnaHRDb3ZlVGVtcGxhdGVSZWFkeUhhbmRsZXIsIHRoaXMpO1xyXG5cclxuXHRcdFx0XHR0aGlzLm9wdHMgPSBVVElMLmRlZihkZWZQYXJhbXMsIChhcmdzIHx8IHt9KSk7XHJcblxyXG5cdFx0XHRcdHRoaXMueW91dHViZU9wdCA9IHRoaXMub3B0cy55b3V0dWJlO1xyXG5cdFx0XHRcdHRoaXMuYnJpZ2h0Y292ZU9wdCA9IHRoaXMub3B0cy5icmlnaHRjb3ZlO1xyXG5cdFx0XHRcdHRoaXMubXA0T3B0ID0gdGhpcy5vcHRzLm1wNDtcclxuXHRcdFx0XHR0aGlzLmFwYXJhdE9wdCA9IHRoaXMub3B0cy5hcGFyYXQ7XHJcblx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdCA9IG51bGw7XHJcblx0XHRcdFx0dGhpcy55b3V0dWJlSWZyYW1lID0gbnVsbDtcclxuXHRcdFx0XHR0aGlzLmFwYXJhdElmcmFtZSA9IG51bGw7XHJcblx0XHRcdFx0dGhpcy5tcDRWaWRlb0VsZW1lbnQgPSBudWxsO1xyXG5cclxuXHRcdFx0XHR0aGlzLnNldEVsZW1lbnRzKCk7XHJcblx0XHRcdFx0dGhpcy5iaW5kRXZlbnRIYW5kbGVycygpO1xyXG5cdFx0XHRcdHRoaXMuc2V0Q3JlYXRlRW1iZWRWaWRlbygpO1xyXG5cdFx0XHRcdHRoaXMuaWU4SGlkZVBsYXlCdXR0b24oKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0RWxlbWVudHMgOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnZpZGVvc0VtYmVkID0gdGhpcy5jb250YWluZXIuZmluZCh0aGlzLm9wdHMudmlkZW9zKS5maWx0ZXIoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHJldHVybiAkKHRoaXMpLmF0dHIoJ2RhdGEtdmlkLXZpZXcnKSA9PT0gJ2VtYmVkJztcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0aGlzLnZpZGVvc0xheWVyID0gdGhpcy5jb250YWluZXIuZmluZCh0aGlzLm9wdHMudmlkZW9zKS5maWx0ZXIoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHJldHVybiAkKHRoaXMpLmF0dHIoJ2RhdGEtdmlkLXZpZXcnKSA9PT0gJ2xheWVyJztcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSxcclxuXHRcdFx0YmluZEV2ZW50SGFuZGxlcnMgOiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdGlmIChkb2N1bWVudC5kb2N1bWVudE1vZGUgPD0gMTApIHtcclxuXHRcdFx0XHRcdCQodGhpcy5vcHRzLmN0YVBsYXlWaWRlbykub24oJ2NsaWNrLmNoZWNrT2xkQnJvd3NlckxheWVyVmlkZW8nLCAkLnByb3h5KHRoaXMuY2hlY2tPbGRCcm93c2VyTGF5ZXJWaWRlbywgdGhpcykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCB0aGlzLm9wdHMudmlkZW9zLCAkLnByb3h5KHRoaXMuc2V0Q3JlYXRlTGF5ZXJWaWRlbywgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRpZThIaWRlUGxheUJ1dHRvbiA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmIChkb2N1bWVudC5kb2N1bWVudE1vZGUgPT09IDgpIHtcclxuXHRcdFx0XHRcdCQodGhpcy5vcHRzLm1wNC5wbGF5QnRuKS5maWx0ZXIoJ1tkYXRhLXZpZC10eXBlPVwibXA0XCJdJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdFx0XHRcdCQodGhpcy5vcHRzLnZpZGVvcykuZmlsdGVyKCdbZGF0YS12aWQtdHlwZT1cIm1wNFwiXScpLmZpbmQodGhpcy5vcHRzLm1wNC5wbGF5QnRuKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cdFx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzZXRDcmVhdGVFbWJlZFZpZGVvIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gZW1iZWRcclxuXHRcdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdFx0XHRcdGZvcih2YXIgaT0wLG1heD10aGlzLnZpZGVvc0VtYmVkLmxlbmd0aDsgaTxtYXg7IGkrKyl7XHJcblx0XHRcdFx0XHQoZnVuY3Rpb24oaW5kZXgpe1xyXG5cdFx0XHRcdFx0XHR2YXIgX3RhcmdldCA9IF90aGlzLnZpZGVvc0VtYmVkLmVxKGluZGV4KSxcclxuXHRcdFx0XHRcdFx0dmlkZW9WaWV3ID0gX3RhcmdldC5kYXRhKCd2aWQtdmlldycpLFxyXG5cdFx0XHRcdFx0XHR2aWRlb1R5cGUgPSBfdGFyZ2V0LmRhdGEoJ3ZpZC10eXBlJyksXHJcblx0XHRcdFx0XHRcdHZpZGVvRGF0YSA9IF90YXJnZXQuZGF0YSgndmlkLWRhdGEnKTtcclxuXHRcdFx0XHRcdFx0c3dpdGNoKHZpZGVvVHlwZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNhc2UgJ3lvdXR1YmUnOlxyXG5cdFx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0WW91dHViZSh2aWRlb0RhdGEpO1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0Y2FzZSAnYnJpZ2h0Y292ZSc6XHJcblx0XHRcdFx0XHRcdFx0XHRfdGhpcy5zZXRCcmlnaHRDb3ZlKHZpZGVvRGF0YSk7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRjYXNlICdtcDQnOlxyXG5cdFx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0TXA0UGxheWVyKHZpZGVvRGF0YSwgdmlkZW9WaWV3LCBfdGFyZ2V0LCBpKTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2FwYXJhdCc6XHJcblx0XHRcdFx0XHRcdFx0XHRfdGhpcy5zZXRBcGFyYXQodmlkZW9EYXRhKTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KShpKTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRzZXRDcmVhdGVMYXllclZpZGVvIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0Ly8gbGF5ZXJcclxuXHRcdFx0XHR2YXIgX3RhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuXHRcdFx0XHR2aWRlb1ZpZXcgPSBfdGFyZ2V0LmRhdGEoJ3ZpZC12aWV3JyksXHJcblx0XHRcdFx0dmlkZW9UeXBlID0gX3RhcmdldC5kYXRhKCd2aWQtdHlwZScpLFxyXG5cdFx0XHRcdHZpZGVvRGF0YSA9IF90YXJnZXQuZGF0YSgndmlkLWRhdGEnKSxcclxuXHRcdFx0XHRob21lQ29tcG9uZW50ID0gX3RhcmdldC5jbG9zZXN0KCcuanMtaG9tZS1jb21wb25lbnRzJyk7XHJcblx0XHRcdFx0aWYodmlkZW9WaWV3ID09PSAnZW1iZWQnKSByZXR1cm47XHJcblx0XHRcdFx0X3RhcmdldC5hdHRyKCdkYXRhLXZpZC1idG4taWR4JywgdGhpcy52aWRlb3NMYXllci5pbmRleChfdGFyZ2V0KSk7XHJcblx0XHRcdFx0JCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmF0dHIoJ2RhdGEtdmlkLWJ0bi1pZHgnLCBfdGFyZ2V0LmF0dHIoJ2RhdGEtdmlkLWJ0bi1pZHgnKSk7XHJcblx0XHRcdFx0c3dpdGNoKHZpZGVvVHlwZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAneW91dHViZSc6XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0WW91dHViZSh2aWRlb0RhdGEpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2JyaWdodGNvdmUnOlxyXG5cdFx0XHRcdFx0XHR0aGlzLnNldEJyaWdodENvdmUodmlkZW9EYXRhKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdtcDQnOlxyXG5cdFx0XHRcdFx0XHR0aGlzLnNldE1wNFBsYXllcih2aWRlb0RhdGEsIHZpZGVvVmlldywgX3RhcmdldCwgX3RhcmdldC5hdHRyKCdkYXRhLXZpZC1idG4taWR4JykpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2FwYXJhdCc6XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0QXBhcmF0KHZpZGVvRGF0YSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoaG9tZUNvbXBvbmVudC5zaXplKCkpIHtcclxuXHRcdFx0XHRcdGhvbWVDb21wb25lbnQuYWRkQ2xhc3MoJ3MtdmlkZW8tb3BlbicpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYodmlkZW9WaWV3ID09PSAnbGF5ZXInKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygndmlkZW8tbGF5ZXItb3BlbicpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0JCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKS5vZmYoJ2FlbV9oaWRlJywgJC5wcm94eSh0aGlzLm9uQWVtSGlkZSwgdGhpcykpO1xyXG5cdFx0XHRcdCQoJyMnICsgdmlkZW9EYXRhLmRpdklEKS5jbG9zZXN0KCcudmlkZW8tYXJlYV81Jykub24oJ2FlbV9oaWRlJywgJC5wcm94eSh0aGlzLm9uQWVtSGlkZSwgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjaGVja09sZEJyb3dzZXJMYXllclZpZGVvIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHZhciBfdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLFxyXG5cdFx0XHRcdHZpZGVvVHlwZSA9IF90YXJnZXQuZGF0YSgndmlkLXR5cGUnKTtcclxuXHJcblx0XHRcdFx0c3dpdGNoKHZpZGVvVHlwZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAneW91dHViZSc6XHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLmFsZXJ0T2xkSWVCcm93c2VyKDEwLCAnWW91dHViZScpKSB7XHJcblx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdicmlnaHRjb3ZlJzpcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuYWxlcnRPbGRJZUJyb3dzZXIoOCwgJ0JyaWdodGNvdmUnKSkge1xyXG5cdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnbXA0JzpcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuYWxlcnRPbGRJZUJyb3dzZXIoOCwgJ01wNCcpKSB7XHJcblx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdhcGFyYXQnOlxyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5hbGVydE9sZEllQnJvd3Nlcig4LCAnQXBhcmF0JykpIHtcclxuXHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGFsZXJ0T2xkSWVCcm93c2VyIDogZnVuY3Rpb24odmVyLCB2VHlwZSkge1xyXG5cdFx0XHRcdGlmIChkb2N1bWVudC5kb2N1bWVudE1vZGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDw9IHZlcikge1xyXG5cdFx0XHRcdFx0dmFyIGFsdEZ1bmMgPSB3aW5kb3dbJ2EnICsgJ2xlcnQnXTtcclxuXHRcdFx0XHRcdGFsdEZ1bmMoJ0ludGVybmV0IEV4cGxvcmVyICcgKyBkb2N1bWVudC5kb2N1bWVudE1vZGUgKyAnIGRvZXNuXFwndCBzdXBwb3J0ICcgKyB2VHlwZSArICcgdmlkZW8uJyk7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldFlvdXR1YmUgOiBmdW5jdGlvbih2aWRlb0RhdGEsIGpzVmlkZW9CdG4pIHtcclxuXHRcdFx0XHR0aGlzLnlvdXR1YmVJZnJhbWUgPSAkKHRoaXMueW91dHViZU9wdC5pZnJhbWUpO1xyXG5cdFx0XHRcdHRoaXMueW91dHViZUlmcmFtZS5hdHRyKHtcclxuXHRcdFx0XHRcdCdpZCcgOiAneW91dHViZVBsYXllcl8nICsgdmlkZW9EYXRhLnZpZGVvSUQuc3BsaXQoJy0nKS5qb2luKCdfJyksXHJcblx0XHRcdFx0XHQnc3JjJyA6IHRoaXMueW91dHViZU9wdC5lbWJlZFNyYy5yZXBsYWNlKCd7e1ZJREVPX0lEfX0nLCB2aWRlb0RhdGEudmlkZW9JRClcclxuXHRcdFx0XHRcdFx0XHQrICcmYXV0b3BsYXk9JyArICgoISF2aWRlb0RhdGEuYXV0b1BsYXkgJiYgdmlkZW9EYXRhLmF1dG9QbGF5LnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykgPyAnMScgOiAnMCcpXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0JCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLnByZXBlbmQodGhpcy55b3V0dWJlSWZyYW1lKVxyXG5cdFx0XHRcdFx0LmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKS5zaG93KClcclxuXHRcdFx0XHRcdC5jbG9zZXN0KCcuanMtdmlkZW8tYXJlYScpLnNob3coKTtcclxuXHRcdFx0XHQvLyAkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkuY2xvc2VzdCgnLnZpZGVvLWFyZWFfNScpLmZpbmQoJy5qcy1wb3AtY2xvc2UnKS5vbignZm9jdXMgY2xpY2snLCAkLnByb3h5KHRoaXMub25DbG9zZUJ0bkNsaWNrLCB0aGlzKSk7XHJcblx0XHRcdFx0JCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKS5vbignY2xpY2snLCAnLmpzLXBvcC1jbG9zZScsICQucHJveHkodGhpcy5vbkNsb3NlQnRuQ2xpY2ssIHRoaXMpKTtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygndmlkZW8tb3BlbicpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciB2aWRlb1RpdGxlID0gJCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmRhdGEoJ3ZpZGVvLXRpdGxlJyk7XHJcblx0XHRcdFx0JCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmZpbmQoJ2lmcmFtZScpLmF0dHIoJ3RpdGxlJywgdmlkZW9UaXRsZSk7XHJcblxyXG5cdFx0XHRcdHZhciBkaXZFbCA9ICQoJyMnICsgdmlkZW9EYXRhLmRpdklEKS5jbG9zZXN0KCcudmlkZW8tYXJlYV81JyksXHJcblx0XHRcdFx0XHR5b3V0dWJlVGltZW91dE9iaj0ge307XHJcblxyXG5cdFx0XHRcdGlmIChkaXZFbC5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdGRpdkVsLmFkZENsYXNzKCdzLXZpZGVvLXlvdXR1YmUnKTtcclxuXHRcdFx0XHRcdHlvdXR1YmVUaW1lb3V0T2JqID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0ZGl2RWwuYWRkQ2xhc3MoJ3MteW91dHViZS1yZWFkeScpO1xyXG5cdFx0XHRcdFx0fSwgNDUwMCk7XHJcblx0XHRcdFx0XHRkaXZFbC5kYXRhKCd0aW1lcicsIHlvdXR1YmVUaW1lb3V0T2JqKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldEFwYXJhdCA6IGZ1bmN0aW9uKHZpZGVvRGF0YSwganNWaWRlb0J0bikge1xyXG5cdFx0XHRcdHRoaXMuYXBhcmF0SWZyYW1lID0gJCh0aGlzLmFwYXJhdE9wdC5pZnJhbWUpO1xyXG5cdFx0XHRcdHRoaXMuYXBhcmF0SWZyYW1lLmF0dHIoe1xyXG5cdFx0XHRcdFx0J2lkJyA6ICdhcGFyYXRQbGF5ZXJfJyArIHZpZGVvRGF0YS52aWRlb0lELnNwbGl0KCctJykuam9pbignXycpLFxyXG5cdFx0XHRcdFx0J3NyYycgOiB0aGlzLmFwYXJhdE9wdC5lbWJlZFNyYy5yZXBsYWNlKCd7e1ZJREVPX0lEfX0nLCB2aWRlb0RhdGEudmlkZW9JRClcclxuXHRcdFx0XHRcdFx0KyAoKCEhdmlkZW9EYXRhLmF1dG9QbGF5ICYmIHZpZGVvRGF0YS5hdXRvUGxheS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpID8gJz9kYXRhW2FzXT0xJyA6ICcnKVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdCQoJyMnICsgdmlkZW9EYXRhLmRpdklEKS5jbG9zZXN0KCcudmlkZW8tYXJlYV81JykuYWRkQ2xhc3MoJ3MtYXBhcmF0LWFyZWEnKTtcclxuXHRcdFx0XHQkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkucHJlcGVuZCh0aGlzLmFwYXJhdElmcmFtZSlcclxuXHRcdFx0XHRcdC5jbG9zZXN0KCcudmlkZW8tYXJlYV81Jykuc2hvdygpXHJcblx0XHRcdFx0XHQuY2xvc2VzdCgnLmpzLXZpZGVvLWFyZWEnKS5zaG93KCk7XHJcblx0XHRcdFx0Ly8gJCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKS5maW5kKCcuanMtcG9wLWNsb3NlJykub24oJ2ZvY3VzIGNsaWNrJywgJC5wcm94eSh0aGlzLm9uQ2xvc2VCdG5DbGljaywgdGhpcykpO1xyXG5cdFx0XHRcdCQoJyMnICsgdmlkZW9EYXRhLmRpdklEKS5jbG9zZXN0KCcudmlkZW8tYXJlYV81Jykub24oJ2NsaWNrJywgJy5qcy1wb3AtY2xvc2UnLCAkLnByb3h5KHRoaXMub25DbG9zZUJ0bkNsaWNrLCB0aGlzKSk7XHJcblx0XHRcdFx0dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ3ZpZGVvLW9wZW4nKTtcclxuXHJcblx0XHRcdFx0dmFyIHZpZGVvVGl0bGUgPSAkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkuZGF0YSgndmlkZW8tdGl0bGUnKTtcclxuXHRcdFx0XHQkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkuZmluZCgnaWZyYW1lJykuYXR0cigndGl0bGUnLCB2aWRlb1RpdGxlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0b25DbG9zZUJ0bkNsaWNrIDogZnVuY3Rpb24oZSwgZm9jdXNCb29sZWFuKSB7XHJcblx0XHRcdFx0dmFyIHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuXHRcdFx0XHRhcmVhID0gdGFyZ2V0LmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKSxcclxuXHRcdFx0XHRicmlnaHRDb3ZlQXJlYSA9IGFyZWEuZmluZCgnLmJyaWdodENvdmVBcmVhJyksXHJcblx0XHRcdFx0YnRuSWR4ID0gJCgnIycgKyB0YXJnZXQuZGF0YSgnZGl2LWlkJykpLmF0dHIoJ2RhdGEtdmlkLWJ0bi1pZHgnKSxcclxuXHRcdFx0XHRwbGF5QnRuID0gJCgnW2RhdGEtdmlkLXZpZXc9XCJsYXllclwiXVtkYXRhLXZpZC1idG4taWR4PVwiJyArICBidG5JZHggKyAnXCJdJyksXHJcblx0XHRcdFx0aG9tZUNvbXBvbmVudCA9IHBsYXlCdG4uY2xvc2VzdCgnLmpzLWhvbWUtY29tcG9uZW50cycpLFxyXG5cdFx0XHRcdGZvY3VzQm9vID0gZm9jdXNCb29sZWFuO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChwbGF5QnRuLnNpemUoKSkge1xyXG5cdFx0XHRcdCAgaWYocGxheUJ0bi5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0XHR2YXIgbGFzdElkeCA9IHBsYXlCdG4ubGVuZ3RoIC0gMSxcclxuXHRcdFx0XHRcdHNsaWNrU2xpZGUgPSAkKHBsYXlCdG5bbGFzdElkeF0pLmNsb3Nlc3QoJy5zbGljay1zbGlkZScpO1xyXG5cdFx0XHRcdFx0aWYodHlwZW9mIHNsaWNrU2xpZGUgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0XHQgIHBsYXlCdG4uZWFjaChmdW5jdGlvbihpZHgsIGVsbXQpIHtcclxuXHRcdFx0XHRcdFx0aWYobGFzdElkeCA9PT0gaWR4KSB7XHJcblx0XHRcdFx0XHRcdCAgaWYoISQoc2xpY2tTbGlkZSkuaGFzQ2xhc3MoJ3NsaWNrLWNsb25lZCcpKSBpZiAoIWZvY3VzQm9vKSB7JChlbG10KS5mb2N1cygpO31cclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIWZvY3VzQm9vKSB7JChlbG10KS5mb2N1cygpO31cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ICB9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQgaWYgKCFmb2N1c0Jvbykge3BsYXlCdG4uZm9jdXMoKTt9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0ICB9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKCFmb2N1c0Jvbykge3BsYXlCdG4uZm9jdXMoKTt9XHJcblx0XHRcdFx0ICB9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoaG9tZUNvbXBvbmVudC5zaXplKCkpIHtcclxuXHRcdFx0XHRcdGhvbWVDb21wb25lbnQucmVtb3ZlQ2xhc3MoJ3MtdmlkZW8tb3BlbicpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ3ZpZGVvLWxheWVyLW9wZW4nKTtcclxuXHJcblx0XHRcdFx0YXJlYS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XHJcblxyXG5cdFx0XHRcdGlmIChhcmVhLmhhc0NsYXNzKCdzLWFwYXJhdC1hcmVhJykpIHtcclxuXHRcdFx0XHRcdGFyZWEuZmluZCgnaWZyYW1lJykuYXR0cignc3JjJywgJ2Fib3V0OmJsYW5rJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGJyaWdodENvdmVBcmVhLmh0bWwoJycpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRhcmdldC5vZmYoJ2NsaWNrJywgJC5wcm94eSh0aGlzLm9uQ2xvc2VCdG5DbGljaywgdGhpcykpO1xyXG5cdFx0XHRcdC8vIHRhcmdldC5vZmYoJ2ZvY3VzIGNsaWNrJywgJC5wcm94eSh0aGlzLm9uQ2xvc2VCdG5DbGljaywgdGhpcykpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNsZWFyVGltZW91dChhcmVhLmRhdGEoJ3RpbWVyJykpO1xyXG5cdFx0XHRcdGFyZWEucmVtb3ZlQ2xhc3MoJ3MtdmlkZW8teW91dHViZScpLnJlbW92ZUNsYXNzKCdzLXlvdXR1YmUtcmVhZHknKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0b25BZW1IaWRlIDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHZhciB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnLmJyaWdodGNvdmUtYmNjLWJ0bi1jbG9zZSwgLmJyaWdodGNvdmUtYmM1LWJ0bi1jbG9zZScpLFxyXG5cdFx0XHRcdGJ0bklkeCA9ICQoJyMnICsgdGFyZ2V0LmRhdGEoJ2Rpdi1pZCcpKS5hdHRyKCdkYXRhLXZpZC1idG4taWR4JyksXHJcblx0XHRcdFx0cGxheUJ0biA9ICQoJ1tkYXRhLXZpZC12aWV3PVwibGF5ZXJcIl1bZGF0YS12aWQtYnRuLWlkeD1cIicgKyAgYnRuSWR4ICsgJ1wiXScpLFxyXG5cdFx0XHRcdGhvbWVDb21wb25lbnQgPSBwbGF5QnRuLmNsb3Nlc3QoJy5qcy1ob21lLWNvbXBvbmVudHMnKTtcclxuXHJcblx0XHRcdFx0aWYgKHBsYXlCdG4uc2l6ZSgpICYmICEkKGUudGFyZ2V0KS5oYXNDbGFzcygndmpzLWJpZy1wbGF5LWJ1dHRvbicpKSB7XHJcblx0XHRcdFx0ICBpZihwbGF5QnRuLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0XHRcdHZhciBsYXN0SWR4ID0gcGxheUJ0bi5sZW5ndGggLSAxLFxyXG5cdFx0XHRcdFx0c2xpY2tTbGlkZSA9ICQocGxheUJ0bltsYXN0SWR4XSkuY2xvc2VzdCgnLnNsaWNrLXNsaWRlJyk7XHJcblx0XHRcdFx0XHRpZih0eXBlb2Ygc2xpY2tTbGlkZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRcdCAgcGxheUJ0bi5lYWNoKGZ1bmN0aW9uKGlkeCwgZWxtdCkge1xyXG5cdFx0XHRcdFx0XHRpZihsYXN0SWR4ID09PSBpZHgpIHtcclxuXHRcdFx0XHRcdFx0ICBpZighJChzbGlja1NsaWRlKS5oYXNDbGFzcygnc2xpY2stY2xvbmVkJykpICQoZWxtdCkuZm9jdXMoKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ICAkKGVsbXQpLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdCAgfSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ICBwbGF5QnRuLmZvY3VzKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0ICB9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cGxheUJ0bi5mb2N1cygpO1xyXG5cdFx0XHRcdCAgfVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCF0YXJnZXQuY2xvc2VzdCgnLnMtdmlkZW8tYXJlYScpLmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdFx0XHRob21lQ29tcG9uZW50LnJlbW92ZUNsYXNzKCdzLXZpZGVvLW9wZW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldEJyaWdodENvdmUgOiBmdW5jdGlvbih2aWRlb0RhdGEpIHtcclxuXHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0ID0gJC5leHRlbmQoe30sIHRoaXMuYnJpZ2h0Y292ZU9wdCwgdmlkZW9EYXRhKTtcclxuXHJcblx0XHRcdFx0c3dpdGNoKHRoaXMuX2JyaWdodGNvdmVPcHQucGxheWVyVHlwZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAnYnJpZ2h0Y292ZUJjNVBsYXllckxheWVyJzpcclxuXHRcdFx0XHRcdFx0d2luLmJyaWdodGNvdmVCYzVQbGF5ZXJMYXllcihcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LmNvdW50cnlDb2RlLFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQuZGl2SUQsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC52aWRlb1RhZ0lELFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQudmlkZW9JRCxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LnZpZGVvV2lkdGgsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC52aWRlb0hlaWdodCxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LmF1dG9QbGF5LFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQuY2FwdGlvblVSTFxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2JjSHRtbDVQbGF5ZXInOlxyXG5cdFx0XHRcdFx0XHQkKCcjJyArIHRoaXMuX2JyaWdodGNvdmVPcHQuZGl2SUQpLmJjSHRtbDVQbGF5ZXIoXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC5jb3VudHJ5Q29kZSxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LnZpZGVvVGFnSUQsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC52aWRlb0lELFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQudmlkZW9XaWR0aCxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LnZpZGVvSGVpZ2h0LFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQuYXV0b1BsYXksXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC5jYXB0aW9uVVJMXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnYnJpZ2h0Y292ZUJjY1BsYXllckxheWVyJzpcclxuXHRcdFx0XHRcdFx0d2luLmJyaWdodGNvdmVCY2NQbGF5ZXJMYXllcihcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LmRpdklELFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQuY291bnRyeUNvZGUsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC52aWRlb0lELFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQudmlkZW9XaWR0aCxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LnZpZGVvSGVpZ2h0LFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQuYXV0b1BsYXlcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdiY0Nocm9tZVBsYXllcic6XHJcblx0XHRcdFx0XHRcdCQoJyMnICsgdGhpcy5fYnJpZ2h0Y292ZU9wdC5kaXZJRCkuYmNDaHJvbWVQbGF5ZXIoXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC5jb3VudHJ5Q29kZSxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLl9icmlnaHRjb3ZlT3B0LnZpZGVvSUQsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC52aWRlb1dpZHRoLFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2JyaWdodGNvdmVPcHQudmlkZW9IZWlnaHQsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnJpZ2h0Y292ZU9wdC5hdXRvUGxheVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldE1wNFBsYXllciA6IGZ1bmN0aW9uKHZpZGVvRGF0YSwgdmlkZW9WaWV3LCBkaXZUYXJnZXQsIGlkeCkge1xyXG5cdFx0XHRcdHZhciBfdGhpcyA9IHRoaXMsXHJcblx0XHRcdFx0XHQkZGl2VGFyZ2V0ID0gZGl2VGFyZ2V0LFxyXG5cdFx0XHRcdFx0JG1wNFBsYXlCdG4gPSBudWxsO1xyXG5cclxuXHRcdFx0XHR0aGlzLm1wNFZpZGVvRWxlbWVudCA9ICQodGhpcy5tcDRPcHQudmlkZW9FbGVtZW50KTtcclxuXHRcdFx0XHR0aGlzLm1wNFZpZGVvRWxlbWVudC5hdHRyKHtcclxuXHRcdFx0XHRcdC8vJ2lkJyA6ICdtcDRQbGF5ZXJfJyArIHZpZGVvRGF0YS52aWRlb1VSTC5zcGxpdCgnLycpLnBvcCgpLnNwbGl0KCcuJykuc2hpZnQoKS5zcGxpdCgnLScpLmpvaW4oJ18nKSxcclxuXHRcdFx0XHRcdC8vJ3RpdGxlJyA6IHZpZGVvRGF0YS50aXRsZSxcclxuXHRcdFx0XHRcdCd3aWR0aCcgOiB2aWRlb0RhdGEudmlkZW9XaWR0aCxcclxuXHRcdFx0XHRcdCdoZWlnaHQnIDogdmlkZW9EYXRhLnZpZGVvSGVpZ2h0XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHRoaXMubXA0VmlkZW9FbGVtZW50LmZpbmQoJ3NvdXJjZScpLmF0dHIoJ3NyYycsIHRoaXMuZ2V0U2NlbmU3UGF0aCh2aWRlb0RhdGEudmlkZW9VUkwsICQoZGl2VGFyZ2V0KSkpO1xyXG5cdFx0XHRcdCRtcDRQbGF5QnRuID0gJGRpdlRhcmdldC5maW5kKHRoaXMubXA0T3B0LnBsYXlCdG4pO1xyXG5cclxuXHRcdFx0XHRpZiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlICE9PSA4KSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCRtcDRQbGF5QnRuLm9mZignY2xpY2subXA0UGxheScpLm9uKCdjbGljay5tcDRQbGF5JywgZnVuY3Rpb24gKGUpe1xyXG5cdFx0XHRcdFx0XHR2YXIgJGJ0biA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuXHRcdFx0XHRcdFx0dmFyICR2aWRlb1RhZ1dyYXAgPSAkKCcjJyArICRidG4uY2xvc2VzdCgnLmpzLXZpZGVvJykuZmluZCgnLnMtdmlkZW8tcGxheWVyLCAucy1zaG93LXZpZGVvJykuYXR0cignaWQnKSk7XHJcblx0XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcclxuXHRcdFx0XHRcdFx0JHZpZGVvVGFnV3JhcC5maW5kKCd2aWRlbycpWzBdLnBsYXkoKTtcclxuXHRcdFx0XHRcdFx0JHZpZGVvVGFnV3JhcC5maW5kKCd2aWRlbycpLnByb3AoJ2NvbnRyb2xzJywgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdCRidG4uY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKHZpZGVvRGF0YS5tdXRlID09PSAndHJ1ZScpIHt0aGlzLm1wNFZpZGVvRWxlbWVudC5wcm9wKCdtdXRlZCcsIHRydWUpfTtcclxuXHRcdFx0XHRpZiAodmlkZW9EYXRhLmF1dG9QbGF5ID09PSAndHJ1ZScpIHt0aGlzLm1wNFZpZGVvRWxlbWVudC5wcm9wKCdhdXRvcGxheScsIHRydWUpfTtcclxuXHRcdFx0XHRpZiAodmlkZW9WaWV3ID09PSAnbGF5ZXInKSB7XHJcblx0XHRcdFx0XHRpZiAodmlkZW9EYXRhLmNvbnRyb2xzID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0ICBcdFx0dGhpcy5tcDRWaWRlb0VsZW1lbnQucHJvcCgnY29udHJvbHMnLCBmYWxzZSk7XHJcblx0XHRcdFx0IFx0fSBlbHNlIHtcclxuXHRcdFx0XHQgIFx0XHR0aGlzLm1wNFZpZGVvRWxlbWVudC5wcm9wKCdjb250cm9scycsIHRydWUpO1xyXG5cdFx0XHRcdCBcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHZpZGVvVmlldyA9PT0gJ2VtYmVkJyAmJiB2aWRlb0RhdGEuc2Nyb2xsUGxheSA9PT0gJ3RydWUnKSB7XHJcblx0XHRcdFx0XHQkbXA0UGxheUJ0bi5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1x0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh2aWRlb1ZpZXcgPT09ICdlbWJlZCcgJiYgdmlkZW9EYXRhLmF1dG9QbGF5ID09PSAndHJ1ZScpIHtcclxuXHRcdFx0XHRcdHRoaXMubXA0VmlkZW9FbGVtZW50LnByb3AoJ2NvbnRyb2xzJywgdHJ1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh2aWRlb0RhdGEuY29udHJvbHMgPT09ICd0cnVlJykge1xyXG5cdFx0XHRcdFx0dGhpcy5tcDRWaWRlb0VsZW1lbnQucHJvcCgnY29udHJvbHMnLCB0cnVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHZpZGVvRGF0YS5sb29wID09PSAndHJ1ZScpIHt0aGlzLm1wNFZpZGVvRWxlbWVudC5wcm9wKCdsb29wJywgdHJ1ZSl9O1xyXG5cdFx0XHRcdCQoJyMnICsgdmlkZW9EYXRhLmRpdklEKS5wcmVwZW5kKHRoaXMubXA0VmlkZW9FbGVtZW50KVxyXG5cdFx0XHRcdFx0LmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKS5zaG93KClcclxuXHRcdFx0XHRcdC5jbG9zZXN0KCcuanMtdmlkZW8tYXJlYScpLnNob3coKTtcclxuXHRcdFx0XHQkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkuY2xvc2VzdCgnLnZpZGVvLWFyZWFfNScpLm9uKCdjbGljaycsICcuanMtcG9wLWNsb3NlJywgJC5wcm94eSh0aGlzLm9uQ2xvc2VCdG5DbGljaywgdGhpcykpO1xyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCd2aWRlby1vcGVuJyk7XHJcblxyXG5cdFx0XHRcdC8vIGlmIChkb2N1bWVudC5kb2N1bWVudE1vZGUgPT09IDgpIHtcclxuXHRcdFx0XHQvLyBcdHZhciAkbXA0QWx0SW1hZ2UgPSBudWxsO1xyXG5cdFx0XHRcdC8vIFx0aWYgKCRkaXZUYXJnZXQucGFyZW50KCkuZmluZCgnLmpzLWltZy1zcmMnKS5sZW5ndGgpIHtcclxuXHRcdFx0XHQvLyBcdFx0JG1wNEFsdEltYWdlID0gJGRpdlRhcmdldC5wYXJlbnQoKS5maW5kKCcuanMtaW1nLXNyYycpO1xyXG5cdFx0XHRcdC8vIFx0fSBlbHNlIGlmICgkZGl2VGFyZ2V0LmNsb3Nlc3QoJ2ZpZ3VyZScpLmZpbmQoJy5zLWltZy1tbycpLmxlbmd0aCkge1xyXG5cdFx0XHRcdC8vIFx0XHQkbXA0QWx0SW1hZ2UgPSAkZGl2VGFyZ2V0LmNsb3Nlc3QoJ2ZpZ3VyZScpLmZpbmQoJy5zLWltZy1tbycpO1xyXG5cdFx0XHRcdC8vIFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gXHRpZiAoJG1wNEFsdEltYWdlLmxlbmd0aCkge1xyXG5cdFx0XHRcdC8vIFx0XHRpZiAoJG1wNEFsdEltYWdlLmVxKDApLmhhc0NsYXNzKCdzLWltZy1tbycpKSB7XHJcblx0XHRcdFx0Ly8gXHRcdFx0JG1wNEFsdEltYWdlLmVxKDApLnJlbW92ZUNsYXNzKCdzLWltZy1tbycpO1xyXG5cdFx0XHRcdC8vIFx0XHR9XHJcblx0XHRcdFx0Ly8gXHR9XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vaWYgKHZpZGVvVmlldyA9PT0gJ2xheWVyJykge1xyXG5cdFx0XHRcdFx0dmFyIHZpZGVvVGl0bGUgPSAkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkuZGF0YSgndmlkZW8tdGl0bGUnKTtcclxuXHRcdFx0XHRcdGlmICgkKCcjJyArIHZpZGVvRGF0YS5kaXZJRCkuY2xvc2VzdCgnLmpzLXZpZGVvJykuZmluZCgnLnMtbXA0LXZpZGVvLXBsYXknKS5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0JCgnIycgKyB2aWRlb0RhdGEuZGl2SUQpLmNsb3Nlc3QoJy5qcy12aWRlbycpLmZpbmQoJy5zLW1wNC12aWRlby1wbGF5JykuYXR0cigndGl0bGUnLCB2aWRlb1RpdGxlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQvL31cclxuXHJcblx0XHRcdFx0ZGl2VGFyZ2V0LnRyaWdnZXIoJ2JnTXA0UmVhZHknLCBpZHgpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRnZXRTY2VuZTdQYXRoOiBmdW5jdGlvbihwRGFtUGF0aCwgZWxlbWVudCkge1xyXG5cdFx0XHRcdHZhciAkZ25iUnVubW9kZUluZm8gPSAkKCcjZ25iUnVubW9kZUluZm8nKSxcclxuXHRcdFx0XHRcdHNjZW5lN1BhdGggPSAkKCcjc2NlbmU3ZG9tYWluJykudmFsKCksXHJcblx0XHRcdFx0XHRkYW1QYXRoID0gcERhbVBhdGggfHwgJycsXHJcblx0XHRcdFx0XHRzdWJzdGl0dXRpb25QYXRoID0gJyc7XHJcblxyXG5cdFx0XHRcdGlmICgkZ25iUnVubW9kZUluZm8ubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRpZiAoJGduYlJ1bm1vZGVJbmZvLnZhbCgpID09PSAncWEnIHx8ICRnbmJSdW5tb2RlSW5mby52YWwoKSA9PT0gJ2xpdmUnKSB7XHJcblx0XHRcdFx0XHRcdHN1YnN0aXR1dGlvblBhdGggPSBkYW1QYXRoLnJlcGxhY2UoJy9jb250ZW50L2RhbS9zYW1zdW5nLycsIHNjZW5lN1BhdGggKyAncDUvJyk7XHJcblx0XHRcdFx0XHRcdHN1YnN0aXR1dGlvblBhdGggPSBzdWJzdGl0dXRpb25QYXRoLnJlcGxhY2UoJy9pcy9pbWFnZS8nLCAnL2lzL2NvbnRlbnQvJyk7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgdG9DaGFuZ2VEYXRhU3RyID0gZWxlbWVudC5hdHRyKCdkYXRhLXZpZC1kYXRhJykudG9TdHJpbmcoKTtcclxuXHRcdFx0XHRcdFx0dG9DaGFuZ2VEYXRhU3RyID0gdG9DaGFuZ2VEYXRhU3RyLnJlcGxhY2UoZGFtUGF0aCwgc3Vic3RpdHV0aW9uUGF0aCk7XHJcblx0XHRcdFx0XHRcdGVsZW1lbnQuYXR0cignZGF0YS12aWQtZGF0YScsIHRvQ2hhbmdlRGF0YVN0cik7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzdWJzdGl0dXRpb25QYXRoID0gZGFtUGF0aDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c3Vic3RpdHV0aW9uUGF0aCA9IGRhbVBhdGg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gc3Vic3RpdHV0aW9uUGF0aDtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cclxuXHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdCQuZWFjaChbJ3Nob3cnLCAnaGlkZSddLCBmdW5jdGlvbiAoaSwgZXYpIHtcclxuXHRcdFx0dmFyIGVsID0gJC5mbltldl07XHJcblx0XHRcdCQuZm5bZXZdID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHRoaXMudHJpZ2dlcignYWVtXycgKyBldik7XHJcblx0XHRcdFx0cmV0dXJuIGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdH07XHJcblx0XHR9KTtcclxuXHJcblx0XHRuYW1lc3BhY2UudmlkZW8uaW5pdCgkKCdib2R5JykpO1xyXG5cdH0pO1xyXG59KSh3aW5kb3csIHdpbmRvdy4kLCB3aW5kb3cualF1ZXJ5KTtcclxuXHJcblxyXG5cclxuXHJcbi8qIVxyXG4gKiBzYW1zdW5nLmNvbSAtIFBoYXNlMiAtIFZpZGVvIE1wNCBBdXRvcGxheVxyXG4gKiBzcmMgOiBqcy9zcmMvc21nL2FlbS9jb21wb25lbnRzL3ZpZGVvL3NtZy5hZW0uY29tcG9uZW50cy52aWRlby5qc1xyXG4gKlxyXG4gKiBAdmVyc2lvbiAyLjAuMFxyXG4gKiBAc2luY2UgMjAxNy4wMS4wMlxyXG4gKi9cclxuO1xyXG4oZnVuY3Rpb24od2luLCAkKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nKSB7XHJcblx0XHR3aW4uc21nID0ge307XHJcblx0fVxyXG5cclxuXHRpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB3aW4uc21nLmFlbSkge1xyXG5cdFx0d2luLnNtZy5hZW0gPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLmNvbXBvbmVudHMpIHtcclxuXHRcdHdpbi5zbWcuYWVtLmNvbXBvbmVudHMgPSB7fTtcclxuXHR9XHJcblxyXG5cdGlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbi5zbWcuYWVtLmNvbXBvbmVudHMudmlkZW8pIHtcclxuXHRcdHdpbi5zbWcuYWVtLmNvbXBvbmVudHMudmlkZW8gPSB7fTtcclxuXHR9XHJcblxyXG5cdHZhciBuYW1lc3BhY2UgPSB3aW4uc21nLmFlbS5jb21wb25lbnRzLnZpZGVvO1xyXG5cclxuXHRuYW1lc3BhY2UubXA0QXV0b1BsYXkgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyIGN1c3RvbSA9IHtcclxuXHRcdFx0XHRib2R5OiAnYm9keScsXHJcblx0XHRcdFx0ZXZ0OiB7XHJcblx0XHRcdFx0XHRjb25uZWN0OiB7fSxcclxuXHRcdFx0XHRcdHJlc3BvbnNpdmVNZ3I6IHtcclxuXHRcdFx0XHRcdFx0cmVzcG9uc2l2ZUNoYW5nZTogJ3Jlc3BvbnNpdmVDaGFuZ2UnXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IC8vY3VzdG9tIG9iamVjdFxyXG5cclxuXHRcdHZhciByZXNwb25zaXZlTWFuYWdlciA9IHtcclxuXHRcdFx0Z2V0T2JqZWN0SW5mbzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdHJlc3BvbnNpdmVOYW1lOiB0aGlzLnJlc3BvbnNpdmVOYW1lLFxyXG5cdFx0XHRcdFx0ZGV2aWNlOiB0aGlzLmRldmljZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0aW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5jb25zdGFudHMoKTtcclxuXHRcdFx0XHR0aGlzLmJpbmRFdnRzKCk7XHJcblx0XHRcdFx0dGhpcy5kZWZTZXR1cCgpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb25zdGFudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuZGV2aWNlID0ge1xyXG5cdFx0XHRcdFx0bW9iaWxlOiB7IHN1cHBvcnQ6IHRydWUsIG5hbWU6ICdtb2JpbGUnLCB3aWR0aDogNzY4IH0sXHJcblx0XHRcdFx0XHR0YWJsZXQ6IHsgc3VwcG9ydDogZmFsc2UsIG5hbWU6ICd0YWJsZXQnLCB3aWR0aDogMTI4MCB9LFxyXG5cdFx0XHRcdFx0ZGVza3RvcDogeyBzdXBwb3J0OiB0cnVlLCBuYW1lOiAnZGVza3RvcCcgfVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLmV2dCA9IGN1c3RvbS5ldnQucmVzcG9uc2l2ZU1ncjtcclxuXHRcdFx0fSxcclxuXHRcdFx0YmluZEV2dHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMucmVzaXplTGlzdGVuZXIoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZGVmU2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMucmVzcG9uc2l2ZUNoYW5nZSgpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRyZXNpemVMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh3aW4pLm9uKCdyZXNpemUnLCAkLnByb3h5KHRoaXMucmVzcG9uc2l2ZUNoYW5nZSwgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRyZXNwb25zaXZlQ2hhbmdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgZG9jID0gd2luLmRvY3VtZW50LFxyXG5cdFx0XHRcdFx0dyA9IHdpbi5pbm5lcldpZHRoIHx8IGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jLmJvZHkuY2xpZW50V2lkdGg7XHJcblxyXG5cdFx0XHRcdHZhciByZXNwb25zaXZlTmFtZTtcclxuXHRcdFx0XHRpZiAodGhpcy5kZXZpY2UubW9iaWxlLnN1cHBvcnQgJiYgdyA8PSB0aGlzLmRldmljZS5tb2JpbGUud2lkdGgpIHtcclxuXHRcdFx0XHRcdHJlc3BvbnNpdmVOYW1lID0gdGhpcy5kZXZpY2UubW9iaWxlLm5hbWU7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmRldmljZS50YWJsZXQuc3VwcG9ydCAmJiB3IDw9IHRoaXMuZGV2aWNlLnRhYmxldC53aWR0aCkge1xyXG5cdFx0XHRcdFx0cmVzcG9uc2l2ZU5hbWUgPSB0aGlzLmRldmljZS50YWJsZXQubmFtZTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuZGV2aWNlLmRlc2t0b3Auc3VwcG9ydCkge1xyXG5cdFx0XHRcdFx0cmVzcG9uc2l2ZU5hbWUgPSB0aGlzLmRldmljZS5kZXNrdG9wLm5hbWU7XHJcblx0XHRcdFx0fSBlbHNlIHJldHVybjtcclxuXHJcblx0XHRcdFx0dmFyIHJlc09iaiA9IHsgcmVzcG9uc2l2ZU5hbWU6ICcnIH07XHJcblx0XHRcdFx0aWYgKCF0aGlzLnJlc3BvbnNpdmVOYW1lKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlc3BvbnNpdmVOYW1lID0gcmVzcG9uc2l2ZU5hbWU7XHJcblx0XHRcdFx0XHQvL3RyaWdnZXIsIGV2ZW50IGN1c3RvbVxyXG5cdFx0XHRcdFx0cmVzT2JqLnJlc3BvbnNpdmVOYW1lID0gdGhpcy5yZXNwb25zaXZlTmFtZTtcclxuXHRcdFx0XHRcdCQoY3VzdG9tLmV2dC5jb25uZWN0KS50cmlnZ2VyKHRoaXMuZXZ0LnJlc3BvbnNpdmVDaGFuZ2UsIHJlc09iaik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnJlc3BvbnNpdmVOYW1lICE9PSByZXNwb25zaXZlTmFtZSkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlc3BvbnNpdmVOYW1lID0gcmVzcG9uc2l2ZU5hbWU7XHJcblx0XHRcdFx0XHRcdC8vdHJpZ2dlciwgZXZlbnQgY3VzdG9tXHJcblx0XHRcdFx0XHRcdHJlc09iai5yZXNwb25zaXZlTmFtZSA9IHRoaXMucmVzcG9uc2l2ZU5hbWU7XHJcblx0XHRcdFx0XHRcdCQoY3VzdG9tLmV2dC5jb25uZWN0KS50cmlnZ2VyKHRoaXMuZXZ0LnJlc3BvbnNpdmVDaGFuZ2UsIHJlc09iaik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIG9yaWVudGF0aW9uY2hhbmdlTWFuYWdlciA9IHtcclxuXHRcdFx0aW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5vcmllbnRhdGlvbmNoYW5nZUxpc3RlbmVyKCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdG9yaWVudGF0aW9uY2hhbmdlTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQod2luKS5vbignb3JpZW50YXRpb25jaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHQkKHdpbikudHJpZ2dlcigncmVzaXplLm1wNEF1dG9QbGF5Jyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR2YXIgdmlkZW9NYW5hZ2VyID0ge1xyXG5cdFx0XHRpbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnNldEVsbXRzKCk7XHJcblx0XHRcdFx0aWYgKCF0aGlzLnZpZGVvcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvcmllbnRhdGlvbmNoYW5nZU1hbmFnZXIuaW5pdCgpO1xyXG5cdFx0XHRcdHJlc3BvbnNpdmVNYW5hZ2VyLmluaXQoKTtcclxuXHRcdFx0XHR0aGlzLmRlZlNldHVwKCk7XHJcblx0XHRcdFx0dGhpcy5iaW5kRXZ0cygpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRzZXRFbG10czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHRcdFx0XHR0aGlzLnZpZGVvcyA9IG51bGw7XHJcblx0XHRcdFx0JCgnLm1wNC12aWRlbycpLmVhY2goZnVuY3Rpb24oaSkge1xyXG5cdFx0XHRcdFx0dmFyIGVsID0gJCh0aGlzKTtcclxuXHRcdFx0XHRcdHZhciBkYXRhID0gZWwuZGF0YSgndmlkLWRhdGEnKTtcclxuXHRcdFx0XHRcdGlmIChkYXRhLnNjcm9sbFBsYXkgPT09ICd0cnVlJykge1xyXG5cdFx0XHRcdFx0XHRpZiAoIV90aGlzLnZpZGVvcykge1xyXG5cdFx0XHRcdFx0XHRcdC8vX3RoaXMudmlkZW9zID0gZWwuZmluZCgndmlkZW8nKTtcclxuXHRcdFx0XHRcdFx0XHRfdGhpcy52aWRlb3MgPSAkKCcjJyArIGRhdGEuZGl2SUQpLmZpbmQoJ3ZpZGVvJyk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly9fdGhpcy52aWRlb3MgPSBfdGhpcy52aWRlb3MuYWRkKGVsLmZpbmQoJ3ZpZGVvJykpO1xyXG5cdFx0XHRcdFx0XHRcdF90aGlzLnZpZGVvcyA9IF90aGlzLnZpZGVvcy5hZGQoJCgnIycgKyBkYXRhLmRpdklEKS5maW5kKCd2aWRlbycpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0aWYgKGRhdGEucGxheU9uY2UgPT09ICd0cnVlJykge1xyXG5cdFx0XHRcdFx0XHRcdF90aGlzLnZpZGVvcy5lcShpKS5kYXRhKCdwbGF5LW9uY2UnLCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRoaXMucGxheVN0YXR1cyA9IFtdO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRiaW5kRXZ0czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5yZXNwb25zaXZlTGlzdGVuZXIoKTtcclxuXHRcdFx0XHQvLyBpZihkb2N1bWVudC5kb2N1bWVudE1vZGUgPT09IDgpIHtcclxuXHRcdFx0XHQvLyAgIHRoaXMuc3RhdGVDaGFuZ2VMaXN0ZW5lcigpO1xyXG5cdFx0XHRcdC8vIH1cclxuXHRcdFx0XHR0aGlzLnZpZGVvcy5lYWNoKGZ1bmN0aW9uKGkpIHtcclxuXHRcdFx0XHRcdHZhciBlbCA9ICQodGhpcyk7XHJcblx0XHRcdFx0XHRlbC5vbignbG9hZGVkbWV0YWRhdGEnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0ZWwuYXR0cignZGF0YS1sb2FkZWQtbWV0YWRhdGEnLCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0dmlkZW9NYW5hZ2VyLm1hdGNoaW5nKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZGVmU2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMucmVzcG9uc2l2ZVN1cHBvcnQoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0cmVzcG9uc2l2ZUxpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKGN1c3RvbS5ldnQuY29ubmVjdCkub24oY3VzdG9tLmV2dC5yZXNwb25zaXZlTWdyLnJlc3BvbnNpdmVDaGFuZ2UsICQucHJveHkodGhpcy5yZXNwb25zaXZlU3VwcG9ydCwgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0cmlnZ2VyUmVzcG9uc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoY3VzdG9tLmV2dC5jb25uZWN0KS50cmlnZ2VyKGN1c3RvbS5ldnQucmVzcG9uc2l2ZU1nci5yZXNwb25zaXZlQ2hhbmdlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c3VwcG9ydDoge1xyXG5cdFx0XHRcdG1vYmlsZTogZmFsc2UsXHJcblx0XHRcdFx0ZGVza3RvcDogdHJ1ZVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRyZXNwb25zaXZlU3VwcG9ydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIF8gPSB0aGlzLFxyXG5cdFx0XHRcdFx0cmVzSW5mbyA9IHJlc3BvbnNpdmVNYW5hZ2VyLmdldE9iamVjdEluZm8oKSxcclxuXHRcdFx0XHRcdHN1cHBvcnRFdmVudEhhbmRsZXIgPSBmdW5jdGlvbihzdXBwb3J0Qm9vbGVhbikge1xyXG5cdFx0XHRcdFx0XHRpZiAoc3VwcG9ydEJvb2xlYW4pIHtcclxuXHRcdFx0XHRcdFx0XHRfLmJpbmRSZXNpemVMaXN0ZW5lcigpO1xyXG5cdFx0XHRcdFx0XHRcdF8uYmluZFNjcm9sbExpc3RlbmVyKCk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Xy51bmJpbmRSZXNpemVMaXN0ZW5lcigpO1xyXG5cdFx0XHRcdFx0XHRcdF8udW5iaW5kU2Nyb2xsTGlzdGVuZXIoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzd2l0Y2ggKHJlc0luZm8ucmVzcG9uc2l2ZU5hbWUpIHtcclxuXHRcdFx0XHRcdGNhc2UgcmVzSW5mby5kZXZpY2UubW9iaWxlLm5hbWU6XHJcblx0XHRcdFx0XHRcdHN1cHBvcnRFdmVudEhhbmRsZXIodGhpcy5zdXBwb3J0Lm1vYmlsZSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSByZXNJbmZvLmRldmljZS5kZXNrdG9wLm5hbWU6XHJcblx0XHRcdFx0XHRcdHN1cHBvcnRFdmVudEhhbmRsZXIodGhpcy5zdXBwb3J0LmRlc2t0b3ApO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGJpbmRTY3JvbGxMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh3aW4pLm9mZignc2Nyb2xsLm1wNEF1dG9QbGF5Jykub24oJ3Njcm9sbC5tcDRBdXRvUGxheScsICQucHJveHkodGhpcy5tYXRjaGluZywgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRiaW5kUmVzaXplTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQod2luKS5vZmYoJ3Njcm9sbC5tcDRBdXRvUGxheScpLm9uKCdyZXNpemUubXA0QXV0b1BsYXknLCAkLnByb3h5KHRoaXMubWF0Y2hpbmcsIHRoaXMpKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0dW5iaW5kU2Nyb2xsTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQod2luKS5vZmYoJ3Njcm9sbC5tcDRBdXRvUGxheScsICQucHJveHkodGhpcy5tYXRjaGluZywgdGhpcykpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR1bmJpbmRSZXNpemVMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCh3aW4pLm9mZigncmVzaXplLm1wNEF1dG9QbGF5JywgJC5wcm94eSh0aGlzLm1hdGNoaW5nLCB0aGlzKSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdG1hdGNoaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgd2luZG93VG9wUG9zaXRpb24gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCxcclxuXHRcdFx0XHRcdHdpbmRvd0JvdHRvbVBvc2l0aW9uID0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSArIHdpbmRvd1RvcFBvc2l0aW9uLFxyXG5cdFx0XHRcdFx0X3RoaXMgPSB0aGlzO1xyXG5cclxuXHRcdFx0XHRpZiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSA4KSB7XHJcblx0XHRcdFx0XHR0aGlzLnZpZGVvcy5lYWNoKGZ1bmN0aW9uKGspIHtcclxuXHRcdFx0XHRcdFx0Ly92YXIgd3JhcCA9ICQodGhpcykuY2xvc2VzdCgnLm1hLWctYy1oYWxmdGV4dF9fdmlkZW8nKTtcclxuXHRcdFx0XHRcdFx0Ly9pZih3cmFwLnNpemUoKSA9PT0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRcdFx0dmFyIGVsbXQgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdFx0XHRcdGVsbXRIZWlnaHQgPSBlbG10Lm91dGVySGVpZ2h0KCksXHJcblx0XHRcdFx0XHRcdFx0ZWxtdFRvcFBvc2l0aW9uID0gZWxtdC5vZmZzZXQoKS50b3AsXHJcblx0XHRcdFx0XHRcdFx0ZWxtdEJvdHRvbVBvc2l0aW9uID0gKGVsbXRUb3BQb3NpdGlvbiArIGVsbXRIZWlnaHQpO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKHdpbmRvd1RvcFBvc2l0aW9uIDw9IGVsbXRCb3R0b21Qb3NpdGlvbiAmJiB3aW5kb3dCb3R0b21Qb3NpdGlvbiA+PSBlbG10VG9wUG9zaXRpb24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIV90aGlzLnBsYXlTdGF0dXNba10pIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh3aW4udmlkZW9qcykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL3ZpZGVvanMoZWxtdC5hdHRyKCdpZCcpKS5jdXJyZW50VGltZSgwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly92aWRlb2pzKGVsbXQuYXR0cignaWQnKSkucGxheSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRfdGhpcy5wbGF5U3RhdHVzW2tdID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKF90aGlzLnBsYXlTdGF0dXNba10pIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh3aW4udmlkZW9qcykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL3ZpZGVvanMoZWxtdC5hdHRyKCdpZCcpKS5wYXVzZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRfdGhpcy5wbGF5U3RhdHVzW2tdID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy52aWRlb3MuZWFjaChmdW5jdGlvbihqKSB7XHJcblx0XHRcdFx0XHRcdHZhciBlbG10ID0gJCh0aGlzKSxcclxuXHRcdFx0XHRcdFx0XHRlbG10SGVpZ2h0ID0gZWxtdC5vdXRlckhlaWdodCgpLFxyXG5cdFx0XHRcdFx0XHRcdGVsbXRUb3BQb3NpdGlvbiA9IGVsbXQub2Zmc2V0KCkudG9wLFxyXG5cdFx0XHRcdFx0XHRcdGVsbXRCb3R0b21Qb3NpdGlvbiA9IChlbG10VG9wUG9zaXRpb24gKyBlbG10SGVpZ2h0KTtcclxuXHJcblx0XHRcdFx0XHRcdGlmIChlbG10LmRhdGEoJ3BsYXktb25jZScpICYmIF90aGlzLnBsYXlTdGF0dXNbal0pIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdGlmICh3aW5kb3dUb3BQb3NpdGlvbiA8PSBlbG10Qm90dG9tUG9zaXRpb24gJiYgd2luZG93Qm90dG9tUG9zaXRpb24gPj0gZWxtdFRvcFBvc2l0aW9uKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFfdGhpcy5wbGF5U3RhdHVzW2pdKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZWxtdC5kYXRhKCdsb2FkZWQtbWV0YWRhdGEnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbG10WzBdLmN1cnJlbnRUaW1lID0gMDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxtdFswXS5wbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdF90aGlzLnBsYXlTdGF0dXNbal0gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChfdGhpcy5wbGF5U3RhdHVzW2pdKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZWxtdC5kYXRhKCdsb2FkZWQtbWV0YWRhdGEnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbG10WzBdLnBhdXNlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdF90aGlzLnBsYXlTdGF0dXNbal0gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0c3RhdGVDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIF8gPSB0aGlzO1xyXG5cdFx0XHRcdCQoJy5tYS1nLWMtaGFsZnRleHQgLm1hLWctYy1oYWxmdGV4dF9fdmlkZW8gLnMtdmlkZW8nKS5lYWNoKGZ1bmN0aW9uKGlkeCwgZWxtdCkge1xyXG5cdFx0XHRcdFx0ZWxtdC5hdHRhY2hFdmVudCgncGxheVN0YXRlQ2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGlmIChlbG10LlBsYXlTdGF0ZSA9PT0gMikge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZWxtdC5EdXJhdGlvbikgKiAxMDAwO1xyXG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRlbG10LnBhdXNlKCk7XHJcblx0XHRcdFx0XHRcdFx0fSwgZHVyYXRpb24pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbihjb250YWluZXIpIHtcclxuXHRcdFx0aWYgKCEodGhpcy5jb250YWluZXIgPSBjb250YWluZXIpLnNpemUoKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0dmlkZW9NYW5hZ2VyLmluaXQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0OiBpbml0LFxyXG5cdFx0XHR2aWRlb01hbmFnZXI6IHZpZGVvTWFuYWdlclxyXG5cdFx0fVxyXG5cdH0pKCk7XHJcblxyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoJCgnYm9keScpLmhhc0NsYXNzKCd0b3VjaC1kZXZpY2UnKSkgcmV0dXJuO1xyXG5cdFx0bmFtZXNwYWNlLm1wNEF1dG9QbGF5LmluaXQoJCgnYm9keScpKTtcclxuXHR9KTtcclxuXHJcbn0pKHdpbmRvdywgd2luZG93LmpRdWVyeSk7XHJcbiIsIi8qXHJcbkJyaWdodGNvdmUgQ2hyb21lbGVzcyBQbGF5ZXIgTW9kdWxlXHJcbkB2ZXJzaW9uIDogMS4xXHJcbkBhdXRob3IgOiBXLU1BUkNcclxuQERhdGUgOiAyMDE2LTA4LTAyXHJcblxyXG4yMDE2LTA1LTMxXHTtgazroazrpqzsiqQg66as7IKs7J207KeVIOydtOyKiCDsiJjsoJVcclxuXHRcdFx0d2ViKGZsYXNoIG9ubHkgYXBpKSB2cyBtb2JpbGUoc21hcnQgYXBpKSDsoJHsho3tmZjqsr3sl5Ag65Sw6528IEFQSSDrtoTquLDsspjrpqxcclxuXHRcdFx07Ji064uI7LaU7Ja0IChzX2NvZGVfbmV4dC5qcykg66qo65OI6rO8IEFQSSDstqnrj4wg67Cc7IOdXHJcbjIwMTYtMDYtMTVcdO2UhOuhnO2GoOy9nCDqtazrtoTtlZjsl6wgSlMgQVBJIOuhnOuUqS0gQnJpZ2h0Y292ZUV4cGVyaWVuY2VzIEpTIOuPmeyggSDroZzrlKlcclxuMjAxNi0wNi0yMlx0QUVNIO2MgCDsmpTssq3sgqztla1cclxuXHRcdFx07Ju57ZGc7KSAIOusuOuylSDsiJjsoJVcclxuXHRcdFx0Q2hyb21lbGVzcyBMYXllciDtg4DsnoUgQ2xvc2Xsi5wg7J286rSEIOuLq+2emCDrrLjsoJwgKGZ1bmN0aW9uIGJjY0xheWVyQ2xvc2UpIOyImOyglVxyXG4yMDE2LTA2LTI5ICDtgqTrs7Trk5wg7Yyo64SQIDog7Jik7Yag7ZSM66CI7J20IOygkeq3vOyEsSDsiJjsoJVcclxuICAgICAgICAgICAg7YKk67O065OcIO2MqOuEkCA6IOyerOyDnS/soJXsp4Ag7KCR6re87ISxIOyImOyglVxyXG5cdFx0XHTtgqTrs7Trk5wg7Yyo64SQIDogQ2xvc2VkIENhcHRpb24gQ29udHJvbGwg7KCR6re87ISxIOyImOyglVxyXG4yMDE2LTA3LTA2ICDtgazroazrpqzsiqQg7ZSM66CI7J207Ja0IENTUyDsiJjsoJUgOiDrtojtlYTsmpQg7JiB7JetIOyCreygnCDrsI8gZGlzcGxheTppbmxpbmUod2lkdGgsaGVpZ2h0KeuzgOqyvVxyXG4yMDE2LTA3LTE5ICDtgazroazrpqzsiqQg7ZSM66CI7J207Ja0IDEwMCUg7J6F66Cl7IucIOu4jOudvOyasOyggCDtgazquLDsl5Ag66ee7LawIDE2Ojkg67mE7Jyo7J20IOycoOyngOuQmOuPhOuhnSDquLDriqUg7LaU6rCAXHJcbiAgICAgICAgICAgIC0g66qo67CU7J28IO2ZmOqyveyXkOyEnCDtmozsoITsi5wg67mE7JyoIOycoOyngCDquLDriqVcclxuMjAxNi0wOC0wMiBIVE1MNe2UjOugiOydtOyWtCBhdXRvcGxheSBmdW5jdGlvbiDsiJjsoJVcclxuICAgICAgICAgICAtIGJyaWdodGNvdmUgYXBpIGxvYWRlZG1ldGFkYXRhIGV2ZW50IOyYpOulmFxyXG5cdFx0ICAg7YGs66Gs66as7IqkIO2UjOugiOydtOyWtCAmIEhUTUw1IO2UjOugiOydtOyWtCDruYTrlJTsmKQg7KCV67O0IGhhc2htYXAgcHV0XHJcblx0XHQgICAtIO2VnCDtjpjsnbTsp4DrgrTsl5DshJwg65GQ6rCcIOydtOyDgeydmCDtlIzroIjsnbTslrQg7IOd7ISxIOqwgOuKpVxyXG5cdFx0ICAgSFRNTDXtlIzroIjsnbTslrQgQ1NTIOy2lOqwgDogPCEtLWJvbS1zdHVkaW8gY3NzIGFkZC0tPlxyXG4yMDE2LTEyLTAxIDEuIG9tbml0dXJlIOq0gOugqCBmdW5jdGlvbiBvblBhbHksIG9uU3RvcCwgb25Qcm9ncmVzcyDsgq3soJxcclxuXHRcdCAgIDIuIGNsaWNrIOydtOuypO2KuCBvbihjbGljaynroZwg67OA6rK9XHJcblx0XHQgICAgLSBiY2pRdWVyeShcIi5icmlnaHRjb3ZlLWJjNS1idG4tY2xvc2VcIikuY2xpY2sgPT4gYmNqUXVlcnkoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnJpZ2h0Y292ZS1iYzUtYnRuLWNsb3NlJywgZnVuY3Rpb24oKXtcclxuXHRcdCAgICAtIGJjalF1ZXJ5KFwiLmJyaWdodGNvdmUtYmNjLWJ0bi1jbG9zZVwiKS5jbGljayA9PiBiY2pRdWVyeShkb2N1bWVudCkub24oJ2NsaWNrJywgJy5icmlnaHRjb3ZlLWJjYy1idG4tY2xvc2UnLCBmdW5jdGlvbigpe1xyXG5cclxuMjAxNy0wNC0yNCDsi6Dqt5zqta3qsIDsmqkgdmVyLjUuMjAuMSDqta3qsIDsvZTrk5wg7LaU6rCAXHJcblx0dmFyIGJjNXBsYXllckRhdGEgPSB7XHJcblx0XHQuLi5cclxuXHRcdEFMIDogeydhY2NvdW50SWQnIDogJzUzOTU0NzQ5MDAwMDEnLCAncGxheWVySWQnIDogJ1MxV1BtUzRSZyd9LFxyXG5cdFx0TEIgOiB7J2FjY291bnRJZCcgOiAnNTM1OTc2OTE4NTAwMScsICdwbGF5ZXJJZCcgOiAnQnk1dXp0TkFlJ30sXHJcblx0XHRNTSA6IHsnYWNjb3VudElkJyA6ICc1Mzk1NDc0OTAyMDAxJywgJ3BsYXllcklkJyA6ICdCSldQWHQ0QWwnfVxyXG5cdH07XHJcblxyXG4yMDE3LTEyLTA2IEdNQyDqta3qsIDsvZTrk5wg7LaU6rCAIHZlci41LjI4LjEgKDUuWOuMgCDsg53shLHqsIDriqXtlZwg7LWc7IaM67KE7KCE7J20IDUuMjguMSlcclxuXHR2YXIgYmM1cGxheWVyRGF0YSA9IHtcclxuXHRcdC4uLlxyXG5cdFx0R0NTIDogeydhY2NvdW50SWQnIDogJzE4NTIxMTMwMDgwMDEnLCAncGxheWVySWQnIDogJ0IxSFgzb1hiRyd9LFxyXG5cdFx0U0MgOiB7J2FjY291bnRJZCcgOiAnMTI3NTM4MDUwMTAwMScsICdwbGF5ZXJJZCcgOiAnckpVWk1iQlpHJ30sXHJcblx0XHRMRUQgOiB7J2FjY291bnRJZCcgOiAnMjE3MjU2MzIyOTAwMScsICdwbGF5ZXJJZCcgOiAnU0pFcU1iU1dNJ31cclxuXHR9O1xyXG5cclxuMjAxNy0xMi0xMyDruIzrnbzsnbTtirjsvZTruIwgU3VwcG9ydCBHUk8g6rWt6rCA7L2U65OcIOy2lOqwgCB2ZXIuNS4yOC4xICg1LljrjIAg7IOd7ISx6rCA64ql7ZWcIOy1nOyGjOuyhOyghOydtCA1LjI4LjEpXHJcblx0dmFyIGJjNXBsYXllckRhdGEgPSB7XHJcblx0XHQuLi5cclxuXHRcdFVLX0NTIDogeydhY2NvdW50SWQnIDogJzU2NzU3ODc5NjkwMDEnLCAncGxheWVySWQnIDogJ0hrbWpkNDBiTSd9LFxyXG5cdFx0REVfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTY3NTc4Nzk3MDAwMScsICdwbGF5ZXJJZCcgOiAnQnl4Q0J1RUNaRyd9LFxyXG5cdFx0QkVfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTY3NTc4Nzk3MTAwMScsICdwbGF5ZXJJZCcgOiAncjFTWklWUldmJ30sXHJcblx0XHRCRV9GUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1Njc1Nzg3OTcyMDAxJywgJ3BsYXllcklkJyA6ICdyMTZ4T0VDYnonfSxcclxuXHRcdE5MX0NTIDogeydhY2NvdW50SWQnIDogJzU2NzU3ODgwMDcwMDEnLCAncGxheWVySWQnIDogJ0h5bVhPVkFXZid9XHJcblx0fTtcclxuXHJcbjIwMTgtMDEtMjIgQ1Mg7Iug6recIOq1reqwgOy9lOuTnCDstpTqsIAgXHJcblxyXG5cdFVTX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzUwMDEnLCAncGxheWVySWQnIDogJ1NKQzk2Z3NOZid9LFxyXG5cdENBX0ZSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzYwMDEnLCAncGxheWVySWQnIDogJ3J5ZTYwZWlORyd9LFxyXG5cdENBX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzcwMDEnLCAncGxheWVySWQnIDogJ0JKSm5DeGk0eid9LFxyXG5cdE1YX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzgwMDEnLCAncGxheWVySWQnIDogJ1N5RlRoYmk0Ryd9LFxyXG5cdEJSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzkwMDEnLCAncGxheWVySWQnIDogJ3J5cFhoYmpFZid9LFxyXG5cdExBVElOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODAwMDEnLCAncGxheWVySWQnIDogJ3JKM3FuWm9Weid9LFxyXG5cdExBVElOX0VOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODEwMDEnLCAncGxheWVySWQnIDogJ3JKU25uWmpOeid9LFxyXG5cdFZFX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODIwMDEnLCAncGxheWVySWQnIDogJ0h5eVRuV280TSd9LFxyXG5cdENPX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODMwMDEnLCAncGxheWVySWQnIDogJ0Ixc2Q2ZWpFZid9LFxyXG5cdEFSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODQwMDEnLCAncGxheWVySWQnIDogJ0J5R0JDbG9Weid9LFxyXG5cdENMX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODUwMDEnLCAncGxheWVySWQnIDogJ0h5alRDbHNWZid9LFxyXG5cdFBFX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODcwMDEnLCAncGxheWVySWQnIDogJ0gxcVhwWnM0eid9LFxyXG5cdFNHX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODgwMDEnLCAncGxheWVySWQnIDogJ0J5d1k2Z29Oeid9LFxyXG5cdEFVX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODkwMDEnLCAncGxheWVySWQnIDogJ3JrWlpQQ2xzRWYnfSxcclxuXHROWl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzA5NzAwODkwMDAxJywgJ3BsYXllcklkJyA6ICdIMWpEMHhzVmYnfSxcclxuXHRJRF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzA5NzAwODkxMDAxJywgJ3BsYXllcklkJyA6ICdySm5PaFppNGYnfSxcclxuXHRUSF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTUzMDAxJywgJ3BsYXllcklkJyA6ICdTa2lKa0dzTkcnfSxcclxuXHRWTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTU1MDAxJywgJ3BsYXllcklkJyA6ICdySm1jVHhpRXonfSxcclxuXHRNWV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTU2MDAxJywgJ3BsYXllcklkJyA6ICdTSnhZdEFaaVZHJ30sXHJcblx0UEhfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU1NzAwMScsICdwbGF5ZXJJZCcgOiAnQko4TTZXajRNJ30sXHJcblx0VFdfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU1ODAwMScsICdwbGF5ZXJJZCcgOiAnckp4cHRwYm80Zid9LFxyXG5cdEpQX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NTkwMDEnLCAncGxheWVySWQnIDogJ0JrNGowbGpWRyd9LFxyXG5cdElOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NjAwMDEnLCAncGxheWVySWQnIDogJ1NrN0NkQ1pqTkcnfSxcclxuXHRDTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTYxMDAxJywgJ3BsYXllcklkJyA6ICdTMXhyNmdzTnonfSxcclxuXHRIS19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTYyMDAxJywgJ3BsYXllcklkJyA6ICdISnNVaGJvVmYnfSxcclxuXHRIS19FTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTYzMDAxJywgJ3BsYXllcklkJyA6ICdIMXZ2aGJvTmYnfSxcclxuXHRJRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTY0MDAxJywgJ3BsYXllcklkJyA6ICdISmdwSUNaalZNJ30sXHJcblx0SVRfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU2NTAwMScsICdwbGF5ZXJJZCcgOiAnSDFNZDJib0VmJ30sXHJcblx0RVNfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU2NjAwMScsICdwbGF5ZXJJZCcgOiAnQnkxRmFXb05HJ30sXHJcblx0SFVfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU2NzAwMScsICdwbGF5ZXJJZCcgOiAnQnllMHJuWm9WRyd9LFxyXG5cdFNFX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NjgwMDEnLCAncGxheWVySWQnIDogJ1NraGw2YmlFZid9LFxyXG5cdERLX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NjkwMDEnLCAncGxheWVySWQnIDogJ0hreFRSaFdqVkcnfSxcclxuXHRGSV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTcxMDAxJywgJ3BsYXllcklkJyA6ICdCeWRrNlppTk0nfSxcclxuXHROT19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTcyMDAxJywgJ3BsYXllcklkJyA6ICdya01lVFdqRXonfSxcclxuXHRGUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTczMDAxJywgJ3BsYXllcklkJyA6ICdTMU9ObldzNEcnfSxcclxuXHRQVF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTc0MDAxJywgJ3BsYXllcklkJyA6ICdya1p3V2FXaVZ6J30sXHJcblx0UExfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU3NTAwMScsICdwbGF5ZXJJZCcgOiAnSHl4WFRXaVZHJ30sXHJcblx0R1JfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU3NjAwMScsICdwbGF5ZXJJZCcgOiAnSGt4N1MzV3NOTSd9LFxyXG5cdENaX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NzcwMDEnLCAncGxheWVySWQnIDogJ1NKT2ZuV2pFZid9LFxyXG5cdFNLX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NzgwMDEnLCAncGxheWVySWQnIDogJ3JrbTdoWm9ORyd9LFxyXG5cdFJPX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NzkwMDEnLCAncGxheWVySWQnIDogJ1NrMkQ2Wm9FRyd9LFxyXG5cdEJHX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODAwMDEnLCAncGxheWVySWQnIDogJ0JrenZhWmpWRyd9LFxyXG5cdEFUX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODEwMDEnLCAncGxheWVySWQnIDogJ1NrYU1SZ2pFeid9LFxyXG5cdENIX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODIwMDEnLCAncGxheWVySWQnIDogJ1NKdW1BeGpFRyd9LFxyXG5cdENIX0ZSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODMwMDEnLCAncGxheWVySWQnIDogJ0J5bE9WQXhvVk0nfSxcclxuXHRMVl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg0MDAxJywgJ3BsYXllcklkJyA6ICdCMUNGQ2xvRUcnfSxcclxuXHRMVF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg1MDAxJywgJ3BsYXllcklkJyA6ICdyeXRjUmxqRXonfSxcclxuXHRFRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg2MDAxJywgJ3BsYXllcklkJyA6ICdyeWZZQWxqRUcnfSxcclxuXHRSU19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg3MDAxJywgJ3BsYXllcklkJyA6ICdTa211M2Fnc0VmJ30sXHJcblx0SFJfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU4ODAwMScsICdwbGF5ZXJJZCcgOiAnQmtjaWFsczRHJ30sXHJcblx0UlVfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU4OTAwMScsICdwbGF5ZXJJZCcgOiAnQkp4ckxhYmlOeid9LFxyXG5cdFVBX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1OTAwMDEnLCAncGxheWVySWQnIDogJ1N5bE5CUlppVkcnfSxcclxuXHRVQV9SVV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTkyMDAxJywgJ3BsYXllcklkJyA6ICdyeWdVUldzTk0nfSxcclxuXHRLWl9SVV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTkzMDAxJywgJ3BsYXllcklkJyA6ICdCSnEzMXpvVkcnfSxcclxuXHRBRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk0MDAxJywgJ3BsYXllcklkJyA6ICdISmdFT1JXaU56J30sXHJcblx0QUVfQVJBQklDX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1OTUwMDEnLCAncGxheWVySWQnIDogJ0gxZWNQMGJpRUcnfSxcclxuXHRJTF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk2MDAxJywgJ3BsYXllcklkJyA6ICdTeXlDQ1pzNEcnfSxcclxuXHRTQV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk3MDAxJywgJ3BsYXllcklkJyA6ICdTa2QwQWJvVnonfSxcclxuXHRTQV9FTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk4MDAxJywgJ3BsYXllcklkJyA6ICdCSmZreUdvRU0nfSxcclxuXHRUUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk5MDAxJywgJ3BsYXllcklkJyA6ICdIa3U5YVdpNE0nfSxcclxuXHRJUkFOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM2MDAwMDEnLCAncGxheWVySWQnIDogJ0hrVlRDV2pWeid9LFxyXG5cdExFVkFOVF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjAxMDAxJywgJ3BsYXllcklkJyA6ICdIa0h3cGxvNE0nfSxcclxuXHRQS19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjAyMDAxJywgJ3BsYXllcklkJyA6ICdTMTJyVGdvRUcnfSxcclxuXHRFR19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjAzMDAxJywgJ3BsYXllcklkJyA6ICdTa29RVGxqVkcnfSxcclxuXHROX0FGUklDQV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA0MDAxJywgJ3BsYXllcklkJyA6ICdTeWVNQ25aak5HJ30sXHJcblx0QUZSSUNBX0VOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM2MDUwMDEnLCAncGxheWVySWQnIDogJ0J5MXNBYmlWTSd9LFxyXG5cdEFGUklDQV9GUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA2MDAxJywgJ3BsYXllcklkJyA6ICdTMU1oaVJiakVmJ30sXHJcblx0QUZSSUNBX1BUX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM2MDcwMDEnLCAncGxheWVySWQnIDogJ1N5WnRuQ2JzNE0nfSxcclxuXHRaQV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA4MDAxJywgJ3BsYXllcklkJyA6ICdTSk5xMFdpNEcnfSxcclxuXHRTSV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA5MDAxJywgJ3BsYXllcklkJyA6ICdySnpmUnhzVmYnfSxcclxuXHRQWV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjEwMDAxJywgJ3BsYXllcklkJyA6ICdTa1RIQ2dvNGYnfSxcclxuXHRVUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjEyMDAxJywgJ3BsYXllcklkJyA6ICdCeUlJMGVpTmYnfSxcclxuXHRMQl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjEzMDAxJywgJ3BsYXllcklkJyA6ICdISks4VGxzVnonfSxcclxuXHRBTF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjE0MDAxJywgJ3BsYXllcklkJyA6ICdISmpvbmdvRWYnfSxcclxuXHRNTV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjE1MDAxJywgJ3BsYXllcklkJyA6ICdya3lPNnhpTk0nfVxyXG5cclxuXHJcbjIwMTgtMDEtMzAg7JeF642w7J207Yq464qUIOq4sOyhtCAxLjExLnjrsoTsoITrjIDsl5DshJwgNS4yNS54IOuyhOyghOycvOuhnCDsl4Xqt7jroIjsnbTrpbwg7JyE7ZWcIOyImOyglVxyXG4yMDE4LTAxLTMwIOugiOydtOyWtCDri6TsnYQg65WMIHZpZGVvanMoKS5kaXNwb3NlKCkg7Iuk7ZaJIFxyXG4gLSDsnbQg66qF66C57Ja066W8IOyTsOyngCDslYrsnLzrqbQgSExT7Y+s66e37J2YIOyYgeyDgSDsnqzsg50g7KSRIGh0bWwg7JeY66as66i87Yq466W8IOyngOyboOydhCDrlYwg7Jik66WY66mU7IS47KeA6rCAIOy2nOugpeuQmOq4sCDrlYzrrLjsl5Ag7LaU6rCA7ZW07KSMLlxyXG5cclxuXHRpZiAod2luZG93LnZpZGVvanMpIHtcclxuXHRcdHZhciBkaXNwb3NlVGFyZ2V0SWQgPSB0YXJnZXQuZmluZCgnLnZpZGVvLWpzJykuYXR0cignaWQnKTtcclxuXHRcdGlmIChkaXNwb3NlVGFyZ2V0SWQpIHtcclxuXHRcdFx0dmlkZW9qcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXNwb3NlVGFyZ2V0SWQpKS5kaXNwb3NlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuMjAxOC0wMS0zMCBicmlnaHRjb3ZlQmM1UGxheWVyTGF5ZXIg7Zi47Lac7IucIGllOCwgaWU5LCBpZTEwLCBpZTExLCBldGMg67iM65287Jqw7KCA67OEIOu2hOq4sOyymOumrCBcclxuIC0g67iM65287Jqw7KCAIOuyhOyghOuzhOuhnCDroZzrk5zrsKnsi53snYQg64uk66W06rKMIOyggeyaqe2VtOyjvOyWtOyVvCB2NS4yNS41IO2UjOugiOydtOyWtOqwgCDsoJzrjIDroZwg7Iuk7ZaJ65Cc64ukLlxyXG5cclxuXHRpZiAoZ2V0SWVWZXJzaW9uKCkgPT09IC0xKSB7IC8vIGllMTEsIGV0Y1xyXG5cdFx0cy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRteVBsYXllci5jYWxsYmFjayh2b2RJZCk7XHJcblx0XHRcdH0sIDUwMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTtcclxuXHR9IGVsc2UgeyAvLyBpZTEwLCBpZTksIGllOFxyXG5cdFx0aWYgKGdldEllVmVyc2lvbigpID09PSA4KSB7XHJcblx0XHRcdHMub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmKHMucmVhZHlTdGF0ZSA9PSBcImxvYWRlZFwiIHx8IHMucmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCIpIHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdG15UGxheWVyLmNhbGxiYWNrKHZvZElkKTtcclxuXHRcdFx0XHRcdH0sIDUwMClcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTtcclxuXHRcdH0gZWxzZSBpZiAoZ2V0SWVWZXJzaW9uKCkgPT09IDkpIHtcclxuXHRcdFx0cy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0bXlQbGF5ZXIuY2FsbGJhY2sodm9kSWQpO1xyXG5cdFx0XHRcdH0sIDUwMCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRiY2pRdWVyeShiYzVJbmZvLnRhcmdldElkKS5hcHBlbmQocyk7XHJcblx0XHR9IGVsc2UgaWYgKGdldEllVmVyc2lvbigpID09PSAxMCkge1xyXG5cdFx0XHRzLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRteVBsYXllci5jYWxsYmFjayh2b2RJZCk7XHJcblx0XHRcdFx0fSwgNTAwKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG4yMDE4LTAxLTMwIGJyaWdodGNvdmVCYzVQbGF5ZXJMYXllciDtmLjstpzsnZggY2FsbGJhY2vtlajsiJgg67OA6rK9XHJcblxyXG5cdHZpZGVvanMoYmM1SW5mby5pZCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHRcdC4uLlxyXG5cclxuXHRcdGlmIChpc0F1dG9QbGF5KSB7XHJcblx0XHRcdGJjalF1ZXJ5KFwiI1wiK2JjNUluZm8uaWQpLmZpbmQoXCIudmpzLWJpZy1wbGF5LWJ1dHRvblwiKS50cmlnZ2VyKCdjbGljaycpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gYmM1TXlQbGF5ZXIub24oJ3BsYXknKSDsnbTrsqTtirjqsIAgaWU5LCBpZTEw7JeQ7IScIOuPmeyeke2VmOyngCDslYrslYTshJwgdHJpZ2dlcignY2xpY2snKSDsnLzroZwg7IiY7KCV7ZWoLlxyXG5cclxuXHRcdGlmIChnZXRJZVZlcnNpb24oKSA9PT0gOSB8fCBnZXRJZVZlcnNpb24oKSA9PT0gMTApIHsgLy8gdjUuMjQgbHVuYS1za2luIGNhcHRpb24gaG92ZXJcclxuXHRcdFx0YmNqUXVlcnkoXCIjXCIrYmM1SW5mby5pZCkuZmluZCgnLnZqcy1jYXB0aW9ucy1idXR0b24nKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdGJjalF1ZXJ5KGUuY3VycmVudFRhcmdldCkuZmluZCgnLnZqcy1tZW51LWNvbnRlbnQnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAncmdiYSg0MywgNTEsIDYzLCAwLjcpJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Ly8gdjUuMjQuNS4g7J2YIGx1bmHsiqTtgqjsnYDsnZgg7Lqh7IWYIOyXmOumrOuovO2KuCAudmpzLWNhcHRpb25zLWJ1dHRvbiA+IC52anMtbWVudS1jb250ZW50ICh1bCnsnYAgXHJcblx0XHQgICBjc3MgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQg7IaN7ISx7J2EIOqwgOyngOqzoCDsnojripTrjbAsXHJcblx0XHQgICBpZTksIGllMTDsl5DshJzripQg7JyEIOyGjeyEseydtCDsoIHsmqnrkJjsp4Ag7JWK7JWE7IScIGNj67KE7Yq87JeQ7IScIOyekOunieyEoO2DnSDrqZTribTroZwg7JuA7KeB7J28IOuVjCBob3ZlcuqwgCDtkoDrpqzripQg7Jik66WY6rCAIOyeiOyWtOyEnCDsiJjsoJXtlaguXHJcblxyXG5cclxuXHRcdGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZmlyZWZveCcpID4gLTEpIHsgLy8gZmlyZWZveCBYIGJ1dHRvbiBvdXRsaW5lXHJcbiAgICAgXHRcdHZhciBmZkNsb3NlQnRuID0gdmpzV3JhcC5jbG9zZXN0KCcudmlkZW8tYXJlYV81JykuZmluZCgnLmJyaWdodGNvdmUtYmNjLWJ0bi1jbG9zZSwgLmJyaWdodGNvdmUtYmM1LWJ0bi1jbG9zZScpO1xyXG4gICAgIFx0XHRpZiAoZmZDbG9zZUJ0bi5sZW5ndGgpIHtcclxuICAgICBcdFx0XHQvL2ZmQ2xvc2VCdG4uY3NzKCdib3JkZXInLCAnb3V0bGluZTogMXB4IHNvbGlkICM0ZDkwZmUnKTtcclxuICAgICBcdFx0XHRmZkNsb3NlQnRuLm9mZignZmZvdXRsaW5lJykub24oJ2ZvY3VzaW4uZmZvdXRsaW5lJywgZnVuY3Rpb24oZSkge1xyXG4gICAgIFx0XHRcdFx0ZmZDbG9zZUJ0bi5jc3MoJ291dGxpbmUnLCAnMXB4IHNvbGlkICM0ZDkwZmUnKTtcclxuICAgICBcdFx0XHR9KTtcclxuICAgICBcdFx0XHRmZkNsb3NlQnRuLm9mZignZmZvdXRsaW5lJykub24oJ2ZvY3Vzb3V0LmZmb3V0bGluZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICBcdFx0XHRcdGZmQ2xvc2VCdG4uY3NzKCdvdXRsaW5lJywgJ3Vuc2V0Jyk7XHJcbiAgICAgXHRcdFx0fSk7XHJcbiAgICAgXHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIFdBUUEg7KCR6re87ISxIOqygOyImOyXkOyEnCDroIjsnbTslrTtmJXtg5zsnZggWOuLq+q4sOuyhO2EtOydmCBvdXRsaW5l7J20IOyemCDrs7TsnbTsp4Ag7JWK7JWEIEZG7J2865WM66eMIG91dGxpbmXsnYQg7J6YIOuztOydtOuPhOuhnSBmb2N1cyDsnbTrsqTtirjroZwg67OA6rK97ZW07KSMLlxyXG5cclxuXHR9XHJcblxyXG4yMDE4LTAxLTMwIGZuVGFiSW5kZXhTb3J0KCkg7Iuk7ZaJ7ZWo7IiYIOygnOqxsFxyXG5cdGlmKCFtb2JpbGUpe1xyXG5cdFx0Ly9mblRhYkluZGV4U29ydCh2b2RJZCk7XHJcblx0fVxyXG5cclxuXHRjYXB0aW9u66mU64m066W8IOyXtOyWtOyjvOuKlCBbY2Nd67KE7Yq86rO8IOyerOyDneydtOuypO2KuOqwgCDstqnrj4zrgpjshJwg7KO87ISd7LKY66asIFxyXG5cdChjY+uyhO2KvOydhCBrZXlkb3du7Jy866GcIOuIhOultOuptCBsYXllcu2DgOyeheyXkOyEnCDtlIzroIjsnbTslrTqsIAg7KSR67O17Jy866GcIOyLpO2WieuQmOyEnCDso7zshJ3sspjrpqztlagpO1xyXG5cclxuXHJcbjIwMTgtMDEtMzAgZmlyZWZveCBY67KE7Yq8IO2PrOy7pOyKpCDslYTsm4PrnbzsnbhcclxuXHRpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2ZpcmVmb3gnKSA+IC0xKSB7IC8vIGZpcmVmb3ggWCBidXR0b24gb3V0bGluZVxyXG5cdFx0XHR2YXIgZmZDbG9zZUJ0biA9IHZqc1dyYXAuY2xvc2VzdCgnLnZpZGVvLWFyZWFfNScpLmZpbmQoJy5icmlnaHRjb3ZlLWJjYy1idG4tY2xvc2UsIC5icmlnaHRjb3ZlLWJjNS1idG4tY2xvc2UnKTtcclxuXHRcdFx0aWYgKGZmQ2xvc2VCdG4ubGVuZ3RoKSB7XHJcblx0XHRcdFx0Ly9mZkNsb3NlQnRuLmNzcygnYm9yZGVyJywgJ291dGxpbmU6IDFweCBzb2xpZCAjNGQ5MGZlJyk7XHJcblx0XHRcdFx0ZmZDbG9zZUJ0bi5vZmYoJ2Zmb3V0bGluZScpLm9uKCdmb2N1c2luLmZmb3V0bGluZScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdGZmQ2xvc2VCdG4uY3NzKCdvdXRsaW5lJywgJzFweCBzb2xpZCAjNGQ5MGZlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZmZDbG9zZUJ0bi5vZmYoJ2Zmb3V0bGluZScpLm9uKCdmb2N1c291dC5mZm91dGxpbmUnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRmZkNsb3NlQnRuLmNzcygnb3V0bGluZScsICd1bnNldCcpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0fVxyXG5cclxuMjAxOC0wMS0zMCDri6Tqta3slrQg7KCB7Jqp7IucIO2UjOugiOydtOyWtCBVSSDtj7Dtirgg7KCB7JqpXHJcblx0aWYgKHZqc1dyYXAuaGFzQ2xhc3MoJ3Zqcy12NScpKSB7XHJcblx0IFx0dmFyIHVpRm9udFJlc3QgPSAnJyxcclxuXHQgXHRcdGJsYW5rU2hlZXQgPSAnJywgXHJcblx0IFx0XHRjcmVhdGVkU3R5bGVUYWcgPSAnJyxcclxuXHQgXHRcdGRvY0hlYWQgPSBudWxsO1xyXG5cclxuXHQgXHR1aUZvbnRSZXN0ID0gJy52anMtY29udHJvbC1iYXIgYnV0dG9uIHsgZm9udC1mYW1pbHk6IFZpZGVvSlMgIWltcG9ydGFudDsgfSc7XHJcblxyXG5cdFx0ZG9jSGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHJcblx0XHRpZiAoZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCkge1xyXG5cdFx0XHRibGFua1NoZWV0ID0gZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCgpO1xyXG5cdFx0XHRibGFua1NoZWV0LmNzc1RleHQgPSB1aUZvbnRSZXN0O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y3JlYXRlZFN0eWxlVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdFx0XHRjcmVhdGVkU3R5bGVUYWcudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHJcblx0XHRcdGlmIChjcmVhdGVkU3R5bGVUYWcuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRcdGNyZWF0ZWRTdHlsZVRhZy5zdHlsZVNoZWV0LmNzc1RleHQgPSB1aUZvbnRSZXN0O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNyZWF0ZWRTdHlsZVRhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh1aUZvbnRSZXN0KSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZG9jSGVhZC5hcHBlbmRDaGlsZChjcmVhdGVkU3R5bGVUYWcpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbjIwMTgtMDEtMzAg7J6Q66eJIOycoOustOyXkCDrlLDrnbwg7J6Q66eJIOyYgeyXreydmCB0YWJpbmRleD1cIjBcIiDshKTsoJVcclxuXHR2YXIgaXNUYWJJbmRleEFibGUgPSBmYWxzZTtcclxuXHJcblx0aWYgKHZqc1RleHRUcmFjay5sZW5ndGgpIHtcclxuXHRcdHZqc1RleHRUcmFjay5vZmYoJ0RPTVN1YnRyZWVNb2RpZmllZC5pbmRleGFibGUgcHJvcGVydHljaGFuZ2UuaW5kZXhhYmxlJylcclxuXHRcdC5vbignRE9NU3VidHJlZU1vZGlmaWVkLmluZGV4YWJsZSBwcm9wZXJ0eWNoYW5nZS5pbmRleGFibGUnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG5cdFx0XHRpZiAodmpzVGV4dFRyYWNrLmZpbmQoJ2RpdicpLmxlbmd0aCA+IDIpIHtcclxuXHRcdFx0XHRpZiAoIWlzVGFiSW5kZXhBYmxlKSB7XHJcblx0XHRcdFx0XHR2anNUZXh0VHJhY2suYXR0cigndGFiaW5kZXgnLCAwKTtcclxuXHRcdFx0XHRcdGlzVGFiSW5kZXhBYmxlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKGlzVGFiSW5kZXhBYmxlKSB7XHJcblx0XHRcdFx0XHRpc1RhYkluZGV4QWJsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dmpzVGV4dFRyYWNrLnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR2anNUZXh0VHJhY2sudHJpZ2dlcignRE9NU3VidHJlZU1vZGlmaWVkLmluZGV4YWJsZSBwcm9wZXJ0eWNoYW5nZS5pbmRleGFibGUnKTtcclxuXHR9XHJcbiovXHJcblxyXG52YXIgYmNjX2lkeCA9IDA7XHJcbnZhciBhcmVhTGl2ZVRpbWVyO1xyXG52YXIgYmNqUXVlcnkgPSB3aW5kb3cuJDtcclxudmFyIGJjY01zZyA9ICBuZXcgQXJyYXkoKTtcclxudmFyIGJjQnJvd3Nlcj1udWxsOy8vdHJ1ZSA6IHBjICwgZmFsc2U6IG1vYmlsZVxyXG5pZighbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZHxNb2JpbGV8aVAoaG9uZXxvZHxhZCl8QmxhY2tCZXJyeXxJRU1vYmlsZXxLaW5kbGV8TmV0RnJvbnR8U2lsay1BY2NlbGVyYXRlZHwoaHB3fHdlYilPU3xGZW5uZWN8TWluaW1vfE9wZXJhIE0ob2JpfGluaSl8QmxhemVyfERvbGZpbnxEb2xwaGlufFNreWZpcmV8WnVuZS8pKXtcclxuXHRiY0Jyb3dzZXIgPSB0cnVlO1xyXG59ZWxzZXtcclxuXHRiY0Jyb3dzZXIgPSBmYWxzZTtcclxufVxyXG52YXIgYmNQcm90b2NvbD1udWxsOy8vdHJ1ZSA6IGh0dHAgLiBmYWxzZSA6IGh0dHBzXHJcbmlmKGxvY2F0aW9uLnByb3RvY29sID09IFwiaHR0cDpcIil7XHJcblx0YmNQcm90b2NvbD10cnVlO1xyXG59ZWxzZXtcclxuXHRiY1Byb3RvY29sPWZhbHNlO1xyXG59XHJcblxyXG5CY0hhc2hNYXAgPSBmdW5jdGlvbigpe1xyXG5cdHRoaXMubWFwID0gbmV3IEFycmF5KCk7XHJcbn1cclxuQmNIYXNoTWFwLnByb3RvdHlwZSA9IHtcclxuXHRwdXQgOiBmdW5jdGlvbihrZXksdmFsdWUpe1xyXG5cdFx0dGhpcy5tYXBba2V5XSA9IHZhbHVlO1xyXG5cdH0sXHJcblx0Z2V0IDogZnVuY3Rpb24oa2V5KXtcclxuXHRcdHJldHVybiB0aGlzLm1hcFtrZXldO1xyXG5cdH1cclxufVxyXG5pZih3aW5kb3cuU0lURV9DRCAmJiB3aW5kb3cuU0lURV9DRCA9PSBcInNlY1wiKXtcclxuXHRiY2NNc2dbXCJ0ZXh0XzAxXCJdID0gXCLsnqzsg51cIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzAyXCJdID0gXCLsnbzsi5zsoJXsp4BcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzAzXCJdID0gXCLsoJXsp4BcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzA0XCJdID0gXCLrkJjqsJDquLBcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzA1XCJdID0gXCLslZ7snLzroZxcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzA2XCJdID0gXCLsnYzshozqsbBcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzA3XCJdID0gXCLsnYzrn4kg7Kad6rCAXCI7XHJcblx0YmNjTXNnW1widGV4dF8wOFwiXSA9IFwi7J2M65+JIOqwkOyGjFwiO1xyXG5cdGJjY01zZ1tcInRleHRfMDlcIl0gPSBcIuuNlCDsnbTsg4Eg67mE65SU7JikIOuqqeuhnSDsl4bsirXri4jri6RcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzEwXCJdID0gXCLruIzrnbzsnbTtirgg7ZSM66CI7J207Ja0IOyiheujjFwiO1xyXG5cdGJjY01zZ1tcInRleHRfMTJcIl0gPSBcIu2UjOugiOydtOyWtCDspIDruYRcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzEzXCJdID0gXCLsnbTsoIRcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzE0XCJdID0gXCLri6TsnYxcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzIwXCJdID0gXCLsnpDrp4nsl7TquLBcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzIxXCJdID0gXCLsnpDrp4nri6vquLBcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzIyXCJdID0gXCLsnpDrp4nsl4bsnYxcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzIzXCJdID0gXCLsnpDrp4lcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzI0XCJdID0gXCLsoITssrTtmZTrqbRcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzI1XCJdID0gXCLsoITssrTtmZTrqbQg7KKF66OMXCI7XHJcbn1lbHNle1xyXG5cdGJjY01zZ1tcInRleHRfMDFcIl0gPSBcIlBsYXlcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzAyXCJdID0gXCJQYXVzZVwiO1xyXG5cdGJjY01zZ1tcInRleHRfMDNcIl0gPSBcIlN0b3BcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzA0XCJdID0gXCJSZXdpbmRcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzA1XCJdID0gXCJGb3J3YXJkXCI7XHJcblx0YmNjTXNnW1widGV4dF8wNlwiXSA9IFwiTXV0ZVwiO1xyXG5cdGJjY01zZ1tcInRleHRfMDdcIl0gPSBcIlZvbHVtZSB1cFwiO1xyXG5cdGJjY01zZ1tcInRleHRfMDhcIl0gPSBcIlZvbHVtZSBkb3duXCI7XHJcblx0YmNjTXNnW1widGV4dF8wOVwiXSA9IFwiTm8gbW9yZSB2aWRlbyBsaXN0XCI7XHJcblx0YmNjTXNnW1widGV4dF8xMFwiXSA9IFwiRW5kIG9mIGJyaWdodGNvdmUgcGxheWVyXCI7XHJcblx0YmNjTXNnW1widGV4dF8xMlwiXSA9IFwiUGxheWVyIGNvbnRlbnQgcmVhZHlcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzEzXCJdID0gXCJQcmV2aW91c1wiO1xyXG5cdGJjY01zZ1tcInRleHRfMTRcIl0gPSBcIk5leHRcIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzIwXCJdID0gXCJDbG9zZWQgY2FwdGlvbiBvblwiO1xyXG5cdGJjY01zZ1tcInRleHRfMjFcIl0gPSBcIkNsb3NlZCBjYXB0aW9uIG9mZlwiO1xyXG5cdGJjY01zZ1tcInRleHRfMjJcIl0gPSBcIk5vIENsb3NlZCBjYXB0aW9uXCI7XHJcblx0YmNjTXNnW1widGV4dF8yM1wiXSA9IFwiQ2FwdGlvblwiO1xyXG5cdGJjY01zZ1tcInRleHRfMjRcIl0gPSBcImZ1bGxzY3JlZW5cIjtcclxuXHRiY2NNc2dbXCJ0ZXh0XzI1XCJdID0gXCJOb24tRnVsbHNjcmVlblwiO1xyXG59XHJcblxyXG52YXIgYmNjU3RhdHVzQ2NGbGFnID0gbmV3IEFycmF5KCk7XHJcblxyXG52YXIgYmNDaHJvbWVQbGF5ZXJEYXRhID0ge1xyXG5cdERFVlx0XHQgOiB7J3BsYXllcklkJyA6ICcyNDg3MjI0MzAzMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMGdFZDN2a34sVVptbk9wUjJZcEVmRGp6Z2RjYzdiOEVuUWlySkZUZm4nfSxcclxuXHRMSVZFICAgICA6IHsncGxheWVySWQnIDogJzI0NzQ0OTQ0ODYwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUEwZ0hRa1JFfixkZFJabjc4TDhzaGk2SnJuLVdWTEFMdUUwcGFQdDUyMCd9LFxyXG5cdEdMT0JBTCAgIDogeydwbGF5ZXJJZCcgOiAnMjkzNzQwNTUxMDAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQ3F2dlBYWmt+LDczbUdVSHhDSUlRaHNRMWt2bW9rX0lCekdNaEhwcml0J30sXHJcblx0RUcgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTA1NDIwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdkRJbXNFfixjbWY5ZlFsekRFWDYwQXA5eF9rU28zemZ3dnpZazlmZyd9LFxyXG5cdENOICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwMzA3MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZjMzRlRX4sa0l0ek9kVGFpX2Z6amFLdUl4SWc4RFYyMjNJcTZjdmknfSxcclxuXHRQSyAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjI1MTUyMTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2U3FnRUV+LHdPblV3TmdPUnhYNUx4N3ZqMXBtNlhoWUxvRGNFTTRfJ30sXHJcblx0TEVWQU5UICAgOiB7J3BsYXllcklkJyA6ICc5MjYyNTE1MTkwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdlNxZkZrfix3cEpvdTJDQkdpVEhTZ0ctUDQyWGU2M0ZNUkQ2VHlYbyd9LFxyXG5cdENPICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwNTA1MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZESVdGa34sLW9zcDJVd21Ka1NheUlCenBlLWZpV1dqRmV0cEhGczknfSxcclxuXHRTRyAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUwOTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElZQ2t+LHpLdzc3WUVwQ1FPMHI5cXotc0V5dEh4M2xGRXJrNHNzJ30sXHJcblx0Vk4gICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxNzEwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4UWVrfiw2VkZzczZUVlNxdENrRHBHNmgyVWg0STRQRDBHTFpMcSd9LFxyXG5cdFVTICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTE5MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcU5na34sVEVUWTdzZ0s1a3dOb2J2a3FkU1hZMDJKamtHdURtSWMnfSxcclxuXHRIUiAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMzMjAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzRDUEV+LHNuckRjbld0dDRWRVMxUFU5bVlXX21iZU5tT3oxYkc4J30sXHJcblx0UlMgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTA1MzQwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdkRJaXlFfiwxbDYyNXdnTDRKNWluT3cxUjF1SUhRMkFJMG1CaFZGcid9LFxyXG5cdFNJICAgICAgIDogeydwbGF5ZXJJZCcgOiAnMzg1NTQ5NzUxNDAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBRGdhM2dRcUV+LGlnaFM0dkxBcXc3YUVKU2ZNaGVORVFObDNsZ2tpa0NmJ30sXHJcblx0QVQgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjQzMzY1NDUwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdlNxWk9rfixocDRXdDN6VmpXYzJ3aERVdnFESDlDR2xLaWw4T3lOeCd9LFxyXG5cdENIX0ZSICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjUxNTA3MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcWFORX4sRVE3OHdoNkVZV2RQX213QkZCM0liWHhzN0pMSUF3cXYnfSxcclxuXHRDSCAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUyNjAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElmMmt+LGlWb1ZLemRGYmVIUXZOLVBmX1N2V1RvUDdUd29SZ1BBJ30sXHJcblx0QVIgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTAzMDMwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdmMzMmhFfixHdVVicGxmMTFiS3dwUnk0RUFZTkdpVTJKNGJfY1ZkVSd9LFxyXG5cdFBZICAgICAgIDogeydwbGF5ZXJJZCcgOiAnNDQ1NjU2NTEwNzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBRURWU01VWUV+LDN5b1FyZmxEblNmODJ6YmVlbjdzVnExbXdvQXdHRGxRJ30sXHJcblx0VVIgICAgICAgOiB7J3BsYXllcklkJyA6ICc0NDU2NTY1MTExMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFFRFZTTVdWRX4sbkhLRUxwV3JEOVF5RkdqR0ZzSWxlQWRhSEtRTmNIWDcnfSxcclxuXHRBVSAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUxMTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElaQkV+LDhReGZuX2dHcVhRV212WEhyVXo0cjA1ak91UENMelVhJ30sXHJcblx0TlogICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxNjkwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4UGdFfixHbVd6YXJWMk1FckNBVXppNWI4dDVFS2NCbms2RTh5Vid9LFxyXG5cdEVFICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjUxNTEzMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcWNLRX4scExmaEkxYW9sNjQxOThnT1pxdU8zNmJtQ0l0bG5hLVYnfSxcclxuXHRMViAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMyNjAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzRBU0V+LGF4QmxtamRjZ2tfRlU3NnllemtGZ21fWGt0akZKc2ZKJ30sXHJcblx0TFQgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyNTE1MTUwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdlNxZElrfixGZlBzZkFqdFpDUFVXd25mZjZlVUNmNWRTRVFtei1rSid9LFxyXG5cdEJFICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MTkxMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OGJPRX4sakx4TDR4ZVdVR1ZXMEpVUEduYTN3OHVTbUNObWxwdFonfSxcclxuXHRCRV9GUiAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUyODAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElnMUV+LE1rb2lXOUZILW5uRzRaVWwzRE9weWdFRlFObmhQLXVJJ30sXHJcblx0TkwgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxOTMwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4Y01rfixhSlhycm1YcWNtU2lEbUZIcVgxcmw4and1QjFYQ3dHQSd9LFxyXG5cdEpQICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwNTE1MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZESWEtRX4sRTZOMzVpUXA4akR3eDg2dy10VWdZVkhDTFBTQ2lBUlgnfSxcclxuXHRzZWMgICAgICA6IHsncGxheWVySWQnIDogJzkyNjE5NjE3NzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF1ODhUYUV+LEgxZjgxekM1N0JVZHFMWWo2OWJOY0sxbW5XUjZOTlRwJ30sXHJcblx0Q0EgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjQzODQyMTcwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdmMzMGtFfixjYlhrSU1SbDJ0dXItWGVQa2sxeUxUZ2pkaTJrMC1NUyd9LFxyXG5cdENBX0ZSICAgIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTIxMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcU9mRX4sc1prU0ZVZFRTNmVVSzY0T0VyeHVzeDk2REtKTkliSmknfSxcclxuXHRDTCAgICAgICA6IHsncGxheWVySWQnIDogJzkyNDMzNjUyNzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2U3FSYWt+LEVucldMeTViVmYydXR6Y1VGdWlkckhQVzZsWk1NeTJYJ30sXHJcblx0Q1ogICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTAzMjEwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdmMzLVZFfixxMFVlUW1sS1dVakI4RUZiejFiOUZMakVmcUo4NHUzbCd9LFxyXG5cdFNLICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTQzMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcVlRRX4scmlfbW9WcjJ6V0F4aFZuOThuam51dGk0MTJ1U29LLXgnfSxcclxuXHRCUiAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUwMTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElVSWt+LExIcnpoaElraDVfcmtNNHFJYWVZU0o2MUdPWm9jbG12J30sXHJcblx0RlIgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjQzMzY1NDEwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdlNxWFJrfiw0R2gySnhpdElsWjVNdUdua3V5clM3Rlo2MGZLcVo2bSd9LFxyXG5cdEdSICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MTg3MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OFlTa34sdnhGVV9ZZ1ljQ0w4OVg5UXdlMXM3cm5SMGJKTklFLU0nfSxcclxuXHRERSAgICAgICA6IHsncGxheWVySWQnIDogJzkyNDMzNjUzNzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2U3FWVWt+LElqX2xGZnU3alJVblNPSVZqdGdMdUZOWExiRnNLazl3J30sXHJcblx0SFUgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTAzMDkwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdmMzNWNrfixNVS1fMmo3a2xfSnJoakZOOE81eVBDZWxtMEE5MG9OZid9LFxyXG5cdEhLICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTM1MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcVVXRX4sMlYzR2Z2eXgyU0lkWm5PRGEyR3NYR0FTbE5KWUpCX0UnfSxcclxuXHRIS19FTiAgICA6IHsncGxheWVySWQnIDogJzkyNjE5NjE3OTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF1ODhVWWt+LFhESWxnNkdjbWR2R0FiTVhFajRjeTYyYUE4ZldaN1JnJ30sXHJcblx0SVQgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxODUwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4WFVFfixmZnQ4ak42N2RIVDNiUTRULVlSMjk5ZFZVVVcyV3ExMyd9LFxyXG5cdElEICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwNTEzMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZESVpfa34sbnIwX3ZfUXVrbVVyZnBBZndkNnN5RE5BdXRQX2xZakInfSxcclxuXHRLWl9VUiAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMzNDAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzRETmt+LHFiWnJVc2lKdHNUcVBKbVFFTHBncGlzZzk2WEM1NGFpJ30sXHJcblx0TEFUSU4gICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxNjUwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4T2hrfix2LV9LWGd1RGZFNVlUX3VlNjRWdHhaSzBKLXBjai0wQyd9LFxyXG5cdExBVElOX0VOIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTI1MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcVFjRX4sQmdjRWNza2xGTG92RW9Wbk90OVJQS0pCNXM3bXNDRXcnfSxcclxuXHRWRSAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUwMzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElWSEV+LE9lZEJYT0xqSUpySDdkSllYcjRlR0JieVFfUFlBNjVqJ30sXHJcblx0TVggICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjQzMzY1MjMwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdlNxUGRrfiwwaEhJbElNRUtCUFFyd0R3YkhZd3ptMlNpdVo1cEVSMSd9LFxyXG5cdE5fQUZSSUNBIDogeydwbGF5ZXJJZCcgOiAnOTI2MjUxNTIzMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcWhDa34sdGpXM0EyazV6a1F0aFlCVjlEd3A1UWllMndadkdvRi0nfSxcclxuXHRESyAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMxMTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzM2YkV+LEZpTHRKbm91V2I0NGVsbGlGc1VQTWs1VVRNRUJMYzEwJ30sXHJcblx0RkkgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTA1MjQwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdkRJZTRFfixsS2xjVHltai1GQXY1X0NDMmR4YXNuMkhaRi12VDdhMSd9LFxyXG5cdE5PICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTM5MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcVdURX4sTklZdVZiNFlqMVctVnk1MF90RXpic2I3R1NOQkdqVXUnfSxcclxuXHRTRSAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUyMjAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElkNWt+LHdsMnM1V0FaVlpRbTIwUGZyZ2FwM2hiOFBiX0dobVMyJ30sXHJcblx0UFQgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTAzMTcwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdmMzOFlFfixFM1JmU0ZDQmdlYkxKWHJzOGdxSWFwakNaQWd0bUM2Vyd9LFxyXG5cdFBIICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MTc1MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OFNia34sV0lQX3k5TUNZQ18ybDNUX1dtM25yZzFjbVFicEJyaWonfSxcclxuXHRQTCAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMxOTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzM5V2t+LFZRMV9mWU9XaWdWOTBOTW43a0Rsd1NwQjVmcjZIQUhDJ30sXHJcblx0UEUgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTA1MDcwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdkRJWEVFfix5MEVUODlFMGxoRDZEYVBQdTRFXzNTeXZGbmV2TjV1dCd9LFxyXG5cdFJVICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MTk1MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OGRMRX4sTjF0Ylpab21jZ0FzYl9QZlhFUnJYYTRWRFR0NzNib3cnfSxcclxuXHRCRyAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMyMzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzNfVGt+LG1JU1hxUnR4NVRDSlN1UkRYRkF5ajB3Z01NRmozczRxJ30sXHJcblx0Uk8gICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxODkwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4YVBrfiw4MWhxSjlvTFgwRW9kMlhleWZ6eGdvQUdDYk4yWVJjSCd9LFxyXG5cdEVTICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwNTE5MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZESWM3RX4sSFVlRDhyQ3F0OVAzX0lDYnB4R0lwRlZUdTJQVmRocWUnfSxcclxuXHRUVyAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDMwNTAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzMzZmt+LExhb1BxOFgtM1BlZkgwOFZVWE4yRWN0VFpxeGdDVFd2J30sXHJcblx0VFIgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYyMDEwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4Z0drfix0bUJZdU5BZFZkZ3RjY1pNcVFpZW1HUXBwYUJHUTRfeid9LFxyXG5cdFVBICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwNTM4MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZESWt2RX4saTJ4ZUdzUUxSNjczaEJ6NjNkZzEwSXA5MzdWSUFmV0UnfSxcclxuXHRVQV9SVSAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDUzNjAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2RElqd2t+LEEybE91dFZCTjNVYkVVY2VQT3Z2cEh6VDVmelk5RFB4J30sXHJcblx0SUUgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxODMwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4V1Zrfix1Q0VhUXVaOG56Z3RheWI2Y3FFY3lUMVJIY2xrSkdfOSd9LFxyXG5cdFVLICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MTgxMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OFZYRX4seDBfMjhCXzZadms5M25BRWF2RnpJa19sZk1nT0NyRHQnfSxcclxuXHRBRSAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjI1MTUxNzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2U3FlSEV+LHNMLXFZR3A1dkRzOWx2UUM1OExwbXNyQWRncm5EdC13J30sXHJcblx0QUVfQVJBQklDOiB7J3BsYXllcklkJyA6ICc5MjYxOTYxOTcwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdTg4ZUprfixTMHlpTHB4eUhRY0Nha2otN0hLRkpTNVhqd2drQVh0eCd9LFxyXG5cdElOICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MjEwNTE3MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZESWI4a34sbFVhZU5BNDNId2lIR2JnXzJOZVVzM2hpQUphZW5RREsnfSxcclxuXHRNWSAgICAgICA6IHsncGxheWVySWQnIDogJzkyNjE5NjE3MzAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF1ODhSZEV+LGtQUVFxd3JZZHA0Ynhtd1ItblptWU9PWTdjaTdQd2d5J30sXHJcblx0WkEgICAgICAgOiB7J3BsYXllcklkJyA6ICcyNTczMjQxOTYxMDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFDVnJwRkR2a34sZ29BNVJHNHN1eVNWVXdKS091WDN5ZmdBQmJYMmZrckQnfSxcclxuXHRBRlJJQ0FfRU46IHsncGxheWVySWQnIDogJzkyNjIxMDMzNjAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzRFTUV+LE1yOUhqZTdMcU5mdFNsTklhS3BjU2tobnFjcGJiUDg5J30sXHJcblx0QUZSSUNBX0ZSOiB7J3BsYXllcklkJyA6ICc5MjYyNTE1MjUwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdlNxaUJFfixRcDVXdkpGckhpX0swMkVGZUJzUWd0SjVNd3NtcFVNWCd9LFxyXG5cdEFGUklDQV9QVDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MjA3MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OGlEa34sY2NzRWcxOS1DYkpra196SjljNmFGaWNCc052SnNJbjgnfSxcclxuXHRJUkFOICAgICA6IHsncGxheWVySWQnIDogJzkyNjIxMDM0MDAwMScsICdwbGF5ZXJLZXknIDogJ0FRfn4sQUFBQTF2YzRHSkV+LFlNM0FIVmlCVm45UkZ6d2JQMWpRX2FFNW9lVm8xQXFVJ30sXHJcblx0SUwgICAgICAgOiB7J3BsYXllcklkJyA6ICc5MjYyMTA1NDAwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUExdkRJbHRrfixJUEFQR2dtal82ZmMxMUlmbFUzMkxrWHBkeDkzZmVOVSd9LFxyXG5cdFNBICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI2MTk2MTk5MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXU4OGZJRX4sTzJtMU1Mb0dfbXVHN0tUaEt1THM4QUJBcHVrUGQwY0onfSxcclxuXHRTQV9FTiAgICA6IHsncGxheWVySWQnIDogJzI1NzMyNDE5NjIwMDEnLCAncGxheWVyS2V5JyA6ICdBUX5+LEFBQUNWcnBGRXVFfixJR3NJU1ZsQ2dzLUtuTEVVZzNnSFlqNW9lejlPRGFVNSd9LFxyXG5cdFRIICAgICAgIDogeydwbGF5ZXJJZCcgOiAnOTI0MzM2NTI5MDAxJywgJ3BsYXllcktleScgOiAnQVF+fixBQUFBMXZTcVNaRX4sUWtZVUFYdTNsSFhKV0xueVFPQ28yTTB5cDJMZVZtNlgnfVxyXG59O1xyXG5cclxudmFyIGJjY1BsYXllciwgYmNjTW9kVlAsIGJjY01vZEV4cCwgYmNjTW9kQ2MsIGJjY0RpdjtcclxudmFyIGJjQ2hyb21lUGxheWVyID0gbmV3IGZ1bmN0aW9uKCl7XHJcblx0dmFyIGJjY1BsYXllck1hcCA9IG5ldyBCY0hhc2hNYXAoKTtcclxuXHR2YXIgdGFyZ2V0ID0gdGhpcztcclxuXHR0aGlzLm15QmNjcGxheWVyRGF0YTtcclxuXHR0aGlzLmJjY1BsYXllckRhdGE7XHJcblxyXG5cdHRoaXMub25DaGFuZ2VDQyA9IG5ldyBPYmplY3QoKTtcclxuXHJcblx0KGZ1bmN0aW9uKCAkICl7XHJcblx0XHQkLmZuLmJjQ2hyb21lUGxheWVyID0gZnVuY3Rpb24oIGFsYWlzICl7XHJcblxyXG5cdFx0XHR2YXIgYmNFeHBlcmllbmNlc0FQSTtcclxuXHRcdFx0aWYoYmNQcm90b2NvbCl7XHJcblx0XHRcdFx0YmNFeHBlcmllbmNlc0FQSSA9IFwiLy9hZG1pbi5icmlnaHRjb3ZlLmNvbS9qcy9CcmlnaHRjb3ZlRXhwZXJpZW5jZXMuanNcIjtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0YmNFeHBlcmllbmNlc0FQSSA9IFwiLy9zYWRtaW4uYnJpZ2h0Y292ZS5jb20vanMvQnJpZ2h0Y292ZUV4cGVyaWVuY2VzLmpzXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBiY2MgPSBiY0Nocm9tZVBsYXllcjtcclxuXHRcdFx0dmFyIGFyciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEpO1xyXG5cclxuXHRcdFx0aWYoYmNjLmNoZWNrTnVsbChhcnJbMV0pKWFyclsxXT1cIjEwMCVcIjtcclxuXHRcdFx0aWYoYmNjLmNoZWNrTnVsbChhcnJbMl0pKWFyclsyXT1cIjEwMCVcIjtcclxuXHRcdFx0aWYoYmNjLmNoZWNrTnVsbChhcnJbM10pKWFyclszXT1cImZhbHNlXCI7XHJcblx0XHRcdGFsYWlzID0gYWxhaXMudG9VcHBlckNhc2UoKTtcclxuXHRcdFx0dmFyIGJjY1R5cGUgPSAoYWxhaXM9PVwiTElWRVwiKT9cInZpZGVvTGlzdFwiOlwidmlkZW9QbGF5ZXJcIjtcclxuXHJcblx0XHRcdG15QmNjcGxheWVyRGF0YSA9IGV2YWwoXCJiY0Nocm9tZVBsYXllckRhdGEuXCIrYWxhaXMpO1xyXG5cdFx0XHRpZih0eXBlb2YgbXlCY2NwbGF5ZXJEYXRhID09IFwidW5kZWZpbmVkXCIpe1xyXG5cdFx0XHRcdGFsZXJ0KCAnQWxhaXMgJyArICBhbGFpcyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LmJjQ2hyb21lUGxheWVyJyApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YmNjUGxheWVyRGF0YSA9IHtcclxuXHRcdFx0XHQnYWxhaXMnIDogYWxhaXMsXHJcblx0XHRcdFx0J3BsYXllcklkJyA6IG15QmNjcGxheWVyRGF0YS5wbGF5ZXJJZCxcclxuXHRcdFx0XHQncGxheWVyS2V5JyA6IG15QmNjcGxheWVyRGF0YS5wbGF5ZXJLZXksXHJcblx0XHRcdFx0J3ZpZGVvSWQnIDogYXJyWzBdLFxyXG5cdFx0XHRcdCd3aWR0aCcgOiBhcnJbMV0sXHJcblx0XHRcdFx0J2hlaWdodCcgOiBhcnJbMl0sXHJcblx0XHRcdFx0J2F1dG9wbGF5JyA6IGFyclszXSxcclxuXHRcdFx0XHQndHlwZScgOiBiY2NUeXBlXHJcblx0XHRcdH07XHJcblx0XHRcdGJjQ0xvZyhiY2NQbGF5ZXJEYXRhKTtcclxuXHRcdFx0Ly9oYXNobWFwIHB1dFxyXG5cdFx0XHRiY2NQbGF5ZXJNYXAucHV0KGJjY1BsYXllckRhdGEudmlkZW9JZCxiY2NQbGF5ZXJEYXRhKTtcclxuXHJcblx0XHRcdGJjY0RpdiA9IFwiI215RXhwZXJpZW5jZVwiK2JjY1BsYXllckRhdGEudmlkZW9JZDtcclxuXHJcblx0XHRcdGFyciA9IFsgJCggdGhpcyApIF0uY29uY2F0KCBhcnIgKTtcclxuXHJcblx0XHRcdHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcblx0XHRcdHMudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG5cdFx0XHRzLnNyYyA9IGJjRXhwZXJpZW5jZXNBUEk7XHJcblx0XHRcdGlmKHMucmVhZHlTdGF0ZSkge1xyXG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQocyk7XHJcblxyXG5cdFx0XHRcdHMub25yZWFkeXN0YXRlY2hhbmdlPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRpZihnZXRJZVZlcnNpb24oKSA9PSBcIjguMFwiKXtcclxuXHRcdFx0XHRcdFx0aWYocy5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgcy5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xyXG5cdFx0XHRcdFx0XHRcdHMub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmNjW1wicnVuXCJdLmFwcGx5KCBiY2MsIGFyciApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0aWYocy5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgcy5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBiY2NbXCJydW5cIl0uYXBwbHkoIGJjYywgYXJyICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XHJcblx0XHRcdFx0cy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmNjW1wicnVuXCJdLmFwcGx5KCBiY2MsIGFyciApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pKCBiY2pRdWVyeSApO1xyXG5cclxuXHR0aGlzLnJ1biA9IGZ1bmN0aW9uKCBkaXYsIHZvZElkKXtcclxuXHRcdC8vYmNjRGl2ID0gZGl2LnNlbGVjdG9yO1xyXG5cclxuXHRcdHZhciBiY2NJbmZvID0gYmNjUGxheWVyTWFwLmdldCh2b2RJZCk7XHJcblx0XHRkaXYuaHRtbCggdGhpcy5tYXJrdXAodm9kSWQpICkuc2hvdygpO1xyXG5cdFx0ZGl2LmF0dHIoJ3N0eWxlJyxcInBvc2l0aW9uOmFic29sdXRlO3dpZHRoOlwiICsgYmNjSW5mby53aWR0aCArIFwiO2hlaWdodDpcIiArIGJjY0luZm8uaGVpZ2h0ICsgXCI7dG9wOjBweDtib3R0b206MHB4O3JpZ2h0OjBweDtsZWZ0OjBweDtcIik7XHJcblxyXG5cdFx0YnJpZ2h0Y292ZS5jcmVhdGVFeHBlcmllbmNlcygpO1xyXG5cdFx0aWYoYmNCcm93c2VyKXtcclxuXHRcdFx0ZGl2LmZpbmQoXCJvYmplY3RcIikuYmNjUGxheWVyQ29udHJvbHMoYmNjSW5mby52aWRlb0lkLCBiY2NJbmZvLndpZHRoLCBiY2NJbmZvLmhlaWdodCk7XHJcblx0XHR9ZWxzZXtcclxuXHJcblx0XHRcdHZhciBhID0nLmJjLWNwbGF5ZXItYXJlYXtkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyBwYWRkaW5nLXRvcDogNTYuMjUlO30nO1xyXG5cdFx0XHR2YXIgYixjLGQ7XHJcblx0XHRcdGQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcblx0XHRcdGlmIChkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KSB7XHJcblx0XHRcdFx0YiA9IGRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKTtcclxuXHRcdFx0XHRiLmNzc1RleHQgPSBhO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcblx0XHRcdFx0Yy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cdFx0XHRcdGlmIChjLnN0eWxlU2hlZXQpIHtcclxuXHRcdFx0XHRcdGMuc3R5bGVTaGVldC5jc3NUZXh0ID0gYVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRkLmFwcGVuZENoaWxkKGMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cdFx0aWYoZ2V0SWVWZXJzaW9uKCkgIT0gLTEpe1xyXG5cdFx0XHRkaXYuY2hpbGRyZW4oJ3NwYW4nKS5jc3MoJ2Rpc3BsYXknLCcnKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBkaXY7XHJcblx0fTtcclxuXHJcblx0dGhpcy5tYXJrdXAgPSBmdW5jdGlvbih2b2RJZCl7XHJcblx0XHR2YXIgYmNjSW5mbyA9IGJjY1BsYXllck1hcC5nZXQodm9kSWQpO1xyXG5cdFx0dmFyIG1hcmt1cCA9ICcnO1xyXG5cdFx0bWFya3VwICs9ICc8b2JqZWN0IGlkPVwibXlFeHBlcmllbmNlJyArIGJjY0luZm8udmlkZW9JZCArICdcIiBjbGFzcz1cIkJyaWdodGNvdmVFeHBlcmllbmNlXCI+JztcclxuXHRcdG1hcmt1cCArPSAnPHBhcmFtIG5hbWU9XCJiZ2NvbG9yXCIgdmFsdWU9XCIjRkZGRkZGXCIgLz4nO1xyXG5cdFx0bWFya3VwICs9ICc8cGFyYW0gbmFtZT1cIndpZHRoXCIgdmFsdWU9XCInICsgYmNjSW5mby53aWR0aCArICdcIiAvPic7XHJcblx0XHRtYXJrdXAgKz0gJzxwYXJhbSBuYW1lPVwiaGVpZ2h0XCIgdmFsdWU9XCInICsgYmNjSW5mby5oZWlnaHQgKyAnXCIgLz4nO1xyXG5cdFx0bWFya3VwICs9ICc8cGFyYW0gbmFtZT1cInBsYXllcklEXCIgdmFsdWU9XCInICsgYmNjSW5mby5wbGF5ZXJJZCArICdcIiAvPic7XHJcblx0XHRtYXJrdXAgKz0gJzxwYXJhbSBuYW1lPVwicGxheWVyS2V5XCIgdmFsdWU9XCInICsgYmNjSW5mby5wbGF5ZXJLZXkgKyAnXCIgLz4nO1xyXG5cdFx0bWFya3VwICs9ICc8cGFyYW0gbmFtZT1cIndtb2RlXCIgdmFsdWU9XCJ0cmFuc3BhcmVudFwiPic7XHJcblx0XHRtYXJrdXAgKz0gJzxwYXJhbSBuYW1lPVwiaXNWaWRcIiB2YWx1ZT1cInRydWVcIiAvPic7XHJcblx0XHRtYXJrdXAgKz0gJzxwYXJhbSBuYW1lPVwiaXNVSVwiIHZhbHVlPVwidHJ1ZVwiIC8+JztcclxuXHRcdG1hcmt1cCArPSAnPHBhcmFtIG5hbWU9XCJhdXRvU3RhcnRcIiB2YWx1ZT1cIicrYmNjSW5mby5hdXRvcGxheSsnXCIgLz4nO1xyXG5cdFx0bWFya3VwICs9ICc8cGFyYW0gbmFtZT1cImluY2x1ZGVBUElcIiB2YWx1ZT1cInRydWVcIiAvPic7XHJcblx0XHRtYXJrdXAgKz0gJzxwYXJhbSBuYW1lPVwidGVtcGxhdGVMb2FkSGFuZGxlclwiIHZhbHVlPVwibXlUZW1wbGF0ZUxvYWRlZFwiIC8+JztcclxuXHRcdG1hcmt1cCArPSAnPHBhcmFtIG5hbWU9XCJkeW5hbWljU3RyZWFtaW5nXCIgdmFsdWU9XCJ0cnVlXCIgLz4nO1xyXG5cdFx0bWFya3VwICs9ICc8cGFyYW0gbmFtZT1cIkAnICsgYmNjSW5mby50eXBlICsgJ1wiIHZhbHVlPVwiJyArIGJjY0luZm8udmlkZW9JZCArICdcIiAvPic7XHJcblx0XHRpZighYmNQcm90b2NvbCl7XHJcblx0XHRcdG1hcmt1cCArPSAnPHBhcmFtIG5hbWU9XCJzZWN1cmVDb25uZWN0aW9uc1wiIHZhbHVlPVwidHJ1ZVwiIC8+JztcclxuXHRcdFx0bWFya3VwICs9ICc8cGFyYW0gbmFtZT1cInNlY3VyZUhUTUxDb25uZWN0aW9uc1wiIHZhbHVlPVwidHJ1ZVwiIC8+ICc7XHJcblx0XHR9XHJcblxyXG5cdFx0bWFya3VwICs9ICc8L29iamVjdD4nO1xyXG5cclxuXHRcdHJldHVybiBtYXJrdXA7XHJcblx0fTtcclxuXHJcblx0dGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICggYXR0ICl7XHJcblx0XHR2YXIgcmV0ID0gW107XHJcblx0XHRpZiAoIHJldCA9PSBudWxsICl7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiAoIHR5cGVvZiggYXR0ICkgPT0gJ3N0cmluZycgKSA/IHJldFthdHRdIDogcmV0O1xyXG5cdFx0fVxyXG5cdH07XHJcblx0dGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uICggbmFtZSwgdmFsdWUgKXtcclxuXHRcdHZhciByZXQgPSBbXTtcclxuXHRcdGZvciAoIHZhciBpIGluIHZhbHVlICl7XHJcblx0XHRcdCByZXRbaV0gPSB2YWx1ZVtpXTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdHRoaXMuY2hlY2tOdWxsID0gZnVuY3Rpb24gKCB2YWwgKXtcclxuXHRcdHJldHVybiAoIHZhbCA9PSBudWxsIHx8IHZhbCA9PSAnJyApO1xyXG5cdH07XHJcbn07XHJcbi8vc2l6ZSByZXNpemVcclxuYmNqUXVlcnkod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcclxuXHRpZihiY2NNb2RFeHAgIT0gdW5kZWZpbmVkKXtcclxuXHRcdG9uQmNWaWRlb1NpemUoKTtcclxuXHR9XHJcbn0pO1xyXG5mdW5jdGlvbiBvbkJjVmlkZW9TaXplKCl7XHJcblxyXG5cdHZhciB3aWR0aCA9ICQoYmNjRGl2KS5wYXJlbnQoKS53aWR0aCgpO1xyXG5cdHZhciBoZWlnaHQgPSAkKGJjY0RpdikucGFyZW50KCkuaGVpZ2h0KCk7XHJcblx0YmNDTG9nKFwib25CY1ZpZGVvU2l6ZSB3aWR0aDpcIit3aWR0aCArXCIgLyBoZWlnaHQ6XCIraGVpZ2h0KTtcclxuXHRpZiAoYmNjTW9kRXhwICYmIGJjY01vZEV4cC5leHBlcmllbmNlLnR5cGUgPT09IFwiaHRtbFwiKSB7XHJcbiAgICAgICAgYmNjTW9kRXhwLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gYmNjVGVtcGxhdGVMb2FkZWQoIGV4cGVyaWVuY2VJRCApe1xyXG5cdGJjQ0xvZyhcIl1dYmNjVGVtcGxhdGVMb2FkZWRcIik7XHJcblx0aWYoYmNCcm93c2VyKXtcclxuXHRcdGJjY01vZFZQID0gYnJpZ2h0Y292ZS5nZXRFeHBlcmllbmNlKCBleHBlcmllbmNlSUQpLmdldE1vZHVsZSggQVBJTW9kdWxlcy5WSURFT19QTEFZRVIgKTtcclxuXHRcdGJjY01vZEV4cCA9IGJyaWdodGNvdmUuZ2V0RXhwZXJpZW5jZShleHBlcmllbmNlSUQpLmdldE1vZHVsZSggQVBJTW9kdWxlcy5FWFBFUklFTkNFICk7XHJcblx0fWVsc2V7XHJcblx0XHRiY2NNb2RWUCA9IGJyaWdodGNvdmUuYXBpLmdldEV4cGVyaWVuY2UoIGV4cGVyaWVuY2VJRCkuZ2V0TW9kdWxlKCBicmlnaHRjb3ZlLmFwaS5tb2R1bGVzLkFQSU1vZHVsZXMuVklERU9fUExBWUVSICk7XHJcblx0XHRiY2NNb2RFeHAgPSBicmlnaHRjb3ZlLmFwaS5nZXRFeHBlcmllbmNlKGV4cGVyaWVuY2VJRCkuZ2V0TW9kdWxlKCBicmlnaHRjb3ZlLmFwaS5tb2R1bGVzLkFQSU1vZHVsZXMuRVhQRVJJRU5DRSApO1xyXG5cdH1cclxuXHRiY2NNb2RWUC5hZGRFdmVudExpc3RlbmVyKCBCQ01lZGlhRXZlbnQuQ0hBTkdFLCBvbkJjY1ZpZGVvTG9hZCApO1xyXG5cdGJjY01vZFZQLmFkZEV2ZW50TGlzdGVuZXIoIEJDTWVkaWFFdmVudC5CRUdJTiwgb25CY2NWaWRlb1JlYWR5ICk7XHJcblx0YmNjTW9kVlAuYWRkRXZlbnRMaXN0ZW5lciggQkNNZWRpYUV2ZW50LlBMQVksIG9uQmNjVmlkZW9QbGF5ICk7XHJcblx0YmNjTW9kVlAuYWRkRXZlbnRMaXN0ZW5lciggQkNNZWRpYUV2ZW50LlNUT1AsIG9uQmNjVmlkZW9TdG9wICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uREZYUFN0eWxlKGUpe1xyXG5cdGJjQ0xvZyhcIl1db25ERlhQU3R5bGVcIik7XHJcblx0Ly9iY0NMb2coYmNjTW9kQ2MuZ2V0Q2FwdGlvbnNFbmFibGVkKCkpO1xyXG59XHJcbmZ1bmN0aW9uIG9uQmNjVmlkZW9Mb2FkKCBlICl7XHJcblx0YmNDTG9nKFwiXV1vbkJjY1ZpZGVvTG9hZFwiKTtcclxuXHRiY2NTdGF0dXNDY0ZsYWdbZS5tZWRpYS5pZF0gPSBmYWxzZTtcclxuXHRpZihlLm1lZGlhLmNhcHRpb25zICE9IG51bGwpe1xyXG5cdFx0YmNjU3RhdHVzQ2NGbGFnW2UubWVkaWEuaWRdID0gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQmNjVmlkZW9SZWFkeSggZSApe1xyXG5cdGJjQ0xvZyhcIl1db25CY2NWaWRlb1JlYWR5XCIpO1xyXG5cdGlmKGUubWVkaWEubGluZXVwSWQgPT0gMCl7XHJcblx0XHRpZihiY2pRdWVyeShcIiNteUV4cGVyaWVuY2VcIiArIGUubWVkaWEuaWQpLmxlbmd0aCl7XHJcblx0XHRcdGJjalF1ZXJ5KFwiI215RXhwZXJpZW5jZVwiICsgZS5tZWRpYS5pZCkucGFyZW50cyhcIi5iYy1jcGxheWVyLWNvbnRyb2wtYXJlYVwiKS5hdHRyKFwibm93VmlkZW9cIixlLm1lZGlhLmlkKTtcclxuXHRcdFx0aWYoZS5tZWRpYS5jYXB0aW9ucyAhPSBudWxsKXtcclxuXHRcdFx0XHRiY2pRdWVyeShcIiNteUV4cGVyaWVuY2VcIiArIGUubWVkaWEuaWQpLnBhcmVudHMoXCIuYmMtY3BsYXllci1jb250cm9sLWFyZWFcIikuZmluZChcIi5iYy1jY1wiKS5hdHRyKFwidGFiaW5kZXhcIixcIjBcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoYmNjU3RhdHVzQ2NGbGFnW2UubWVkaWEuaWRdKXtcclxuXHRcdFx0XHRiY2pRdWVyeShcIiNteUV4cGVyaWVuY2VcIiArIGUubWVkaWEuaWQpLnBhcmVudHMoXCIuYmMtY3BsYXllci1jb250cm9sLWFyZWFcIikuZmluZChcIi5iYy1jY1wiKS5yZW1vdmVDbGFzcyhcIm92ZXJcIikuYWRkQ2xhc3MoXCJvblwiKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0YmNqUXVlcnkoXCIjbXlFeHBlcmllbmNlXCIgKyBlLm1lZGlhLmlkKS5wYXJlbnRzKFwiLmJjLWNwbGF5ZXItY29udHJvbC1hcmVhXCIpLmZpbmQoXCIuYmMtY2NcIikucmVtb3ZlQ2xhc3MoXCJvblwiKS5yZW1vdmVDbGFzcyhcIm92ZXJcIik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9ZWxzZXtcclxuXHRcdHZhciB2cCA9IGJyaWdodGNvdmUuZ2V0RXhwZXJpZW5jZSggXCJteUV4cGVyaWVuY2VcIiArIGUubWVkaWEubGluZXVwSWQgKS5nZXRNb2R1bGUoIEFQSU1vZHVsZXMuVklERU9fUExBWUVSICk7XHJcblx0XHRpZihlLm1lZGlhLmNhcHRpb25zICE9IG51bGwpe1xyXG5cdFx0XHRiY2NTdGF0dXNDY0ZsYWdbZS5tZWRpYS5pZF0gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYoYmNqUXVlcnkoXCIjbXlFeHBlcmllbmNlXCIgKyBlLm1lZGlhLmxpbmV1cElkKS5sZW5ndGgpe1xyXG5cdFx0XHRiY2pRdWVyeShcIiNteUV4cGVyaWVuY2VcIiArIGUubWVkaWEubGluZXVwSWQpLnBhcmVudHMoXCIuYmMtY3BsYXllci1jb250cm9sLWFyZWFcIikuYXR0cihcIm5vd1ZpZGVvXCIsZS5tZWRpYS5pZCk7XHJcblx0XHRcdGlmKGUubWVkaWEuY2FwdGlvbnMgIT0gbnVsbCl7XHJcblx0XHRcdFx0YmNqUXVlcnkoXCIjbXlFeHBlcmllbmNlXCIgKyBlLm1lZGlhLmxpbmV1cElkKS5wYXJlbnRzKFwiLmJjLWNwbGF5ZXItY29udHJvbC1hcmVhXCIpLmZpbmQoXCIuYmMtY2NcIikuYXR0cihcInRhYmluZGV4XCIsXCIwXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKGJjY1N0YXR1c0NjRmxhZ1tlLm1lZGlhLmxpbmV1cElkXSl7XHJcblx0XHRcdFx0YmNqUXVlcnkoXCIjbXlFeHBlcmllbmNlXCIgKyBlLm1lZGlhLmxpbmV1cElkKS5wYXJlbnRzKFwiLmJjLWNwbGF5ZXItY29udHJvbC1hcmVhXCIpLmZpbmQoXCIuYmMtY2NcIikucmVtb3ZlQ2xhc3MoXCJvblwiKS5hZGRDbGFzcyhcIm92ZXJcIik7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGJjalF1ZXJ5KFwiI215RXhwZXJpZW5jZVwiICsgZS5tZWRpYS5saW5ldXBJZCkucGFyZW50cyhcIi5iYy1jcGxheWVyLWNvbnRyb2wtYXJlYVwiKS5maW5kKFwiLmJjLWNjXCIpLnJlbW92ZUNsYXNzKFwib3ZlclwiKS5hZGRDbGFzcyhcIm9uXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG9uQmNjVmlkZW9QbGF5KGUpe1xyXG5cdGJjQ0xvZyhcIl1dIG9uQmNjVmlkZW9QbGF5IFwiICtlLm1lZGlhLmlkKTtcclxuXHR2YXIgY29uZmlnSWQgPSBiY2pRdWVyeShcIiNteUV4cGVyaWVuY2VcIitlLm1lZGlhLmlkKS5wYXJlbnRzKFwiLmJjLWNwbGF5ZXItY29udHJvbC1hcmVhXCIpLmF0dHIoJ2lkJykuc3BsaXQoJ2JjLWNwbGF5ZXItY29udHJvbC1hcmVhXycpO1xyXG5cdGJjalF1ZXJ5KFwiI215RXhwZXJpZW5jZVwiK2UubWVkaWEuaWQpLnBhcmVudHMoXCIuYmMtY3BsYXllci1jb250cm9sLWFyZWFcIikuZmluZChcIi5wbGF5XCIpLnJlbW92ZUNsYXNzKCdwbGF5JykuYWRkQ2xhc3MoJ3BhdXNlJykuYXR0cih7J3RpdGxlJzpiY2NNc2dbXCJ0ZXh0XzAyXCJdLCAnaWQnOidwYXVzZS0nK2NvbmZpZ0lkWzFdfSkudGV4dChiY2NNc2dbXCJ0ZXh0XzAyXCJdKTtcclxufVxyXG5mdW5jdGlvbiBvbkJjY1ZpZGVvU3RvcChlKXtcclxuXHRiY0NMb2coXCJdXSBvbkJjY1ZpZGVvU3RvcCBcIitlLm1lZGlhLmlkKTtcclxuXHR2YXIgY29uZmlnSWQgPSBiY2pRdWVyeShcIiNteUV4cGVyaWVuY2VcIitlLm1lZGlhLmlkKS5wYXJlbnRzKFwiLmJjLWNwbGF5ZXItY29udHJvbC1hcmVhXCIpLmF0dHIoJ2lkJykuc3BsaXQoJ2JjLWNwbGF5ZXItY29udHJvbC1hcmVhXycpO1xyXG5cdGJjalF1ZXJ5KFwiI215RXhwZXJpZW5jZVwiK2UubWVkaWEuaWQpLnBhcmVudHMoXCIuYmMtY3BsYXllci1jb250cm9sLWFyZWFcIikuZmluZChcIi5wYXVzZVwiKS5yZW1vdmVDbGFzcygncGF1c2UnKS5hZGRDbGFzcygncGxheScpLmF0dHIoeyd0aXRsZSc6YmNjTXNnW1widGV4dF8wMVwiXSwgJ2lkJzoncGxheS0nK2NvbmZpZ0lkWzFdfSkudGV4dChiY2NNc2dbXCJ0ZXh0XzAxXCJdKTtcclxufVxyXG5cclxuKGZ1bmN0aW9uKCQpe1xyXG5cdCQuZm4uYmNjUGxheWVyQ29udHJvbHMgPSBmdW5jdGlvbih2aWRlb0lELCB2V2lkdGgsIHZIZWlnaHQpe1xyXG5cclxuXHRcdHZhciBhID0nLmJjLWNwbGF5ZXItYXJlYXtkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyBtYXgtd2lkdGg6IDEwMCU7cGFkZGluZy10b3A6IDU2LjI1JTt9LmJjLWNwbGF5ZXItY29udHJvbC1hcmVhe292ZXJmbG93OmhpZGRlbn0uYmMtY3BsYXllci1jb250cm9se3Bvc2l0aW9uOnJlbGF0aXZlO29wYWNpdHk6MC4wMTt6LWluZGV4OjA7YmFja2dyb3VuZC1pbWFnZTp1cmwoL2NvbW1vbi9icmlnaHRjb3ZlL2ltZy9iZ19wYW5lbC5naWYpO3dpZHRoOjEwMCU7aGVpZ2h0OjQwcHg7b3ZlcmZsb3c6aGlkZGVufS5iYy1jcGxheWVyLWNvbnRyb2wuc2hvdyB7b3BhY2l0eToxICFpbXBvcnRhbnQ7ei1pbmRleDo0MDAwICFpbXBvcnRhbnQ7fS5iYy1jcGxheWVyLWNvbnRyb2wgLmxlZnRQYW5lbCB7ZmxvYXQ6bGVmdH0uYmMtY3BsYXllci1jb250cm9sIC5yaWdodFBhbmVsIHtmbG9hdDpyaWdodH0uYmMtY3BsYXllci1jb250YWluZXIgLnZpZGVve3Bvc2l0aW9uOnJlbGF0aXZlO1x0dG9wOi00MHB4O3otaW5kZXg6MzAwMDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5iYy1jcGxheWVyLWNvbnRyb2wgYnV0dG9uIHtmbG9hdDpsZWZ0O3dpZHRoOjUwcHg7aGVpZ2h0OjQwcHg7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmctdG9wOjQwcHg7Zm9udC1mYW1pbHk6IEFyaWFsLCB2ZXJkYW5hLCBzYW5zLXNlcmlmO2NvbG9yOiAjMDAwO2ZvbnQtc2l6ZTogMS4xZW07YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsgYm9yZGVyOm5vbmU7fS5iYy1jcGxheWVyLWNvbnRyb2wgYnV0dG9uOmZvY3Vze2JvcmRlcjp3aGl0ZSBzb2xpZCAxcHh9LmJjLWNwbGF5ZXItY29udHJvbCAucmV3aW5kIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2NvbW1vbi9icmlnaHRjb3ZlL2ltZy9idG5fcmV3aW5kLmdpZik7IH0gICAgLmJjLWNwbGF5ZXItY29udHJvbCAucGxheSB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9jb21tb24vYnJpZ2h0Y292ZS9pbWcvYnRuX3BsYXkuZ2lmKTt9ICAgIC5iYy1jcGxheWVyLWNvbnRyb2wgLnBhdXNlIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2NvbW1vbi9icmlnaHRjb3ZlL2ltZy9idG5fcGF1c2UuZ2lmKTsgfSAgICAuYmMtY3BsYXllci1jb250cm9sIC5mb3J3YXJkIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2NvbW1vbi9icmlnaHRjb3ZlL2ltZy9idG5fZm9yd2FyZC5naWYpOyB9LmJjLWNwbGF5ZXItY29udHJvbCAubXV0ZSB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9jb21tb24vYnJpZ2h0Y292ZS9pbWcvYnRuX3ZvbG9uLmdpZik7IH0uYmMtY3BsYXllci1jb250cm9sIC52b2x1bWUtZG93biB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9jb21tb24vYnJpZ2h0Y292ZS9pbWcvYnRuX3ZvbGRvd24uZ2lmKTsgfS5iYy1jcGxheWVyLWNvbnRyb2wgLnZvbHVtZS11cCB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9jb21tb24vYnJpZ2h0Y292ZS9pbWcvYnRuX3ZvbHVwLmdpZik7IH0uYmMtY3BsYXllci1jb250cm9sIC5tdXRlZHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2NvbW1vbi9icmlnaHRjb3ZlL2ltZy9idG5fdm9sbXV0ZS5naWYpO30uYmMtY3BsYXllci1jb250cm9sIC5yaWdodFBhbmVsIGEge292ZXJmbG93OmhpZGRlbjtkaXNwbGF5OmlubGluZS1ibG9jaztmbG9hdDpsZWZ0O2hlaWdodDo0MHB4O30uYmMtY3BsYXllci1jb250cm9sIC5yaWdodFBhbmVsIGJ1dHRvbi5iYy1jYyB7d2lkdGg6MzRweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgvY29tbW9uL2JyaWdodGNvdmUvaW1nL2J0bl9iY19jYy5wbmcpO30uYmMtY3BsYXllci1jb250cm9sIC5yaWdodFBhbmVsIGJ1dHRvbi5iYy1jYy5vdmVyIHtiYWNrZ3JvdW5kLWltYWdlOnVybCgvY29tbW9uL2JyaWdodGNvdmUvaW1nL2J0bl9iY19jY19vdmVyLnBuZykgIWltcG9ydGFudDt9LmJjLWNwbGF5ZXItY29udHJvbCAucmlnaHRQYW5lbCBidXR0b24uYmMtY2Mub24ge2JhY2tncm91bmQtaW1hZ2U6dXJsKC9jb21tb24vYnJpZ2h0Y292ZS9pbWcvYnRuX2JjX2NjX29uLnBuZykgIWltcG9ydGFudDt9LmVuZC1vZi1iY3tvdmVyZmxvdzpoaWRkZW47d2lkdGg6MHB4O2hlaWdodDowcHg7cG9zaXRpb246YWJzb2x1dGV9JztcclxuXHRcdC8vZGV2XHJcblx0XHQvL3ZhciBhID0nLmJjLWNwbGF5ZXItYXJlYXtkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyBwYWRkaW5nLXRvcDogNTYuMjUlO30uYmMtY3BsYXllci1jb250cm9sLWFyZWF7b3ZlcmZsb3c6aGlkZGVuO2hlaWdodDoxMDAlfS5iYy1jcGxheWVyLWNvbnRyb2x7cG9zaXRpb246cmVsYXRpdmU7b3BhY2l0eTowLjAxO3otaW5kZXg6MDtiYWNrZ3JvdW5kLWltYWdlOnVybCgvYnJpZ2h0Y292ZS90ZXN0L21vZHVsZS9pbWcvYmdfcGFuZWwuZ2lmKTt3aWR0aDoxMDAlO2hlaWdodDo0MHB4O292ZXJmbG93OmhpZGRlbn0uYmMtY3BsYXllci1jb250cm9sLnNob3cge29wYWNpdHk6MSAhaW1wb3J0YW50O3otaW5kZXg6NDAwMCAhaW1wb3J0YW50O30uYmMtY3BsYXllci1jb250cm9sIC5sZWZ0UGFuZWwge2Zsb2F0OmxlZnR9LmJjLWNwbGF5ZXItY29udHJvbCAucmlnaHRQYW5lbCB7ZmxvYXQ6cmlnaHR9LmJjLWNwbGF5ZXItY29udGFpbmVyIC52aWRlb3twb3NpdGlvbjpyZWxhdGl2ZTtcdHRvcDotNDBweDt6LWluZGV4OjMwMDA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uYmMtY3BsYXllci1jb250cm9sIGJ1dHRvbiB7ZmxvYXQ6bGVmdDt3aWR0aDo1MHB4O2hlaWdodDo0MHB4O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nLXRvcDo0MHB4O2ZvbnQtZmFtaWx5OiBBcmlhbCwgdmVyZGFuYSwgc2Fucy1zZXJpZjtjb2xvcjogIzAwMDtmb250LXNpemU6IDEuMWVtO2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IGJvcmRlcjpub25lO30uYmMtY3BsYXllci1jb250cm9sIGJ1dHRvbjpmb2N1c3tib3JkZXI6d2hpdGUgc29saWQgMXB4fS5iYy1jcGxheWVyLWNvbnRyb2wgLnJld2luZCB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9icmlnaHRjb3ZlL3Rlc3QvbW9kdWxlL2ltZy9idG5fcmV3aW5kLmdpZik7IH0gICAgLmJjLWNwbGF5ZXItY29udHJvbCAucGxheSB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9icmlnaHRjb3ZlL3Rlc3QvbW9kdWxlL2ltZy9idG5fcGxheS5naWYpO30gICAgLmJjLWNwbGF5ZXItY29udHJvbCAucGF1c2Uge2JhY2tncm91bmQtaW1hZ2U6IHVybCgvYnJpZ2h0Y292ZS90ZXN0L21vZHVsZS9pbWcvYnRuX3BhdXNlLmdpZik7IH0gICAgLmJjLWNwbGF5ZXItY29udHJvbCAuZm9yd2FyZCB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9icmlnaHRjb3ZlL3Rlc3QvbW9kdWxlL2ltZy9idG5fZm9yd2FyZC5naWYpOyB9LmJjLWNwbGF5ZXItY29udHJvbCAubXV0ZSB7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9icmlnaHRjb3ZlL3Rlc3QvbW9kdWxlL2ltZy9idG5fdm9sb24uZ2lmKTsgfS5iYy1jcGxheWVyLWNvbnRyb2wgLnZvbHVtZS1kb3duIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2JyaWdodGNvdmUvdGVzdC9tb2R1bGUvaW1nL2J0bl92b2xkb3duLmdpZik7IH0uYmMtY3BsYXllci1jb250cm9sIC52b2x1bWUtdXAge2JhY2tncm91bmQtaW1hZ2U6IHVybCgvYnJpZ2h0Y292ZS90ZXN0L21vZHVsZS9pbWcvYnRuX3ZvbHVwLmdpZik7IH0uYmMtY3BsYXllci1jb250cm9sIC5tdXRlZHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2JyaWdodGNvdmUvdGVzdC9tb2R1bGUvaW1nL2J0bl92b2xtdXRlLmdpZik7fS5iYy1jcGxheWVyLWNvbnRyb2wgLnJpZ2h0UGFuZWwgYSB7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2Zsb2F0OmxlZnQ7aGVpZ2h0OjQwcHg7fS5iYy1jcGxheWVyLWNvbnRyb2wgLnJpZ2h0UGFuZWwgYnV0dG9uLmJjLWNjIHt3aWR0aDozNHB4O2JhY2tncm91bmQtaW1hZ2U6dXJsKC9icmlnaHRjb3ZlL3Rlc3QvbW9kdWxlL2ltZy9idG5fYmNfY2MucG5nKTt9LmJjLWNwbGF5ZXItY29udHJvbCAucmlnaHRQYW5lbCBidXR0b24uYmMtY2Mub3ZlciB7YmFja2dyb3VuZC1pbWFnZTp1cmwoL2JyaWdodGNvdmUvdGVzdC9tb2R1bGUvaW1nL2J0bl9iY19jY19vdmVyLnBuZykgIWltcG9ydGFudDt9LmJjLWNwbGF5ZXItY29udHJvbCAucmlnaHRQYW5lbCBidXR0b24uYmMtY2Mub24ge2JhY2tncm91bmQtaW1hZ2U6dXJsKC9icmlnaHRjb3ZlL3Rlc3QvbW9kdWxlL2ltZy9idG5fYmNfY2Nfb24ucG5nKSAhaW1wb3J0YW50O30uYmMtY3BsYXllci1jb250cm9sIC5yaWdodFBhbmVsIGJ1dHRvbi5iYy1mcy5vbiB7YmFja2dyb3VuZC1pbWFnZTp1cmwoL2JyaWdodGNvdmUvdGVzdC9tb2R1bGUvaW1nL2J0bl9mc19vbi5naWYpICFpbXBvcnRhbnQ7fS5iYy1jcGxheWVyLWNvbnRyb2wgLnJpZ2h0UGFuZWwgYnV0dG9uLmJjLWZzLm9mZiB7YmFja2dyb3VuZC1pbWFnZTp1cmwoL2JyaWdodGNvdmUvdGVzdC9tb2R1bGUvaW1nL2J0bl9mc19vZmYuZ2lmKSAhaW1wb3J0YW50O30uZW5kLW9mLWJje292ZXJmbG93OmhpZGRlbjt3aWR0aDowcHg7aGVpZ2h0OjBweDtwb3NpdGlvbjphYnNvbHV0ZX0nO1xyXG5cdFx0dmFyIGIsYyxkO1xyXG5cdFx0ZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHRcdGlmIChkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KSB7XHJcblx0XHRcdGIgPSBkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KCk7XHJcblx0XHRcdGIuY3NzVGV4dCA9IGE7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdFx0XHRjLnR5cGUgPSBcInRleHQvY3NzXCI7XHJcblx0XHRcdGlmIChjLnN0eWxlU2hlZXQpIHtcclxuXHRcdFx0XHRjLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGFcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKVxyXG5cdFx0XHR9XHJcblx0XHRcdGQuYXBwZW5kQ2hpbGQoYyk7XHJcblx0XHR9XHJcblx0XHR2YXIgY29uZmlnID0ge1xyXG5cdFx0XHRpZDogJ2JjJytiY2NfaWR4XHJcblx0XHR9O1xyXG5cdFx0dmFyIHZwID0gbnVsbDtcclxuXHRcdHZhciB2cE1lbnUgPSBudWxsO1xyXG5cdFx0dmFyIHZwQ2FwdGlvbiA9IG51bGw7XHJcblx0XHR2YXIgdnBFeHAgPSBudWxsO1xyXG5cdFx0dmFyIHZwTGlzdEZsYWcgPSBmYWxzZTtcclxuXHRcdHZhciB2cExpc3QgPSBudWxsO1xyXG5cdFx0dmFyIG5vd1ZvbHVtZSA9IDA7XHJcblx0XHR2YXIgZ2FwVm9sdW1lID0gMS8xMDtcclxuXHRcdHZhciBub3dQbGF5Q250ID0gMDtcclxuXHRcdHZhciBjb250cm9sT3V0ID0gZmFsc2U7XHJcblxyXG5cdFx0dmFyIG9iaiA9ICQodGhpcyk7XHJcblx0XHR2YXIgYXJlYVcgPSBvYmouYXR0cihcIndpZHRoXCIpO1xyXG5cdFx0dmFyIGFyZWFIID0gb2JqLmF0dHIoXCJoZWlnaHRcIik7XHJcblxyXG5cdFx0dmFyIHN0YXJ0RGl2ID0gJChcIjxkaXYgLz5cIix7XCJpZFwiOlwiYmMtY3BsYXllci1jb250cm9sLWFyZWFfXCIrYmNjX2lkeH0pLmFkZENsYXNzKFwiYmMtY3BsYXllci1jb250cm9sLWFyZWFcIik7XHJcblx0XHRpZiAodHlwZW9mKGFyZWFXKSAhPSBcInVuZGVmaW5lZFwiKXtcclxuXHRcdFx0c3RhcnREaXYud2lkdGgoYXJlYVcpLmhlaWdodChhcmVhSCk7XHJcblx0XHR9XHJcblx0XHR2YXIgY29udGFpbmVyRGl2XHQgPSAkKCc8ZGl2IGNsYXNzPVwiYmMtY3BsYXllci1jb250YWluZXJcIiBzdHlsZT1cIndpZHRoOicrdldpZHRoKyc7aGVpZ2h0OicrdkhlaWdodCsnXCIvPicpO1xyXG5cdFx0dmFyIHZpZGVvRGl2XHQgPSAkKCc8ZGl2IGNsYXNzPVwidmlkZW9cIiAvPicpO1xyXG5cclxuXHRcdHZhciBwYW5lbERpdiA9ICQoXCI8ZGl2IC8+XCIpLmFkZENsYXNzKFwiYmMtY3BsYXllci1jb250cm9sXCIpO1xyXG5cdFx0dmFyIGxlZnRQYW5lbERpdiA9ICQoXCI8ZGl2IC8+XCIpLmFkZENsYXNzKFwibGVmdFBhbmVsXCIpO1xyXG5cdFx0dmFyIHJpZ2h0UGFuZWxEaXYgPSAkKFwiPGRpdiAvPlwiKS5hZGRDbGFzcyhcInJpZ2h0UGFuZWxcIik7XHJcblxyXG5cdFx0dmFyIGVuZERpdiA9ICQoXCI8ZGl2IC8+XCIse1wiY2xhc3NcIjpcImVuZC1vZi1iY1wifSkuaHRtbChcIjxhIGhyZWY9JyMnIG9uY2xpY2s9J3JldHVybiBmYWxzZTsnPlwiK2JjY01zZ1tcInRleHRfMTBcIl0gK1wiPC9hPlwiKTtcclxuXHJcblx0XHRvYmouYWZ0ZXIoc3RhcnREaXYpO1xyXG5cdFx0c3RhcnREaXYuYXBwZW5kKGNvbnRhaW5lckRpdik7XHJcblxyXG5cdFx0cGFuZWxEaXYuYXBwZW5kKGxlZnRQYW5lbERpdik7XHJcblx0XHRwYW5lbERpdi5hcHBlbmQocmlnaHRQYW5lbERpdik7XHJcblxyXG5cdFx0Y29udGFpbmVyRGl2LmFwcGVuZChwYW5lbERpdik7XHJcblx0XHRjb250YWluZXJEaXYuYXBwZW5kKHZpZGVvRGl2KTtcclxuXHRcdG9iai5hcHBlbmRUbyh2aWRlb0Rpdik7XHJcblxyXG5cdFx0c3RhcnREaXYuYWZ0ZXIoZW5kRGl2KTtcclxuXHJcblx0XHRpZihzdGFydERpdi5wYXJlbnQoXCJkaXZcIikubGVuZ3RoICYmIGFyZWFIID09IFwiMTAwJVwiKXtcclxuXHRcdFx0c3RhcnREaXYucGFyZW50KFwiZGl2XCIpLmhlaWdodChcIjEwMCVcIik7XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGdldFBsYXllciA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKHZwKXtcclxuXHRcdFx0XHRyZXR1cm4gdnA7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHZwID0gYnJpZ2h0Y292ZS5nZXRFeHBlcmllbmNlKCBcIm15RXhwZXJpZW5jZVwiICsgdmlkZW9JRCApLmdldE1vZHVsZSggQVBJTW9kdWxlcy5WSURFT19QTEFZRVIgKTtcclxuXHRcdFx0XHR2cE1lbnUgPSBicmlnaHRjb3ZlLmdldEV4cGVyaWVuY2UoIFwibXlFeHBlcmllbmNlXCIgKyB2aWRlb0lEICkuZ2V0TW9kdWxlKCBBUElNb2R1bGVzLk1FTlUgKVxyXG5cdFx0XHRcdHZwQ2FwdGlvbiA9IGJyaWdodGNvdmUuZ2V0RXhwZXJpZW5jZSggXCJteUV4cGVyaWVuY2VcIiArIHZpZGVvSUQgKS5nZXRNb2R1bGUoIEFQSU1vZHVsZXMuQ0FQVElPTlMgKTtcclxuXHRcdFx0XHR2cEV4cCA9IGJyaWdodGNvdmUuZ2V0RXhwZXJpZW5jZSggXCJteUV4cGVyaWVuY2VcIiArIHZpZGVvSUQgKS5nZXRNb2R1bGUoIEFQSU1vZHVsZXMuRVhQRVJJRU5DRSApO1xyXG5cdFx0XHRcdF9jaHJvbWVsZXNzUGxheWVyID0gdnBFeHAuZ2V0RWxlbWVudEJ5SUQoXCJ2aWRlb1BsYXllclwiKTtcclxuXHRcdFx0XHRfY2hyb21lbGVzc0NvbnRyb2xzID0gX2Nocm9tZWxlc3NQbGF5ZXIuZ2V0Q29udHJvbHMoKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHZwO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBjcmVhdGVCdXR0b24gPSBmdW5jdGlvbihhY3Rpb24sIG5hbWUpIHtcclxuXHRcdFx0dmFyIGxhYmVsID0gMDtcclxuXHRcdFx0dmFyIGJ0bklkID0gW2FjdGlvbiwgY29uZmlnLmlkXS5qb2luKCctJyk7XHJcblx0XHRcdHZhciBidG5BcmVhID0gJCgnPGJ1dHRvbiAvPicpLmFwcGVuZChuYW1lKS5hZGRDbGFzcyhhY3Rpb24pLmF0dHIoeyd0aXRsZSc6bmFtZSwgJ2lkJzpidG5JZH0pO1xyXG5cdFx0XHRyZXR1cm4gYnRuQXJlYTtcclxuXHRcdH07XHJcblx0XHR2YXIgcGxheSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBwbGF5ZXIgPSBnZXRQbGF5ZXIoKTtcclxuXHRcdFx0dnBNZW51LmNsb3NlTWVudVBhZ2UoKTtcclxuXHRcdFx0cGxheWVyLnBsYXkoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fTtcclxuXHRcdHZhciBwYXVzZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBwbGF5ZXIgPSBnZXRQbGF5ZXIoKTtcclxuXHRcdFx0aWYocGxheWVyLmlzUGxheWluZygpKXtcclxuXHRcdFx0XHRwbGF5ZXIucGF1c2UoKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dnBNZW51LmNsb3NlTWVudVBhZ2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cdFx0dmFyIG11dGUgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgcGxheWVyID0gZ2V0UGxheWVyKCk7XHJcblx0XHRcdHZhciB2b2x1bWUgPSBwbGF5ZXIuZ2V0Vm9sdW1lKCk7XHJcblx0XHRcdGlmKHZvbHVtZSl7XHJcblx0XHRcdFx0bm93Vm9sdW1lID0gdm9sdW1lO1xyXG5cdFx0XHRcdG11dGVCdG4uYWRkQ2xhc3MoJ211dGVkJyk7XHJcblx0XHRcdFx0cGxheWVyLnNldFZvbHVtZSgwKTtcclxuXHRcdFx0XHRwbGF5ZXIubXV0ZSgpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRpZihtdXRlQnRuLmhhc0NsYXNzKCdtdXRlZCcpKXtcclxuXHRcdFx0XHRcdG11dGVCdG4ucmVtb3ZlQ2xhc3MoJ211dGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG5vd1ZvbHVtZSl7XHJcblx0XHRcdFx0XHRwbGF5ZXIuc2V0Vm9sdW1lKG5vd1ZvbHVtZSk7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRwbGF5ZXIuc2V0Vm9sdW1lKGdhcFZvbHVtZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH07XHJcblx0XHR2YXIgdm9sdXAgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgcGxheWVyID0gZ2V0UGxheWVyKCk7XHJcblx0XHRcdHZhciB2b2x1bWUgPSBwbGF5ZXIuZ2V0Vm9sdW1lKCk7XHJcblx0XHRcdGlmKCh2b2x1bWUqMTApKyhnYXBWb2x1bWUqMTApID4gMTApe1xyXG5cdFx0XHRcdG5vd1ZvbHVtZSA9IDE7XHJcblx0XHRcdFx0cGxheWVyLnNldFZvbHVtZShub3dWb2x1bWUpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRub3dWb2x1bWUgPSAodm9sdW1lKjEwKSsoZ2FwVm9sdW1lKjEwKTtcclxuXHRcdFx0XHRwbGF5ZXIuc2V0Vm9sdW1lKE1hdGgucm91bmQobm93Vm9sdW1lKS8xMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYobXV0ZUJ0bi5oYXNDbGFzcygnbXV0ZWQnKSl7XHJcblx0XHRcdFx0bXV0ZUJ0bi5yZW1vdmVDbGFzcygnbXV0ZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cdFx0dmFyIHZvbGR3biA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBwbGF5ZXIgPSBnZXRQbGF5ZXIoKTtcclxuXHRcdFx0dmFyIHZvbHVtZSA9IHBsYXllci5nZXRWb2x1bWUoKTtcclxuXHRcdFx0aWYoKHZvbHVtZSoxMCktKGdhcFZvbHVtZSoxMCkgPD0gMCl7XHJcblx0XHRcdFx0bm93Vm9sdW1lID0gMDtcclxuXHRcdFx0XHRtdXRlQnRuLmFkZENsYXNzKCdtdXRlZCcpO1xyXG5cdFx0XHRcdHBsYXllci5zZXRWb2x1bWUobm93Vm9sdW1lKTtcclxuXHRcdFx0XHRwbGF5ZXIubXV0ZSgpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRub3dWb2x1bWUgPSAodm9sdW1lKjEwKS0oZ2FwVm9sdW1lKjEwKTtcclxuXHRcdFx0XHRwbGF5ZXIuc2V0Vm9sdW1lKE1hdGgucm91bmQobm93Vm9sdW1lKS8xMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgcGxheUJ0biA9Y3JlYXRlQnV0dG9uKFwicGxheVwiLCBiY2NNc2dbXCJ0ZXh0XzAxXCJdKS5hdHRyKHsnYXJpYS1saXZlJzonYXNzZXJ0aXZlJ30pLmJpbmQoe1xyXG5cdFx0XHRcImNsaWNrLmZlX2JyaWdodGNvdmVcIiA6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygncGxheScpKXtcclxuXHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3BsYXknKS5hZGRDbGFzcygncGF1c2UnKS5hdHRyKHsndGl0bGUnOmJjY01zZ1tcInRleHRfMDJcIl0sICdpZCc6J3BhdXNlLScrY29uZmlnLmlkfSkudGV4dChiY2NNc2dbXCJ0ZXh0XzAyXCJdKTtcclxuXHRcdFx0XHRcdHBsYXkoKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3BhdXNlJykuYWRkQ2xhc3MoJ3BsYXknKS5hdHRyKHsndGl0bGUnOmJjY01zZ1tcInRleHRfMDFcIl0sICdpZCc6J3BsYXktJytjb25maWcuaWR9KS50ZXh0KGJjY01zZ1tcInRleHRfMDFcIl0pO1xyXG5cdFx0XHRcdFx0cGF1c2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdFwiZm9jdXNpbi5mZV9icmlnaHRjb3ZlXCIgOiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHBhbmVsRGl2LmFkZENsYXNzKFwic2hvd1wiKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0XCJrZXlkb3duLmZlX2JyaWdodGNvdmVcIiA6IGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRcdGlmICggZS5rZXlDb2RlID09PSA5ICYmIGUuc2hpZnRLZXkgKSB7XHJcblx0XHRcdFx0XHRwYW5lbERpdi5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHBsYXlCdG4uYXBwZW5kVG8obGVmdFBhbmVsRGl2KTtcclxuXHRcdHZhciBtdXRlQnRuID0gY3JlYXRlQnV0dG9uKCdtdXRlJywgYmNjTXNnW1widGV4dF8wNlwiXSkuYmluZChcImNsaWNrLmZlX2JyaWdodGNvdmVcIixmdW5jdGlvbigpe211dGUoKTt9KTtcclxuXHRcdHZhciBkd25CdG4gPSBjcmVhdGVCdXR0b24oXCJ2b2x1bWUtZG93blwiLCBiY2NNc2dbXCJ0ZXh0XzA4XCJdKS5iaW5kKFwiY2xpY2suZmVfYnJpZ2h0Y292ZVwiLGZ1bmN0aW9uKCl7dm9sZHduKCk7fSk7XHJcblx0XHR2YXIgdXBCdG4gPSBjcmVhdGVCdXR0b24oXCJ2b2x1bWUtdXBcIixiY2NNc2dbXCJ0ZXh0XzA3XCJdKS5iaW5kKHtcclxuXHRcdFx0XCJjbGljay5mZV9icmlnaHRjb3ZlXCIgOiBmdW5jdGlvbigpe3ZvbHVwKCk7fSxcclxuXHRcdFx0XCJmb2N1c2luLmZlX2JyaWdodGNvdmVcIiA6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0cGFuZWxEaXYuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRcImtleWRvd24uZmVfYnJpZ2h0Y292ZVwiIDogZnVuY3Rpb24oZSl7XHJcblx0XHRcdFx0aWYgKCBlLmtleUNvZGUgPT09IDkgJiYgIWUuc2hpZnRLZXkgKSB7XHJcblx0XHRcdFx0XHRwYW5lbERpdi5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcblx0XHRcdFx0XHRjb250cm9sT3V0ID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGVuZERpdi5maW5kKFwiYVwiKS50cmlnZ2VyKFwiZm9jdXNcIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHZhciBidG5DQyA9ICQoXCI8YnV0dG9uIC8+XCIse1wiY2xhc3NcIjpcImJjLWNjXCIsXCJ0YWJpbmRleFwiOlwiLTFcIn0pO1xyXG5cdFx0YnRuQ0MudGV4dChiY2NNc2dbXCJ0ZXh0XzIyXCJdKTtcclxuXHRcdGJ0bkNDLmFwcGVuZFRvKHJpZ2h0UGFuZWxEaXYpO1xyXG5cdFx0dmFyIGZsYWdDQyA9IGZhbHNlO1xyXG5cdFx0dmFyIGNjU3RhdHVzID0gdHJ1ZTtcclxuXHRcdGJ0bkNDLnVuYmluZChcImNsaWNrLmZlX2JyaWdodGNvdmVcIikuYmluZChcImNsaWNrLmZlX2JyaWdodGNvdmVcIixmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgY3VycmVudFZpZGVvID0gJChcIi5iYy1jcGxheWVyLWNvbnRyb2wtYXJlYVwiKS5hdHRyKFwibm93dmlkZW9cIik7XHJcblx0XHRcdHZhciBwbGF5ZXIgPSBnZXRQbGF5ZXIoKTtcclxuXHRcdFx0aWYoYmNjU3RhdHVzQ2NGbGFnW2N1cnJlbnRWaWRlb10pe1xyXG5cdFx0XHRcdGlmKGJ0bkNDLmhhc0NsYXNzKFwib3ZlclwiKSl7XHJcblx0XHRcdFx0XHRmbGFnQ0MgPSBmYWxzZTtcclxuXHRcdFx0XHRcdGJ0bkNDLnJlbW92ZUNsYXNzKFwib3ZlclwiKS5hZGRDbGFzcyhcIm9uXCIpLmF0dHIoeyd0aXRsZSc6YmNjTXNnW1widGV4dF8yMVwiXX0pLnRleHQoYmNjTXNnW1widGV4dF8yMVwiXSk7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRmbGFnQ0MgPSB0cnVlO1xyXG5cdFx0XHRcdFx0YnRuQ0MucmVtb3ZlQ2xhc3MoXCJvblwiKS5hZGRDbGFzcyhcIm92ZXJcIikuYXR0cih7J3RpdGxlJzpiY2NNc2dbXCJ0ZXh0XzIwXCJdfSkudGV4dChiY2NNc2dbXCJ0ZXh0XzIwXCJdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dnBDYXB0aW9uLnNldENhcHRpb25zRW5hYmxlZChmbGFnQ0MpO1xyXG5cdFx0XHRcdF9jaHJvbWVsZXNzQ29udHJvbHMuc2V0VmlzaWJsZShmbGFnQ0M9PXRydWU/ZmFsc2U6dHJ1ZSk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGJ0bkNDLmF0dHIoeyd0aXRsZSc6YmNjTXNnW1widGV4dF8yMlwiXX0pLnRleHQoYmNjTXNnW1widGV4dF8yMlwiXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bXV0ZUJ0bi5hcHBlbmRUbyhyaWdodFBhbmVsRGl2KTtcclxuXHRcdGR3bkJ0bi5hcHBlbmRUbyhyaWdodFBhbmVsRGl2KTtcclxuXHRcdHVwQnRuLmFwcGVuZFRvKHJpZ2h0UGFuZWxEaXYpO1xyXG5cclxuXHRcdHZhciBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuXHRcdHZhciBpZVVzZSA9IGZhbHNlO1xyXG5cdFx0aWYgKCAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ05ldHNjYXBlJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgnVHJpZGVudCcpICE9IC0xKSB8fCAoYWdlbnQuaW5kZXhPZihcIm1zaWVcIikgIT0gLTEpICkge1xyXG5cdFx0XHRpZVVzZSA9IHRydWU7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0aWVVc2UgPSBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGVuZERpdi5maW5kKFwiYVwiKS5iaW5kKGllVXNlPT10cnVlP1wib25mb2N1c2luLmZlX2JyaWdodGNvdmVcIjpcImZvY3VzaW4uZmVfYnJpZ2h0Y292ZVwiLGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKGNvbnRyb2xPdXQpe1xyXG5cdFx0XHRcdGNvbnRyb2xPdXQgPSBmYWxzZTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dXBCdG4udHJpZ2dlcihcImZvY3VzXCIpO1xyXG5cdFx0XHRcdGNvbnRyb2xPdXQgPSBmYWxzZTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGVuZERpdi5maW5kKFwiYVwiKS5iaW5kKFwia2V5ZG93bi5mZV9icmlnaHRjb3ZlXCIsZnVuY3Rpb24oZSl7XHJcblx0XHRcdGlmICggZS5rZXlDb2RlID09PSA5ICYmIGUuc2hpZnRLZXkgKSB7XHJcblx0XHRcdFx0dXBCdG4udHJpZ2dlcihcImZvY3VzXCIpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRiY2NfaWR4Kys7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fTtcclxufSkoYmNqUXVlcnkpO1xyXG5cclxuYmNqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0aWYodHlwZW9mKEFQSU1vZHVsZXMpID09IFwidW5kZWZpbmVkXCIpe1xyXG5cdFx0aWYoYmNQcm90b2NvbCl7XHJcblx0XHRcdCQoXCJib2R5XCIpLmFwcGVuZCgnPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiLy9hZG1pbi5icmlnaHRjb3ZlLmNvbS9qcy9BUElNb2R1bGVzX2FsbC5qc1wiPjwvc2NyaXB0PicpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdCQoXCJib2R5XCIpLmFwcGVuZCgnPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiLy9zYWRtaW4uYnJpZ2h0Y292ZS5jb20vanMvQVBJTW9kdWxlc19hbGwuanNcIj48L3NjcmlwdD4nKTtcclxuXHRcdH1cclxuXHR9XHJcblx0YmNqUXVlcnkoJy5icmlnaHRjb3ZlLWJjYy1idG4tY2xvc2UsIC5icmlnaHRjb3ZlLWJjNS1idG4tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cdFx0YmNjTGF5ZXJDbG9zZSh0aGlzKTtcclxuXHR9KTtcclxufSk7XHJcbmZ1bmN0aW9uIGJyaWdodGNvdmVCY2NQbGF5ZXJMYXllcihkaXZJZCwgYWxpYXNJZCwgdmlkZW9JZCwgd2lkdGgsIGhlaWdodCwgYXV0b3BsYXkpe1xyXG5cclxuXHRiY2pRdWVyeSgnIycrZGl2SWQpLmJjQ2hyb21lUGxheWVyKGFsaWFzSWQsdmlkZW9JZCx3aWR0aCxoZWlnaHQsIGF1dG9wbGF5KTtcclxuXHRiY2pRdWVyeSgnIycrZGl2SWQpLmF0dHIoJ3N0eWxlJyxcIndpZHRoOlwiICsgd2lkdGggKyBcIjsgaGVpZ2h0OlwiICsgaGVpZ2h0ICsgXCI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjBweDtib3R0b206MHB4O3JpZ2h0OjBweDtsZWZ0OiAwcHg7XCIpO1xyXG5cclxuXHRhcmVhID0gYmNqUXVlcnkoXCIjXCIrZGl2SWQpLnBhcmVudHMoJy52aWRlby1hcmVhXzUnKS53cmFwQWxsKFwiPGRpdi8+XCIpLnBhcmVudCgpO1xyXG5cdGFyZWEuZmluZChcIi52aWRlby1hcmVhXzVcIikuc2hvdygpO1xyXG5cdGFyZWEuZmluZChcIi5icmlnaHRDb3ZlQXJlYVwiKS5zaG93KCk7XHJcblx0YmNqUXVlcnkoJ2JvZHknKS5hZGRDbGFzcygndmlkZW8tb3BlbicpO1xyXG5cclxuXHRfdmlkZW9fd3JhcF81ID0gYXJlYS5maW5kKFwiLnZpZGVvLXdyYXBfNVwiKTtcclxuXHJcblx0dmFyIHRvcCA9ICBNYXRoLm1heCgwLCAoKGJjalF1ZXJ5KHdpbmRvdykuaGVpZ2h0KCkgLSBfdmlkZW9fd3JhcF81Lm91dGVySGVpZ2h0KCkpIC8gMikgKyBiY2pRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpKTtcclxuXHR2YXIgbGVmdCA9ICBNYXRoLm1heCgwLCAoKGJjalF1ZXJ5KHdpbmRvdykud2lkdGgoKSAtIF92aWRlb193cmFwXzUub3V0ZXJXaWR0aCgpKSAvIDIpICsgYmNqUXVlcnkod2luZG93KS5zY3JvbGxMZWZ0KCkpO1xyXG5cdF92aWRlb193cmFwXzUuY3NzKHtcImxlZnRcIjpsZWZ0K1wicHhcIiwgXCJ0b3BcIjp0b3ArXCJweFwifSkuc2hvdygpLmZvY3VzKCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBiY2NMYXllckNsb3NlKG15KXtcclxuXHR2YXIgdGFyZ2V0ID0gYmNqUXVlcnkoXCIjXCIgKyAoIGJjalF1ZXJ5KG15KS5kYXRhKFwiZGl2LWlkXCIpID09PSB1bmRlZmluZWQgPyBiY2pRdWVyeShteSkuZGF0YShcInZpZGVvLWlkXCIpIDogYmNqUXVlcnkobXkpLmRhdGEoXCJkaXYtaWRcIikpKSxcclxuXHRhcmVhID0gdGFyZ2V0LmNsb3Nlc3QoJy52aWRlby1hcmVhXzUnKSxcclxuXHR3cmFwID0gdGFyZ2V0LmNsb3Nlc3QoJy52aWRlby13cmFwJyksXHJcblx0aXNWaWRPcGVuID0gZmFsc2U7XHJcblxyXG5cdGlmICh3aW5kb3cudmlkZW9qcykge1xyXG5cdFx0dmFyIGRpc3Bvc2VUYXJnZXRJZCA9IHRhcmdldC5maW5kKCcudmlkZW8tanMnKS5hdHRyKCdpZCcpO1xyXG5cdFx0aWYgKGRpc3Bvc2VUYXJnZXRJZCkge1xyXG5cdFx0XHR2aWRlb2pzKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpc3Bvc2VUYXJnZXRJZCkpLmRpc3Bvc2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFyZWEuaGlkZSgwKTtcclxuXHR0YXJnZXQuaHRtbCgnJyk7XHJcblxyXG5cdCQuZWFjaChiY2pRdWVyeSgnLnZpZGVvLWFyZWFfNScpLCBmdW5jdGlvbigpIHtcclxuXHRcdGlmICgkKHRoaXMpLmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdGlzVmlkT3BlbiA9IHRydWU7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0YXJlYS5maW5kKFwiLnZpZGVvLXdyYXAgLnZqcy1iaWctcGxheS1idXR0b25cIikuZm9jdXMoKTtcclxuXHQvL2JjalF1ZXJ5KFwiLnZpZGVvLXdyYXAgLnZqcy1iaWctcGxheS1idXR0b25cIikuZm9jdXMoKTtcclxuXHJcblx0aWYgKCFpc1ZpZE9wZW4gfHwgYmNqUXVlcnkoJ2JvZHknKS5oYXNDbGFzcygndmlkZW8tbGF5ZXItb3BlbicpKSB7XHJcblx0XHRiY2pRdWVyeSgnYm9keScpLnJlbW92ZUNsYXNzKCd2aWRlby1vcGVuJyk7XHJcblx0XHRiY2pRdWVyeSgnYm9keScpLnJlbW92ZUNsYXNzKCd2aWRlby1sYXllci1vcGVuJyk7XHJcblx0fVxyXG59XHJcblxyXG52YXIgYmM1cGxheWVyRGF0YSA9IHtcclxuXHRERVYgOiB7J2FjY291bnRJZCcgOiAnOTAxOTYxODY3MDAxJywgJ3BsYXllcklkJyA6ICdTa2VmcTBmRVVaJ30sLy92NS4yNC41XHJcblx0REVWMiA6IHsnYWNjb3VudElkJyA6ICc5MDE5NjE4NjcwMDEnLCAncGxheWVySWQnIDogJ1Z5bHY3ZmRXS2wnfSwvL3Y1LjExLjRcclxuXHRMSVZFIDogeydhY2NvdW50SWQnIDogJzkwMTk3MzU3ODAwMScsICdwbGF5ZXJJZCcgOiAncmtIaUptRThiJ30sXHJcblx0R0xPQkFMIDogeydhY2NvdW50SWQnIDogJzI5MzMzOTIzNjcwMDEnLCAncGxheWVySWQnIDogJ0h5aW5BUTRJVyd9LFxyXG5cdEVHIDogeydhY2NvdW50SWQnIDogJzkyMzE2MjY4MDAwMScsICdwbGF5ZXJJZCcgOiAncjFXYTl6QlE4Wid9LFxyXG5cdENOIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDYzNjAwMScsICdwbGF5ZXJJZCcgOiAnU3lsWHA0clhMYid9LFxyXG5cdFBLIDogeydhY2NvdW50SWQnIDogJzkyMzIyNzgxNjAwMScsICdwbGF5ZXJJZCcgOiAncmt4NHZ6Qm04Yid9LFxyXG5cdExFVkFOVCA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MTUwMDEnLCAncGxheWVySWQnIDogJ0JrdUdmSDdJWid9LFxyXG5cdENPIDogeydhY2NvdW50SWQnIDogJzkyMzE2MjY2MzAwMScsICdwbGF5ZXJJZCcgOiAnSDFSNFBtN1VXJ30sXHJcblx0U0cgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjY1MDAxJywgJ3BsYXllcklkJyA6ICdTeXozRlhRTFcnfSxcclxuXHRWTiAgOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzA1MDAxJywgJ3BsYXllcklkJyA6ICdyeU11SGptbThXJ30sXHJcblx0VVMgOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3Nzk3MDAxJywgJ3BsYXllcklkJyA6ICdCMWxodTRCWDhaJ30sXHJcblx0SFIgOiB7J2FjY291bnRJZCcgOiAnOTIzMjcwNjQ2MDAxJywgJ3BsYXllcklkJyA6ICdySjBTcE5YOFcnfSxcclxuXHRSUyA6IHsnYWNjb3VudElkJyA6ICc5MjMxNjI2NzYwMDEnLCAncGxheWVySWQnIDogJ1NrZjBXNjRtVVcnfSxcclxuXHRTSSA6IHsnYWNjb3VudElkJyA6ICczODU1NTAyODIwMDAxJywgJ3BsYXllcklkJyA6ICdyeUtZcE43TGInfSxcclxuXHRBVCA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MDkwMDEnLCAncGxheWVySWQnIDogJ1NKcUE1VlFVYid9LFxyXG5cdENIX0ZSIDogeydhY2NvdW50SWQnIDogJzkyMzIyNzgxMDAwMScsICdwbGF5ZXJJZCcgOiAnU0pIOG9FUUlXJ30sXHJcblx0Q0ggOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjczMDAxJywgJ3BsYXllcklkJyA6ICdTeUlmaVZtVVonfSxcclxuXHRBUiA6IHsnYWNjb3VudElkJyA6ICc5MjMyNzA2MzQwMDEnLCAncGxheWVySWQnIDogJ1Nrb1l3N21MWid9LFxyXG5cdFBZIDogeydhY2NvdW50SWQnIDogJzQ0NTUyOTk1NjgwMDEnLCAncGxheWVySWQnIDogJ1N5WkZPbVhJWid9LFxyXG5cdFVSIDogeydhY2NvdW50SWQnIDogJzQ0NTUyOTk1NzAwMDEnLCAncGxheWVySWQnIDogJ3J5ZXpOT21YVVonfSxcclxuXHRBVSA6IHsnYWNjb3VudElkJyA6ICc5MjMxNjI2NjYwMDEnLCAncGxheWVySWQnIDogJ0gxMnhxbTdVYid9LFxyXG5cdE5aIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcwNDAwMScsICdwbGF5ZXJJZCcgOiAnQko3YnJjWG04Vyd9LFxyXG5cdEVFIDogeydhY2NvdW50SWQnIDogJzkyMzIyNzgxMjAwMScsICdwbGF5ZXJJZCcgOiAncnl0QzNFN0xXJ30sXHJcblx0TFYgOiB7J2FjY291bnRJZCcgOiAnOTIzMjcwNjQ0MDAxJywgJ3BsYXllcklkJyA6ICdyeWxDVTJObUxXJ30sXHJcblx0TFQgOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3ODEzMDAxJywgJ3BsYXllcklkJyA6ICdCa1I1bk5YVVcnfSxcclxuXHRCRSA6IHsnYWNjb3VudElkJyA6ICc5MjMxMzY3MTYwMDEnLCAncGxheWVySWQnIDogJ0gxZ3hxaTRROGInfSxcclxuXHRCRV9GUiA6IHsnYWNjb3VudElkJyA6ICc5MjMxNjI2NzQwMDEnLCAncGxheWVySWQnIDogJ3JrRVJzVlg4Wid9LFxyXG5cdE5MIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcxNzAwMScsICdwbGF5ZXJJZCcgOiAnU2tsQU1oRVE4Wid9LFxyXG5cdEpQIDogeydhY2NvdW50SWQnIDogJzkyMzE2MjY2ODAwMScsICdwbGF5ZXJJZCcgOiAnSDFlbEVDN1E4Vyd9LFxyXG5cdFNFQyA6IHsnYWNjb3VudElkJyA6ICc5MjMxMzY3MDgwMDEnLCAncGxheWVySWQnIDogJ0JKbUNIcm1JYid9LFxyXG5cdENBIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDYzMjAwMScsICdwbGF5ZXJJZCcgOiAnQkowNE1RWExiJ30sXHJcblx0Q0FfRlIgOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3Nzk4MDAxJywgJ3BsYXllcklkJyA6ICdya2pjbFg3OFcnfSxcclxuXHRDTCA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MDEwMDEnLCAncGxheWVySWQnIDogJ1N5OG1LN1E4Wid9LFxyXG5cdENaIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDY0MjAwMScsICdwbGF5ZXJJZCcgOiAnckoxVEtFWExXJ30sXHJcblx0U0sgOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3ODA4MDAxJywgJ3BsYXllcklkJyA6ICdyeWxRZTk0bUliJ30sXHJcblx0QlIgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjYxMDAxJywgJ3BsYXllcklkJyA6ICdya3JnN1htVVcnfSxcclxuXHRGUiA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MDcwMDEnLCAncGxheWVySWQnIDogJ1NrWFpPVjdVYid9LFxyXG5cdEdSIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcxMzAwMScsICdwbGF5ZXJJZCcgOiAnSEpaMGRFbVVaJ30sXHJcblx0REUgOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3ODA1MDAxJywgJ3BsYXllcklkJyA6ICdIeWx6SkxWUUxXJ30sXHJcblx0SFUgOiB7J2FjY291bnRJZCcgOiAnOTIzMjcwNjM3MDAxJywgJ3BsYXllcklkJyA6ICdIMTRMckVRTGInfSxcclxuXHRISyA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MDQwMDEnLCAncGxheWVySWQnIDogJ1MxZTZ4U3I3SWInfSxcclxuXHRIS19FTiA6IHsnYWNjb3VudElkJyA6ICc5MjMxMzY3MDkwMDEnLCAncGxheWVySWQnIDogJ0JKbk5ycm1MWid9LFxyXG5cdElUIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcxMjAwMScsICdwbGF5ZXJJZCcgOiAncmtnYXBlRTc4Vyd9LFxyXG5cdElEIDogeydhY2NvdW50SWQnIDogJzkyMzE2MjY2NzAwMScsICdwbGF5ZXJJZCcgOiAncnl4M2M5N1hVWid9LFxyXG5cdEtaX1VSIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDY0NzAwMScsICdwbGF5ZXJJZCcgOiAnSEpaZmVCUUxaJ30sXHJcblx0TEFUSU4gOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzAzMDAxJywgJ3BsYXllcklkJyA6ICdCSnhTdTdYUVViJ30sXHJcblx0TEFUSU5fRU4gOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3ODAwMDAxJywgJ3BsYXllcklkJyA6ICdyMVdvS0g3UUlXJ30sXHJcblx0VkUgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjYyMDAxJywgJ3BsYXllcklkJyA6ICdySmh4RXNQTXonfSwvL3Y1LjI4LjFcclxuXHRNWCA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc3OTkwMDEnLCAncGxheWVySWQnIDogJ1NKWDA1TVhRVWInfSxcclxuXHROX0FGUklDQSA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MTcwMDEnLCAncGxheWVySWQnIDogJ0J5SW1Ycjc4Vyd9LFxyXG5cdERLIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDYzODAwMScsICdwbGF5ZXJJZCcgOiAnSHliMURFUThXJ30sXHJcblx0RkkgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjcyMDAxJywgJ3BsYXllcklkJyA6ICdIa1VYRDRYVVonfSxcclxuXHROTyA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MDYwMDEnLCAncGxheWVySWQnIDogJ0IxSTJQVm1MYid9LFxyXG5cdFNFIDogeydhY2NvdW50SWQnIDogJzkyMzE2MjY3MTAwMScsICdwbGF5ZXJJZCcgOiAnQjFqS0lWUThiJ30sXHJcblx0UFQgOiB7J2FjY291bnRJZCcgOiAnOTIzMjcwNjQwMDAxJywgJ3BsYXllcklkJyA6ICdTSmJ1cmRFbVVaJ30sXHJcblx0UEggOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzA3MDAxJywgJ3BsYXllcklkJyA6ICdyMU1uazY3WFVaJ30sXHJcblx0UEwgOiB7J2FjY291bnRJZCcgOiAnOTIzMjcwNjQxMDAxJywgJ3BsYXllcklkJyA6ICdCa2pZZE5RVVonfSxcclxuXHRQRSA6IHsnYWNjb3VudElkJyA6ICc5MjMxNjI2NjQwMDEnLCAncGxheWVySWQnIDogJ3JrWHVLNzdVWid9LFxyXG5cdFJVIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcxODAwMScsICdwbGF5ZXJJZCcgOiAnQmtaQkhKclhVVyd9LFxyXG5cdEJHIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDY0MzAwMScsICdwbGF5ZXJJZCcgOiAncjFjSzVFbUlXJ30sXHJcblx0Uk8gOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzE1MDAxJywgJ3BsYXllcklkJyA6ICdyMWdSNDVOWElaJ30sXHJcblx0RVMgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjcwMDAxJywgJ3BsYXllcklkJyA6ICdIMXhKck5RVVcnfSxcclxuXHRUVyA6IHsnYWNjb3VudElkJyA6ICc5MjMyNzA2MzUwMDEnLCAncGxheWVySWQnIDogJ0J5d0ZISG1VWid9LFxyXG5cdFRSIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcyMTAwMScsICdwbGF5ZXJJZCcgOiAncjE3NVpybThaJ30sXHJcblx0VUEgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjc4MDAxJywgJ3BsYXllcklkJyA6ICdTMVNLa3JRSWInfSxcclxuXHRVQV9SVSA6IHsnYWNjb3VudElkJyA6ICc5MjMxNjI2NzcwMDEnLCAncGxheWVySWQnIDogJ0IxQmExclg4Wid9LFxyXG5cdElFIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcxMTAwMScsICdwbGF5ZXJJZCcgOiAnQjFEVmU0bThaJ30sXHJcblx0VUsgOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzEwMDAxJywgJ3BsYXllcklkJyA6ICdTeWNKeDRRTFcnfSxcclxuXHRBRSA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MTQwMDEnLCAncGxheWVySWQnIDogJ0J5Z05VbHJYOGInfSxcclxuXHRBRV9BUkFCSUMgOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzE5MDAxJywgJ3BsYXllcklkJyA6ICdCSmpLbFM3VVonfSxcclxuXHRJTiA6IHsnYWNjb3VudElkJyA6ICc5MjMxNjI2NjkwMDEnLCAncGxheWVySWQnIDogJ1MxS1JDUVg4Vyd9LFxyXG5cdE1ZIDogeydhY2NvdW50SWQnIDogJzkyMzEzNjcwNjAwMScsICdwbGF5ZXJJZCcgOiAnQjFFcWptUUlXJ30sXHJcblx0WkEgOiB7J2FjY291bnRJZCcgOiAnMjU3MTUxNTUzMTAwMScsICdwbGF5ZXJJZCcgOiAnUzFmYjdWU1FVYid9LFxyXG5cdEFGUklDQV9FTiA6IHsnYWNjb3VudElkJyA6ICc5MjMyNzA2NDgwMDEnLCAncGxheWVySWQnIDogJ0hKS3Y3SDdVWid9LFxyXG5cdEFGUklDQV9GUiA6IHsnYWNjb3VudElkJyA6ICc5MjMyMjc4MTgwMDEnLCAncGxheWVySWQnIDogJ1NrbWltSDdMWid9LFxyXG5cdEFGUklDQV9QVCA6IHsnYWNjb3VudElkJyA6ICc5MjMxMzY3MjMwMDEnLCAncGxheWVySWQnIDogJ1MxYjh5RUJYTGInfSxcclxuXHRJUkFOIDogeydhY2NvdW50SWQnIDogJzkyMzI3MDY1MDAwMScsICdwbGF5ZXJJZCcgOiAncjFZUlpTbUlaJ30sXHJcblx0SUwgOiB7J2FjY291bnRJZCcgOiAnOTIzMTYyNjc5MDAxJywgJ3BsYXllcklkJyA6ICdyeWxvYWdCWExiJ30sXHJcblx0U0EgOiB7J2FjY291bnRJZCcgOiAnOTIzMTM2NzIwMDAxJywgJ3BsYXllcklkJyA6ICdIeUl0YmJTN1ViJ30sXHJcblx0U0FfRU4gOiB7J2FjY291bnRJZCcgOiAnMjU3MTUxNTUzMjAwMScsICdwbGF5ZXJJZCcgOiAnU0pwSGJyN1ViJ30sXHJcblx0VEggOiB7J2FjY291bnRJZCcgOiAnOTIzMjI3ODAyMDAxJywgJ3BsYXllcklkJyA6ICdyeW95aVFYSVonfSxcclxuXHRBTCA6IHsnYWNjb3VudElkJyA6ICc1Mzk1NDc0OTAwMDAxJywgJ3BsYXllcklkJyA6ICdTMVdQbVM0UmcnfSxcclxuXHRMQiA6IHsnYWNjb3VudElkJyA6ICc1MzU5NzY5MTg1MDAxJywgJ3BsYXllcklkJyA6ICdCeTV1enROQWUnfSxcclxuXHRNTSA6IHsnYWNjb3VudElkJyA6ICc1Mzk1NDc0OTAyMDAxJywgJ3BsYXllcklkJyA6ICdCSldQWHQ0QWwnfSxcclxuXHRHQ1MgOiB7J2FjY291bnRJZCcgOiAnMTg1MjExMzAwODAwMScsICdwbGF5ZXJJZCcgOiAnQjFIWDNvWGJHJ30sXHJcblx0U0MgOiB7J2FjY291bnRJZCcgOiAnMTI3NTM4MDUwMTAwMScsICdwbGF5ZXJJZCcgOiAnckpVWk1iQlpHJ30sXHJcblx0TEVEIDogeydhY2NvdW50SWQnIDogJzIxNzI1NjMyMjkwMDEnLCAncGxheWVySWQnIDogJ1NKRXFNYlNXTSd9LFxyXG5cdFVLX0NTIDogeydhY2NvdW50SWQnIDogJzU2NzU3ODc5NjkwMDEnLCAncGxheWVySWQnIDogJ0hrbWpkNDBiTSd9LFxyXG5cdERFX0NTIDogeydhY2NvdW50SWQnIDogJzU2NzU3ODc5NzAwMDEnLCAncGxheWVySWQnIDogJ0J5eENCdUVDWkcnfSxcclxuXHRCRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1Njc1Nzg3OTcxMDAxJywgJ3BsYXllcklkJyA6ICdyMVNaSVZSV2YnfSxcclxuXHRCRV9GUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1Njc1Nzg3OTcyMDAxJywgJ3BsYXllcklkJyA6ICdyMTZ4T0VDYnonfSxcclxuXHROTF9DUyA6IHsnYWNjb3VudElkJyA6ICc1Njc1Nzg4MDA3MDAxJywgJ3BsYXllcklkJyA6ICdIeW1YT1ZBV2YnfSxcclxuXHRBQ0UgOiB7J2FjY291bnRJZCcgOiAnNTY4NTI4OTQ0NDAwMScsICdwbGF5ZXJJZCcgOiAnQnluN3dFVXp6J30sXHJcblxyXG5cdFVTX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzUwMDEnLCAncGxheWVySWQnIDogJ1NKQzk2Z3NOZid9LFxyXG5cdENBX0ZSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzYwMDEnLCAncGxheWVySWQnIDogJ3J5ZTYwZWlORyd9LFxyXG5cdENBX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzcwMDEnLCAncGxheWVySWQnIDogJ0JKSm5DeGk0eid9LFxyXG5cdE1YX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzgwMDEnLCAncGxheWVySWQnIDogJ1N5RlRoYmk0Ryd9LFxyXG5cdEJSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4NzkwMDEnLCAncGxheWVySWQnIDogJ3J5cFhoYmpFZid9LFxyXG5cdExBVElOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODAwMDEnLCAncGxheWVySWQnIDogJ3JKM3FuWm9Weid9LFxyXG5cdExBVElOX0VOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODEwMDEnLCAncGxheWVySWQnIDogJ3JKU25uWmpOeid9LFxyXG5cdFZFX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODIwMDEnLCAncGxheWVySWQnIDogJ0h5eVRuV280TSd9LFxyXG5cdENPX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODMwMDEnLCAncGxheWVySWQnIDogJ0Ixc2Q2ZWpFZid9LFxyXG5cdEFSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODQwMDEnLCAncGxheWVySWQnIDogJ0J5R0JDbG9Weid9LFxyXG5cdENMX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODUwMDEnLCAncGxheWVySWQnIDogJ0h5alRDbHNWZid9LFxyXG5cdFBFX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODcwMDEnLCAncGxheWVySWQnIDogJ0gxcVhwWnM0eid9LFxyXG5cdFNHX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODgwMDEnLCAncGxheWVySWQnIDogJ0J5d1k2Z29Oeid9LFxyXG5cdEFVX0NTIDogeydhY2NvdW50SWQnIDogJzU3MDk3MDA4ODkwMDEnLCAncGxheWVySWQnIDogJ3JrWlpQQ2xzRWYnfSxcclxuXHROWl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzA5NzAwODkwMDAxJywgJ3BsYXllcklkJyA6ICdIMWpEMHhzVmYnfSxcclxuXHRJRF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzA5NzAwODkxMDAxJywgJ3BsYXllcklkJyA6ICdySm5PaFppNGYnfSxcclxuXHRUSF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTUzMDAxJywgJ3BsYXllcklkJyA6ICdTa2lKa0dzTkcnfSxcclxuXHRWTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTU1MDAxJywgJ3BsYXllcklkJyA6ICdySm1jVHhpRXonfSxcclxuXHRNWV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTU2MDAxJywgJ3BsYXllcklkJyA6ICdTSnhZdEFaaVZHJ30sXHJcblx0UEhfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU1NzAwMScsICdwbGF5ZXJJZCcgOiAnQko4TTZXajRNJ30sXHJcblx0VFdfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU1ODAwMScsICdwbGF5ZXJJZCcgOiAnckp4cHRwYm80Zid9LFxyXG5cdEpQX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NTkwMDEnLCAncGxheWVySWQnIDogJ0JrNGowbGpWRyd9LFxyXG5cdElOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NjAwMDEnLCAncGxheWVySWQnIDogJ1NrN0NkQ1pqTkcnfSxcclxuXHRDTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTYxMDAxJywgJ3BsYXllcklkJyA6ICdTMXhyNmdzTnonfSxcclxuXHRIS19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTYyMDAxJywgJ3BsYXllcklkJyA6ICdISnNVaGJvVmYnfSxcclxuXHRIS19FTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTYzMDAxJywgJ3BsYXllcklkJyA6ICdIMXZ2aGJvTmYnfSxcclxuXHRJRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTY0MDAxJywgJ3BsYXllcklkJyA6ICdISmdwSUNaalZNJ30sXHJcblx0SVRfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU2NTAwMScsICdwbGF5ZXJJZCcgOiAnSDFNZDJib0VmJ30sXHJcblx0RVNfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU2NjAwMScsICdwbGF5ZXJJZCcgOiAnQnkxRmFXb05HJ30sXHJcblx0SFVfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU2NzAwMScsICdwbGF5ZXJJZCcgOiAnQnllMHJuWm9WRyd9LFxyXG5cdFNFX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NjgwMDEnLCAncGxheWVySWQnIDogJ1NraGw2YmlFZid9LFxyXG5cdERLX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NjkwMDEnLCAncGxheWVySWQnIDogJ0hreFRSaFdqVkcnfSxcclxuXHRGSV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTcxMDAxJywgJ3BsYXllcklkJyA6ICdCeWRrNlppTk0nfSxcclxuXHROT19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTcyMDAxJywgJ3BsYXllcklkJyA6ICdya01lVFdqRXonfSxcclxuXHRGUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTczMDAxJywgJ3BsYXllcklkJyA6ICdTMU9ObldzNEcnfSxcclxuXHRQVF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTc0MDAxJywgJ3BsYXllcklkJyA6ICdya1p3V2FXaVZ6J30sXHJcblx0UExfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU3NTAwMScsICdwbGF5ZXJJZCcgOiAnSHl4WFRXaVZHJ30sXHJcblx0R1JfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU3NjAwMScsICdwbGF5ZXJJZCcgOiAnSGt4N1MzV3NOTSd9LFxyXG5cdENaX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NzcwMDEnLCAncGxheWVySWQnIDogJ1NKT2ZuV2pFZid9LFxyXG5cdFNLX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NzgwMDEnLCAncGxheWVySWQnIDogJ3JrbTdoWm9ORyd9LFxyXG5cdFJPX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1NzkwMDEnLCAncGxheWVySWQnIDogJ1NrMkQ2Wm9FRyd9LFxyXG5cdEJHX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODAwMDEnLCAncGxheWVySWQnIDogJ0JrenZhWmpWRyd9LFxyXG5cdEFUX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODEwMDEnLCAncGxheWVySWQnIDogJ1NrYU1SZ2pFeid9LFxyXG5cdENIX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODIwMDEnLCAncGxheWVySWQnIDogJ1NKdW1BeGpFRyd9LFxyXG5cdENIX0ZSX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1ODMwMDEnLCAncGxheWVySWQnIDogJ0J5bE9WQXhvVk0nfSxcclxuXHRMVl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg0MDAxJywgJ3BsYXllcklkJyA6ICdCMUNGQ2xvRUcnfSxcclxuXHRMVF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg1MDAxJywgJ3BsYXllcklkJyA6ICdyeXRjUmxqRXonfSxcclxuXHRFRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg2MDAxJywgJ3BsYXllcklkJyA6ICdyeWZZQWxqRUcnfSxcclxuXHRSU19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTg3MDAxJywgJ3BsYXllcklkJyA6ICdTa211M2Fnc0VmJ30sXHJcblx0SFJfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU4ODAwMScsICdwbGF5ZXJJZCcgOiAnQmtjaWFsczRHJ30sXHJcblx0UlVfQ1MgOiB7J2FjY291bnRJZCcgOiAnNTcxMTM3MzU4OTAwMScsICdwbGF5ZXJJZCcgOiAnQkp4ckxhYmlOeid9LFxyXG5cdFVBX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1OTAwMDEnLCAncGxheWVySWQnIDogJ1N5bE5CUlppVkcnfSxcclxuXHRVQV9SVV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTkyMDAxJywgJ3BsYXllcklkJyA6ICdyeWdVUldzTk0nfSxcclxuXHRLWl9SVV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTkzMDAxJywgJ3BsYXllcklkJyA6ICdCSnEzMXpvVkcnfSxcclxuXHRBRV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk0MDAxJywgJ3BsYXllcklkJyA6ICdISmdFT1JXaU56J30sXHJcblx0QUVfQVJBQklDX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM1OTUwMDEnLCAncGxheWVySWQnIDogJ0gxZWNQMGJpRUcnfSxcclxuXHRJTF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk2MDAxJywgJ3BsYXllcklkJyA6ICdTeXlDQ1pzNEcnfSxcclxuXHRTQV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk3MDAxJywgJ3BsYXllcklkJyA6ICdTa2QwQWJvVnonfSxcclxuXHRTQV9FTl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk4MDAxJywgJ3BsYXllcklkJyA6ICdCSmZreUdvRU0nfSxcclxuXHRUUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNTk5MDAxJywgJ3BsYXllcklkJyA6ICdIa3U5YVdpNE0nfSxcclxuXHRJUkFOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM2MDAwMDEnLCAncGxheWVySWQnIDogJ0hrVlRDV2pWeid9LFxyXG5cdExFVkFOVF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjAxMDAxJywgJ3BsYXllcklkJyA6ICdIa0h3cGxvNE0nfSxcclxuXHRQS19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjAyMDAxJywgJ3BsYXllcklkJyA6ICdTMTJyVGdvRUcnfSxcclxuXHRFR19DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjAzMDAxJywgJ3BsYXllcklkJyA6ICdTa29RVGxqVkcnfSxcclxuXHROX0FGUklDQV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA0MDAxJywgJ3BsYXllcklkJyA6ICdTeWVNQ25aak5HJ30sXHJcblx0QUZSSUNBX0VOX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM2MDUwMDEnLCAncGxheWVySWQnIDogJ0J5MXNBYmlWTSd9LFxyXG5cdEFGUklDQV9GUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA2MDAxJywgJ3BsYXllcklkJyA6ICdTMU1oaVJiakVmJ30sXHJcblx0QUZSSUNBX1BUX0NTIDogeydhY2NvdW50SWQnIDogJzU3MTEzNzM2MDcwMDEnLCAncGxheWVySWQnIDogJ1N5WnRuQ2JzNE0nfSxcclxuXHRaQV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA4MDAxJywgJ3BsYXllcklkJyA6ICdTSk5xMFdpNEcnfSxcclxuXHRTSV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjA5MDAxJywgJ3BsYXllcklkJyA6ICdySnpmUnhzVmYnfSxcclxuXHRQWV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjEwMDAxJywgJ3BsYXllcklkJyA6ICdTa1RIQ2dvNGYnfSxcclxuXHRVUl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjEyMDAxJywgJ3BsYXllcklkJyA6ICdCeUlJMGVpTmYnfSxcclxuXHRMQl9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjEzMDAxJywgJ3BsYXllcklkJyA6ICdISks4VGxzVnonfSxcclxuXHRBTF9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjE0MDAxJywgJ3BsYXllcklkJyA6ICdISmpvbmdvRWYnfSxcclxuXHRNTV9DUyA6IHsnYWNjb3VudElkJyA6ICc1NzExMzczNjE1MDAxJywgJ3BsYXllcklkJyA6ICdya3lPNnhpTk0nfVxyXG59O1xyXG5cclxudmFyIGJjSHRtbDVQbGF5ZXIgPSBuZXcgZnVuY3Rpb24oKXtcclxuXHR2YXIgYmM1UGxheWVyTWFwID0gbmV3IEJjSGFzaE1hcCgpO1xyXG5cdHRoaXMubXlCYzVwbGF5ZXJEYXRhO1xyXG5cdHRoaXMuaHRtbDVwbGF5ZXJEYXRhO1xyXG5cdHRoaXMuYmM1TXlQbGF5ZXI7XHJcblx0KGZ1bmN0aW9uKCAkICl7XHJcblx0XHQkLmZuLmJjSHRtbDVQbGF5ZXIgPSBmdW5jdGlvbiggYWxhaXMgKXtcclxuXHJcblx0XHRcdHZhciBiYzUgPSBiY0h0bWw1UGxheWVyO1xyXG5cdFx0XHR2YXIgYXJyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSk7XHJcblxyXG5cdFx0XHRpZihiYzUuY2hlY2tOdWxsKGFyclswXSkpYXJyWzBdPVwiXCI7Ly9pZFxyXG5cdFx0XHRpZihiYzUuY2hlY2tOdWxsKGFyclsxXSkpYXJyWzFdPVwiXCI7Ly92aWRlb0lkXHJcblx0XHRcdGlmKGJjNS5jaGVja051bGwoYXJyWzJdKSlhcnJbMl09XCIxMDAlXCI7Ly93aWR0aFxyXG5cdFx0XHRpZihiYzUuY2hlY2tOdWxsKGFyclszXSkpYXJyWzNdPVwiMTAwJVwiOy8vaGVpZ2h0XHJcblx0XHRcdGlmKGJjNS5jaGVja051bGwoYXJyWzRdKSlhcnJbNF09XCJmYWxzZVwiOy8vYXV0b3BsYXlcclxuXHRcdFx0aWYoYmM1LmNoZWNrTnVsbChhcnJbNV0pKWFycls1XT1cImZhbHNlXCI7Ly9jY1VybFxyXG5cclxuXHRcdFx0bXlCYzVwbGF5ZXJEYXRhID0gZXZhbChcImJjNXBsYXllckRhdGEuXCIrYWxhaXMudG9VcHBlckNhc2UoKSk7XHJcblx0XHRcdGlmKHR5cGVvZiBteUJjNXBsYXllckRhdGEgPT0gXCJ1bmRlZmluZWRcIil7XHJcblx0XHRcdFx0YWxlcnQoICdBbGFpcyAnICsgIGFsYWlzICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuYmM1cGxheWVyRGF0YScgKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aHRtbDVwbGF5ZXJEYXRhID0ge1xyXG5cdFx0XHRcdCd0YXJnZXRJZCcgOiB0aGlzLnNlbGVjdG9yLFxyXG5cdFx0XHRcdCdhbGFpcycgOiBhbGFpcyxcclxuXHRcdFx0XHQnaWQnIDogYXJyWzBdICsgJ192aWRlb1RhZ0lEJyxcclxuXHRcdFx0XHQndmlkZW9JZCcgOiBhcnJbMV0sXHJcblx0XHRcdFx0J3dpZHRoJyA6IGFyclsyXSxcclxuXHRcdFx0XHQnaGVpZ2h0JyA6IGFyclszXSxcclxuXHRcdFx0XHQnYXV0b3BsYXknIDogYXJyWzRdLFxyXG5cdFx0XHRcdCdjY1VybCcgOiBhcnJbNV0sXHJcblx0XHRcdFx0J2FjY291bnRJZCcgOiBteUJjNXBsYXllckRhdGEuYWNjb3VudElkLFxyXG5cdFx0XHRcdCdwbGF5ZXJJZCcgOiBteUJjNXBsYXllckRhdGEucGxheWVySWQsXHJcblx0XHRcdH07XHJcblx0XHRcdGJjNVBsYXllck1hcC5wdXQoaHRtbDVwbGF5ZXJEYXRhLnZpZGVvSWQsaHRtbDVwbGF5ZXJEYXRhKTsvL+u5hOuUlOyYpCDsoJXrs7QgcHV0XHJcblx0XHRcdGFyciA9IFsgYmNqUXVlcnkoIHRoaXMgKSBdLmNvbmNhdCggYXJyICk7XHJcblx0XHRcdHJldHVybiBiYzVbXCJydW5cIl0uYXBwbHkoIGJjNSwgYXJyICk7XHJcblx0XHR9XHJcblx0fSkoIGJjalF1ZXJ5ICk7XHJcblxyXG5cdHRoaXMucnVuID0gZnVuY3Rpb24oZGl2LCB2b2RUYWdJZCwgdm9kSWQpe1xyXG5cdFx0YmNDTG9nKFwiaHRtbDUgUnVuISEgXCIrdm9kSWQpO1xyXG5cdFx0dmFyIGJjNUluZm8gPSBiYzVQbGF5ZXJNYXAuZ2V0KHZvZElkKTsvL+u5hOuUlOyYpCDsoJXrs7QgZ2V0XHJcblx0XHRiY0NMb2coYmM1SW5mbyk7XHJcblx0XHRiY0NMb2coXCJodG1sNSBSdW4gRW5kISEgXCIpO1xyXG5cdFx0dmFyIGEgPScudmpzLW1lbnUgbGk6Zm9jdXN7Ym9yZGVyOndoaXRlIGRhc2hlZCAxcHh9LnZqcy1tb3VzZS52anMtaGFzLXN0YXJ0ZWQudmpzLXVzZXItaW5hY3RpdmUgLnZqcy1jb250cm9sLC52anMtbW91c2UudmpzLWhhcy1zdGFydGVkLnZqcy11c2VyLWluYWN0aXZlIC52anMtY29udHJvbC1iYXIsLnZqcy1tb3VzZS52anMtaGFzLXN0YXJ0ZWQudmpzLXVzZXItaW5hY3RpdmUgLnZqcy1wcm9ncmVzcy1jb250cm9sLC52anMtbW91c2UudmpzLWhhcy1zdGFydGVkLnZqcy11c2VyLWluYWN0aXZlIC52anMtdGltZS1kaXZpZGVyIHt0cmFuc2l0aW9uLWRlbGF5OiAwcyFpbXBvcnRhbnQ7LXdlYmtpdC10cmFuc2l0aW9uLWRlbGF5OiAwcyFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uLWRlbGF5OiAwcyFpbXBvcnRhbnQ7LW1zLXRyYW5zaXRpb24tZGVsYXk6IDBzIWltcG9ydGFudDstby10cmFuc2l0aW9uLWRlbGF5OiAwcyFpbXBvcnRhbnQ7fS52anMtYmlnLXBsYXktYnV0dG9uIHt0b3A6MHB4IWltcG9ydGFudDsgbGVmdDowcHghaW1wb3J0YW50OyByaWdodDowcHghaW1wb3J0YW50OyBib3R0b206MHB4IWltcG9ydGFudDsgbWFyZ2luOmF1dG8haW1wb3J0YW50O30udmpzLWJpZy1wbGF5LWJ1dHRvbjpmb2N1cyB7IGJvcmRlcjp3aGl0ZSBkYXNoZWQgMXB4IH0udmpzLXBsYXktY29udHJvbDpmb2N1c3sgYm9yZGVyOndoaXRlIGRhc2hlZCAxcHggfS52anMtcHJvZ3Jlc3MtaG9sZGVyOmZvY3VzIHsgYm9yZGVyOndoaXRlIGRhc2hlZCAxcHggfS52anMtdm9sdW1lLW1lbnUtYnV0dG9uOmZvY3VzIHsgYm9yZGVyOndoaXRlIGRhc2hlZCAxcHggfS52anMtY2FwdGlvbnMtYnV0dG9uOmZvY3VzIHsgYm9yZGVyOndoaXRlIGRhc2hlZCAxcHggfS52anMtZnVsbHNjcmVlbi1jb250cm9sOmZvY3VzIHsgYm9yZGVyOndoaXRlIGRhc2hlZCAxcHggfS52anMtdm9sdW1lLWJhcjpmb2N1c3sgYm9yZGVyOndoaXRlIGRhc2hlZCAxcHggfS52anMtY29udHJvbC1iYXIuaWU4IHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9LnZqcy1mYWRlLW91dCB7ZGlzcGxheTogYmxvY2s7dmlzaWJpbGl0eTogaGlkZGVuO29wYWNpdHk6IDA7LXdlYmtpdC10cmFuc2l0aW9uOiB2aXNpYmlsaXR5IDEuNXMsIG9wYWNpdHkgMS41czstbW96LXRyYW5zaXRpb246IHZpc2liaWxpdHkgMS41cywgb3BhY2l0eSAxLjVzOy1tcy10cmFuc2l0aW9uOiB2aXNpYmlsaXR5IDEuNXMsIG9wYWNpdHkgMS41czstby10cmFuc2l0aW9uOiB2aXNpYmlsaXR5IDEuNXMsIG9wYWNpdHkgMS41czt0cmFuc2l0aW9uOiB2aXNpYmlsaXR5IDEuNXMsIG9wYWNpdHkgMS41czstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6IDJzOy1tb3otdHJhbnNpdGlvbi1kZWxheTogMnM7LW1zLXRyYW5zaXRpb24tZGVsYXk6IDJzOy1vLXRyYW5zaXRpb24tZGVsYXk6IDJzO3RyYW5zaXRpb24tZGVsYXk6IDJzO30nO1xyXG5cdFx0Lypib20tc3R1ZGlvIGNzcyBhZGQqL1xyXG5cdFx0YSArPSBcIi8qIGZvciBJRSAqLyAjYnJpZ2h0Q292ZUFyZWEyIHNwYW4ge2Rpc3BsYXk6aW5saW5lICFpbXBvcnRhbnR9LyogZml4IGJjIGh0bWw1IHBsYXllciAqLyNicmlnaHRDb3ZlQXJlYTIgLnZqcy1jb250cm9sLXRleHR7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fS5zaW5nbGUtYXJlYS52aWRlby1LVi5vbiB7bWF4LWhlaWdodDogODEwcHg7IG92ZXJmbG93OiBoaWRkZW47fS52anMtYmlnLXBsYXktYnV0dG9ue2xlZnQ6MCAhaW1wb3J0YW50OyByaWdodDowICFpbXBvcnRhbnQ7IHRvcDowICFpbXBvcnRhbnQ7IGJvdHRvbTowICFpbXBvcnRhbnQ7IG1hcmdpbjogYXV0bzt9LnZqcy1wbGF5aW5nIC52anMtYmlnLXBsYXktYnV0dG9ue2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30ucnRsIC52anMtY29udHJvbC1iYXIsIC5ydGwgLnZqcy1jb250cm9sLWJhciAqe2RpcmVjdGlvbjpsdHIgIWltcG9ydGFudDt9XCI7XHJcblxyXG5cdFx0dmFyIGIsYyxkO1xyXG5cdFx0ZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHRcdGlmIChkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KSB7XHJcblx0XHRcdGIgPSBkb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KCk7XHJcblx0XHRcdGIuY3NzVGV4dCA9IGE7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdFx0XHRjLnR5cGUgPSBcInRleHQvY3NzXCI7XHJcblx0XHRcdGlmIChjLnN0eWxlU2hlZXQpIHtcclxuXHRcdFx0XHRjLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGFcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKVxyXG5cdFx0XHR9XHJcblx0XHRcdGQuYXBwZW5kQ2hpbGQoYyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYoZ2V0SWVWZXJzaW9uKCkgPT0gXCI4LjBcIil7XHJcblx0XHRcdGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XHJcblx0XHRcdGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyYWNrJyk7XHJcblx0XHR9XHJcblx0XHR2YXIgbXlQbGF5ZXIgPSB0aGlzO1xyXG5cdFx0YmNqUXVlcnkoZGl2KS5hcHBlbmQodGhpcy5tYXJrdXAodm9kSWQpKTtcclxuXHJcblx0XHR2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG5cdFx0cy50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcblx0XHRzLnNyYyA9IFwiLy9wbGF5ZXJzLmJyaWdodGNvdmUubmV0L1wiICsgYmM1SW5mby5hY2NvdW50SWQgKyBcIi9cIiArIGJjNUluZm8ucGxheWVySWQgKyBcIl9kZWZhdWx0L2luZGV4Lm1pbi5qc1wiO1xyXG5cclxuXHRcdGlmIChnZXRJZVZlcnNpb24oKSA9PT0gLTEpIHsgLy8gaWUxMSwgZXRjXHJcblx0XHRcdHMub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdG15UGxheWVyLmNhbGxiYWNrKHZvZElkKTtcclxuXHRcdFx0XHR9LCA1MDApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHMpO1xyXG5cdFx0fSBlbHNlIHsgLy8gaWUxMCwgaWU5LCBpZThcclxuXHRcdFx0aWYgKGdldEllVmVyc2lvbigpID09PSA4KSB7XHJcblx0XHRcdFx0cy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRpZihzLnJlYWR5U3RhdGUgPT0gXCJsb2FkZWRcIiB8fCBzLnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0bXlQbGF5ZXIuY2FsbGJhY2sodm9kSWQpO1xyXG5cdFx0XHRcdFx0XHR9LCA1MDApXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZ2V0SWVWZXJzaW9uKCkgPT09IDkpIHtcclxuXHRcdFx0XHRzLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0bXlQbGF5ZXIuY2FsbGJhY2sodm9kSWQpO1xyXG5cdFx0XHRcdFx0fSwgNTAwKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRiY2pRdWVyeShiYzVJbmZvLnRhcmdldElkKS5hcHBlbmQocyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZ2V0SWVWZXJzaW9uKCkgPT09IDEwKSB7XHJcblx0XHRcdFx0cy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdG15UGxheWVyLmNhbGxiYWNrKHZvZElkKTtcclxuXHRcdFx0XHRcdH0sIDUwMCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHMpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHR0aGlzLm1hcmt1cCA9IGZ1bmN0aW9uKHZvZElkKXtcclxuXHRcdGJjQ0xvZyhcImh0bWw1IG1hcmt1cCAhISEhISEhXCIpO1xyXG5cdFx0dmFyIGJjNUluZm8gPSBiYzVQbGF5ZXJNYXAuZ2V0KHZvZElkKTsvL+u5hOuUlOyYpCDsoJXrs7QgZ2V0XHJcblx0XHRiY0NMb2coYmM1SW5mbyk7XHJcblx0XHRiY0NMb2coXCJodG1sNSBtYXJrdXAgRW5kICEhISEhISFcIik7XHJcblx0XHR2YXIgdGFnID0gXCJcIjtcclxuXHRcdHRhZyArPSAnPGRpdiBzdHlsZT1cImRpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7bWF4LXdpZHRoOjEwMCU7d2lkdGg6JytiYzVJbmZvLndpZHRoKyc7aGVpZ2h0OicrYmM1SW5mby5oZWlnaHQrJztcIj4nO1xyXG5cdFx0dGFnICs9ICc8ZGl2IHN0eWxlPVwicGFkZGluZy10b3A6IDU2LjI1JTtcIj4nO1xyXG5cdFx0dGFnICs9ICc8dmlkZW8gaWQ9XCInK2JjNUluZm8uaWQrJ1wiJztcclxuXHRcdHRhZyArPSAnIGRhdGEtdmlkZW8taWQ9XCInKyBiYzVJbmZvLnZpZGVvSWQgKydcIic7XHJcblx0XHR0YWcgKz0gJyBkYXRhLWFjY291bnQ9XCInK2JjNUluZm8uYWNjb3VudElkKydcIic7XHJcblx0XHR0YWcgKz0gJyBkYXRhLXBsYXllcj1cIicrYmM1SW5mby5wbGF5ZXJJZCsnXCInO1xyXG5cdFx0dGFnICs9ICcgZGF0YS1lbWJlZD1cImRlZmF1bHRcIic7XHJcblx0XHR0YWcgKz0gJyBjbGFzcz1cInZpZGVvLWpzXCInO1xyXG5cdFx0dGFnICs9ICcgc3R5bGU9XCJ3aWR0aDogJytiYzVJbmZvLndpZHRoKyc7IGhlaWdodDogJytiYzVJbmZvLmhlaWdodCsnOyAgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDBweDsgYm90dG9tOiAwcHg7IHJpZ2h0OiAwcHg7IGxlZnQ6IDBweDtcIic7XHJcblx0XHR0YWcgKz0gJyBjb250cm9scz4nXHJcblx0XHRpZihiYzVJbmZvLmNjVXJsICE9IFwiZmFsc2VcIil7XHJcblx0XHRcdHRhZyArPSAnIDx0cmFjayBraW5kPVwiY2FwdGlvbnNcIiBzcmM9XCInK2JjNUluZm8uY2NVcmwrJ1wiIHNyY2xhbmc9XCJlblwiIGxhYmVsPVwiRW5nbGlzaFwiIGRlZmF1bHQ+JztcclxuXHRcdH1cclxuXHRcdHRhZyArPSAnIDwvdmlkZW8+JztcclxuXHRcdHRhZyArPSAnIDwvZGl2PjwvZGl2Pic7XHJcblx0XHRyZXR1cm4gdGFnO1xyXG5cclxuXHR9O1xyXG5cdHRoaXMuY2FsbGJhY2sgPSBmdW5jdGlvbih2b2RJZCl7XHJcblx0XHRiY0NMb2coXCJodG1sNSBjYWxsYmFjayAhISEhISEhXCIrdm9kSWQpO1xyXG5cdFx0dmFyIGJjNUluZm8gPSBiYzVQbGF5ZXJNYXAuZ2V0KHZvZElkKTsvL+u5hOuUlOyYpCDsoJXrs7QgZ2V0XHJcblx0XHRiY0NMb2coYmM1SW5mby5pZCk7XHJcblx0XHRiY0NMb2coXCJodG1sNSBjYWxsYmFjayBFbmQgISEhISEhIVwiKTtcclxuXHJcblx0XHR2aWRlb2pzKGJjNUluZm8uaWQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0XHRcdGJjNU15UGxheWVyID0gdGhpcztcclxuXHRcdFx0dmFyIGlzQXV0b1BsYXkgPSAoYmM1SW5mby5hdXRvcGxheSA9PT0gJ3RydWUnKTtcclxuXHRcdFx0XHJcblx0XHRcdGJjQ0xvZyhiYzVNeVBsYXllcik7XHJcblx0XHRcdGJjQ0xvZyhcImh0bWw1IGNhbGxiYWNrIGJjNU15UGxheWVyICEhISEhISFcIik7XHJcblxyXG5cdFx0XHQvLyBhY2Nlc3NpYmlsaXR5IDUuMjQuNVxyXG5cdFx0XHR2YXIgdmpzV3JhcCA9IGJjalF1ZXJ5KFwiI1wiK2JjNUluZm8uaWQpLFxyXG5cdFx0XHRcdHZqc0RvY2tUZXh0ICAgICAgID0gdmpzV3JhcC5maW5kKCcudmpzLWRvY2stdGV4dCcpLFxyXG5cdFx0XHRcdHZqc0RvY2tUaXRsZSAgICAgID0gdmpzV3JhcC5maW5kKCcudmpzLWRvY2stdGl0bGUnKSxcclxuXHRcdFx0XHR2anNDb250cm9sVGV4dCAgICA9IHZqc1dyYXAuZmluZCgnLnZqcy1jb250cm9sLXRleHQnKSxcclxuXHRcdFx0XHR2anNDb250cm9sQmFyICAgICA9IHZqc1dyYXAuZmluZCgnLnZqcy1jb250cm9sLWJhcicpLFxyXG5cdFx0XHRcdHZqc0JpZ1BsYXlCdXR0b24gID0gdmpzV3JhcC5maW5kKCcudmpzLWJpZy1wbGF5LWJ1dHRvbicpLFxyXG5cdFx0XHRcdHZqc1Byb2dyZXNzSG9sZGVyID0gdmpzV3JhcC5maW5kKCcudmpzLXByb2dyZXNzLWhvbGRlcicpLFxyXG5cdFx0XHRcdHZqc1Byb2dyZXNzQmFyICAgID0gdmpzV3JhcC5maW5kKCcudmpzLXRvb2x0aXAtcHJvZ3Jlc3MtYmFyJyksXHJcblx0XHRcdFx0dmpzTWVudUJ1dHRvbiAgICAgPSB2anNXcmFwLmZpbmQoJy52anMtbWVudS1idXR0b24nKSxcclxuXHRcdFx0XHR2anNUZXh0VHJhY2sgICAgICA9IHZqc1dyYXAuZmluZCgnLnZqcy10ZXh0LXRyYWNrLWRpc3BsYXknKTtcclxuXHJcblx0XHRcdHZqc1Byb2dyZXNzSG9sZGVyLmF0dHIoeydhcmlhLXZhbHVlbm93JzogJzAnfSk7XHJcblx0XHRcdHZqc1Byb2dyZXNzQmFyLmF0dHIoe1xyXG5cdFx0XHRcdCdyb2xlJzogJ3NsaWRlcicsXHJcblx0XHRcdFx0J2FyaWEtdmFsdWVtaW4nOiAnMCcsXHJcblx0XHRcdFx0J2FyaWEtdmFsdWVtYXgnOiAnMTAwJyxcclxuXHRcdFx0XHQnYXJpYS12YWx1ZW5vdyc6ICcwJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dmpzTWVudUJ1dHRvbi5hdHRyKCdyb2xlJywgJ21lbnUnKTtcclxuXHRcdFx0dmpzVGV4dFRyYWNrLmF0dHIoJ3RhYkluZGV4JywgMCk7XHJcblxyXG5cdFx0XHRpZiAodmpzV3JhcC5jbG9zZXN0KCcucy12aWRlby1wbGF5ZXIsIC5zLXZpZGVvLWNvbnRhaW5lcicpLmxlbmd0aCkge1xyXG5cdFx0XHRcdHZqc0JpZ1BsYXlCdXR0b24uYXR0cigndGl0bGUnLCB2anNXcmFwLmNsb3Nlc3QoJy5zLXZpZGVvLXBsYXllciwgLnMtdmlkZW8tY29udGFpbmVyJykuZGF0YSgndmlkZW8tdGl0bGUnKSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChnZXRJZVZlcnNpb24oKSA9PT0gOSB8fCBnZXRJZVZlcnNpb24oKSA9PT0gMTApIHsgLy8gdjUuMjQgbHVuYS1za2luIGNhcHRpb24gaG92ZXJcclxuXHRcdFx0XHR2anNXcmFwLmZpbmQoJy52anMtY2FwdGlvbnMtYnV0dG9uJykub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0YmNqUXVlcnkoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCcudmpzLW1lbnUtY29udGVudCcpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2JhKDQzLCA1MSwgNjMsIDAuNyknKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmaXJlZm94JykgPiAtMSkgeyAvLyBmaXJlZm94IFggYnV0dG9uIG91dGxpbmVcclxuICAgICBcdFx0XHR2YXIgZmZDbG9zZUJ0biA9IHZqc1dyYXAuY2xvc2VzdCgnLnZpZGVvLWFyZWFfNScpLmZpbmQoJy5icmlnaHRjb3ZlLWJjYy1idG4tY2xvc2UsIC5icmlnaHRjb3ZlLWJjNS1idG4tY2xvc2UnKTtcclxuICAgICBcdFx0XHRpZiAoZmZDbG9zZUJ0bi5sZW5ndGgpIHtcclxuICAgICBcdFx0XHRcdC8vZmZDbG9zZUJ0bi5jc3MoJ2JvcmRlcicsICdvdXRsaW5lOiAxcHggc29saWQgIzRkOTBmZScpO1xyXG4gICAgIFx0XHRcdFx0ZmZDbG9zZUJ0bi5vZmYoJ2Zmb3V0bGluZScpLm9uKCdmb2N1c2luLmZmb3V0bGluZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICBcdFx0XHRcdFx0ZmZDbG9zZUJ0bi5jc3MoJ291dGxpbmUnLCAnMXB4IHNvbGlkICM0ZDkwZmUnKTtcclxuICAgICBcdFx0XHRcdH0pO1xyXG4gICAgIFx0XHRcdFx0ZmZDbG9zZUJ0bi5vZmYoJ2Zmb3V0bGluZScpLm9uKCdmb2N1c291dC5mZm91dGxpbmUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgXHRcdFx0XHRcdGZmQ2xvc2VCdG4uY3NzKCdvdXRsaW5lJywgJ3Vuc2V0Jyk7XHJcbiAgICAgXHRcdFx0XHR9KTtcclxuICAgICBcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh2anNXcmFwLmhhc0NsYXNzKCd2anMtdjUnKSkge1xyXG5cdFx0XHQgXHR2YXIgdWlGb250UmVzdCA9ICcnLFxyXG5cdFx0XHQgXHRcdGJsYW5rU2hlZXQgPSAnJywgXHJcblx0XHRcdCBcdFx0Y3JlYXRlZFN0eWxlVGFnID0gJycsXHJcblx0XHRcdCBcdFx0ZG9jSGVhZCA9IG51bGw7XHJcblxyXG5cdFx0XHQgXHR1aUZvbnRSZXN0ID0gJy52anMtY29udHJvbC1iYXIgYnV0dG9uIHsgZm9udC1mYW1pbHk6IFZpZGVvSlMgIWltcG9ydGFudDsgfSAudmpzLWJpZy1wbGF5LWJ1dHRvbiB7IGZvbnQtZmFtaWx5OiBWaWRlb0pTICFpbXBvcnRhbnQ7IH0nO1xyXG5cclxuXHRcdFx0XHRkb2NIZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG5cclxuXHRcdFx0XHRpZiAoZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCkge1xyXG5cdFx0XHRcdFx0YmxhbmtTaGVldCA9IGRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKTtcclxuXHRcdFx0XHRcdGJsYW5rU2hlZXQuY3NzVGV4dCA9IHVpRm9udFJlc3Q7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNyZWF0ZWRTdHlsZVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuXHRcdFx0XHRcdGNyZWF0ZWRTdHlsZVRhZy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cclxuXHRcdFx0XHRcdGlmIChjcmVhdGVkU3R5bGVUYWcuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRcdFx0XHRjcmVhdGVkU3R5bGVUYWcuc3R5bGVTaGVldC5jc3NUZXh0ID0gdWlGb250UmVzdDtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGNyZWF0ZWRTdHlsZVRhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh1aUZvbnRSZXN0KSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRkb2NIZWFkLmFwcGVuZENoaWxkKGNyZWF0ZWRTdHlsZVRhZyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgaXNUYWJJbmRleEFibGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdGlmICh2anNUZXh0VHJhY2subGVuZ3RoKSB7XHJcblx0XHRcdFx0dmpzVGV4dFRyYWNrLm9mZignRE9NU3VidHJlZU1vZGlmaWVkLmluZGV4YWJsZSBwcm9wZXJ0eWNoYW5nZS5pbmRleGFibGUnKVxyXG5cdFx0XHRcdC5vbignRE9NU3VidHJlZU1vZGlmaWVkLmluZGV4YWJsZSBwcm9wZXJ0eWNoYW5nZS5pbmRleGFibGUnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuXHRcdFx0XHRcdGlmICh2anNUZXh0VHJhY2suZmluZCgnZGl2JykubGVuZ3RoID4gMikge1xyXG5cdFx0XHRcdFx0XHRpZiAoIWlzVGFiSW5kZXhBYmxlKSB7XHJcblx0XHRcdFx0XHRcdFx0dmpzVGV4dFRyYWNrLmF0dHIoJ3RhYmluZGV4JywgMCk7XHJcblx0XHRcdFx0XHRcdFx0aXNUYWJJbmRleEFibGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpZiAoaXNUYWJJbmRleEFibGUpIHtcclxuXHRcdFx0XHRcdFx0XHRpc1RhYkluZGV4QWJsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdHZqc1RleHRUcmFjay5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHZqc1RleHRUcmFjay50cmlnZ2VyKCdET01TdWJ0cmVlTW9kaWZpZWQuaW5kZXhhYmxlIHByb3BlcnR5Y2hhbmdlLmluZGV4YWJsZScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIC0tLS0gYWNjZXNzaWJpbGl0eVxyXG5cclxuXHRcdFx0Ly8gYXV0b3BsYXkgb3B0aW9uXHJcblx0XHRcdGlmIChpc0F1dG9QbGF5KSB7XHJcblx0XHRcdFx0dmpzQmlnUGxheUJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRiY2pRdWVyeShiYzVJbmZvLnRhcmdldElkK1wiIC52anMtdm9sdW1lLW1lbnUtYnV0dG9uXCIpLmtleWRvd24oZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLmtleUNvZGUgPT0gMzIpIHtcclxuXHRcdFx0XHRcdHZhciBpc1ZvbHVtZU11dGVkID0gYmM1TXlQbGF5ZXIubXV0ZWQoKTtcclxuXHRcdFx0XHRcdGJjNU15UGxheWVyLm11dGVkKGlzVm9sdW1lTXV0ZWQ9PXRydWUgPyBmYWxzZTp0cnVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRiY2pRdWVyeShcIi52aWRlby1hcmVhXCIpLmZpbmQoXCIudmpzLWJpZy1wbGF5LWJ1dHRvblwiKS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24oZSl7XHJcblx0XHRcdFx0aWYgKCBlLndoaWNoID09IDkgJiYgZS5zaGlmdEtleSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR2YXIgbW9iaWxlID0gKC9pcGhvbmV8aXBhZHxpcG9kfGFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkpO1xyXG5cdFx0XHRpZighbW9iaWxlKXtcclxuXHRcdFx0XHQvL2ZuVGFiSW5kZXhTb3J0KHZvZElkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fTtcclxuXHR0aGlzLmNoZWNrTnVsbCA9IGZ1bmN0aW9uICggdmFsICl7XHJcblx0XHRyZXR1cm4gKCB2YWwgPT0gbnVsbCB8fCB2YWwgPT0gJycgKTtcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBpZTlDYWxsQmFjayh2b2RJZCl7XHJcblx0XHRiY0NMb2coXCJodG1sNSBpZTkgY2FsbGJhY2sgISEhISEhIVwiK3ZvZElkKTtcclxuXHRcdHZhciBiYzVJbmZvID0gYmM1UGxheWVyTWFwLmdldCh2b2RJZCk7Ly/ruYTrlJTsmKQg7KCV67O0IGdldFxyXG5cdFx0YmNDTG9nKGJjNUluZm8pO1xyXG5cdFx0YmNDTG9nKFwiaHRtbDUgaWU5IGNhbGxiYWNrIEVuZCAhISEhISEhXCIrYmM1SW5mby5pZCk7XHJcblxyXG5cdFx0dmlkZW9qcyhiYzVJbmZvLmlkKS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdFx0XHRiYzVNeVBsYXllciA9IHRoaXM7XHJcblx0XHRcdGJjNU15UGxheWVyLmF1dG9wbGF5KGV2YWwoYmM1SW5mby5hdXRvcGxheSkpO1xyXG5cdFx0XHRiYzVNeVBsYXllci5vbihcInBsYXlcIixmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRiY2pRdWVyeShcIiNcIitiYzVJbmZvLmlkKS5maW5kKFwiLnZqcy1iaWctcGxheS1idXR0b25cIikuaGlkZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YmNqUXVlcnkoYmM1SW5mby50YXJnZXRJZCtcIiAudmpzLXZvbHVtZS1tZW51LWJ1dHRvblwiKS5rZXlkb3duKGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5rZXlDb2RlID09IDMyKSB7XHJcblx0XHRcdFx0XHR2YXIgaXNWb2x1bWVNdXRlZCA9IGJjNU15UGxheWVyLm11dGVkKCk7XHJcblx0XHRcdFx0XHRiYzVNeVBsYXllci5tdXRlZChpc1ZvbHVtZU11dGVkPT10cnVlID8gZmFsc2U6dHJ1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0YmNqUXVlcnkoXCIudmlkZW8tYXJlYVwiKS5maW5kKFwiLnZqcy1iaWctcGxheS1idXR0b25cIikub24oXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRcdGlmICggZS53aGljaCA9PSA5ICYmIGUuc2hpZnRLZXkpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2ZuVGFiSW5kZXhTb3J0KHZvZElkKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZm5UYWJJbmRleFNvcnQodm9kSWQpe1xyXG5cdFx0YmNDTG9nKFwiaHRtbDUgZm5UYWJJbmRleFNvcnQgISEhISEhIVwiK3ZvZElkKTtcclxuXHRcdHZhciBiYzVJbmZvID0gYmM1UGxheWVyTWFwLmdldCh2b2RJZCk7Ly/ruYTrlJTsmKQg7KCV67O0IGdldFxyXG5cdFx0YmNDTG9nKGJjNUluZm8pO1xyXG5cdFx0YmNDTG9nKFwiaHRtbDUgZm5UYWJJbmRleFNvcnQgRW5kICEhISEhISFcIik7XHJcblxyXG5cdFx0dmFyIGFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0aWYgKCAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ05ldHNjYXBlJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgnVHJpZGVudCcpICE9IC0xKSB8fCAoYWdlbnQuaW5kZXhPZihcIm1zaWVcIikgIT0gLTEpICkgey8vSUVcclxuXHJcblx0XHR9ZWxzZXtcclxuXHJcblx0XHRcdGJjalF1ZXJ5KGJjNUluZm8udGFyZ2V0SWQrXCIgLnZqcy1jYXB0aW9ucy1idXR0b25cIikua2V5ZG93bihmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUua2V5Q29kZSA9PSAxMykge1xyXG5cdFx0XHRcdFx0YmNqUXVlcnkoYmM1SW5mby50YXJnZXRJZCtcIiAudmpzLW1vZGFsLW92ZXJsYXlcIikuaGlkZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGJjalF1ZXJ5KGJjNUluZm8udGFyZ2V0SWQrXCIgLnZqcy10ZXh0dHJhY2stc2V0dGluZ3NcIikua2V5ZG93bihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRiY2pRdWVyeShiYzVJbmZvLnRhcmdldElkK1wiIC52anMtbW9kYWwtb3ZlcmxheVwiKS5jc3MoXCJzdHlsZVwiLFwiXCIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0YmNqUXVlcnkoJy5icmlnaHRjb3ZlLWJjYy1idG4tY2xvc2UsIC5icmlnaHRjb3ZlLWJjNS1idG4tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cdFx0YmM1TGF5ZXJDbG9zZSh0aGlzKTtcclxuXHR9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGJyaWdodGNvdmVCYzVQbGF5ZXJMYXllcihjb3VudHJ5Q2QsIHRhcmdldElkLCBpZCwgdmlkZW9JZCwgd2lkdGgsIGhlaWdodCwgYXV0b3BsYXksIGNjVXJsKXtcclxuXHRpZiAoYmNqUXVlcnkoJ2JvZHknKS5oYXNDbGFzcygndmlkZW8tbGF5ZXItb3BlbicpICYmICQoJyMnICsgdGFyZ2V0SWQpLmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRiY2pRdWVyeSgnIycrdGFyZ2V0SWQpLmJjSHRtbDVQbGF5ZXIoY291bnRyeUNkLGlkLHZpZGVvSWQsIHdpZHRoLCBoZWlnaHQsIGF1dG9wbGF5LCBjY1VybCk7XHJcblxyXG5cdGFyZWEgPSBiY2pRdWVyeShcIiNcIit0YXJnZXRJZCkucGFyZW50cygnLnZpZGVvLWFyZWFfNScpLndyYXBBbGwoXCI8ZGl2Lz5cIikucGFyZW50KCk7XHJcblx0YXJlYS5maW5kKFwiLnZpZGVvLWFyZWFfNVwiKS5zaG93KCk7XHJcblx0YXJlYS5maW5kKFwiLmJyaWdodENvdmVBcmVhXCIpLnNob3coKTtcclxuXHRiY2pRdWVyeSgnYm9keScpLmFkZENsYXNzKCd2aWRlby1vcGVuJyk7XHJcblxyXG5cdF92aWRlb193cmFwXzUgPSBhcmVhLmZpbmQoXCIudmlkZW8td3JhcF81XCIpO1xyXG5cclxuXHR2YXIgdG9wID0gIE1hdGgubWF4KDAsICgoYmNqUXVlcnkod2luZG93KS5oZWlnaHQoKSAtIF92aWRlb193cmFwXzUub3V0ZXJIZWlnaHQoKSkgLyAyKSArIGJjalF1ZXJ5KHdpbmRvdykuc2Nyb2xsVG9wKCkpO1xyXG5cdHZhciBsZWZ0ID0gIE1hdGgubWF4KDAsICgoYmNqUXVlcnkod2luZG93KS53aWR0aCgpIC0gX3ZpZGVvX3dyYXBfNS5vdXRlcldpZHRoKCkpIC8gMikgKyBiY2pRdWVyeSh3aW5kb3cpLnNjcm9sbExlZnQoKSk7XHJcblx0X3ZpZGVvX3dyYXBfNS5jc3Moe1wibGVmdFwiOmxlZnQrXCJweFwiLCBcInRvcFwiOnRvcCtcInB4XCJ9KS5zaG93KCkuZm9jdXMoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJjNUxheWVyQ2xvc2UobXkpe1xyXG5cdHZhciB0YXJnZXQgPSBiY2pRdWVyeShcIiNcIiArICggYmNqUXVlcnkobXkpLmRhdGEoXCJkaXYtaWRcIikgPT09IHVuZGVmaW5lZCA/IGJjalF1ZXJ5KG15KS5kYXRhKFwidmlkZW8taWRcIikgOiBiY2pRdWVyeShteSkuZGF0YShcImRpdi1pZFwiKSkpLFxyXG5cdGFyZWEgPSB0YXJnZXQuY2xvc2VzdCgnLnZpZGVvLWFyZWFfNScpLFxyXG5cdHdyYXAgPSB0YXJnZXQuY2xvc2VzdCgnLnZpZGVvLXdyYXAnKSxcclxuXHRpc1ZpZE9wZW4gPSBmYWxzZTtcclxuXHJcblx0aWYgKHdpbmRvdy52aWRlb2pzKSB7XHJcblx0XHR2YXIgZGlzcG9zZVRhcmdldElkID0gdGFyZ2V0LmZpbmQoJy52aWRlby1qcycpLmF0dHIoJ2lkJyk7XHJcblx0XHRpZiAoZGlzcG9zZVRhcmdldElkKSB7XHJcblx0XHRcdHZpZGVvanMoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGlzcG9zZVRhcmdldElkKSkuZGlzcG9zZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXJlYS5oaWRlKDApO1xyXG5cdHRhcmdldC5odG1sKCcnKTtcclxuXHJcblx0JC5lYWNoKGJjalF1ZXJ5KCcudmlkZW8tYXJlYV81JyksIGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCQodGhpcykuaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdFx0aXNWaWRPcGVuID0gdHJ1ZTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRhcmVhLmZpbmQoXCIudmlkZW8td3JhcCAudmpzLWJpZy1wbGF5LWJ1dHRvblwiKS5mb2N1cygpO1xyXG5cdC8vYmNqUXVlcnkoXCIudmlkZW8td3JhcCAudmpzLWJpZy1wbGF5LWJ1dHRvblwiKS5mb2N1cygpO1xyXG5cclxuXHRpZiAoIWlzVmlkT3Blbnx8IGJjalF1ZXJ5KCdib2R5JykuaGFzQ2xhc3MoJ3ZpZGVvLWxheWVyLW9wZW4nKSkge1xyXG5cdFx0YmNqUXVlcnkoJ2JvZHknKS5yZW1vdmVDbGFzcygndmlkZW8tb3BlbicpO1xyXG5cdFx0YmNqUXVlcnkoJ2JvZHknKS5yZW1vdmVDbGFzcygndmlkZW8tbGF5ZXItb3BlbicpO1xyXG5cdH1cclxufVxyXG5mdW5jdGlvbiBnZXRJZVZlcnNpb24oKXtcclxuXHR2YXIgdmVyID0gLTE7XHJcblx0aWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKSB7XHJcblx0XHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xyXG5cdFx0dmFyIHJlID0gbmV3IFJlZ0V4cChcIk1TSUUgKFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XHJcblx0XHRpZiAocmUuZXhlYyh1YSkgIT0gbnVsbClcclxuXHRcdFx0dmVyID0gcGFyc2VGbG9hdChSZWdFeHAuJDEpO1xyXG5cdH1cclxuXHRyZXR1cm4gdmVyO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYmNDTG9nKGFyZyl7XHJcblx0Ly8gaWYoY29uc29sZSl7XHJcblx0XHQvL2NvbnNvbGUubG9nKGFyZyk7XHJcblx0Ly8gfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==